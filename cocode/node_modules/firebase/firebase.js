!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).firebase=e()}(this,function(){"use strict";function r(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function i(t){return"string"!=typeof t&&(t=String(t)),t}function t(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return p&&(t[Symbol.iterator]=function(){return t}),t}function s(e){this.map={},e instanceof s?e.forEach(function(t,e){this.append(e,t)},this):Array.isArray(e)?e.forEach(function(t){this.append(t[0],t[1])},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function o(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function a(n){return new Promise(function(t,e){n.onload=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function e(t){var e=new FileReader,n=a(e);return e.readAsArrayBuffer(t),n}function n(t){if(t.slice)return t.slice(0);var e=new Uint8Array(t.byteLength);return e.set(new Uint8Array(t)),e.buffer}function u(){return this.bodyUsed=!1,this._initBody=function(t){if(this._bodyInit=t)if("string"==typeof t)this._bodyText=t;else if(d&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t;else if(v&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(f&&URLSearchParams.prototype.isPrototypeOf(t))this._bodyText=t.toString();else if(y&&d&&m(t))this._bodyArrayBuffer=n(t.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer]);else{if(!y||!ArrayBuffer.prototype.isPrototypeOf(t)&&!b(t))throw new Error("unsupported BodyInit type");this._bodyArrayBuffer=n(t)}else this._bodyText="";this.headers.get("content-type")||("string"==typeof t?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):f&&URLSearchParams.prototype.isPrototypeOf(t)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d&&(this.blob=function(){var t=o(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?o(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(e)}),this.text=function(){var t,e,n=o(this);if(n)return n;if(this._bodyBlob)return t=this._bodyBlob,e=new FileReader,n=a(e),e.readAsText(t),n;if(this._bodyArrayBuffer)return Promise.resolve(function(t){for(var e=new Uint8Array(t),n=new Array(e.length),r=0;r<e.length;r++)n[r]=String.fromCharCode(e[r]);return n.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},v&&(this.formData=function(){return this.text().then(h)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(t,e){var n,r=(e=e||{}).body;if(t instanceof c){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,r||null==t._bodyInit||(r=t._bodyInit,t.bodyUsed=!0)}else this.url=String(t);if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(n=e.method||this.method||"GET",t=n.toUpperCase(),-1<_.indexOf(t)?t:n),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function h(t){var n=new FormData;return t.trim().split("&").forEach(function(t){var e;t&&(t=(e=t.split("=")).shift().replace(/\+/g," "),e=e.join("=").replace(/\+/g," "),n.append(decodeURIComponent(t),decodeURIComponent(e)))}),n}function l(t,e){e=e||{},this.type="default",this.status=void 0===e.status?200:e.status,this.ok=200<=this.status&&this.status<300,this.statusText="statusText"in e?e.statusText:"OK",this.headers=new s(e.headers),this.url=e.url||"",this._initBody(t)}var f,p,d,v,y,g,m,b,_,w;(dt="undefined"!=typeof self?self:void 0).fetch||(f="URLSearchParams"in dt,p="Symbol"in dt&&"iterator"in Symbol,d="FileReader"in dt&&"Blob"in dt&&function(){try{return new Blob,!0}catch(t){return!1}}(),v="FormData"in dt,(y="ArrayBuffer"in dt)&&(g=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],m=function(t){return t&&DataView.prototype.isPrototypeOf(t)},b=ArrayBuffer.isView||function(t){return t&&-1<g.indexOf(Object.prototype.toString.call(t))}),s.prototype.append=function(t,e){t=r(t),e=i(e);var n=this.map[t];this.map[t]=n?n+","+e:e},s.prototype.delete=function(t){delete this.map[r(t)]},s.prototype.get=function(t){return t=r(t),this.has(t)?this.map[t]:null},s.prototype.has=function(t){return this.map.hasOwnProperty(r(t))},s.prototype.set=function(t,e){this.map[r(t)]=i(e)},s.prototype.forEach=function(t,e){for(var n in this.map)this.map.hasOwnProperty(n)&&t.call(e,this.map[n],n,this)},s.prototype.keys=function(){var n=[];return this.forEach(function(t,e){n.push(e)}),t(n)},s.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),t(e)},s.prototype.entries=function(){var n=[];return this.forEach(function(t,e){n.push([e,t])}),t(n)},p&&(s.prototype[Symbol.iterator]=s.prototype.entries),_=["DELETE","GET","HEAD","OPTIONS","POST","PUT"],c.prototype.clone=function(){return new c(this,{body:this._bodyInit})},u.call(c.prototype),u.call(l.prototype),l.prototype.clone=function(){return new l(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},l.error=function(){var t=new l(null,{status:0,statusText:""});return t.type="error",t},w=[301,302,303,307,308],l.redirect=function(t,e){if(-1===w.indexOf(e))throw new RangeError("Invalid status code");return new l(null,{status:e,headers:{location:t}})},dt.Headers=s,dt.Request=c,dt.Response=l,dt.fetch=function(n,o){return new Promise(function(r,t){var e=new c(n,o),i=new XMLHttpRequest;i.onload=function(){var n,t={status:i.status,statusText:i.statusText,headers:(e=i.getAllResponseHeaders()||"",n=new s,e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach(function(t){var e=t.split(":"),t=e.shift().trim();t&&(e=e.join(":").trim(),n.append(t,e))}),n)};t.url="responseURL"in i?i.responseURL:t.headers.get("X-Request-URL");var e="response"in i?i.response:i.responseText;r(new l(e,t))},i.onerror=function(){t(new TypeError("Network request failed"))},i.ontimeout=function(){t(new TypeError("Network request failed"))},i.open(e.method,e.url,!0),"include"===e.credentials?i.withCredentials=!0:"omit"===e.credentials&&(i.withCredentials=!1),"responseType"in i&&d&&(i.responseType="blob"),e.headers.forEach(function(t,e){i.setRequestHeader(e,t)}),i.send(void 0===e._bodyInit?null:e._bodyInit)})},dt.fetch.polyfill=!0);var E="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function I(t,e,n){return t(n={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&n.path)}},n.exports),n.exports}function T(t){try{return!!t()}catch(t){return!0}}function S(t){return"object"==typeof t?null!==t:"function"==typeof t}function C(t){return j?U.createElement(t):{}}function N(t){if(!S(t))throw TypeError(String(t)+" is not an object");return t}function A(t,e){if(!S(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!S(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!S(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!S(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}function k(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}function O(e,n){try{W(L,e,n)}catch(t){L[e]=n}return n}function P(t,e){return z.call(t,e)}function D(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++Q+X).toString(36)}function R(t){return P($,t)||(Y&&P(Z,t)?$[t]=Z[t]:$[t]=tt("Symbol."+t)),$[t]}var x=function(t){return t&&t.Math==Math&&t},L=x("object"==typeof globalThis&&globalThis)||x("object"==typeof window&&window)||x("object"==typeof self&&self)||x("object"==typeof E&&E)||Function("return this")(),M=!1,F=!T(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]}),U=L.document,j=S(U)&&S(U.createElement),V=!F&&!T(function(){return 7!=Object.defineProperty(C("div"),"a",{get:function(){return 7}}).a}),q=Object.defineProperty,B={f:F?q:function(t,e,n){if(N(t),e=A(e,!0),N(n),V)try{return q(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},W=F?function(t,e,n){return B.f(t,e,k(1,n))}:function(t,e,n){return t[e]=n,t},H="__core-js_shared__",G=L[H]||O(H,{}),K=I(function(t){(t.exports=function(t,e){return G[t]||(G[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.6.5",mode:"global",copyright:"Â© 2020 Denis Pushkarev (zloirock.ru)"})}),z={}.hasOwnProperty,Q=0,X=Math.random(),Y=!!Object.getOwnPropertySymbols&&!T(function(){return!String(Symbol())}),J=Y&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,$=K("wks"),Z=L.Symbol,tt=J?Z:Z&&Z.withoutSetter||D,et={};et[R("toStringTag")]="z";var nt="[object z]"===String(et),rt=Function.toString;"function"!=typeof G.inspectSource&&(G.inspectSource=function(t){return rt.call(t)});var it,ot,st,at,ut,ct,ht,lt,ft=G.inspectSource,pt=L.WeakMap,dt="function"==typeof pt&&/native code/.test(ft(pt)),vt=K("keys"),x=function(t){return vt[t]||(vt[t]=D(t))},yt={},E=L.WeakMap;ht=dt?(it=new E,ot=it.get,st=it.has,at=it.set,ut=function(t,e){return at.call(it,t,e),e},ct=function(t){return ot.call(it,t)||{}},function(t){return st.call(it,t)}):(lt=x("state"),yt[lt]=!0,ut=function(t,e){return W(t,lt,e),e},ct=function(t){return P(t,lt)?t[lt]:{}},function(t){return P(t,lt)});function gt(t){return _t.call(t).slice(8,-1)}var mt={set:ut,get:ct,has:ht,enforce:function(t){return ht(t)?ct(t):ut(t,{})},getterFor:function(n){return function(t){var e;if(!S(t)||(e=ct(t)).type!==n)throw TypeError("Incompatible receiver, "+n+" required");return e}}},bt=I(function(t){var e=mt.get,s=mt.enforce,a=String(String).split("String");(t.exports=function(t,e,n,r){var i=!!r&&!!r.unsafe,o=!!r&&!!r.enumerable,r=!!r&&!!r.noTargetGet;"function"==typeof n&&("string"!=typeof e||P(n,"name")||W(n,"name",e),s(n).source=a.join("string"==typeof e?e:"")),t!==L?(i?!r&&t[e]&&(o=!0):delete t[e],o?t[e]=n:W(t,e,n)):o?t[e]=n:O(e,n)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||ft(this)})}),_t={}.toString,wt=R("toStringTag"),Et="Arguments"==gt(function(){return arguments}()),It=nt?gt:function(t){var e;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(t=function(t,e){try{return t[e]}catch(t){}}(e=Object(t),wt))?t:Et?gt(e):"Object"==(t=gt(e))&&"function"==typeof e.callee?"Arguments":t},H=nt?{}.toString:function(){return"[object "+It(this)+"]"};nt||bt(Object.prototype,"toString",H,{unsafe:!0});function Tt(t){return isNaN(t=+t)?0:(0<t?Lt:xt)(t)}function St(t){if(null==t)throw TypeError("Can't call method on "+t);return t}function Ct(t){return jt(St(t))}function Nt(t){return"function"==typeof t?t:void 0}function At(t,e){return arguments.length<2?Nt(Bt[t])||Nt(L[t]):Bt[t]&&Bt[t][e]||L[t]&&L[t][e]}function kt(t){return 0<t?Wt(Tt(t),9007199254740991):0}function Ot(t,e){var n,r=Ct(t),i=0,o=[];for(n in r)!P(yt,n)&&P(r,n)&&o.push(n);for(;e.length>i;)P(r,n=e[i++])&&(~Kt(o,n)||o.push(n));return o}function Pt(t,e){for(var n=Jt(e),r=B.f,i=qt.f,o=0;o<n.length;o++){var s=n[o];P(t,s)||r(t,s,i(e,s))}}function Dt(t,e){var n,r,i,o=t.target,s=t.global,a=t.stat,u=s?L:a?L[o]||O(o,{}):(L[o]||{}).prototype;if(u)for(n in e){if(r=e[n],i=t.noTargetGet?(i=ie(u,n))&&i.value:u[n],!re(s?n:o+(a?".":"#")+n,t.forced)&&void 0!==i){if(typeof r==typeof i)continue;Pt(r,i)}(t.sham||i&&i.sham)&&W(r,"sham",!0),bt(u,n,r,t)}}function Rt(t){return Object(St(t))}var xt=Math.ceil,Lt=Math.floor,et=function(o){return function(t,e){var n,r=String(St(t)),i=Tt(e),t=r.length;return i<0||t<=i?o?"":void 0:(e=r.charCodeAt(i))<55296||56319<e||i+1===t||(n=r.charCodeAt(i+1))<56320||57343<n?o?r.charAt(i):e:o?r.slice(i,i+2):n-56320+(e-55296<<10)+65536}},pt={codeAt:et(!1),charAt:et(!0)},dt={}.propertyIsEnumerable,Mt=Object.getOwnPropertyDescriptor,Ft={f:Mt&&!dt.call({1:2},1)?function(t){t=Mt(this,t);return!!t&&t.enumerable}:dt},Ut="".split,jt=T(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==gt(t)?Ut.call(t,""):Object(t)}:Object,Vt=Object.getOwnPropertyDescriptor,qt={f:F?Vt:function(t,e){if(t=Ct(t),e=A(e,!0),V)try{return Vt(t,e)}catch(t){}if(P(t,e))return k(!Ft.f.call(t,e),t[e])}},Bt=L,Wt=Math.min,Ht=Math.max,Gt=Math.min,E=function(a){return function(t,e,n){var r,i=Ct(t),o=kt(i.length),s=function(t,e){t=Tt(t);return t<0?Ht(t+e,0):Gt(t,e)}(n,o);if(a&&e!=e){for(;s<o;)if((r=i[s++])!=r)return!0}else for(;s<o;s++)if((a||s in i)&&i[s]===e)return a||s||0;return!a&&-1}},Kt={includes:E(!0),indexOf:E(!1)}.indexOf,zt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Qt=zt.concat("length","prototype"),Xt={f:Object.getOwnPropertyNames||function(t){return Ot(t,Qt)}},Yt={f:Object.getOwnPropertySymbols},Jt=At("Reflect","ownKeys")||function(t){var e=Xt.f(N(t)),n=Yt.f;return n?e.concat(n(t)):e},$t=/#|\.prototype\./,nt=function(t,e){t=te[Zt(t)];return t==ne||t!=ee&&("function"==typeof e?T(e):!!e)},Zt=nt.normalize=function(t){return String(t).replace($t,".").toLowerCase()},te=nt.data={},ee=nt.NATIVE="N",ne=nt.POLYFILL="P",re=nt,ie=qt.f,H=!T(function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype}),oe=x("IE_PROTO"),se=Object.prototype,ae=H?Object.getPrototypeOf:function(t){return t=Rt(t),P(t,oe)?t[oe]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?se:null},et=R("iterator"),dt=!1;[].keys&&("next"in(En=[].keys())?(Tn=ae(ae(En)))!==Object.prototype&&(Cn=Tn):dt=!0),null==Cn&&(Cn={}),P(Cn,et)||W(Cn,et,function(){return this});function ue(){}function ce(t){return"<script>"+t+"</"+ve+">"}var he,E={IteratorPrototype:Cn,BUGGY_SAFARI_ITERATORS:dt},le=Object.keys||function(t){return Ot(t,zt)},fe=F?Object.defineProperties:function(t,e){N(t);for(var n,r=le(e),i=r.length,o=0;o<i;)B.f(t,n=r[o++],e[n]);return t},pe=At("document","documentElement"),de="prototype",ve="script",ye=x("IE_PROTO"),ge=function(){try{he=document.domain&&new ActiveXObject("htmlfile")}catch(t){}var t;ge=he?function(t){t.write(ce("")),t.close();var e=t.parentWindow.Object;return t=null,e}(he):((t=C("iframe")).style.display="none",pe.appendChild(t),t.src=String("javascript:"),(t=t.contentWindow.document).open(),t.write(ce("document.F=Object")),t.close(),t.F);for(var e=zt.length;e--;)delete ge[de][zt[e]];return ge()};yt[ye]=!0;function me(t,e,n){t&&!P(t=n?t:t.prototype,Te)&&Ie(t,Te,{configurable:!0,value:e})}function be(){return this}function _e(){return this}function we(t,e,n,r,i,o,s){function a(t){if(t===i&&d)return d;if(!ke&&t in f)return f[t];switch(t){case"keys":case Pe:case De:return function(){return new n(this,t)}}return function(){return new n(this)}}!function(t,e,n){e+=" Iterator";t.prototype=Ee(Ce,{next:k(1,n)}),me(t,e,!1),Se[e]=be}(n,e,r);var u,c,h=e+" Iterator",l=!1,f=t.prototype,p=f[Oe]||f["@@iterator"]||i&&f[i],d=!ke&&p||a(i);if((r="Array"==e&&f.entries||p)&&(t=ae(r.call(new t)),Ae!==Object.prototype&&t.next&&(ae(t)!==Ae&&(Ne?Ne(t,Ae):"function"!=typeof t[Oe]&&W(t,Oe,_e)),me(t,h,!0))),i==Pe&&p&&p.name!==Pe&&(l=!0,d=function(){return p.call(this)}),f[Oe]!==d&&W(f,Oe,d),Se[e]=d,i)if(u={values:a(Pe),keys:o?d:a("keys"),entries:a(De)},s)for(c in u)!ke&&!l&&c in f||bt(f,c,u[c]);else Dt({target:e,proto:!0,forced:ke||l},u);return u}var Ee=Object.create||function(t,e){var n;return null!==t?(ue[de]=N(t),n=new ue,ue[de]=null,n[ye]=t):n=ge(),void 0===e?n:fe(n,e)},Ie=B.f,Te=R("toStringTag"),Se={},Ce=E.IteratorPrototype,Ne=Object.setPrototypeOf||("__proto__"in{}?function(){var n,r=!1,t={};try{(n=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(t,[]),r=t instanceof Array}catch(t){}return function(t,e){return N(t),function(t){if(!S(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(e),r?n.call(t,e):t.__proto__=e,t}}():void 0),Ae=E.IteratorPrototype,ke=E.BUGGY_SAFARI_ITERATORS,Oe=R("iterator"),Pe="values",De="entries",Re=pt.charAt,xe="String Iterator",Le=mt.set,Me=mt.getterFor(xe);we(String,"String",function(t){Le(this,{type:xe,string:String(t),index:0})},function(){var t=Me(this),e=t.string,n=t.index;return n>=e.length?{value:void 0,done:!0}:(n=Re(e,n),t.index+=n.length,{value:n,done:!1})});var Fe={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},Ue=R("unscopables"),je=Array.prototype;null==je[Ue]&&B.f(je,Ue,{configurable:!0,value:Ee(null)});var nt=function(t){je[Ue][t]=!0},Ve="Array Iterator",qe=mt.set,Be=mt.getterFor(Ve),We=we(Array,"Array",function(t,e){qe(this,{type:Ve,target:Ct(t),index:0,kind:e})},function(){var t=Be(this),e=t.target,n=t.kind,r=t.index++;return!e||r>=e.length?{value:t.target=void 0,done:!0}:"keys"==n?{value:r,done:!1}:"values"==n?{value:e[r],done:!1}:{value:[r,e[r]],done:!1}},"values");Se.Arguments=Se.Array,nt("keys"),nt("values"),nt("entries");var He,Ge=R("iterator"),Ke=R("toStringTag"),ze=We.values;for(He in Fe){var Qe=L[He],Xe=Qe&&Qe.prototype;if(Xe){if(Xe[Ge]!==ze)try{W(Xe,Ge,ze)}catch(na){Xe[Ge]=ze}if(Xe[Ke]||W(Xe,Ke,He),Fe[He])for(var Ye in We)if(Xe[Ye]!==We[Ye])try{W(Xe,Ye,We[Ye])}catch(na){Xe[Ye]=We[Ye]}}}function Je(t,e,n){for(var r in e)bt(t,r,e[r],n);return t}function $e(t){var e=At(t),t=B.f;F&&e&&!e[an]&&t(e,an,{configurable:!0,get:function(){return this}})}function Ze(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t}function tn(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation");return t}function en(t){return void 0!==t&&(Se.Array===t||cn[un]===t)}function nn(r,i,t){if(Ze(r),void 0===i)return r;switch(t){case 0:return function(){return r.call(i)};case 1:return function(t){return r.call(i,t)};case 2:return function(t,e){return r.call(i,t,e)};case 3:return function(t,e,n){return r.call(i,t,e,n)}}return function(){return r.apply(i,arguments)}}function rn(t){if(null!=t)return t[hn]||t["@@iterator"]||Se[It(t)]}function on(e,t,n,r){try{return r?t(N(n)[0],n[1]):t(n)}catch(t){var i=e.return;throw void 0!==i&&N(i.call(e)),t}}var sn=L.Promise,an=R("species"),un=R("iterator"),cn=Array.prototype,hn=R("iterator"),ln=I(function(t){function f(t,e){this.stopped=t,this.result=e}(t.exports=function(t,e,n,r,i){var o,s,a,u,c,h,l=nn(e,n,r?2:1);if(i)o=t;else{if("function"!=typeof(i=rn(t)))throw TypeError("Target is not iterable");if(en(i)){for(s=0,a=kt(t.length);s<a;s++)if((u=r?l(N(h=t[s])[0],h[1]):l(t[s]))&&u instanceof f)return u;return new f(!1)}o=i.call(t)}for(c=o.next;!(h=c.call(o)).done;)if("object"==typeof(u=on(o,l,h.value,r))&&u&&u instanceof f)return u;return new f(!1)}).stop=function(t){return new f(!0,t)}}),fn=R("iterator"),pn=!1;try{var dn=0,vn={next:function(){return{done:!!dn++}},return:function(){pn=!0}};vn[fn]=function(){return this},Array.from(vn,function(){throw 2})}catch(na){}function yn(t,e){if(!e&&!pn)return!1;var n=!1;try{var r={};r[fn]=function(){return{next:function(){return{done:n=!0}}}},t(r)}catch(t){}return n}function gn(t,e){var n;return void 0===(t=N(t).constructor)||null==(n=N(t)[wn])?e:Ze(n)}function mn(t){var e;kn.hasOwnProperty(t)&&(e=kn[t],delete kn[t],e())}function bn(t){return function(){mn(t)}}var _n,wn=R("species"),H=At("navigator","userAgent")||"",En=/(iphone|ipod|ipad).*applewebkit/i.test(H),In=L.location,Tn=L.setImmediate,et=L.clearImmediate,Sn=L.process,Cn=L.MessageChannel,Nn=L.Dispatch,An=0,kn={},On="onreadystatechange",dt=function(t){mn(t.data)},E=function(t){L.postMessage(t+"",In.protocol+"//"+In.host)};Tn&&et||(Tn=function(t){for(var e=[],n=1;n<arguments.length;)e.push(arguments[n++]);return kn[++An]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},_n(An),An},et=function(t){delete kn[t]},"process"==gt(Sn)?_n=function(t){Sn.nextTick(bn(t))}:Nn&&Nn.now?_n=function(t){Nn.now(bn(t))}:Cn&&!En?(Cn=(pt=new Cn).port2,pt.port1.onmessage=dt,_n=nn(Cn.postMessage,Cn,1)):!L.addEventListener||"function"!=typeof postMessage||L.importScripts||T(E)||"file:"===In.protocol?_n=On in C("script")?function(t){pe.appendChild(C("script"))[On]=function(){pe.removeChild(this),mn(t)}}:function(t){setTimeout(bn(t),0)}:(_n=E,L.addEventListener("message",dt,!1)));var Pn,Dn,Rn,xn,Ln,Mn,Fn,Un,E={set:Tn,clear:et},dt=qt.f,jn=E.set,Tn=L.MutationObserver||L.WebKitMutationObserver,Vn=L.process,et=L.Promise,qn="process"==gt(Vn),dt=dt(L,"queueMicrotask"),dt=dt&&dt.value;dt||(Pn=function(){var t,e;for(qn&&(t=Vn.domain)&&t.exit();Dn;){e=Dn.fn,Dn=Dn.next;try{e()}catch(t){throw Dn?xn():Rn=void 0,t}}Rn=void 0,t&&t.enter()},xn=qn?function(){Vn.nextTick(Pn)}:Tn&&!En?(Ln=!0,Mn=document.createTextNode(""),new Tn(Pn).observe(Mn,{characterData:!0}),function(){Mn.data=Ln=!Ln}):et&&et.resolve?(Fn=et.resolve(void 0),Un=Fn.then,function(){Un.call(Fn,Pn)}):function(){jn.call(L,Pn)});function Bn(t){var n,r;this.promise=new t(function(t,e){if(void 0!==n||void 0!==r)throw TypeError("Bad Promise constructor");n=t,r=e}),this.resolve=Ze(n),this.reject=Ze(r)}function Wn(t,e){return N(t),S(e)&&e.constructor===t?e:((0,(t=Kn.f(t)).resolve)(e),t.promise)}function Hn(t){try{return{error:!1,value:t()}}catch(t){return{error:!0,value:t}}}var Gn=dt||function(t){t={fn:t,next:void 0};Rn&&(Rn.next=t),Dn||(Dn=t,xn()),Rn=t},Kn={f:function(t){return new Bn(t)}},et=L.process,dt=et&&et.versions,et=dt&&dt.v8;et?Rr=(Dr=et.split("."))[0]+Dr[1]:H&&(!(Dr=H.match(/Edge\/(\d+)/))||74<=Dr[1])&&(Dr=H.match(/Chrome\/(\d+)/))&&(Rr=Dr[1]);function zn(t){var e;return!(!S(t)||"function"!=typeof(e=t.then))&&e}function Qn(l,f,p){var d;f.notified||(f.notified=!0,d=f.reactions,Gn(function(){for(var t=f.value,e=1==f.state,n=0;d.length>n;){var r,i,o,s=d[n++],a=e?s.ok:s.fail,u=s.resolve,c=s.reject,h=s.domain;try{a?(e||(2===f.rejection&&wr(l,f),f.rejection=1),!0===a?r=t:(h&&h.enter(),r=a(t),h&&(h.exit(),o=!0)),r===s.promise?c(hr("Promise-chain cycle")):(i=zn(r))?i.call(r,u,c):u(r)):c(t)}catch(t){h&&!o&&h.exit(),c(t)}}f.reactions=[],f.notified=!1,p&&!f.rejection&&br(l,f)}))}function Xn(t,e,n){var r;gr?((r=lr.createEvent("Event")).promise=e,r.reason=n,r.initEvent(t,!1,!0),L.dispatchEvent(r)):r={promise:e,reason:n},(e=L["on"+t])?e(r):t===mr&&function(t,e){var n=L.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)}function Yn(e,n,r,i){return function(t){e(n,r,t,i)}}function Jn(t,e,n,r){e.done||(e.done=!0,r&&(e=r),e.value=n,e.state=2,Qn(t,e,!0))}var $n,Zn,tr,er,nr=Rr&&+Rr,rr=E.set,ir=R("species"),or="Promise",sr=mt.get,ar=mt.set,ur=mt.getterFor(or),cr=sn,hr=L.TypeError,lr=L.document,fr=L.process,pr=At("fetch"),dr=Kn.f,vr=dr,yr="process"==gt(fr),gr=!!(lr&&lr.createEvent&&L.dispatchEvent),mr="unhandledrejection",dt=re(or,function(){if(!(ft(cr)!==String(cr))){if(66===nr)return!0;if(!yr&&"function"!=typeof PromiseRejectionEvent)return!0}if(51<=nr&&/native code/.test(cr))return!1;function t(t){t(function(){},function(){})}var e=cr.resolve(1);return(e.constructor={})[ir]=t,!(e.then(function(){})instanceof t)}),et=dt||!yn(function(t){cr.all(t).catch(function(){})}),br=function(n,r){rr.call(L,function(){var t,e=r.value;if(_r(r)&&(t=Hn(function(){yr?fr.emit("unhandledRejection",e,n):Xn(mr,n,e)}),r.rejection=yr||_r(r)?2:1,t.error))throw t.value})},_r=function(t){return 1!==t.rejection&&!t.parent},wr=function(t,e){rr.call(L,function(){yr?fr.emit("rejectionHandled",t):Xn("rejectionhandled",t,e.value)})},Er=function(n,r,t,e){if(!r.done){r.done=!0,e&&(r=e);try{if(n===t)throw hr("Promise can't be resolved itself");var i=zn(t);i?Gn(function(){var e={done:!1};try{i.call(t,Yn(Er,n,e,r),Yn(Jn,n,e,r))}catch(t){Jn(n,e,t,r)}}):(r.value=t,r.state=1,Qn(n,r,!1))}catch(t){Jn(n,{done:!1},t,r)}}};dt&&(cr=function(t){tn(this,cr,or),Ze(t),$n.call(this);var e=sr(this);try{t(Yn(Er,this,e),Yn(Jn,this,e))}catch(t){Jn(this,e,t)}},($n=function(){ar(this,{type:or,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=Je(cr.prototype,{then:function(t,e){var n=ur(this),r=dr(gn(this,cr));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=yr?fr.domain:void 0,n.parent=!0,n.reactions.push(r),0!=n.state&&Qn(this,n,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),Zn=function(){var t=new $n,e=sr(t);this.promise=t,this.resolve=Yn(Er,t,e),this.reject=Yn(Jn,t,e)},Kn.f=dr=function(t){return t===cr||t===tr?new Zn:vr(t)},"function"==typeof sn&&(er=sn.prototype.then,bt(sn.prototype,"then",function(t,e){var n=this;return new cr(function(t,e){er.call(n,t,e)}).then(t,e)},{unsafe:!0}),"function"==typeof pr&&Dt({global:!0,enumerable:!0,forced:!0},{fetch:function(){return Wn(cr,pr.apply(L,arguments))}}))),Dt({global:!0,wrap:!0,forced:dt},{Promise:cr}),me(cr,or,!1),$e(or),tr=At(or),Dt({target:or,stat:!0,forced:dt},{reject:function(t){var e=dr(this);return e.reject.call(void 0,t),e.promise}}),Dt({target:or,stat:!0,forced:dt},{resolve:function(t){return Wn(this,t)}}),Dt({target:or,stat:!0,forced:et},{all:function(t){var a=this,e=dr(a),u=e.resolve,c=e.reject,n=Hn(function(){var r=Ze(a.resolve),i=[],o=0,s=1;ln(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]=t,--s||u(i))},c)}),--s||u(i)});return n.error&&c(n.value),e.promise},race:function(t){var n=this,r=dr(n),i=r.reject,e=Hn(function(){var e=Ze(n.resolve);ln(t,function(t){e.call(n,t).then(r.resolve,i)})});return e.error&&i(e.value),r.promise}}),Dt({target:"Promise",stat:!0},{allSettled:function(t){var a=this,e=Kn.f(a),u=e.resolve,n=e.reject,r=Hn(function(){var r=Ze(a.resolve),i=[],o=0,s=1;ln(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(a,t).then(function(t){n||(n=!0,i[e]={status:"fulfilled",value:t},--s||u(i))},function(t){n||(n=!0,i[e]={status:"rejected",reason:t},--s||u(i))})}),--s||u(i)});return r.error&&n(r.value),e.promise}});H=!!sn&&T(function(){sn.prototype.finally.call({then:function(){}},function(){})});Dt({target:"Promise",proto:!0,real:!0,forced:H},{finally:function(e){var n=gn(this,At("Promise")),t="function"==typeof e;return this.then(t?function(t){return Wn(n,e()).then(function(){return t})}:e,t?function(t){return Wn(n,e()).then(function(){throw t})}:e)}}),"function"!=typeof sn||sn.prototype.finally||bt(sn.prototype,"finally",At("Promise").prototype.finally);Bt.Promise;var Ir=mt.set,Tr=mt.getterFor("AggregateError"),Sr=function(t,e){var n=this;if(!(n instanceof Sr))return new Sr(t,e);Ne&&(n=Ne(new Error(e),ae(n)));var r=[];return ln(t,r.push,r),F?Ir(n,{errors:r,type:"AggregateError"}):n.errors=r,void 0!==e&&W(n,"message",String(e)),n};Sr.prototype=Ee(Error.prototype,{constructor:k(5,Sr),message:k(5,""),name:k(5,"AggregateError")}),F&&B.f(Sr.prototype,"errors",{get:function(){return Tr(this).errors},configurable:!0}),Dt({global:!0},{AggregateError:Sr}),Dt({target:"Promise",stat:!0},{try:function(t){var e=Kn.f(this),t=Hn(t);return(t.error?e.reject:e.resolve)(t.value),e.promise}});var Cr="No one promise resolved";Dt({target:"Promise",stat:!0},{any:function(t){var u=this,e=Kn.f(u),c=e.resolve,h=e.reject,n=Hn(function(){var r=Ze(u.resolve),i=[],o=0,s=1,a=!1;ln(t,function(t){var e=o++,n=!1;i.push(void 0),s++,r.call(u,t).then(function(t){n||a||(a=!0,c(t))},function(t){n||a||(n=!0,i[e]=t,--s||h(new(At("AggregateError"))(i,Cr)))})}),--s||h(new(At("AggregateError"))(i,Cr))});return n.error&&h(n.value),e.promise}});function Nr(t,e){var n;return kr(t)&&("function"==typeof(n=t.constructor)&&(n===Array||kr(n.prototype))||S(n)&&null===(n=n[Or]))&&(n=void 0),new(void 0===n?Array:n)(0===e?0:e)}function Ar(t){throw t}var kr=Array.isArray||function(t){return"Array"==gt(t)},Or=R("species"),Pr=[].push,Dr=function(f){var p=1==f,d=2==f,v=3==f,y=4==f,g=6==f,m=5==f||g;return function(t,e,n,r){for(var i,o,s=Rt(t),a=jt(s),u=nn(e,n,3),c=kt(a.length),h=0,r=r||Nr,l=p?r(t,c):d?r(t,0):void 0;h<c;h++)if((m||h in a)&&(o=u(i=a[h],h,s),f))if(p)l[h]=o;else if(o)switch(f){case 3:return!0;case 5:return i;case 6:return h;case 2:Pr.call(l,i)}else if(y)return!1;return g?-1:v||y?y:l}},Rr={forEach:Dr(0),map:Dr(1),filter:Dr(2),some:Dr(3),every:Dr(4),find:Dr(5),findIndex:Dr(6)},xr=Object.defineProperty,Lr={},E=function(t,e){if(P(Lr,t))return Lr[t];var n=[][t],r=!!P(e=e||{},"ACCESSORS")&&e.ACCESSORS,i=P(e,0)?e[0]:Ar,o=P(e,1)?e[1]:void 0;return Lr[t]=!!n&&!T(function(){if(r&&!F)return 1;var t={length:-1};r?xr(t,1,{enumerable:!0,get:Ar}):t[1]=1,n.call(t,i,o)})},Mr=Rr.find,dt="find",Fr=!0,et=E(dt);dt in[]&&Array(1)[dt](function(){Fr=!1}),Dt({target:"Array",proto:!0,forced:Fr||!et},{find:function(t,e){return Mr(this,t,1<arguments.length?e:void 0)}}),nt(dt);var Ur=Function.call,H=function(t,e,n){return nn(Ur,L[t].prototype[e],n)},jr=(H("Array","find"),Rr.findIndex),Dr="findIndex",Vr=!0,et=E(Dr);Dr in[]&&Array(1)[Dr](function(){Vr=!1}),Dt({target:"Array",proto:!0,forced:Vr||!et},{findIndex:function(t,e){return jr(this,t,1<arguments.length?e:void 0)}}),nt(Dr);function qr(t,e,n){(e=A(e))in t?B.f(t,e,k(0,n)):t[e]=n}H("Array","findIndex");dt=!yn(function(t){Array.from(t)});Dt({target:"Array",stat:!0,forced:dt},{from:function(t,e,n){var r,i,o,s,a,u,c=Rt(t),h="function"==typeof this?this:Array,t=arguments.length,l=1<t?e:void 0,f=void 0!==l,e=rn(c),p=0;if(f&&(l=nn(l,2<t?n:void 0,2)),null==e||h==Array&&en(e))for(i=new h(r=kt(c.length));p<r;p++)u=f?l(c[p],p):c[p],qr(i,p,u);else for(a=(s=e.call(c)).next,i=new h;!(o=a.call(s)).done;p++)u=f?on(s,l,[o.value,p],!0):o.value,qr(i,p,u);return i.length=p,i}});Bt.Array.from;var Br,Wr,Hr=Rr.some,et=!!(Wr=[]["some"])&&T(function(){Wr.call(null,Br||function(){throw 1},1)}),nt=E("some");Dt({target:"Array",proto:!0,forced:!et||!nt},{some:function(t,e){return Hr(this,t,1<arguments.length?e:void 0)}});H("Array","some");function Gr(t){return S(t)&&P(Zr,It(t))}var Kr,Dr="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView,dt=B.f,zr=L.Int8Array,Qr=zr&&zr.prototype,E=L.Uint8ClampedArray,et=E&&E.prototype,Xr=zr&&ae(zr),Yr=Qr&&ae(Qr),nt=Object.prototype,E=(nt.isPrototypeOf,R("toStringTag")),Jr=D("TYPED_ARRAY_TAG"),$r=Dr&&!!Ne&&"Opera"!==It(L.opera),Dr=!1,Zr={Int8Array:1,Uint8Array:1,Uint8ClampedArray:1,Int16Array:2,Uint16Array:2,Int32Array:4,Uint32Array:4,Float32Array:4,Float64Array:8};for(Kr in Zr)L[Kr]||($r=!1);if((!$r||"function"!=typeof Xr||Xr===Function.prototype)&&(Xr=function(){throw TypeError("Incorrect invocation")},$r))for(Kr in Zr)L[Kr]&&Ne(L[Kr],Xr);if((!$r||!Yr||Yr===nt)&&(Yr=Xr.prototype,$r))for(Kr in Zr)L[Kr]&&Ne(L[Kr].prototype,Yr);if($r&&ae(et)!==Yr&&Ne(et,Yr),F&&!P(Yr,E))for(Kr in Dr=!0,dt(Yr,E,{get:function(){return S(this)?this[Jr]:void 0}}),Zr)L[Kr]&&W(L[Kr],Jr,Kr);var et=function(t){if(Gr(t))return t;throw TypeError("Target is not a typed array")},dt=function(t,e,n){if(F){if(n)for(var r in Zr){var i=L[r];i&&P(i.prototype,t)&&delete i.prototype[t]}Yr[t]&&!n||bt(Yr,t,!n&&$r&&Qr[t]||e)}},E=R("iterator"),Dr=L.Uint8Array,ti=We.values,ei=We.keys,ni=We.entries,ri=et,et=dt,dt=Dr&&Dr.prototype[E],Dr=!!dt&&("values"==dt.name||null==dt.name),dt=function(){return ti.call(ri(this))};et("entries",function(){return ni.call(ri(this))}),et("keys",function(){return ei.call(ri(this))}),et("values",dt,!Dr),et(E,dt,!Dr);var ii=Object.assign,oi=Object.defineProperty,dt=!ii||T(function(){if(F&&1!==ii({b:1},ii(oi({},"a",{enumerable:!0,get:function(){oi(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return 1;var t={},e={},n=Symbol(),r="abcdefghijklmnopqrst";return t[n]=7,r.split("").forEach(function(t){e[t]=t}),7!=ii({},t)[n]||le(ii({},e)).join("")!=r})?function(t){for(var e=Rt(t),n=arguments.length,r=1,i=Yt.f,o=Ft.f;r<n;)for(var s,a=jt(arguments[r++]),u=i?le(a).concat(i(a)):le(a),c=u.length,h=0;h<c;)s=u[h++],F&&!o.call(a,s)||(e[s]=a[s]);return e}:ii;Dt({target:"Object",stat:!0,forced:Object.assign!==dt},{assign:dt});Bt.Object.assign;var si=Ft.f,Dr=function(a){return function(t){for(var e,n=Ct(t),r=le(n),i=r.length,o=0,s=[];o<i;)e=r[o++],F&&!si.call(n,e)||s.push(a?[e,n[e]]:n[e]);return s}},dt={entries:Dr(!0),values:Dr(!1)},ai=dt.entries;Dt({target:"Object",stat:!0},{entries:function(t){return ai(t)}});Bt.Object.entries;var ui=dt.values;Dt({target:"Object",stat:!0},{values:function(t){return ui(t)}});Bt.Object.values;function ci(t){if(S(e=t)&&(void 0!==(n=e[hi])?!!n:"RegExp"==gt(e)))throw TypeError("The method doesn't accept regular expressions");var e,n;return t}var hi=R("match"),li=R("match"),Dr=function(e){var n=/./;try{"/./"[e](n)}catch(t){try{return n[li]=!1,"/./"[e](n)}catch(t){}}return!1};Dt({target:"String",proto:!0,forced:!Dr("includes")},{includes:function(t,e){return!!~String(St(this)).indexOf(ci(t),1<arguments.length?e:void 0)}});H("String","includes");var fi,dt=qt.f,pi="".startsWith,di=Math.min,Dr=Dr("startsWith"),fi=!(Dr||(!(fi=dt(String.prototype,"startsWith"))||fi.writable));Dt({target:"String",proto:!0,forced:!fi&&!Dr},{startsWith:function(t,e){var n=String(St(this));ci(t);e=kt(di(1<arguments.length?e:void 0,n.length)),t=String(t);return pi?pi.call(n,t,e):n.slice(e,e+t.length)===t}});H("String","startsWith");Dt({target:"String",proto:!0},{repeat:"".repeat||function(t){var e=String(St(this)),n="",r=Tt(t);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;0<r;(r>>>=1)&&(e+=e))1&r&&(n+=e);return n}});H("String","repeat");var vi,yi=R("species"),gi=R("isConcatSpreadable"),mi=9007199254740991,bi="Maximum allowed index exceeded",Dr=51<=nr||!T(function(){var t=[];return t[gi]=!1,t.concat()[0]!==t}),H=(vi="concat",51<=nr||!T(function(){var t=[];return(t.constructor={})[yi]=function(){return{foo:1}},1!==t[vi](Boolean).foo}));Dt({target:"Array",proto:!0,forced:!Dr||!H},{concat:function(){for(var t,e,n,r=Rt(this),i=Nr(r,0),o=0,s=-1,a=arguments.length;s<a;s++)if(function(t){if(!S(t))return!1;var e=t[gi];return void 0!==e?!!e:kr(t)}(n=-1===s?r:arguments[s])){if(e=kt(n.length),mi<o+e)throw TypeError(bi);for(t=0;t<e;t++,o++)t in n&&qr(i,o,n[t])}else{if(mi<=o)throw TypeError(bi);qr(i,o++,n)}return i.length=o,i}});function _i(t){var e=Bt.Symbol||(Bt.Symbol={});P(e,t)||Ni(e,t,{value:Ci.f(t)})}function wi(t,e){var n=qi[t]=Ee(Li[Pi]);return Di(n,{type:Oi,tag:t,description:e}),F||(n.description=e),n}function Ei(e,t){N(e);var n=Ct(t),t=le(n).concat(Yi(n));return Ai(t,function(t){F&&!Xi.call(n,t)||Qi(e,t,n[t])}),e}var Ii=Xt.f,Ti={}.toString,Si="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],H={f:function(t){return Si&&"[object Window]"==Ti.call(t)?function(t){try{return Ii(t)}catch(t){return Si.slice()}}(t):Ii(Ct(t))}},Ci={f:R},Ni=B.f,Ai=Rr.forEach,ki=x("hidden"),Oi="Symbol",Pi="prototype",Rr=R("toPrimitive"),Di=mt.set,Ri=mt.getterFor(Oi),xi=Object[Pi],Li=L.Symbol,Mi=At("JSON","stringify"),Fi=qt.f,Ui=B.f,ji=H.f,Vi=Ft.f,qi=K("symbols"),Bi=K("op-symbols"),Wi=K("string-to-symbol-registry"),Hi=K("symbol-to-string-registry"),x=K("wks"),K=L.QObject,Gi=!K||!K[Pi]||!K[Pi].findChild,Ki=F&&T(function(){return 7!=Ee(Ui({},"a",{get:function(){return Ui(this,"a",{value:7}).a}})).a})?function(t,e,n){var r=Fi(xi,e);r&&delete xi[e],Ui(t,e,n),r&&t!==xi&&Ui(xi,e,r)}:Ui,zi=J?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof Li},Qi=function(t,e,n){t===xi&&Qi(Bi,e,n),N(t);e=A(e,!0);return N(n),P(qi,e)?(n.enumerable?(P(t,ki)&&t[ki][e]&&(t[ki][e]=!1),n=Ee(n,{enumerable:k(0,!1)})):(P(t,ki)||Ui(t,ki,k(1,{})),t[ki][e]=!0),Ki(t,e,n)):Ui(t,e,n)},Xi=function(t){var e=A(t,!0),t=Vi.call(this,e);return!(this===xi&&P(qi,e)&&!P(Bi,e))&&(!(t||!P(this,e)||!P(qi,e)||P(this,ki)&&this[ki][e])||t)},K=function(t,e){var n=Ct(t),t=A(e,!0);if(n!==xi||!P(qi,t)||P(Bi,t)){e=Fi(n,t);return!e||!P(qi,t)||P(n,ki)&&n[ki][t]||(e.enumerable=!0),e}},J=function(t){var t=ji(Ct(t)),e=[];return Ai(t,function(t){P(qi,t)||P(yt,t)||e.push(t)}),e},Yi=function(t){var e=t===xi,t=ji(e?Bi:Ct(t)),n=[];return Ai(t,function(t){!P(qi,t)||e&&!P(xi,t)||n.push(qi[t])}),n};Y||(bt((Li=function(t){if(this instanceof Li)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==t?String(t):void 0,e=D(t),n=function(t){this===xi&&n.call(Bi,t),P(this,ki)&&P(this[ki],e)&&(this[ki][e]=!1),Ki(this,e,k(1,t))};return F&&Gi&&Ki(xi,e,{configurable:!0,set:n}),wi(e,t)})[Pi],"toString",function(){return Ri(this).tag}),bt(Li,"withoutSetter",function(t){return wi(D(t),t)}),Ft.f=Xi,B.f=Qi,qt.f=K,Xt.f=H.f=J,Yt.f=Yi,Ci.f=function(t){return wi(R(t),t)},F&&(Ui(Li[Pi],"description",{configurable:!0,get:function(){return Ri(this).description}}),bt(xi,"propertyIsEnumerable",Xi,{unsafe:!0}))),Dt({global:!0,wrap:!0,forced:!Y,sham:!Y},{Symbol:Li}),Ai(le(x),function(t){_i(t)}),Dt({target:Oi,stat:!0,forced:!Y},{for:function(t){var e=String(t);if(P(Wi,e))return Wi[e];t=Li(e);return Wi[e]=t,Hi[t]=e,t},keyFor:function(t){if(!zi(t))throw TypeError(t+" is not a symbol");if(P(Hi,t))return Hi[t]},useSetter:function(){Gi=!0},useSimple:function(){Gi=!1}}),Dt({target:"Object",stat:!0,forced:!Y,sham:!F},{create:function(t,e){return void 0===e?Ee(t):Ei(Ee(t),e)},defineProperty:Qi,defineProperties:Ei,getOwnPropertyDescriptor:K}),Dt({target:"Object",stat:!0,forced:!Y},{getOwnPropertyNames:J,getOwnPropertySymbols:Yi}),Dt({target:"Object",stat:!0,forced:T(function(){Yt.f(1)})},{getOwnPropertySymbols:function(t){return Yt.f(Rt(t))}}),Mi&&(co=!Y||T(function(){var t=Li();return"[null]"!=Mi([t])||"{}"!=Mi({a:t})||"{}"!=Mi(Object(t))}),Dt({target:"JSON",stat:!0,forced:co},{stringify:function(t,e){for(var n,r=[t],i=1;i<arguments.length;)r.push(arguments[i++]);if((S(n=e)||void 0!==t)&&!zi(t))return kr(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!zi(e))return e}),r[1]=e,Mi.apply(null,r)}})),Li[Pi][Rr]||W(Li[Pi],Rr,Li[Pi].valueOf),me(Li,Oi),yt[ki]=!0,_i("asyncIterator");var Ji,$i,Zi,to,eo,K=B.f,no=L.Symbol;!F||"function"!=typeof no||"description"in no.prototype&&void 0===no().description||(Ji={},Pt($i=function(t){var e=arguments.length<1||void 0===t?void 0:String(t),t=this instanceof $i?new no(e):void 0===e?no():no(e);return""===e&&(Ji[t]=!0),t},no),(fo=$i.prototype=no.prototype).constructor=$i,Zi=fo.toString,to="Symbol(test)"==String(no("test")),eo=/^Symbol\((.*)\)[^)]+$/,K(fo,"description",{configurable:!0,get:function(){var t=S(this)?this.valueOf():this,e=Zi.call(t);if(P(Ji,t))return"";e=to?e.slice(7,-1):e.replace(eo,"$1");return""===e?void 0:e}}),Dt({global:!0,forced:!0},{Symbol:$i})),_i("hasInstance"),_i("isConcatSpreadable"),_i("iterator"),_i("match"),_i("matchAll"),_i("replace"),_i("search"),_i("species"),_i("split"),_i("toPrimitive"),_i("toStringTag"),_i("unscopables"),me(Math,"Math",!0),me(L.JSON,"JSON",!0);Bt.Symbol;_i("asyncDispose"),_i("dispose"),_i("observable"),_i("patternMatch"),_i("replaceAll");Ci.f("iterator");var ro=!T(function(){return Object.isExtensible(Object.preventExtensions({}))}),io=I(function(t){function n(t){e(t,r,{value:{objectID:"O"+ ++i,weakData:{}}})}var e=B.f,r=D("meta"),i=0,o=Object.isExtensible||function(){return!0},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!S(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!P(t,r)){if(!o(t))return"F";if(!e)return"E";n(t)}return t[r].objectID},getWeakData:function(t,e){if(!P(t,r)){if(!o(t))return!0;if(!e)return!1;n(t)}return t[r].weakData},onFreeze:function(t){return ro&&s.REQUIRED&&o(t)&&!P(t,r)&&n(t),t}};yt[r]=!0}),J=function(s,t,e){function n(t){var n=p[t];bt(p,t,"add"==t?function(t){return n.call(this,0===t?0:t),this}:"delete"==t?function(t){return!(h&&!S(t))&&n.call(this,0===t?0:t)}:"get"==t?function(t){return h&&!S(t)?void 0:n.call(this,0===t?0:t)}:"has"==t?function(t){return!(h&&!S(t))&&n.call(this,0===t?0:t)}:function(t,e){return n.call(this,0===t?0:t,e),this})}var r,i,o,a,u,c=-1!==s.indexOf("Map"),h=-1!==s.indexOf("Weak"),l=c?"set":"add",f=L[s],p=f&&f.prototype,d=f,v={};return re(s,"function"!=typeof f||!(h||p.forEach&&!T(function(){(new f).entries().next()})))?(d=e.getConstructor(t,s,c,l),io.REQUIRED=!0):re(s,!0)&&(i=(r=new d)[l](h?{}:-0,1)!=r,o=T(function(){r.has(1)}),a=yn(function(t){new f(t)}),u=!h&&T(function(){for(var t=new f,e=5;e--;)t[l](e,e);return!t.has(-0)}),a||(((d=t(function(t,e){tn(t,d,s);var n,r,i,o,n=(n=new f,r=t,t=d,Ne&&"function"==typeof(i=r.constructor)&&i!==t&&S(o=i.prototype)&&o!==t.prototype&&Ne(n,o),n);return null!=e&&ln(e,n[l],n,c),n})).prototype=p).constructor=d),(o||u)&&(n("delete"),n("has"),c&&n("get")),(u||i)&&n(l),h&&p.clear&&delete p.clear),v[s]=d,Dt({global:!0,forced:d!=f},v),me(d,s),h||e.setStrong(d,s,c),d},oo=B.f,so=io.fastKey,ao=mt.set,uo=mt.getterFor,co={getConstructor:function(t,n,r,i){function o(t,e,n){var r,i=a(t),o=u(t,e);return o?o.value=n:(i.last=o={index:r=so(e,!0),key:e,value:n,previous:n=i.last,next:void 0,removed:!1},i.first||(i.first=o),n&&(n.next=o),F?i.size++:t.size++,"F"!==r&&(i.index[r]=o)),t}var s=t(function(t,e){tn(t,s,n),ao(t,{type:n,index:Ee(null),first:void 0,last:void 0,size:0}),F||(t.size=0),null!=e&&ln(e,t[i],t,r)}),a=uo(n),u=function(t,e){var n,r=a(t),t=so(e);if("F"!==t)return r.index[t];for(n=r.first;n;n=n.next)if(n.key==e)return n};return Je(s.prototype,{clear:function(){for(var t=a(this),e=t.index,n=t.first;n;)n.removed=!0,n.previous&&(n.previous=n.previous.next=void 0),delete e[n.index],n=n.next;t.first=t.last=void 0,F?t.size=0:this.size=0},delete:function(t){var e,n=a(this),r=u(this,t);return r&&(e=r.next,t=r.previous,delete n.index[r.index],r.removed=!0,t&&(t.next=e),e&&(e.previous=t),n.first==r&&(n.first=e),n.last==r&&(n.last=t),F?n.size--:this.size--),!!r},forEach:function(t,e){for(var n,r=a(this),i=nn(t,1<arguments.length?e:void 0,3);n=n?n.next:r.first;)for(i(n.value,n.key,this);n&&n.removed;)n=n.previous},has:function(t){return!!u(this,t)}}),Je(s.prototype,r?{get:function(t){t=u(this,t);return t&&t.value},set:function(t,e){return o(this,0===t?0:t,e)}}:{add:function(t){return o(this,t=0===t?0:t,t)}}),F&&oo(s.prototype,"size",{get:function(){return a(this).size}}),s},setStrong:function(t,e,n){var r=e+" Iterator",i=uo(e),o=uo(r);we(t,e,function(t,e){ao(this,{type:r,target:t,state:i(t),kind:e,last:void 0})},function(){for(var t=o(this),e=t.kind,n=t.last;n&&n.removed;)n=n.previous;return t.target&&(t.last=n=n?n.next:t.state.first)?"keys"==e?{value:n.key,done:!1}:"values"==e?{value:n.value,done:!1}:{value:[n.key,n.value],done:!1}:{value:t.target=void 0,done:!0}},n?"entries":"values",!n,!0),$e(e)}},Rr=(J("Map",function(e){return function(t){return e(this,arguments.length?t:void 0)}},co),Bt.Map,function(t,e,n){var r,i,o,s=arguments.length,a=1<s?e:void 0;return Ze(this),(e=void 0!==a)&&Ze(a),null==t?new this:(r=[],e?(i=0,o=nn(a,2<s?n:void 0,2),ln(t,function(t){r.push(o(t,i++))})):ln(t,r.push,r),new this(r))});Dt({target:"Map",stat:!0},{from:Rr});K=function(){for(var t=arguments.length,e=new Array(t);t--;)e[t]=arguments[t];return new this(e)};Dt({target:"Map",stat:!0},{of:K});function ho(){for(var t,e=N(this),n=Ze(e.delete),r=!0,i=0,o=arguments.length;i<o;i++)t=n.call(e,arguments[i]),r=r&&t;return!!r}Dt({target:"Map",proto:!0,real:!0,forced:M},{deleteAll:function(){return ho.apply(this,arguments)}});function lo(t){return Map.prototype.entries.call(t)}Dt({target:"Map",proto:!0,real:!0,forced:M},{every:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3);return!ln(r,function(t,e){if(!i(e,t,n))return ln.stop()},void 0,!0,!0).stopped}}),Dt({target:"Map",proto:!0,real:!0,forced:M},{filter:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3),o=new(gn(n,At("Map"))),s=Ze(o.set);return ln(r,function(t,e){i(e,t,n)&&s.call(o,t,e)},void 0,!0,!0),o}}),Dt({target:"Map",proto:!0,real:!0,forced:M},{find:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3);return ln(r,function(t,e){if(i(e,t,n))return ln.stop(e)},void 0,!0,!0).result}}),Dt({target:"Map",proto:!0,real:!0,forced:M},{findKey:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3);return ln(r,function(t,e){if(i(e,t,n))return ln.stop(t)},void 0,!0,!0).result}}),Dt({target:"Map",stat:!0},{groupBy:function(t,n){var r=new this;Ze(n);var i=Ze(r.has),o=Ze(r.get),s=Ze(r.set);return ln(t,function(t){var e=n(t);i.call(r,e)?o.call(r,e).push(t):s.call(r,e,[t])}),r}});Dt({target:"Map",proto:!0,real:!0,forced:M},{includes:function(r){return ln(lo(N(this)),function(t,e){if((n=e)===(e=r)||n!=n&&e!=e)return ln.stop();var n},void 0,!0,!0).stopped}}),Dt({target:"Map",stat:!0},{keyBy:function(t,e){var n=new this;Ze(e);var r=Ze(n.set);return ln(t,function(t){r.call(n,e(t),t)}),n}}),Dt({target:"Map",proto:!0,real:!0,forced:M},{keyOf:function(n){return ln(lo(N(this)),function(t,e){if(e===n)return ln.stop(t)},void 0,!0,!0).result}}),Dt({target:"Map",proto:!0,real:!0,forced:M},{mapKeys:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3),o=new(gn(n,At("Map"))),s=Ze(o.set);return ln(r,function(t,e){s.call(o,i(e,t,n),e)},void 0,!0,!0),o}}),Dt({target:"Map",proto:!0,real:!0,forced:M},{mapValues:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3),o=new(gn(n,At("Map"))),s=Ze(o.set);return ln(r,function(t,e){s.call(o,t,i(e,t,n))},void 0,!0,!0),o}}),Dt({target:"Map",proto:!0,real:!0,forced:M},{merge:function(){for(var t=N(this),e=Ze(t.set),n=0;n<arguments.length;)ln(arguments[n++],e,t,!0);return t}}),Dt({target:"Map",proto:!0,real:!0,forced:M},{reduce:function(n,t){var r=N(this),e=lo(r),i=arguments.length<2,o=i?void 0:t;if(Ze(n),ln(e,function(t,e){o=i?(i=!1,e):n(o,e,t,r)},void 0,!0,!0),i)throw TypeError("Reduce of empty map with no initial value");return o}}),Dt({target:"Map",proto:!0,real:!0,forced:M},{some:function(t,e){var n=N(this),r=lo(n),i=nn(t,1<arguments.length?e:void 0,3);return ln(r,function(t,e){if(i(e,t,n))return ln.stop()},void 0,!0,!0).stopped}}),Dt({target:"Map",proto:!0,real:!0,forced:M},{update:function(t,e,n){var r=N(this),i=arguments.length;Ze(e);var o=r.has(t);if(!o&&i<3)throw TypeError("Updating absent value");n=o?r.get(t):Ze(2<i?n:void 0)(t,r);return r.set(t,e(n,t,r)),r}});var fo=function(t,e,n){var r,i=N(this),n=2<arguments.length?n:void 0;if("function"!=typeof e&&"function"!=typeof n)throw TypeError("At least one callback required");return i.has(t)?(r=i.get(t),"function"==typeof e&&(r=e(r),i.set(t,r))):"function"==typeof n&&(r=n(),i.set(t,r)),r};Dt({target:"Map",proto:!0,real:!0,forced:M},{upsert:fo}),Dt({target:"Map",proto:!0,real:!0,forced:M},{updateOrInsert:fo});J("Set",function(e){return function(t){return e(this,arguments.length?t:void 0)}},co),Bt.Set;Dt({target:"Set",stat:!0},{from:Rr}),Dt({target:"Set",stat:!0},{of:K});Dt({target:"Set",proto:!0,real:!0,forced:M},{addAll:function(){return function(){for(var t=N(this),e=Ze(t.add),n=0,r=arguments.length;n<r;n++)e.call(t,arguments[n]);return t}.apply(this,arguments)}}),Dt({target:"Set",proto:!0,real:!0,forced:M},{deleteAll:function(){return ho.apply(this,arguments)}});function po(t){return Set.prototype.values.call(t)}Dt({target:"Set",proto:!0,real:!0,forced:M},{every:function(t,e){var n=N(this),r=po(n),i=nn(t,1<arguments.length?e:void 0,3);return!ln(r,function(t){if(!i(t,t,n))return ln.stop()},void 0,!1,!0).stopped}}),Dt({target:"Set",proto:!0,real:!0,forced:M},{difference:function(t){var e=N(this),n=new(gn(e,At("Set")))(e),r=Ze(n.delete);return ln(t,function(t){r.call(n,t)}),n}}),Dt({target:"Set",proto:!0,real:!0,forced:M},{filter:function(t,e){var n=N(this),r=po(n),i=nn(t,1<arguments.length?e:void 0,3),o=new(gn(n,At("Set"))),s=Ze(o.add);return ln(r,function(t){i(t,t,n)&&s.call(o,t)},void 0,!1,!0),o}}),Dt({target:"Set",proto:!0,real:!0,forced:M},{find:function(t,e){var n=N(this),r=po(n),i=nn(t,1<arguments.length?e:void 0,3);return ln(r,function(t){if(i(t,t,n))return ln.stop(t)},void 0,!1,!0).result}}),Dt({target:"Set",proto:!0,real:!0,forced:M},{intersection:function(t){var e=N(this),n=new(gn(e,At("Set"))),r=Ze(e.has),i=Ze(n.add);return ln(t,function(t){r.call(e,t)&&i.call(n,t)}),n}}),Dt({target:"Set",proto:!0,real:!0,forced:M},{isDisjointFrom:function(t){var e=N(this),n=Ze(e.has);return!ln(t,function(t){if(!0===n.call(e,t))return ln.stop()}).stopped}}),Dt({target:"Set",proto:!0,real:!0,forced:M},{isSubsetOf:function(t){var e=function(t){var e=rn(t);if("function"!=typeof e)throw TypeError(String(t)+" is not iterable");return N(e.call(t))}(this),n=N(t),r=n.has;return"function"!=typeof r&&(n=new(At("Set"))(t),r=Ze(n.has)),!ln(e,function(t){if(!1===r.call(n,t))return ln.stop()},void 0,!1,!0).stopped}}),Dt({target:"Set",proto:!0,real:!0,forced:M},{isSupersetOf:function(t){var e=N(this),n=Ze(e.has);return!ln(t,function(t){if(!1===n.call(e,t))return ln.stop()}).stopped}}),Dt({target:"Set",proto:!0,real:!0,forced:M},{join:function(t){var e=N(this),n=po(e),e=void 0===t?",":String(t),t=[];return ln(n,t.push,t,!1,!0),t.join(e)}}),Dt({target:"Set",proto:!0,real:!0,forced:M},{map:function(t,e){var n=N(this),r=po(n),i=nn(t,1<arguments.length?e:void 0,3),o=new(gn(n,At("Set"))),s=Ze(o.add);return ln(r,function(t){s.call(o,i(t,t,n))},void 0,!1,!0),o}}),Dt({target:"Set",proto:!0,real:!0,forced:M},{reduce:function(e,t){var n=N(this),r=po(n),i=arguments.length<2,o=i?void 0:t;if(Ze(e),ln(r,function(t){o=i?(i=!1,t):e(o,t,t,n)},void 0,!1,!0),i)throw TypeError("Reduce of empty set with no initial value");return o}}),Dt({target:"Set",proto:!0,real:!0,forced:M},{some:function(t,e){var n=N(this),r=po(n),i=nn(t,1<arguments.length?e:void 0,3);return ln(r,function(t){if(i(t,t,n))return ln.stop()},void 0,!1,!0).stopped}}),Dt({target:"Set",proto:!0,real:!0,forced:M},{symmetricDifference:function(t){var e=N(this),n=new(gn(e,At("Set")))(e),r=Ze(n.delete),i=Ze(n.add);return ln(t,function(t){r.call(n,t)||i.call(n,t)}),n}}),Dt({target:"Set",proto:!0,real:!0,forced:M},{union:function(t){var e=N(this),e=new(gn(e,At("Set")))(e);return ln(t,Ze(e.add),e),e}});var vo=Math.floor;Dt({target:"Number",stat:!0},{isInteger:function(t){return!S(t)&&isFinite(t)&&vo(t)===t}});Bt.Number.isInteger;Dt({target:"Number",stat:!0},{isNaN:function(t){return t!=t}});Bt.Number.isNaN;var yo=function(t,e){return(yo=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function go(t,e){function n(){this.constructor=t}yo(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var mo=function(){return(mo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function bo(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function _o(n,r){var i,o,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function wo(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Eo(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function Io(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Eo(arguments[e]));return t}function To(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function So(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function Co(t){try{return Oo.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var No={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},Ao=function(t,e){if(!t)throw ko(e)},ko=function(t){return new Error("Firebase Database ("+No.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},Oo={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,o=(3&o)<<4|a>>4,a=(15&a)<<2|c>>6,c=63&c;u||(c=64,s||(a=64)),r.push(n[h],n[o],n[a],n[c])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(So(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i,o,s,a=t[n++];a<128?e[r++]=String.fromCharCode(a):191<a&&a<224?(o=t[n++],e[r++]=String.fromCharCode((31&a)<<6|63&o)):239<a&&a<365?(i=((7&a)<<18|(63&(o=t[n++]))<<12|(63&(s=t[n++]))<<6|63&t[n++])-65536,e[r++]=String.fromCharCode(55296+(i>>10)),e[r++]=String.fromCharCode(56320+(1023&i))):(o=t[n++],s=t[n++],e[r++]=String.fromCharCode((15&a)<<12|(63&o)<<6|63&s))}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();o=o<<2|s>>4;r.push(o),64!==a&&(s=s<<4&240|a>>2,r.push(s),64!==u&&(u=a<<6&192|u,r.push(u)))}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function Po(t){return Do(void 0,t)}function Do(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=Do(t[n],e[n]));return t}var Ro=(xo.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},xo);function xo(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function Lo(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function Mo(){return"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lo())}function Fo(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function Uo(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function jo(){return!0===No.NODE_ADMIN}function Vo(){return"indexedDB"in self&&null!=indexedDB}function qo(){return new Promise(function(t,e){try{var n=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=window.indexedDB.open(r);i.onsuccess=function(){i.result.close(),n||window.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=function(){n=!1},i.onerror=function(){var t;e((null===(t=i.error)||void 0===t?void 0:t.message)||"")}}catch(t){e(t)}})}function Bo(){return!(!navigator||!navigator.cookieEnabled)}var Wo,Ho="FirebaseError",Go=(go(Ko,Wo=Error),Ko);function Ko(t,e,n){e=Wo.call(this,e)||this;return e.code=t,e.customData=n,e.name=Ho,Object.setPrototypeOf(e,Ko.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,zo.prototype.create),e}var zo=(Qo.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=this.errors[t],t=t?(r=i,t.replace(Xo,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new Go(o,t,i)},Qo);function Qo(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var Xo=/\{\$([^}]+)}/g;function Yo(t){return JSON.parse(t)}function Jo(t){return JSON.stringify(t)}function $o(t){var e={},n={},r={},i="";try{var o=t.split("."),e=Yo(Co(o[0])||""),n=Yo(Co(o[1])||""),i=o[2],r=n.d||{};delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}function Zo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function ts(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0}function es(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function ns(t,e,n){var r,i={};for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(i[r]=e.call(n,t[r],r,t));return i}var rs=(is.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},is.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}for(var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4],r=0;r<80;r++){s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782);i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i}this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},is.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},is.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);for(var r=0,n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},is);function is(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}function os(t,e){e=new ss(t,e);return e.subscribe.bind(e)}var ss=(as.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},as.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},as.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},as.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=us),void 0===r.error&&(r.error=us),void 0===r.complete&&(r.complete=us);n=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),n},as.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},as.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},as.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},as.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},as);function as(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function us(){}function cs(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")}function hs(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}t+=" failed: ";return t+=r+" argument "}function ls(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(hs(t,e,r)+"must be a valid function.")}function fs(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(hs(t,e,r)+"must be a valid context object.")}function ps(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e}var ds=1e3,vs=2,ys=144e5,gs=.5;function ms(t,e,n){void 0===e&&(e=ds),void 0===n&&(n=vs);n=e*Math.pow(n,t),t=Math.round(gs*n*(Math.random()-.5)*2);return Math.min(ys,n+t)}var bs=(_s.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},_s.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},_s.prototype.setServiceProps=function(t){return this.serviceProps=t,this},_s);function _s(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var ws="[DEFAULT]",Es=(Is.prototype.get=function(t){void 0===t&&(t=ws);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new Ro;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},Is.prototype.getImmediate=function(t){var e=mo({identifier:ws,optional:!1},t),t=e.identifier,n=e.optional,r=this.normalizeInstanceIdentifier(t);try{var i=this.getOrInitializeService(r);if(i)return i;if(n)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(n)return null;throw t}},Is.prototype.getComponent=function(){return this.component},Is.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(ws)}catch(t){}try{for(var r=wo(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=Eo(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},Is.prototype.clearInstance=function(t){void 0===t&&(t=ws),this.instancesDeferred.delete(t),this.instances.delete(t)},Is.prototype.delete=function(){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(Io(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}),e.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()})))];case 1:return t.sent(),[2]}})})},Is.prototype.isComponentSet=function(){return null!=this.component},Is.prototype.getOrInitializeService=function(t){var e,n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,(e=t)===ws?void 0:e),this.instances.set(t,n)),n||null},Is.prototype.normalizeInstanceIdentifier=function(t){return!this.component||this.component.multipleInstances?t:ws},Is);function Is(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var Ts=(Ss.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},Ss.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},Ss.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new Es(t,this);return this.providers.set(t,e),e},Ss.prototype.getProviders=function(){return Array.from(this.providers.values())},Ss);function Ss(t){this.name=t,this.providers=new Map}function Cs(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var Ns,As=[];(Rr=Ns=Ns||{})[Rr.DEBUG=0]="DEBUG",Rr[Rr.VERBOSE=1]="VERBOSE",Rr[Rr.INFO=2]="INFO",Rr[Rr.WARN=3]="WARN",Rr[Rr.ERROR=4]="ERROR",Rr[Rr.SILENT=5]="SILENT";function ks(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=Ds[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,Cs(["["+i+"]  "+t.name+":"],n))}}var Os={debug:Ns.DEBUG,verbose:Ns.VERBOSE,info:Ns.INFO,warn:Ns.WARN,error:Ns.ERROR,silent:Ns.SILENT},Ps=Ns.INFO,Ds=((K={})[Ns.DEBUG]="log",K[Ns.VERBOSE]="log",K[Ns.INFO]="info",K[Ns.WARN]="warn",K[Ns.ERROR]="error",K),Rs=(Object.defineProperty(xs.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in Ns))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),xs.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?Os[t]:t},Object.defineProperty(xs.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(xs.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),xs.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Cs([this,Ns.DEBUG],t)),this._logHandler.apply(this,Cs([this,Ns.DEBUG],t))},xs.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Cs([this,Ns.VERBOSE],t)),this._logHandler.apply(this,Cs([this,Ns.VERBOSE],t))},xs.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Cs([this,Ns.INFO],t)),this._logHandler.apply(this,Cs([this,Ns.INFO],t))},xs.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Cs([this,Ns.WARN],t)),this._logHandler.apply(this,Cs([this,Ns.WARN],t))},xs.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,Cs([this,Ns.ERROR],t)),this._logHandler.apply(this,Cs([this,Ns.ERROR],t))},xs);function xs(t){this.name=t,this._logLevel=Ps,this._logHandler=ks,this._userLogHandler=null,As.push(this)}function Ls(e){As.forEach(function(t){t.setLogLevel(e)})}var Rr=((M={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",M["bad-app-name"]="Illegal App name: '{$appName}",M["duplicate-app"]="Firebase App named '{$appName}' already exists",M["app-deleted"]="Firebase App named '{$appName}' already deleted",M["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",M["invalid-log-argument"]="First argument to `onLog` must be null or a function.",M),Ms=new zo("app","Firebase",Rr),Fs="@firebase/app",Us="[DEFAULT]",js=((K={})[Fs]="fire-core",K["@firebase/analytics"]="fire-analytics",K["@firebase/auth"]="fire-auth",K["@firebase/database"]="fire-rtdb",K["@firebase/functions"]="fire-fn",K["@firebase/installations"]="fire-iid",K["@firebase/messaging"]="fire-fcm",K["@firebase/performance"]="fire-perf",K["@firebase/remote-config"]="fire-rc",K["@firebase/storage"]="fire-gcs",K["@firebase/firestore"]="fire-fst",K["fire-js"]="fire-js",K["firebase-wrapper"]="fire-js-all",K),Vs=new Rs("@firebase/app"),qs=(Object.defineProperty(Bs.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(Bs.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(Bs.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),Bs.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},Bs.prototype._getService=function(t,e){return void 0===e&&(e=Us),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},Bs.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=Us),this.container.getProvider(t).clearInstance(e)},Bs.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){Vs.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},Bs.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},Bs.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw Ms.create("app-deleted",{appName:this.name_})},Bs);function Bs(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Po(t),this.container=new Ts(e.name),this._addComponent(new bs("app",function(){return o},"PUBLIC"));try{for(var s=wo(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}qs.prototype.name&&qs.prototype.options||qs.prototype.delete||console.log("dc");var Ws="8.0.0";function Hs(u){var c={},h=new Map,l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});{"object"==typeof e&&null!==e||(e={name:e})}var n=e;void 0===n.name&&(n.name=Us);e=n.name;if("string"!=typeof e||!e)throw Ms.create("bad-app-name",{appName:String(e)});if(Zo(c,e))throw Ms.create("duplicate-app",{appName:e});n=new u(t,n,l);return c[e]=n},app:f,registerVersion:function(t,e,n){var r=null!==(i=js[t])&&void 0!==i?i:t;n&&(r+="-"+n);var i=r.match(/\s|\//),t=e.match(/\s|\//);if(i||t){n=['Unable to register library "'+r+'" with version "'+e+'":'];return i&&n.push('library name "'+r+'" contains illegal characters (whitespace or "/")'),i&&t&&n.push("and"),t&&n.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void Vs.warn(n.join(" "))}o(new bs(r+"-version",function(){return{library:r,version:e}},"VERSION"))},setLogLevel:Ls,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw Ms.create("invalid-log-argument",{appName:name});!function(s,e){for(var t=0,n=As;t<n.length;t++){!function(t){var o=null;e&&e.level&&(o=Os[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:Ns[e].toLowerCase(),message:i,args:n,type:t.name})}}(n[t])}}(t,e)},apps:null,SDK_VERSION:Ws,INTERNAL:{registerComponent:o,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){if("serverAuth"===e)return null;return e}}};function f(t){if(!Zo(c,t=t||Us))throw Ms.create("no-app",{appName:t});return c[t]}function o(n){var e,t,r,i=n.name;if(h.has(i))return Vs.debug("There were multiple attempts to register component "+i+"."),"PUBLIC"===n.type?l[i]:null;h.set(i,n),"PUBLIC"===n.type&&(r=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[i])throw Ms.create("invalid-app-argument",{appName:i});return t[i]()},void 0!==n.serviceProps&&Do(r,n.serviceProps),l[i]=r,u.prototype[i]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,i).apply(this,n.multipleInstances?t:[])});try{for(var o=wo(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return"PUBLIC"===n.type?l[i]:null}return l.default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l}var M=function t(){var e=Hs(qs);return e.INTERNAL=mo(mo({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Do(e,t)},createSubscribe:os,ErrorFactory:zo,deepExtend:Do}),e}(),Gs=(Ks.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){t=t.getComponent();return"VERSION"===(null==t?void 0:t.type)}(t)){t=t.getImmediate();return t.library+"/"+t.version}return null}).filter(function(t){return t}).join(" ")},Ks);function Ks(t){this.container=t}"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(Vs.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(du=self.firebase.SDK_VERSION)&&0<=du.indexOf("LITE")&&Vs.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var zs=M.initializeApp;M.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return}}()&&Vs.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),zs.apply(void 0,t)};var Qs,Xs,Ql=M;(Qs=Ql).INTERNAL.registerComponent(new bs("platform-logger",function(t){return new Gs(t)},"PRIVATE")),Qs.registerVersion(Fs,"0.6.12",Xs),Qs.registerVersion("fire-js","");Ql.registerVersion("firebase","8.0.0","app");(function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var u=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=u;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function s(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function a(e){return e instanceof s?e:new s(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){var e;null==this.a&&(this.a=[],(e=this).c(function(){e.g()})),this.a.push(t)};var n=u.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},s.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.v),reject:t(this.g)}},s.prototype.v=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof s)this.o(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.m(t):this.h(t)}},s.prototype.m=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},s.prototype.g=function(t){this.i(2,t)},s.prototype.h=function(t){this.i(1,t)},s.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},s.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return s.prototype.o=function(t){var e=this.f();t.Pa(e.resolve,e.reject)},s.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},s.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new s(function(t,e){r=t,i=e});return this.Pa(n(t,r),n(e,i)),o},s.prototype.catch=function(t){return this.then(void 0,t)},s.prototype.Pa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},s.resolve=a,s.reject=function(n){return new s(function(t,e){e(n)})},s.race=function(i){return new s(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())a(r.value).Pa(t,e)})},s.all=function(t){var e=c(t),o=e.next();return o.done?a([]):new s(function(n,t){for(var r=[],i=0;r.push(void 0),i++,a(o.value).Pa(function(e){return function(t){r[e]=t,0==--i&&n(r)}}(r.length-1),t),!(o=e.next()).done;);})},s});var h=h||{},l=this||self,a=/^[\w+/_-]+[=]{0,2}$/,f=null;function s(){}function n(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function p(t){var e=n(t);return"array"==e||"object"==e&&"number"==typeof t.length}function d(t){return"function"==n(t)}function v(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var e="closure_uid_"+(1e9*Math.random()>>>0),r=0;function i(t,e,n){return t.call.apply(t.bind,arguments)}function y(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?i:y).apply(null,arguments)}function m(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var b=Date.now||function(){return+new Date};function _(t,e){function n(){}n.prototype=e.prototype,t.$a=e.prototype,t.prototype=new n,t.prototype.constructor=t}function w(t,e,n){this.code=T+t,this.message=e||S[t]||"",this.a=n||null}function E(t){var e=t&&t.code;return e?new w(e.substring(T.length),t.message,t.serverResponse):null}_(w,Error),w.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},w.prototype.toJSON=function(){return this.w()};var I,T="auth/",S={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},C={kd:{Sa:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},rd:{Sa:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://securetoken.googleapis.com/v1/token",Va:"https://identitytoolkit.googleapis.com/v2/",id:"p"},td:{Sa:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Ya:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Va:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},ud:{Sa:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Ya:"https://test-securetoken.sandbox.googleapis.com/v1/token",Va:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in C)if(C[e].id===t)return t=C[e],{firebaseEndpoint:t.Sa,secureTokenEndpoint:t.Ya,identityPlatformEndpoint:t.Va};return null}function A(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function k(t){var e;Error.captureStackTrace?Error.captureStackTrace(this,k):(e=Error().stack)&&(this.stack=e),t&&(this.message=String(t))}function O(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");k.call(this,n+t[r])}function P(t){throw new O("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function D(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function R(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function x(){this.b=this.a=null}I=N("__EID__")?"__EID__":void 0,_(k,Error),k.prototype.name="CustomError",_(O,k),O.prototype.name="AssertionError",D.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t};var L=new D(function(){return new M},function(t){t.reset()});function M(){this.next=this.b=this.a=null}x.prototype.add=function(t,e){var n=L.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},M.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},M.prototype.reset=function(){this.next=this.b=this.a=null};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},U=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var j=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n,r=t.length,i=[],o=0,s="string"==typeof t?t.split(""):t,a=0;a<r;a++){a in s&&(n=s[a],e.call(void 0,n,a,t)&&(i[o++]=n))}return i},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},q=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function B(t,e){return 0<=F(t,e)}function W(t,e){var n;return(n=0<=(e=F(t,e)))&&Array.prototype.splice.call(t,e,1),n}function H(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function G(){return Array.prototype.concat.apply([],arguments)}function K(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var z,Q=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},X=/&/g,Y=/</g,J=/>/g,$=/"/g,Z=/'/g,tt=/\x00/g,et=/[\x00&<>"']/;function nt(t,e){return-1!=t.indexOf(e)}function rt(t,e){return t<e?-1:e<t?1:0}t:{var it=l.navigator;if(it){it=it.userAgent;if(it){z=it;break t}}z=""}function ot(t){return nt(z,t)}function st(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function at(t){for(var e in t)return;return 1}function ut(t){var e,n={};for(e in t)n[e]=t[e];return n}var ct="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ht(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<ct.length;i++)e=ct[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function lt(t,e){t:{try{var n=t&&t.ownerDocument,n=n&&(n.defaultView||n.parentWindow);if((n=n||l).Element&&n.Location){var r=n;break t}}catch(t){}r=null}if(r&&void 0!==r[e]&&(!t||!(t instanceof r[e])&&(t instanceof r.Location||t instanceof r.Element))){if(v(t))try{var i=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){i="<object could not be stringified>"}else i=void 0===t?"undefined":null===t?"null":typeof t;P("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,i)}}function ft(t,e){this.a=t===vt&&e||"",this.b=dt}function pt(t){return t instanceof ft&&t.constructor===ft&&t.b===dt?t.a:(P("expected object of type Const, got '"+t+"'"),"type_error:Const")}ft.prototype.sa=!0,ft.prototype.ra=function(){return this.a},ft.prototype.toString=function(){return"Const{"+this.a+"}"};var dt={},vt={},yt=new ft(vt,"");function gt(t,e){this.a=t===It&&e||"",this.b=Et}function mt(t){return t instanceof gt&&t.constructor===gt&&t.b===Et?t.a:(P("expected object of type TrustedResourceUrl, got '"+t+"' of type "+n(t)),"type_error:TrustedResourceUrl")}function bt(t,n){var r=pt(t);if(!wt.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(_t,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof ft?pt(t):encodeURIComponent(String(t))}),new gt(It,t)}gt.prototype.sa=!0,gt.prototype.ra=function(){return this.a.toString()},gt.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var _t=/%{(\w+)}/g,wt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Et={},It={};function Tt(t,e){this.a=t===kt&&e||"",this.b=At}function St(t){return t instanceof Tt&&t.constructor===Tt&&t.b===At?t.a:(P("expected object of type SafeUrl, got '"+t+"' of type "+n(t)),"type_error:SafeUrl")}Tt.prototype.sa=!0,Tt.prototype.ra=function(){return this.a.toString()},Tt.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Ct=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Nt(t){return t instanceof Tt?t:(t="object"==typeof t&&t.sa?t.ra():String(t),Ct.test(t)||(t="about:invalid#zClosurez"),new Tt(kt,t))}var At={},kt={};function Ot(){this.a="",this.b=Dt}function Pt(t){return t instanceof Ot&&t.constructor===Ot&&t.b===Dt?t.a:(P("expected object of type SafeHtml, got '"+t+"' of type "+n(t)),"type_error:SafeHtml")}Ot.prototype.sa=!0,Ot.prototype.ra=function(){return this.a.toString()},Ot.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Dt={};function Rt(t){var e=new Ot;return e.a=t,e}Rt("<!DOCTYPE html>");var xt=Rt("");function Lt(t){for(var e=t.split("%s"),n="",r=Array.prototype.slice.call(arguments,1);r.length&&1<e.length;)n+=e.shift()+r.shift();return n+e.join("%s")}function Mt(t){return et.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(X,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(Y,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(J,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace($,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(Z,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(tt,"&#0;"))),t}function Ft(t){return Ft[" "](t),t}Rt("<br>"),Ft[" "]=s;var Ut,jt=ot("Opera"),Vt=ot("Trident")||ot("MSIE"),qt=ot("Edge"),Bt=qt||Vt,Wt=ot("Gecko")&&!(nt(z.toLowerCase(),"webkit")&&!ot("Edge"))&&!(ot("Trident")||ot("MSIE"))&&!ot("Edge"),Ht=nt(z.toLowerCase(),"webkit")&&!ot("Edge");function Gt(){var t=l.document;return t?t.documentMode:void 0}t:{var Kt="",zt=(zt=z,Wt?/rv:([^\);]+)(\)|;)/.exec(zt):qt?/Edge\/([\d\.]+)/.exec(zt):Vt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(zt):Ht?/WebKit\/(\S+)/.exec(zt):jt?/(?:Version)[ \/]?(\S+)/.exec(zt):void 0);if(zt&&(Kt=zt?zt[1]:""),Vt){zt=Gt();if(null!=zt&&zt>parseFloat(Kt)){Ut=String(zt);break t}}Ut=Kt}var Qt,Xt={};function Yt(a){return t=a,e=function(){for(var t=0,e=Q(String(Ut)).split("."),n=Q(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=rt(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||rt(0==o[2].length,0==s[2].length)||rt(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=Xt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}Qt=l.document&&Vt?Gt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var Jt=!Vt||9<=Number(Qt);function $t(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function Zt(n,t){st(t,function(t,e){t&&"object"==typeof t&&t.sa&&(t=t.ra()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:ne.hasOwnProperty(e)?n.setAttribute(ne[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var te,ee,ne={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function re(){var t,e=arguments,n=document,r=String(e[0]),i=e[1];return!Jt&&i&&(i.name||i.type)&&(r=["<",r],i.name&&r.push(' name="',Mt(i.name),'"'),i.type&&(r.push(' type="',Mt(i.type),'"'),ht(t={},i),delete t.type,i=t),r.push(">"),r=r.join("")),r=ie(n,r),i&&("string"==typeof i?r.className=i:Array.isArray(i)?r.className=i.join(" "):Zt(r,i)),2<e.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];!p(o)||v(o)&&0<o.nodeType?r(o):U(function(t){if(t&&"number"==typeof t.length){if(v(t))return"function"==typeof t.item||"string"==typeof t.item;if(d(t))return"function"==typeof t.item}return!1}(o)?K(o):o,r)}}(n,r,e),r}function ie(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function oe(t){l.setTimeout(function(){throw t},0)}function se(){var t=l.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ot("Presto")&&(t=function(){var t,e,n=ie(document,"IFRAME");n.style.display="none",t=n,e=new gt(It,pt(yt)),lt(t,"HTMLIFrameElement"),t.src=mt(e).toString(),document.documentElement.appendChild(n);var r=n.contentWindow;(n=r.document).open(),n.write(Pt(xt)),n.close();var i="callImmediate"+Math.random(),o="file:"==r.location.protocol?"*":r.location.protocol+"//"+r.location.host;n=g(function(t){"*"!=o&&t.origin!=o||t.data!=i||this.port1.onmessage()},this),r.addEventListener("message",n,!1),this.port1={},this.port2={postMessage:function(){r.postMessage(i,o)}}}),void 0===t||ot("Trident")||ot("MSIE"))return function(t){l.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){var t;void 0!==n.next&&(t=(n=n.next).Fb,n.Fb=null,t())},function(t){r.next={Fb:t},r=r.next,e.port2.postMessage(0)}}function ae(t,e){ee||function(){{var t;ee=l.Promise&&l.Promise.resolve?(t=l.Promise.resolve(void 0),function(){t.then(he)}):function(){var t=he;!d(l.setImmediate)||l.Window&&l.Window.prototype&&!ot("Edge")&&l.Window.prototype.setImmediate==l.setImmediate?(te=te||se())(t):l.setImmediate(t)}}}(),ue||(ee(),ue=!0),ce.add(t,e)}var ue=!1,ce=new x;function he(){for(var t,e,n;n=e=void 0,n=null,(e=ce).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){oe(t)}R(L,t)}ue=!1}function le(t,e){if(this.a=fe,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=s)try{var n=this;t.call(e,function(t){Te(n,pe,t)},function(t){if(!(t instanceof Pe))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Te(n,de,t)})}catch(t){Te(this,de,t)}}var fe=0,pe=2,de=3;function ve(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}ve.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var ye=new D(function(){return new ve},function(t){t.reset()});function ge(t,e,n){var r=ye.get();return r.g=t,r.b=e,r.f=n,r}function me(t){if(t instanceof le)return t;var e=new le(s);return Te(e,pe,t),e}function be(n){return new le(function(t,e){e(n)})}function _e(t,e,n){Se(t,e,n,null)||ae(m(e,t))}function we(n){return new le(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Ob:!0,value:n}:{Ob:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)_e(n[e],m(t,e,!0),m(t,e,!1));else r(o)})}function Ee(t,e){t.b||t.a!=pe&&t.a!=de||Ce(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ie(t,i,o,s){var e=ge(null,null,null);return e.a=new le(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof Pe?r(t):n(e)}catch(t){r(t)}}:r}),Ee(e.a.c=t,e),e.a}function Te(t,e,n){var r,i;t.a==fe&&(t===n&&(e=de,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Se(n,t.Zc,t.$c,t)||(t.i=n,t.a=e,t.c=null,Ce(t),e!=de||n instanceof Pe||(i=n,(r=t).g=!0,ae(function(){r.g&&Oe.call(null,i)}))))}function Se(t,e,n,r){if(t instanceof le)return Ee(t,ge(e||s,n||null,r)),1;if(A(t))return t.then(e,n,r),1;if(v(t))try{var i=t.then;if(d(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function Ce(t){t.h||(t.h=!0,ae(t.fc,t))}function Ne(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Ae(t,e,n,r){if(n==de&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,ke(e,n,r);else try{e.c?e.g.call(e.f):ke(e,n,r)}catch(t){Oe.call(null,t)}R(ye,e)}function ke(t,e,n){e==pe?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}le.prototype.then=function(t,e,n){return Ie(this,d(t)?t:null,d(e)?e:null,n)},le.prototype.$goog_Thenable=!0,(t=le.prototype).na=function(t,e){return(t=ge(t,t,e)).c=!0,Ee(this,t),this},t.s=function(t,e){return Ie(this,null,t,e)},t.cancel=function(t){var e;this.a==fe&&(e=new Pe(t),ae(function(){!function t(e,n){if(e.a==fe)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==fe&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):Ne(r),Ae(r,o,de,n)))}e.c=null}else Te(e,de,n)}(this,e)},this))},t.Zc=function(t){this.a=fe,Te(this,pe,t)},t.$c=function(t){this.a=fe,Te(this,de,t)},t.fc=function(){for(var t;t=Ne(this);)Ae(this,t,this.a,this.i);this.h=!1};var Oe=oe;function Pe(t){k.call(this,t)}function De(){this.xa=this.xa,this.oa=this.oa}_(Pe,k);var Re=0;function xe(t){t.xa||(t.xa=!0,t.Da(),0==Re)||(t=t,Object.prototype.hasOwnProperty.call(t,e)&&t[e]||(t[e]=++r))}De.prototype.xa=!(Pe.prototype.name="cancel"),De.prototype.Da=function(){if(this.oa)for(;this.oa.length;)this.oa.shift()()};var Le=Object.freeze||function(t){return t},Me=!Vt||9<=Number(Qt),Fe=Vt&&!Yt("9"),Ue=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{l.addEventListener("test",s,e),l.removeEventListener("test",s,e)}catch(t){}return t}();function je(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ve(t,e){if(je.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Wt){t:{try{Ft(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:qe[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}je.prototype.preventDefault=function(){this.defaultPrevented=!0},_(Ve,je);var qe=Le({2:"touch",3:"pen",4:"mouse"});Ve.prototype.preventDefault=function(){Ve.$a.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Fe)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},Ve.prototype.g=function(){return this.a};var Be="closure_listenable_"+(1e6*Math.random()|0),We=0;function He(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ua=i,this.key=++We,this.va=this.Oa=!1}function Ge(t){t.va=!0,t.listener=null,t.proxy=null,t.src=null,t.Ua=null}function Ke(t){this.src=t,this.a={},this.b=0}function ze(t,e){var n=e.type;n in t.a&&W(t.a[n],e)&&(Ge(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function Qe(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.va&&o.listener==e&&o.capture==!!n&&o.Ua==r)return i}return-1}Ke.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Qe(t,e,r,i);return-1<s?(e=t[s],n||(e.Oa=!1)):((e=new He(e,this.src,o,!!r,i)).Oa=n,t.push(e)),e};var Xe="closure_lm_"+(1e6*Math.random()|0),Ye={};function Je(t,e,n,r,i){if(r&&r.once)Ze(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)Je(t,e[o],n,r,i);else n=cn(n),t&&t[Be]?ln(t,e,n,v(r)?!!r.capture:!!r,i):$e(t,e,n,!1,r,i)}function $e(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=v(i)?!!i.capture:!!i,c=an(t);if(c||(t[Xe]=c=new Ke(t)),!(n=c.add(e,n,r,u,o)).proxy)if(s=sn,r=a=Me?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Ue||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(nn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function Ze(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Ze(t,e[o],n,r,i);else n=cn(n),t&&t[Be]?fn(t,e,n,v(r)?!!r.capture:!!r,i):$e(t,e,n,!0,r,i)}function tn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)tn(t,e[o],n,r,i);else r=v(r)?!!r.capture:!!r,n=cn(n),t&&t[Be]?(t=t.v,(e=String(e).toString())in t.a&&(-1<(n=Qe(o=t.a[e],n,r,i))&&(Ge(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&an(t))&&(e=t.a[e.toString()],t=-1,e&&(t=Qe(e,n,r,i)),(n=-1<t?e[t]:null)&&en(n))}function en(t){var e,n,r;"number"!=typeof t&&t&&!t.va&&((e=t.src)&&e[Be]?ze(e.v,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(nn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=an(e))?(ze(n,t),0==n.b&&(n.src=null,e[Xe]=null)):Ge(t)))}function nn(t){return t in Ye?Ye[t]:Ye[t]="on"+t}function rn(t,e,n,r){var i=!0;if((t=an(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.va&&(o=on(o,r),i=i&&!1!==o)}return i}function on(t,e){var n=t.listener,r=t.Ua||t.src;return t.Oa&&en(t),n.call(r,e)}function sn(t,e){if(t.va)return!0;if(Me)return on(t,new Ve(e,this));if(!e)t:{e=["window","event"];for(var n=l,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ve(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=rn(r[i],t,!0,e),n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=rn(r[i],t,!1,e),n=n&&o}return n}function an(t){return(t=t[Xe])instanceof Ke?t:null}var un="__closure_events_fn_"+(1e9*Math.random()>>>0);function cn(e){return d(e)?e:(e[un]||(e[un]=function(t){return e.handleEvent(t)}),e[un])}function hn(){De.call(this),this.v=new Ke(this),(this.$b=this).fb=null}function ln(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function fn(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function pn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.va&&u.capture==n&&(s=u.listener,a=u.Ua||u.src,u.Oa&&ze(t.v,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}function dn(t,e,n){if(d(t))n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:l.setTimeout(t,e||0)}function vn(n){var r=null;return new le(function(t,e){-1==(r=dn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).s(function(t){throw l.clearTimeout(r),t})}function yn(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function gn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.V||"function"!=typeof t.V){if(p(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function mn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof mn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function bn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];_n(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)_n(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function _n(t,e){return Object.prototype.hasOwnProperty.call(t,e)}_(hn,De),hn.prototype[Be]=!0,hn.prototype.addEventListener=function(t,e,n,r){Je(this,t,e,n,r)},hn.prototype.removeEventListener=function(t,e,n,r){tn(this,t,e,n,r)},hn.prototype.dispatchEvent=function(t){var e,n=this.fb;if(n)for(e=[];n;n=n.fb)e.push(n);n=this.$b;var r=t.type||t;if("string"==typeof t?t=new je(t,n):t instanceof je?t.target=t.target||n:(s=t,ht(t=new je(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.b=e[i],s=pn(o,r,!0,t)&&s;if(s=pn(o=t.b=n,r,!0,t)&&s,s=pn(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=pn(o=t.b=e[i],r,!1,t)&&s;return s},hn.prototype.Da=function(){if(hn.$a.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ge(n[r]);delete e.a[t],e.b--}}this.fb=null},(t=mn.prototype).V=function(){bn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return bn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return _n(this.b,t)?this.b[t]:e},t.set=function(t,e){_n(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var wn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function En(t,e){var n;this.a=this.l=this.f="",this.g=null,this.h=this.c="",this.i=!1,t instanceof En?(this.i=void 0!==e?e:t.i,In(this,t.f),this.l=t.l,this.a=t.a,Tn(this,t.g),this.c=t.c,Sn(this,Hn(t.b)),this.h=t.h):t&&(n=String(t).match(wn))?(this.i=!!e,In(this,n[1]||"",!0),this.l=On(n[2]||""),this.a=On(n[3]||"",!0),Tn(this,n[4]),this.c=On(n[5]||"",!0),Sn(this,n[6]||"",!0),this.h=On(n[7]||"")):(this.i=!!e,this.b=new Un(null,this.i))}function In(t,e,n){t.f=n?On(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Tn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.g=e}else t.g=null}function Sn(t,e,n){var r,i;e instanceof Un?(t.b=e,r=t.b,(i=t.i)&&!r.f&&(jn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(qn(this,e),Wn(this,n,t))},r)),r.f=i):(n||(e=Pn(e,Mn)),t.b=new Un(e,t.i))}function Cn(t,e,n){t.b.set(e,n)}function Nn(t,e){return t.b.get(e)}function An(t){return t instanceof En?new En(t):new En(t,void 0)}function kn(t,e,n,r){var i=new En(null,void 0);return t&&In(i,t),e&&(i.a=e),n&&Tn(i,n),r&&(i.c=r),i}function On(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Pn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Dn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Dn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}En.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Pn(e,Rn,!0),":");var n=this.a;return!n&&"file"!=e||(t.push("//"),(e=this.l)&&t.push(Pn(e,Rn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.c)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Pn(n,"/"==n.charAt(0)?Ln:xn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Pn(n,Fn)),t.join("")},En.prototype.resolve=function(t){var e=new En(this),n=!!t.f;n?In(e,t.f):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r,i=t.c;if(n)Tn(e,t.g);else if(n=!!t.c){if("/"!=i.charAt(0)&&(this.a&&!this.c?i="/"+i:-1!=(r=e.c.lastIndexOf("/"))&&(i=e.c.substr(0,r+1)+i)),".."==(r=i)||"."==r)i="";else if(nt(r,"./")||nt(r,"/.")){i=0==r.lastIndexOf("/",0),r=r.split("/");for(var o=[],s=0;s<r.length;){var a=r[s++];"."==a?i&&s==r.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),i&&s==r.length&&o.push("")):(o.push(a),i=!0)}i=o.join("/")}else i=r}return n?e.c=i:n=""!==t.b.toString(),n?Sn(e,Hn(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Rn=/[#\/\?@]/g,xn=/[#\?:]/g,Ln=/[#\?]/g,Mn=/[#\?@]/g,Fn=/#/g;function Un(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function jn(n){n.a||(n.a=new mn,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Vn(t){var e=gn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Un(null,void 0);t=yn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Wn(n,i,o):n.add(i,o)}return n}function qn(t,e){jn(t),e=Gn(t,e),_n(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,_n((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&bn(t)))}function Bn(t,e){return jn(t),e=Gn(t,e),_n(t.a.b,e)}function Wn(t,e,n){qn(t,e),0<n.length&&(t.c=null,t.a.set(Gn(t,e),K(n)),t.b+=n.length)}function Hn(t){var e=new Un;return e.c=t.c,t.a&&(e.a=new mn(t.a),e.b=t.b),e}function Gn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Kn(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&(s=n[i],"function"!=typeof s&&(r.push(o),Yn(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":Yn(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new zn,t,e),e.join("")}function zn(){}(t=Un.prototype).add=function(t,e){jn(this),this.c=null,t=Gn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){jn(this),this.a.forEach(function(t,e){U(t,function(t){n.call(r,t,e,this)},this)},this)},t.Y=function(){jn(this);for(var t=this.a.V(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){jn(this);var e=[];if("string"==typeof t)Bn(this,t)&&(e=G(e,this.a.get(Gn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=G(e,t[n])}return e},t.set=function(t,e){return jn(this),this.c=null,Bn(this,t=Gn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.V(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Qn={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},Xn=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function Yn(t,e){e.push('"',t.replace(Xn,function(t){var e=Qn[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),Qn[t]=e),e}),'"')}function Jn(){var t=yr();return Vt&&Qt&&11==Qt||/Edge\/\d+/.test(t)}function $n(){return l.window&&l.window.location.href||self&&self.location&&self.location.href||""}function Zn(t,e){e=e||l.window;var n="about:blank";t&&(n=St(Nt(t))),e.location.href=n}function tr(t){return!!((t=(t||yr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function er(t){t=t||l.window;try{t.close()}catch(t){}}function nr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=yr().toLowerCase(),r&&(e.target=r,nt(n,"crios/")&&(e.target="_blank")),pr(yr())==lr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Tt?n:Nt(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ot("iPhone")&&!ot("iPod")&&!ot("iPad")||ot("iPad")||ot("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(lt(s=ie(document,"A"),"HTMLAnchorElement"),e instanceof Tt||e instanceof Tt||(e="object"==typeof e&&e.sa?e.ra():String(e),Ct.test(e)||(e="about:invalid#zClosurez"),e=new Tt(kt,e)),s.href=St(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=St(e),s&&(Bt&&nt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=Rt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Mt(t)+'">'),r=s.document)&&(r.write(Pt(t)),r.close())):(s=r.open(St(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var rr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ir=/^[^@]+@[^@]+$/;function or(){var e=null;return new le(function(t){"complete"==l.document.readyState?t():(e=function(){t()},Ze(window,"load",e))}).s(function(t){throw tn(window,"load",e),t})}function sr(t){return t=t||yr(),!("file:"!==wr()&&"ionic:"!==wr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function ar(){var t=l.window;try{return t&&t!=t.top}catch(t){return}}function ur(){return void 0!==l.WorkerGlobalScope&&"function"==typeof l.importScripts}function cr(){return Ql.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Ql.INTERNAL.hasOwnProperty("node")?"Node":ur()?"Worker":"Browser"}function hr(){var t=cr();return"ReactNative"===t||"Node"===t}var lr="Firefox",fr="Chrome";function pr(t){var e=t.toLowerCase();return nt(e,"opera/")||nt(e,"opr/")||nt(e,"opios/")?"Opera":nt(e,"iemobile")?"IEMobile":nt(e,"msie")||nt(e,"trident/")?"IE":nt(e,"edge/")?"Edge":nt(e,"firefox/")?lr:nt(e,"silk/")?"Silk":nt(e,"blackberry")?"Blackberry":nt(e,"webos")?"Webos":!nt(e,"safari/")||nt(e,"chrome/")||nt(e,"crios/")||nt(e,"android")?!nt(e,"chrome/")&&!nt(e,"crios/")||nt(e,"edge/")?nt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":fr:"Safari"}var dr={ld:"FirebaseCore-web",nd:"FirebaseUI-web"};function vr(t,e){e=e||[];var n,r=[],i={};for(n in dr)i[dr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=cr())?r=pr(i=yr()):"Worker"===r&&(r=pr(i=yr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function yr(){return l.navigator&&l.navigator.userAgent||""}function gr(t,e){t=t.split("."),e=e||l;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function mr(){try{var t=l.localStorage,e=Cr();if(t)return t.setItem(e,"1"),t.removeItem(e),!Jn()||!!l.indexedDB}catch(t){return ur()&&!!l.indexedDB}return!1}function br(){return(_r()||"chrome-extension:"===wr()||sr())&&!hr()&&mr()&&!ur()}function _r(){return"http:"===wr()||"https:"===wr()}function wr(){return l.location&&l.location.protocol||null}function Er(t){return!tr(t=t||yr())&&pr(t)!=lr}function Ir(t){return void 0===t?null:Kn(t)}function Tr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Sr(t){if(null!==t)return JSON.parse(t)}function Cr(t){return t||Math.floor(1e9*Math.random()).toString()}function Nr(t){return"Safari"!=pr(t=t||yr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Ar(){var t=l.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function kr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=yr(),e=cr(),this.b=tr(t)||"ReactNative"===e}function Or(){var t=l.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Pr(t){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t)}function Dr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function Rr(){return gr("fireauth.oauthhelper",l)||gr("fireauth.iframe",l)}kr.prototype.get=function(){var t=l.navigator;return!t||"boolean"!=typeof t.onLine||!_r()&&"chrome-extension:"!==wr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var xr,Lr={};function Mr(t){Lr[t]||(Lr[t]=!0,Pr(t))}try{var Fr={};Object.defineProperty(Fr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Fr,"abcd",{configurable:!0,enumerable:!0,value:2}),xr=2==Fr.abcd}catch(t){xr=!1}function Ur(t,e,n){xr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function jr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Ur(t,n,e[n])}function Vr(t){var e={};return jr(e,t),e}function qr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Ur(e,n,qr(t[n]));return e}function Br(t){var e=t&&(t[zr]?"phone":null);if(!(e&&t&&t[Kr]))throw new w("internal-error","Internal assert: invalid MultiFactorInfo object");Ur(this,"uid",t[Kr]),Ur(this,"displayName",t[Hr]||null);var n=null;t[Gr]&&(n=new Date(t[Gr]).toUTCString()),Ur(this,"enrollmentTime",n),Ur(this,"factorId",e)}function Wr(t){try{var e=new Qr(t)}catch(t){e=null}return e}Br.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Hr="displayName",Gr="enrolledAt",Kr="mfaEnrollmentId",zr="phoneInfo";function Qr(t){Br.call(this,t),Ur(this,"phoneNumber",t[zr])}function Xr(t){var e={},n=t[Zr],r=t[ei],i=t[ni];if(t=Wr(t[ti]),!i||i!=Jr&&i!=$r&&!n||i==$r&&!r||i==Yr&&!t)throw Error("Invalid checkActionCode response!");i==$r?(e[ii]=n||null,e[si]=n||null,e[ri]=r):(e[ii]=r||null,e[si]=r||null,e[ri]=n||null),e[oi]=t||null,Ur(this,ui,i),Ur(this,ai,qr(e))}_(Qr,Br),Qr.prototype.w=function(){var t=Qr.$a.w.call(this);return t.phoneNumber=this.phoneNumber,t};var Yr="REVERT_SECOND_FACTOR_ADDITION",Jr="EMAIL_SIGNIN",$r="VERIFY_AND_CHANGE_EMAIL",Zr="email",ti="mfaInfo",ei="newEmail",ni="requestType",ri="email",ii="fromEmail",oi="multiFactorInfo",si="previousEmail",ai="data",ui="operation";function ci(t){var e=Nn(t=An(t),hi)||null,n=Nn(t,li)||null,r=(r=Nn(t,di)||null)&&yi[r]||null;if(!e||!n||!r)throw new w("argument-error",hi+", "+li+"and "+di+" are required in a valid action code URL.");jr(this,{apiKey:e,operation:r,code:n,continueUrl:Nn(t,fi)||null,languageCode:Nn(t,pi)||null,tenantId:Nn(t,vi)||null})}var hi="apiKey",li="oobCode",fi="continueUrl",pi="languageCode",di="mode",vi="tenantId",yi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:Yr,signIn:Jr,verifyAndChangeEmail:$r,verifyEmail:"VERIFY_EMAIL"};function gi(t){try{return new ci(t)}catch(t){return null}}function mi(t){var e=t[Ii];if(void 0===e)throw new w("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new w("invalid-continue-uri");if(this.h=e,this.b=this.a=null,this.g=!1,(r=t[bi])&&"object"==typeof r){e=r[Ci];var n=r[Ti],r=r[Si];if("string"==typeof e&&e.length){if(this.a=e,void 0!==n&&"boolean"!=typeof n)throw new w("argument-error",Ti+" property must be a boolean when specified.");if(this.g=!!n,void 0!==r&&("string"!=typeof r||"string"==typeof r&&!r.length))throw new w("argument-error",Si+" property must be a non empty string when specified.");this.b=r||null}else{if(void 0!==e)throw new w("argument-error",Ci+" property must be a non empty string when specified.");if(void 0!==n||void 0!==r)throw new w("missing-android-pkg-name")}}else if(void 0!==r)throw new w("argument-error",bi+" property must be a non null object when specified.");if(this.f=null,(e=t[Ei])&&"object"==typeof e){if("string"==typeof(e=e[Ni])&&e.length)this.f=e;else if(void 0!==e)throw new w("argument-error",Ni+" property must be a non empty string when specified.")}else if(void 0!==e)throw new w("argument-error",Ei+" property must be a non null object when specified.");if(void 0!==(e=t[wi])&&"boolean"!=typeof e)throw new w("argument-error",wi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[_i])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new w("argument-error",_i+" property must be a non empty string when specified.");this.i=t||null}var bi="android",_i="dynamicLinkDomain",wi="handleCodeInApp",Ei="iOS",Ii="url",Ti="installApp",Si="minimumVersion",Ci="packageName",Ni="bundleId";function Ai(t){var e,n={};for(e in n.continueUrl=t.h,n.canHandleCodeInApp=t.c,(n.androidPackageName=t.a)&&(n.androidMinimumVersion=t.b,n.androidInstallApp=t.g),n.iOSBundleId=t.f,n.dynamicLinkDomain=t.i,n)null===n[e]&&delete n[e];return n}var ki=null;function Oi(t){var e="";return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=ki[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!ki){ki={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===ki[o]&&(ki[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}function Pi(t){var e=Ri(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Di(t){try{return new Pi(t)}catch(t){return null}}function Ri(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Oi(t))}catch(t){}return null}Pi.prototype.S=function(){return this.f},Pi.prototype.i=function(){return this.b},Pi.prototype.toString=function(){return this.g};var xi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Li=["client_id","response_type","scope","redirect_uri","state"],Mi={md:{Ja:"locale",ua:700,ta:600,fa:"facebook.com",Wa:Li},od:{Ja:null,ua:500,ta:750,fa:"github.com",Wa:Li},pd:{Ja:"hl",ua:515,ta:680,fa:"google.com",Wa:Li},vd:{Ja:"lang",ua:485,ta:705,fa:"twitter.com",Wa:xi},jd:{Ja:"locale",ua:640,ta:600,fa:"apple.com",Wa:[]}};function Fi(t){for(var e in Mi)if(Mi[e].fa==t)return Mi[e];return null}function Ui(t){var e={};e["facebook.com"]=Wi,e["google.com"]=Gi,e["github.com"]=Hi,e["twitter.com"]=Ki;var n=t&&t[Vi];try{if(n)return new(e[n]?e[n]:Bi)(t);if(void 0!==t[ji])return new qi(t)}catch(t){}return null}var ji="idToken",Vi="providerId";function qi(t){var e,n=t[Vi];if(n||!t[ji]||(e=Di(t[ji]))&&e.a&&(n=e.a),!n)throw Error("Invalid additional user info!");"anonymous"!=n&&"custom"!=n||(n=null),e=!1,void 0!==t.isNewUser?e=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(e=!0),Ur(this,"providerId",n),Ur(this,"isNewUser",e)}function Bi(t){qi.call(this,t),Ur(this,"profile",qr((t=Sr(t.rawUserInfo||"{}"))||{}))}function Wi(t){if(Bi.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Hi(t){if(Bi.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Ur(this,"username",this.profile&&this.profile.login||null)}function Gi(t){if(Bi.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ki(t){if(Bi.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Ur(this,"username",t.screenName||null)}function zi(t){var e=Nn(r=An(t),"link"),n=Nn(An(e),"link"),r=Nn(r,"deep_link_id");return Nn(An(r),"link")||r||n||e||t}function Qi(t,e){if(!t&&!e)throw new w("internal-error","Internal assert: no raw session string available");if(t&&e)throw new w("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?Xi:Yi}_(Bi,qi),_(Wi,Bi),_(Hi,Bi),_(Gi,Bi),_(Ki,Bi);var Xi="enroll",Yi="signin";function Ji(){}function $i(t,n){return t.then(function(t){if(t[qs]){var e=Di(t[qs]);if(!e||n!=e.h)throw new w("user-mismatch");return t}throw new w("user-mismatch")}).s(function(t){throw t&&t.code&&t.code==T+"user-not-found"?new w("user-mismatch"):t})}function Zi(t,e){if(!e)throw new w("internal-error","failed to construct a credential");this.a=e,Ur(this,"providerId",t),Ur(this,"signInMethod",t)}function to(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function eo(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new Zi(t.providerId,t.pendingToken)}catch(t){}return null}function no(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Ur(this,"idToken",e.idToken),e.accessToken&&Ur(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Ur(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new w("internal-error","failed to construct a credential");Ur(this,"accessToken",e.oauthToken),Ur(this,"secret",e.oauthTokenSecret)}Ur(this,"providerId",t),Ur(this,"signInMethod",n)}function ro(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Vn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function io(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new no(t.providerId,e,t.signInMethod)}catch(t){}}return null}function oo(t,e){this.Pc=e||[],jr(this,{providerId:t,isOAuthProvider:!0}),this.Hb={},this.ob=(Fi(t)||{}).Ja||null,this.nb=null}function so(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new w("argument-error",'SAML provider IDs must be prefixed with "saml."');oo.call(this,t,[])}function ao(t){oo.call(this,t,Li),this.a=[]}function uo(){ao.call(this,"facebook.com")}function co(t){if(!t)throw new w("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new uo).credential({accessToken:e})}function ho(){ao.call(this,"github.com")}function lo(t){if(!t)throw new w("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return v(t)&&(e=t.accessToken),(new ho).credential({accessToken:e})}function fo(){ao.call(this,"google.com"),this.Ca("profile")}function po(t,e){var n=t;return v(t)&&(n=t.idToken,e=t.accessToken),(new fo).credential({idToken:n,accessToken:e})}function vo(){oo.call(this,"twitter.com",xi)}function yo(t,e){var n=t;if(v(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new w("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new no("twitter.com",n,"twitter.com")}function go(t,e,n){this.a=t,this.f=e,Ur(this,"providerId","password"),Ur(this,"signInMethod",n===bo.EMAIL_LINK_SIGN_IN_METHOD?bo.EMAIL_LINK_SIGN_IN_METHOD:bo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function mo(t){return t&&t.email&&t.password?new go(t.email,t.password,t.signInMethod):null}function bo(){jr(this,{providerId:"password",isOAuthProvider:!1})}function _o(t,e){if(!(e=wo(e)))throw new w("argument-error","Invalid email link!");return new go(t,e.code,bo.EMAIL_LINK_SIGN_IN_METHOD)}function wo(t){return(t=gi(t=zi(t)))&&t.operation===Jr?t:null}function Eo(t){if(!(t.cb&&t.bb||t.La&&t.ea))throw new w("internal-error");this.a=t,Ur(this,"providerId","phone"),this.fa="phone",Ur(this,"signInMethod","phone")}function Io(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return U(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new Eo(n)}return null}function To(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.cb,code:t.a.bb}}function So(t){try{this.a=t||Ql.auth()}catch(t){throw new w("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}jr(this,{providerId:"phone",isOAuthProvider:!1})}function Co(t,e){if(!t)throw new w("missing-verification-id");if(!e)throw new w("missing-verification-code");return new Eo({cb:t,bb:e})}function No(t){if(t.temporaryProof&&t.phoneNumber)return new Eo({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return po(o,n);case"facebook.com":return co(n);case"github.com":return lo(n);case"twitter.com":return yo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new Zi(e,s):new no(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new ao(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Ao(t){if(!t.isOAuthProvider)throw new w("invalid-oauth-provider")}function ko(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new w("invalid-auth-event");if(this.g&&this.a)throw new w("invalid-auth-event");if(this.g&&!this.f)throw new w("invalid-auth-event")}function Oo(t){return(t=t||{}).type?new ko(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&E(t.error),t.postBody,t.tenantId):null}function Po(){this.b=null,this.a=[]}Qi.prototype.Ha=function(){return this.a?me(this.a):me(this.b)},Qi.prototype.w=function(){return this.type==Xi?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},Ji.prototype.ja=function(){},Ji.prototype.b=function(){},Ji.prototype.c=function(){},Ji.prototype.w=function(){},Zi.prototype.ja=function(t){return ca(t,to(this))},Zi.prototype.b=function(t,e){var n=to(this);return n.idToken=e,ha(t,n)},Zi.prototype.c=function(t,e){return $i(la(t,to(this)),e)},Zi.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},no.prototype.ja=function(t){return ca(t,ro(this))},no.prototype.b=function(t,e){var n=ro(this);return n.idToken=e,ha(t,n)},no.prototype.c=function(t,e){return $i(la(t,ro(this)),e)},no.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},oo.prototype.Ka=function(t){return this.Hb=ut(t),this},_(so,oo),_(ao,oo),ao.prototype.Ca=function(t){return B(this.a,t)||this.a.push(t),this},ao.prototype.Pb=function(){return K(this.a)},ao.prototype.credential=function(t,e){e=v(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null};if(!e.idToken&&!e.accessToken)throw new w("argument-error","credential failed: must provide the ID token and/or the access token.");return new no(this.providerId,e,this.providerId)},_(uo,ao),Ur(uo,"PROVIDER_ID","facebook.com"),Ur(uo,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),_(ho,ao),Ur(ho,"PROVIDER_ID","github.com"),Ur(ho,"GITHUB_SIGN_IN_METHOD","github.com"),_(fo,ao),Ur(fo,"PROVIDER_ID","google.com"),Ur(fo,"GOOGLE_SIGN_IN_METHOD","google.com"),_(vo,oo),Ur(vo,"PROVIDER_ID","twitter.com"),Ur(vo,"TWITTER_SIGN_IN_METHOD","twitter.com"),go.prototype.ja=function(t){return this.signInMethod==bo.EMAIL_LINK_SIGN_IN_METHOD?Ka(t,ba,{email:this.a,oobCode:this.f}):Ka(t,qa,{email:this.a,password:this.f})},go.prototype.b=function(t,e){return this.signInMethod==bo.EMAIL_LINK_SIGN_IN_METHOD?Ka(t,_a,{idToken:e,email:this.a,oobCode:this.f}):Ka(t,Ra,{idToken:e,email:this.a,password:this.f})},go.prototype.c=function(t,e){return $i(this.ja(t),e)},go.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},jr(bo,{PROVIDER_ID:"password"}),jr(bo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),jr(bo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Eo.prototype.ja=function(t){return t.eb(To(this))},Eo.prototype.b=function(t,e){var n=To(this);return n.idToken=e,Ka(t,Wa,n)},Eo.prototype.c=function(t,e){var n=To(this);return n.operation="REAUTH",$i(t=Ka(t,Ha,n),e)},Eo.prototype.w=function(){var t={providerId:"phone"};return this.a.cb&&(t.verificationId=this.a.cb),this.a.bb&&(t.verificationCode=this.a.bb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},So.prototype.eb=function(r,i){var o=this.a.a;return me(i.verify()).then(function(n){if("string"!=typeof n)throw new w("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");if("recaptcha"!==i.type)throw new w("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.');var t=v(r)?r.session:null,e=v(r)?r.phoneNumber:r,t=t&&t.type==Xi?t.Ha().then(function(t){return Ka(o,La,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:n}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==Yi?t.Ha().then(function(t){return e=o,t={mfaPendingCredential:t,mfaEnrollmentId:r.multiFactorHint&&r.multiFactorHint.uid||r.multiFactorUid,phoneSignInInfo:{recaptchaToken:n}},Ka(e,Ma,t).then(function(t){return t.phoneResponseInfo.sessionInfo});var e}):Ka(o,Pa,{phoneNumber:e,recaptchaToken:n});return t.then(function(t){return"function"==typeof i.reset&&i.reset(),t},function(t){throw"function"==typeof i.reset&&i.reset(),t})})},jr(So,{PROVIDER_ID:"phone"}),jr(So,{PHONE_SIGN_IN_METHOD:"phone"}),ko.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},ko.prototype.S=function(){return this.h},ko.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Do,Ro=null;function xo(t){var e="unauthorized-domain",n=void 0,r=An(t);t=r.a,"chrome-extension"==(r=r.f)?n=Lt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Lt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",w.call(this,e,n)}function Lo(t,e,n){w.call(this,t,n),(t=e||{}).Ib&&Ur(this,"email",t.Ib),t.ea&&Ur(this,"phoneNumber",t.ea),t.credential&&Ur(this,"credential",t.credential),t.Yb&&Ur(this,"tenantId",t.Yb)}function Mo(t){if(t.code){var e=t.code||"";0==e.indexOf(T)&&(e=e.substring(T.length));var n={credential:No(t),Yb:t.tenantId};if(t.email)n.Ib=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new w(e,t.message||void 0);return new Lo(e,n,t.message)}return null}function Fo(){}function Uo(t){return t.c||(t.c=t.b())}function jo(){}function Vo(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function qo(){}function Bo(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=g(this.pc,this),this.a.onerror=g(this.Rb,this),this.a.onprogress=g(this.qc,this),this.a.ontimeout=g(this.uc,this)}function Wo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Ho(t,e,n){this.reset(t,e,n,void 0,void 0)}function Go(t){this.f=t,this.b=this.c=this.a=null}function Ko(t,e){this.name=t,this.value=e}_(xo,w),_(Lo,w),Lo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&ht(t,e),t},Lo.prototype.toJSON=function(){return this.w()},Fo.prototype.c=null,_(jo,Fo),jo.prototype.a=function(){var t=Vo(this);return t?new ActiveXObject(t):new XMLHttpRequest},jo.prototype.b=function(){var t={};return Vo(this)&&(t[0]=!0,t[1]=!0),t},Do=new jo,_(qo,Fo),qo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Bo;throw Error("Unsupported browser")},qo.prototype.b=function(){return{}},(t=Bo.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.pc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Wo(this,4)},t.Rb=function(){this.status=500,this.response=this.responseText="",Wo(this,4)},t.uc=function(){this.Rb()},t.qc=function(){this.status=200,Wo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Ho.prototype.a=null,Ho.prototype.reset=function(t,e,n,r,i){delete this.a},Ko.prototype.toString=function(){return this.name};var zo=new Ko("SEVERE",1e3),Qo=new Ko("WARNING",900),Xo=new Ko("CONFIG",700),Yo=new Ko("FINE",500);Go.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(P("Root logger has no level set."),null)}(this).value)for(d(e)&&(e=e()),t=new Ho(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var Jo,$o={},Zo=null;function ts(t){var e,n,r;return Zo||(Zo=new Go(""),($o[""]=Zo).c=Xo),(e=$o[t])||(e=new Go(t),r=t.lastIndexOf("."),n=t.substr(r+1),(r=ts(t.substr(0,r))).b||(r.b={}),(r.b[n]=e).a=r,$o[t]=e),e}function es(t,e){t&&t.log(Yo,e,void 0)}function ns(t){this.f=t}function rs(t){hn.call(this),this.o=t,this.readyState=is,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=ts("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}_(ns,Fo),ns.prototype.a=function(){return new rs(this.f)},ns.prototype.b=(Jo={},function(){return Jo}),_(rs,hn);var is=0;function os(t){t.c.read().then(t.oc.bind(t)).catch(t.Ta.bind(t))}function ss(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,as(t)}function as(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function us(t){hn.call(this),this.headers=new mn,this.O=t||null,this.c=!1,this.A=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.G=!1,this.g=0,this.o=null,this.m=cs,this.u=this.R=!1}(t=rs.prototype).open=function(t,e){if(this.readyState!=is)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,as(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.o.fetch(new Request(this.g,e)).then(this.tc.bind(this),this.Ta.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ss(this,!1)),this.readyState=is},t.tc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,as(this)),this.a&&(this.readyState=3,as(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.rc.bind(this),this.Ta.bind(this)):void 0!==l.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,os(this)):t.text().then(this.sc.bind(this),this.Ta.bind(this)))))},t.oc=function(t){var e;this.a&&((e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done}))&&(this.response=this.responseText+=e),t.done?ss(this,!0):as(this),3==this.readyState&&os(this))},t.sc=function(t){this.a&&(this.response=this.responseText=t,ss(this,!0))},t.rc=function(t){this.a&&(this.response=t,ss(this,!0))},t.Ta=function(t){var e=this.h;e&&e.log(Qo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&ss(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Qo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Qo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},_(us,hn);var cs="";us.prototype.b=ts("goog.net.XhrIo");var hs=/^https?$/i,ls=["POST","PUT"];function fs(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.G=!1,e.c=!0,e.a=(e.O?e.O:Do).a(),e.A=e.O?Uo(e.O):Uo(Do),e.a.onreadystatechange=g(e.Ub,e);try{es(e.b,ws(e,"Opening Xhr")),e.N=!0,e.a.open(n,String(t),!0),e.N=!1}catch(t){return es(e.b,ws(e,"Error opening Xhr: "+t.message)),void ds(e,t)}t=r||"";var o,s=new mn(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)U(t,e,void 0);else for(var n=gn(t),r=yn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=ps,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.Y()),r=l.FormData&&t instanceof l.FormData,!B(ls,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.R&&(e.a.withCredentials=e.R);try{ms(e),0<e.g&&(e.u=(o=e.a,Vt&&Yt(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),es(e.b,ws(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.u)),e.u?(e.a.timeout=e.g,e.a.ontimeout=g(e.Ma,e)):e.o=dn(e.Ma,e.g,e)),es(e.b,ws(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){es(e.b,ws(e,"Send error: "+t.message)),ds(e,t)}}function ps(t){return"content-type"==t.toLowerCase()}function ds(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,vs(t),gs(t)}function vs(t){t.G||(t.G=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ys(e){if(e.c&&void 0!==h)if(e.A[1]&&4==bs(e)&&2==_s(e))es(e.b,ws(e,"Local request error detected and ignored"));else if(e.i&&4==bs(e))dn(e.Ub,0,e);else if(e.dispatchEvent("readystatechange"),4==bs(e)){es(e.b,ws(e,"Request complete")),e.c=!1;try{var t,n,r,i,o=_s(e);t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((t=s)||((n=0===o)&&(!(i=String(e.l).match(wn)[1]||null)&&l.self&&l.self.location&&(i=(r=l.self.location.protocol).substr(0,r.length-1)),n=!hs.test(i?i.toLowerCase():"")),t=n),t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<bs(e)?e.a.statusText:""}catch(t){es(e.b,"Can not get status: "+t.message),a=""}e.h=a+" ["+_s(e)+"]",vs(e)}}finally{gs(e)}}}function gs(e,t){if(e.a){ms(e);var n=e.a,r=e.A[0]?s:null;e.a=null,e.A=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log(zo,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function ms(t){t.a&&t.u&&(t.a.ontimeout=null),t.o&&(l.clearTimeout(t.o),t.o=null)}function bs(t){return t.a?t.a.readyState:0}function _s(t){try{return 2<bs(t)?t.a.status:-1}catch(t){return-1}}function ws(t,e){return e+" ["+t.P+" "+t.l+" "+_s(t)+"]"}function Es(t){var e=Rs;this.g=[],this.u=e,this.o=t||null,this.f=this.a=!1,this.c=void 0,this.m=this.A=this.i=!1,this.h=0,this.b=null,this.l=0}function Is(t,e,n){t.a=!0,t.c=n,t.f=!e,Ns(t)}function Ts(t){if(t.a){if(!t.m)throw new As;t.m=!1}}function Ss(t,e,n,r){t.g.push([e,n,r]),t.a&&Ns(t)}function Cs(t){return q(t.g,function(t){return d(t[1])})}function Ns(e){var n,r;e.h&&e.a&&Cs(e)&&(n=e.h,(r=Ps[n])&&(l.clearTimeout(r.a),delete Ps[n]),e.h=0),e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.i;){var i=(s=e.g.shift())[0],o=s[1],s=s[2];if(i=e.f?o:i)try{var a=i.call(s||e.o,n);void 0!==a&&(e.f=e.f&&(a==n||a instanceof Error),e.c=n=a),(A(n)||"function"==typeof l.Promise&&n instanceof l.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,Cs(e)||(r=!0)}}e.c=n,t&&(a=g(e.v,e,!0),t=g(e.v,e,!1),n instanceof Es?(Ss(n,a,t),n.A=!0):n.then(a,t)),r&&(n=new Os(n),Ps[n.a]=n,e.h=n.a)}function As(){k.call(this)}function ks(){k.call(this)}function Os(t){this.a=l.setTimeout(g(this.c,this),0),this.b=t}(t=us.prototype).Ma=function(){void 0!==h&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",es(this.b,ws(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(es(this.b,ws(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),gs(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),gs(this,!0)),us.$a.Da.call(this)},t.Ub=function(){this.xa||(this.N||this.i||this.f?ys(this):this.Ic())},t.Ic=function(){ys(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case cs:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(zo,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return es(this.b,"Can not get response: "+t.message),null}},Es.prototype.cancel=function(t){var e;this.a?this.c instanceof Es&&this.c.cancel():(this.b&&(e=this.b,delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())),this.u?this.u.call(this.o,this):this.m=!0,this.a||(t=new ks,Ts(this),Is(this,!1,t)))},Es.prototype.v=function(t,e){this.i=!1,Is(this,t,e)},Es.prototype.then=function(t,e,n){var r,i,o=new le(function(t,e){r=t,i=e});return Ss(this,r,function(t){t instanceof ks?o.cancel():i(t)}),o.then(t,e,n)},Es.prototype.$goog_Thenable=!0,_(As,k),As.prototype.message="Deferred has already fired",As.prototype.name="AlreadyCalledError",_(ks,k),ks.prototype.message="Deferred was canceled",ks.prototype.name="CanceledError",Os.prototype.c=function(){throw delete Ps[this.a],this.b};var Ps={};function Ds(t){var e=document,n=mt(t).toString(),r=ie(document,"SCRIPT"),i={Vb:r,Ma:void 0},o=new Es(i),s=window.setTimeout(function(){xs(r,!0);var t=new Fs(Ms,"Timeout reached for loading script "+n);Ts(o),Is(o,!1,t)},5e3);return i.Ma=s,r.onload=r.onreadystatechange=function(){r.readyState&&"loaded"!=r.readyState&&"complete"!=r.readyState||(xs(r,!1,s),Ts(o),Is(o,!0,null))},r.onerror=function(){xs(r,!0,s);var t=new Fs(Ls,"Error while loading script "+n);Ts(o),Is(o,!1,t)},ht(i={},{type:"text/javascript",charset:"UTF-8"}),Zt(r,i),i=t,lt(t=r,"HTMLScriptElement"),t.src=mt(i),null===f&&(f=(i=(i=l.document).querySelector&&i.querySelector("script[nonce]"))&&(i=i.nonce||i.getAttribute("nonce"))&&a.test(i)?i:""),(i=f)&&t.setAttribute("nonce",i),((e=((i=e)||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:i.documentElement).appendChild(r),o}function Rs(){var t;this&&this.Vb&&((t=this.Vb)&&"SCRIPT"==t.tagName&&xs(t,!0,this.Ma))}function xs(t,e,n){null!=n&&l.clearTimeout(n),t.onload=s,t.onerror=s,t.onreadystatechange=s,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var Ls=0,Ms=1;function Fs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),k.call(this,n),this.code=t}function Us(t){this.f=t}function js(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.v=t.secureTokenTimeout||Bs,this.g=ut(t.secureTokenHeaders||Ws),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.m=t.firebaseTimeout||Hs,this.a=ut(t.firebaseHeaders||Gs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==cr(),!(n=l.XMLHttpRequest||n&&Ql.INTERNAL.node&&Ql.INTERNAL.node.XMLHttpRequest)&&!ur())throw new w("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,ur()?this.f=new ns(self):hr()?this.f=new Us(n):this.f=new qo,this.b=null}_(Fs,k),_(Us,Fo),Us.prototype.a=function(){return new this.f},Us.prototype.b=function(){return{}};var Vs,qs="idToken",Bs=new kr(3e4,6e4),Ws={"Content-Type":"application/x-www-form-urlencoded"},Hs=new kr(3e4,6e4),Gs={"Content-Type":"application/json"};function Ks(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function zs(t,e){e&&(t.l=Qs("https://securetoken.googleapis.com/v1/token",e),t.h=Qs("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=Qs("https://identitytoolkit.googleapis.com/v2/",e))}function Qs(t,e){return t=An(t),e=An(e.url),t.c=t.a+t.c,In(t,e.f),t.a=e.a,Tn(t,e.g),t.toString()}function Xs(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Ys(t,e,n,r,i,o,s){var a;(t=((a=pr(a=yr())==fr&&(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Vt&&Qt&&!(9<Qt))&&!ur()?(Vs=Vs||new le(function(t,e){!function(t,e){{((window.gapi||{}).client||{}).request?t():(l[$s]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ss(t,null,e,void 0)}(Ds(bt(Js,{onload:$s})),function(){e(Error("CORS_UNSUPPORTED"))}))}}(t,e)}),g(t.o,t)):g(t.u,t))(e,n,r,i,o,s)}js.prototype.S=function(){return this.b},js.prototype.u=function(t,n,e,r,i,o){if(ur()&&(void 0===l.fetch||void 0===l.Headers||void 0===l.Request))throw new w("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s,a=new us(this.f);o&&(a.g=Math.max(0,o),s=setTimeout(function(){a.dispatchEvent("timeout")},o)),ln(a,"complete",function(){s&&clearTimeout(s);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return es(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),fn(a,"ready",function(){s&&clearTimeout(s),xe(this)}),fn(a,"timeout",function(){s&&clearTimeout(s),xe(this),n&&n(null)}),fs(a,t,e,r,i)};var Js=new ft(vt,"https://apis.google.com/js/client.js?onload=%{onload}"),$s="__fcb"+Math.floor(1e6*Math.random()).toString();function Zs(t,e,n,r,i,o,s){var a=An(e+n);Cn(a,"key",t.c),s&&Cn(a,"cb",b().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Cn(a,c,i[c]);return new le(function(e,n){Ys(t,a.toString(),function(t){t?t.error?n(Qa(t,o||{})):e(t):n(new w("network-request-failed"))},r,u?void 0:Kn(Tr(i)),t.a,t.m.get())})}function ta(t){if("string"!=typeof(t=t.email)||!ir.test(t))throw new w("invalid-email")}function ea(t){"email"in t&&ta(t)}function na(t){if(!t[qs]){if(t.mfaPendingCredential)throw new w("multi-factor-auth-required",null,ut(t));throw new w("internal-error")}}function ra(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new w("internal-error")}else{if(!t.sessionInfo)throw new w("missing-verification-id");if(!t.code)throw new w("missing-verification-code")}}js.prototype.o=function(t,n,r,i,o){var s=this;Vs.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).s(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},js.prototype.yb=function(){return Ka(this,xa,{})},js.prototype.Ab=function(t,e){return Ka(this,Da,{idToken:t,email:e})},js.prototype.Bb=function(t,e){return Ka(this,Ra,{idToken:t,password:e})};var ia={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function oa(t){if(!t.phoneVerificationInfo)throw new w("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new w("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new w("missing-verification-code")}function sa(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new w("internal-error")}function aa(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Bn(t=new Un(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function ua(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Mo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Mo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Mo(t)):t.errorMessage&&(e=za(t.errorMessage)),e)throw e;na(t)}function ca(t,e){return e.returnIdpCredential=!0,Ka(t,Fa,e)}function ha(t,e){return e.returnIdpCredential=!0,Ka(t,ja,e)}function la(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ka(t,Ua,e)}function fa(t){if(!t.oobCode)throw new w("invalid-action-code")}(t=js.prototype).Cb=function(t,r){var i={idToken:t},o=[];return st(ia,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Ka(this,Da,i)},t.ub=function(t,e){return ht(t={requestType:"PASSWORD_RESET",email:t},e),Ka(this,Na,t)},t.vb=function(t,e){return ht(t={requestType:"EMAIL_SIGNIN",email:t},e),Ka(this,Ta,t)},t.tb=function(t,e){return ht(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ka(this,Sa,t)},t.Db=function(t,e,n){return ht(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Ka(this,Ca,t)},t.eb=function(t){return Ka(this,Ba,t)},t.mb=function(t,e){return Ka(this,Oa,{oobCode:t,newPassword:e})},t.Qa=function(t){return Ka(this,da,{oobCode:t})},t.ib=function(t){return Ka(this,pa,{oobCode:t})};var pa={endpoint:"setAccountInfo",B:fa,Z:"email",C:!0},da={endpoint:"resetPassword",B:fa,F:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new w("internal-error")},C:!0},va={endpoint:"signupNewUser",B:function(t){if(ta(t),!t.password)throw new w("weak-password")},F:na,U:!0,C:!0},ya={endpoint:"createAuthUri",C:!0},ga={endpoint:"deleteAccount",M:["idToken"]},ma={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],B:function(t){if("array"!=n(t.deleteProvider))throw new w("internal-error")}},ba={endpoint:"emailLinkSignin",M:["email","oobCode"],B:ta,F:na,U:!0,C:!0},_a={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],B:ta,F:na,U:!0},wa={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],B:oa,F:na,C:!0,Na:!0},Ea={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],B:oa,F:na,C:!0,Na:!0},Ia={endpoint:"getAccountInfo"},Ta={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new w("internal-error");ta(t)},Z:"email",C:!0},Sa={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],B:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new w("internal-error")},Z:"email",C:!0},Ca={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],B:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new w("internal-error")},Z:"email",C:!0},Na={endpoint:"getOobConfirmationCode",M:["requestType"],B:function(t){if("PASSWORD_RESET"!=t.requestType)throw new w("internal-error");ta(t)},Z:"email",C:!0},Aa={kb:!0,endpoint:"getProjectConfig",Tb:"GET"},ka={kb:!0,endpoint:"getRecaptchaParam",Tb:"GET",F:function(t){if(!t.recaptchaSiteKey)throw new w("internal-error")}},Oa={endpoint:"resetPassword",B:fa,Z:"email",C:!0},Pa={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Z:"sessionInfo",C:!0},Da={endpoint:"setAccountInfo",M:["idToken"],B:ea,U:!0},Ra={endpoint:"setAccountInfo",M:["idToken"],B:function(t){if(ea(t),!t.password)throw new w("weak-password")},F:na,U:!0},xa={endpoint:"signupNewUser",F:na,U:!0,C:!0},La={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],B:function(t){if(!t.phoneEnrollmentInfo)throw new w("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new w("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new w("missing-app-credential")},F:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new w("internal-error")},C:!0,Na:!0},Ma={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],B:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new w("missing-app-credential")},F:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new w("internal-error")},C:!0,Na:!0},Fa={endpoint:"verifyAssertion",B:sa,Xa:aa,F:ua,U:!0,C:!0},Ua={endpoint:"verifyAssertion",B:sa,Xa:aa,F:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new w("user-not-found");if(t.errorMessage)throw za(t.errorMessage);na(t)},U:!0,C:!0},ja={endpoint:"verifyAssertion",B:function(t){if(sa(t),!t.idToken)throw new w("internal-error")},Xa:aa,F:ua,U:!0},Va={endpoint:"verifyCustomToken",B:function(t){if(!t.token)throw new w("invalid-custom-token")},F:na,U:!0,C:!0},qa={endpoint:"verifyPassword",B:function(t){if(ta(t),!t.password)throw new w("wrong-password")},F:na,U:!0,C:!0},Ba={endpoint:"verifyPhoneNumber",B:ra,F:na,C:!0},Wa={endpoint:"verifyPhoneNumber",B:function(t){if(!t.idToken)throw new w("internal-error");ra(t)},F:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Mo(t);na(t)}},Ha={Gb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",B:ra,F:na,C:!0},Ga={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],F:function(t){if(!!t[qs]^!!t.refreshToken)throw new w("internal-error")},C:!0,Na:!0};function Ka(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.M))return be(new w("internal-error"));var r,i=!!e.Na,o=e.Tb||"POST";return me(n).then(e.B).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),Zs(t,i?t.i:t.h,e.endpoint,o,n,e.Gb,e.kb||!1)}).then(function(t){return r=t,e.Xa?e.Xa(n,r):r}).then(e.F).then(function(){if(!e.Z)return r;if(!(e.Z in r))throw new w("internal-error");return r[e.Z]})}function za(t){return Qa({error:{errors:[{message:t}],code:400,message:t}})}function Qa(t,e){var n,r=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",i={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(r=i[r]?new w(i[r]):null)return r;for(n in r=t.error&&t.error.message||"",ht(i={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=r.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,i)if(0===r.indexOf(n))return new w(i[n],e);return!e&&t&&(e=Ir(t)),new w("internal-error",e)}function Xa(t){var o;this.b=t,this.a=null,this.qb=(o=this,(Za||(Za=new le(function(t,e){function n(){Ar(),gr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Ar(),e(Error("Network Error"))},timeout:Ja.get()})}var r;gr("gapi.iframes.Iframe")?t():gr("gapi.load")?n():(r="__iframefcb"+Math.floor(1e6*Math.random()).toString(),l[r]=function(){gr("gapi.load")?n():e(Error("Network Error"))},me(Ds(r=bt(Ya,{onload:r}))).s(function(){e(Error("Network Error"))}))}).s(function(t){throw Za=null,t}))).then(function(){return new le(function(r,i){gr("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},$a.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Ya=new ft(vt,"https://apis.google.com/js/api.js?onload=%{onload}"),Ja=new kr(3e4,6e4),$a=new kr(5e3,15e3),Za=null;function tu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?kn((t=An(this.g.url)).f,t.a,t.g,"/emulator/auth/iframe"):kn("https",this.l,null,"/__/auth/iframe"),this.a=t,Cn(this.a,"apiKey",this.h),Cn(this.a,"appName",this.i),this.b=null,this.c=[]}function eu(t,e,n,r,i,o){this.u=t,this.o=e,this.c=n,this.v=r,this.m=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function nu(t){try{return Ql.app(t).auth().Ga()}catch(t){return[]}}function ru(t,e,n,r,i,o){this.o=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.A=null,this.h=[],this.v=this.a=null}function iu(t){var a=$n();return Ka(t,Aa,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{for(var e=(n=An(a)).f,n=n.a,r=0;r<t.length;r++){var i=t[r],o=n,s=e;if(o=0==i.indexOf("chrome-extension://")?An(i).a==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(rr.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new xo($n())})}function ou(i){return i.v||(i.v=or().then(function(){var t,e,n,r;i.u||(t=i.c,e=i.i,n=nu(i.b),(r=new tu(i.o,i.g,i.b,i.f)).f=t,r.b=e,r.c=K(n||[]),i.u=r.toString()),i.m=new Xa(i.u),function(r){if(!r.m)throw Error("IfcHandler must be initialized!");!function(t,e){t.qb.then(function(){t.a.register("authEvent",e,gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.m,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Oo(t.authEvent),e=0;e<r.h.length;e++)n=r.h[e](t)||n;return(e={}).status=n?"ACK":"ERROR",me(e)}return e.status="ERROR",me(e)})}(i)})),i.v}function su(t){return t.l||(t.A=t.c?vr(t.c,nu(t.b)):null,t.l=new js(t.g,N(t.i),t.A),t.f&&zs(t.l,t.f)),t.l}function au(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new eu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=ut(u||null),t.f=c,t.xb(h).toString()}function uu(t){if(this.a=t||Ql.INTERNAL.reactNative&&Ql.INTERNAL.reactNative.AsyncStorage,!this.a)throw new w("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function cu(t){this.b=t,this.a={},this.f=g(this.c,this)}tu.prototype.toString=function(){return this.f?Cn(this.a,"v",this.f):qn(this.a.b,"v"),this.b?Cn(this.a,"eid",this.b):qn(this.a.b,"eid"),this.c.length?Cn(this.a,"fw",this.c.join(",")):qn(this.a.b,"fw"),this.a.toString()},eu.prototype.xb=function(t){return this.h=t,this},eu.prototype.toString=function(){var t;if(Cn(t=this.m?kn((t=An(this.m.url)).f,t.a,t.g,"/emulator/auth/handler"):kn("https",this.u,null,"/__/auth/handler"),"apiKey",this.o),Cn(t,"appName",this.c),Cn(t,"authType",this.v),this.a.isOAuthProvider){var e,n=this.a;try{var r=Ql.app(this.c).auth().ka()}catch(t){r=null}for(e in n.nb=r,Cn(t,"providerId",this.a.providerId),n=Tr((r=this.a).Hb))n[e]=n[e].toString();e=r.Pc,n=ut(n);for(var i=0;i<e.length;i++){var o=e[i];o in n&&delete n[o]}r.ob&&r.nb&&!n[r.ob]&&(n[r.ob]=r.nb),at(n)||Cn(t,"customParameters",Ir(n))}if("function"==typeof this.a.Pb&&((r=this.a.Pb()).length&&Cn(t,"scopes",r.join(","))),this.l?Cn(t,"redirectUrl",this.l):qn(t.b,"redirectUrl"),this.g?Cn(t,"eventId",this.g):qn(t.b,"eventId"),this.i?Cn(t,"v",this.i):qn(t.b,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Nn(t,s)&&Cn(t,s,this.b[s]);return this.h?Cn(t,"tid",this.h):qn(t.b,"tid"),this.f?Cn(t,"eid",this.f):qn(t.b,"eid"),(s=nu(this.c)).length&&Cn(t,"fw",s.join(",")),t.toString()},(t=ru.prototype).Nb=function(e,n,t){var r=new w("popup-closed-by-user"),i=new w("web-storage-unsupported"),o=this,s=!1;return this.la().then(function(){var t,r;r={type:"webStorageSupport"},ou(t=o).then(function(){return e=t.m,n=r,e.qb.then(function(){return new le(function(t){e.a.send(n.type,n,t,gr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}).then(function(t){t||(e&&er(e),n(i),s=!0)})}).s(function(){}).then(function(){if(!s)return n=e,new le(function(e){return function t(){vn(2e3).then(function(){return n&&!n.closed?t():void e()})}()});var n}).then(function(){if(!s)return vn(t).then(function(){n(r)})})},t.Wb=function(){var t=yr();return!Er(t)&&!Nr(t)},t.Sb=function(){return!1},t.Lb=function(e,t,n,r,i,o,s,a){if(!e)return be(new w("popup-blocked"));if(s&&!Er())return this.la().s(function(t){er(e),i(t)}),r(),me();this.a||(this.a=iu(su(this)));var u=this;return this.a.then(function(){var t=u.la().s(function(t){throw er(e),i(t),t});return r(),t}).then(function(){Ao(n),s||Zn(au(u.o,u.g,u.b,t,n,null,o,u.c,void 0,u.i,a,u.f),e)}).s(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Mb=function(t,e,n,r){this.a||(this.a=iu(su(this)));var i=this;return this.a.then(function(){Ao(e),Zn(au(i.o,i.g,i.b,t,e,$n(),n,i.c,void 0,i.i,r,i.f))}).s(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.la=function(){var t=this;return ou(this).then(function(){return t.m.qb}).s(function(){throw t.a=null,new w("network-request-failed")})},t.Zb=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ra=function(e){H(this.h,function(t){return t==e})},(t=uu.prototype).get=function(t){return me(this.a.getItem(t)).then(function(t){return t&&Sr(t)})},t.set=function(t,e){return me(this.a.setItem(t,Ir(e)))},t.T=function(t){return me(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var hu,lu=[];function fu(t,e,n){at(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function pu(t){this.a=t}function du(t){this.c=t,this.b=!1,this.a=[]}function vu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return be(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new le(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return yu(r,c),t}).s(function(t){throw yu(r,c),t})}function yu(t,e){var n,r;e&&(n=e.messageChannel,r=e.onMessage,n&&(n.port1.removeEventListener("message",r),n.port1.close()),H(t.a,function(t){return t==e}))}function gu(){if(!_u())throw new w("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=l.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.o=!1,this.h=null;var t,e,n,r=this;ur()&&self?(this.l=(n=ur()?self:null,U(lu,function(t){t.b==n&&(e=t)}),e||(e=new cu(n),lu.push(e)),e),fu(this.l,"keyChanged",function(t,n){return Su(r).then(function(e){return 0<e.length&&U(r.a,function(t){t(e)}),{keyProcessed:B(e,n.key)}})}),fu(this.l,"ping",function(){return me(["keyChanged"])})):((t=l.navigator)&&t.serviceWorker?me().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).s(function(){return null}):me(null)).then(function(t){(r.h=t)&&(r.g=new du(new pu(t)),vu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&B(t[0].value,"keyChanged")&&(r.o=!0)}).s(function(){}))})}function mu(i){return new le(function(e,n){var t=i.m.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new le(function(t,e){var n=r.m.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}}).then(function(){return mu(i)}).then(function(t){e(t)}).s(function(t){n(t)}))}})}function bu(t){return t.v||(t.v=mu(t)),t.v}function _u(){try{return l.indexedDB}catch(t){return}}function wu(t){return t.objectStore("firebaseLocalStorage")}function Eu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Iu(t){return new le(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Tu(t,e){return t.g&&t.h&&((n=l.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?vu(t.g,"keyChanged",{key:e},t.o).then(function(){}).s(function(){}):me();var n}function Su(r){return bu(r).then(function(t){var i=wu(Eu(t,!1));return i.getAll?Iu(i.getAll()):new le(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n&&typeof e[r]==typeof n[r]?"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Cu(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Nu(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=me().then(function(){if(_u()){var e=Cr(),n="__sak"+e;return hu=hu||new gu,(i=hu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.T(n)}).then(function(){return i}).s(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ca(function(e){U(r.a,function(t){t(e)})}),t})}function Au(){this.a={},this.type="inMemory"}function ku(){if(!function(){var t="Node"==cr();if(!(t=Ou()||t&&Ql.INTERNAL.node&&Ql.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==cr())throw new w("internal-error","The LocalStorage compatibility library was not found.");throw new w("web-storage-unsupported")}this.a=Ou()||Ql.INTERNAL.node.localStorage,this.type="localStorage"}function Ou(){try{var t=l.localStorage,e=Cr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Pu(){this.type="nullStorage"}function Du(){if(!function(){var t="Node"==cr();if(!(t=Ru()||t&&Ql.INTERNAL.node&&Ql.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==cr())throw new w("internal-error","The SessionStorage compatibility library was not found.");throw new w("web-storage-unsupported")}this.a=Ru()||Ql.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Ru(){try{var t=l.sessionStorage,e=Cr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function xu(){var t={};t.Browser=Fu,t.Node=Uu,t.ReactNative=ju,t.Worker=Vu,this.a=t[cr()]}cu.prototype.c=function(n){var e,r=n.data.eventType,i=n.data.eventId,t=this.a[r];t&&0<t.length&&(n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null}),e=[],U(t,function(t){e.push(me().then(function(){return t(n.origin,n.data.data)}))}),we(e).then(function(t){var e=[];U(t,function(t){e.push({fulfilled:t.Ob,value:t.value,reason:t.reason?t.reason.message:void 0})}),U(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})}))},pu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},du.prototype.close=function(){for(;0<this.a.length;)yu(this,this.a[0]);this.b=!0},(t=gu.prototype).set=function(n,r){var i,o=!1,s=this;return bu(this).then(function(t){return Iu((t=wu(Eu(i=t,!0))).get(n))}).then(function(t){var e=wu(Eu(i,!0));return t?(t.value=r,Iu(e.put(t))):(s.b++,o=!0,(t={}).fbase_key=n,t.value=r,Iu(e.add(t)))}).then(function(){return s.c[n]=r,Tu(s,n)}).na(function(){o&&s.b--})},t.get=function(e){return bu(this).then(function(t){return Iu(wu(Eu(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.T=function(e){var n=!1,r=this;return bu(this).then(function(t){return n=!0,r.b++,Iu(wu(Eu(t,!0)).delete(e))}).then(function(){return delete r.c[e],Tu(r,e)}).na(function(){n&&r.b--})},t.ca=function(t){var n;0==this.a.length&&(Cu(n=this),function e(){n.f=setTimeout(function(){n.i=Su(n).then(function(e){0<e.length&&U(n.a,function(t){t(e)})}).then(function(){e()}).s(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ia=function(e){H(this.a,function(t){return t==e}),0==this.a.length&&Cu(this)},(t=Nu.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.T=function(e){return this.b.then(function(t){return t.T(e)})},t.ca=function(t){this.a.push(t)},t.ia=function(e){H(this.a,function(t){return t==e})},(t=Au.prototype).get=function(t){return me(this.a[t])},t.set=function(t,e){return this.a[t]=e,me()},t.T=function(t){return delete this.a[t],me()},t.ca=function(){},t.ia=function(){},(t=ku.prototype).get=function(t){var e=this;return me().then(function(){return Sr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return me().then(function(){var t=Ir(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return me().then(function(){e.a.removeItem(t)})},t.ca=function(t){l.window&&Je(l.window,"storage",t)},t.ia=function(t){l.window&&tn(l.window,"storage",t)},(t=Pu.prototype).get=function(){return me(null)},t.set=function(){return me()},t.T=function(){return me()},t.ca=function(){},t.ia=function(){},(t=Du.prototype).get=function(t){var e=this;return me().then(function(){return Sr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return me().then(function(){var t=Ir(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return me().then(function(){e.a.removeItem(t)})},t.ca=function(){},t.ia=function(){};var Lu,Mu,Fu={D:ku,ab:Du},Uu={D:ku,ab:Du},ju={D:uu,ab:Pu},Vu={D:ku,ab:Pu},qu={qd:"local",NONE:"none",sd:"session"};function Bu(){var t=!(Nr(yr())||!ar()),e=Er(),n=mr();this.v=t,this.h=e,this.l=n,this.a={},t=Lu=Lu||new xu;try{this.g=!Jn()&&Rr()||!l.indexedDB?new t.a.D:new Nu(new(ur()?Au:t.a.D))}catch(t){this.g=new Au,this.h=!0}try{this.i=new t.a.ab}catch(t){this.i=new Au}this.m=new Au,this.f=g(this.Xb,this),this.b={}}function Wu(){return Mu=Mu||new Bu}function Hu(t,e){switch(e){case"session":return t.i;case"none":return t.m;default:return t.g}}function Gu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Ku(t,e,n){return n=Gu(e,n),"local"==e.D&&(t.b[n]=null),Hu(t,e.D).T(n)}function zu(t){t.c&&(clearInterval(t.c),t.c=null)}function Qu(t){this.a=t,this.b=Wu()}(t=Bu.prototype).get=function(t,e){return Hu(this,t.D).get(Gu(t,e))},t.set=function(e,t,n){var r=Gu(e,n),i=this,o=Hu(this,e.D);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.D&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Gu(t,e),this.l&&(this.b[t]=l.localStorage.getItem(t)),at(this.a)&&(Hu(this,"local").ca(this.f),this.h||(Jn()||!Rr())&&l.indexedDB||!this.l||(zu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=l.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new Ve({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Xb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Gu(t,e),this.a[t]&&(H(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),at(this.a)&&(Hu(this,"local").ia(this.f),zu(this))},t.Xb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=l.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.lb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Hu(this,"local").ia(this.f):zu(this),this.v)if(n=l.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?l.localStorage.setItem(e,r):l.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this,n=function(){void 0===t.a.a&&o.b[e]===l.localStorage.getItem(e)||(o.b[e]=l.localStorage.getItem(e),o.lb(e))};Vt&&Qt&&10==Qt&&l.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else U(t,g(this.lb,this))},t.lb=function(t){this.a[t]&&U(this.a[t],function(t){t()})};var Xu,Yu={name:"authEvent",D:"local"};function Ju(){this.a=Wu()}function $u(t,e){this.b=Zu,this.f=l.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=l.Int32Array?new Int32Array(64):Array(64),void 0===Xu&&(Xu=l.Int32Array?new Int32Array(sc):sc),this.reset()}_($u,function(){this.b=-1});for(var Zu=64,tc=Zu-1,ec=[],nc=0;nc<tc;nc++)ec[nc]=0;var rc=G(128,ec);function ic(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|Xu[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function oc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(ic(t),i=0);else{if(!p(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(ic(t),i=0)}}t.c=i,t.g+=n}$u.prototype.reset=function(){this.g=this.c=0,this.a=l.Int32Array?new Int32Array(this.h):K(this.h)};var sc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function ac(){$u.call(this,8,uc)}_(ac,$u);var uc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function cc(t,e,n,r,i,o){this.m=t,this.i=e,this.l=n,this.v=r||null,this.u=i||null,this.o=o,this.h=e+":"+n,this.A=new Ju,this.g=new Qu(this.h),this.f=null,this.b=[],this.a=this.c=null}function hc(t){return new w("invalid-cordova-configuration",t)}function lc(t){var e=new ac;oc(e,t),t=[];var n=8*e.g;e.c<56?oc(e,rc,56-e.c):oc(e,rc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ic(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function fc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function pc(a){return a.f||(a.f=a.la().then(function(){return new le(function(n){function e(r){t=!0,s&&s.cancel(),dc(i).then(function(t){var e,n=o;t&&r&&r.url&&(e=null,-1!=(n=zi(r.url)).indexOf("/__/auth/callback")&&(e=(e="object"==typeof(e=Sr(Nn(e=An(n),"firebaseError")||null))?E(e):null)?new ko(t.c,t.b,null,null,e,null,t.S()):new ko(t.c,t.b,n,t.f,null,null,t.S())),n=e||o),fc(i,n)})}var i,o,t,s,r;a.Ea(function t(e){return n(e),a.Ra(t),!1}),i=a,o=new ko("unknown",null,null,null,new w("no-auth-event")),t=!1,s=vn(500).then(function(){return dc(i).then(function(){t||fc(i,o)})}),r=l.handleOpenURL,l.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(gr("BuildInfo.packageName",l).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},Ro=Ro||new Po,function(t){var n=Ro;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=gr("universalLinks.subscribe",l))&&t(null,n.b))}(e)})})),a.f}function dc(e){var t,n=null;return(t=e.g).b.get(Yu,t.a).then(Oo).then(function(t){return n=t,Ku((t=e.g).b,Yu,t.a)}).then(function(){return n})}function vc(t){this.a=t,this.b=Wu()}(t=cc.prototype).la=function(){return this.Ia?this.Ia:this.Ia=(sr(void 0)?or().then(function(){return new le(function(t,e){var n=l.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):be(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof gr("universalLinks.subscribe",l))throw hc("cordova-universal-links-plugin-fix is not installed");if(void 0===gr("BuildInfo.packageName",l))throw hc("cordova-plugin-buildinfo is not installed");if("function"!=typeof gr("cordova.plugins.browsertab.openUrl",l))throw hc("cordova-plugin-browsertab is not installed");if("function"!=typeof gr("cordova.InAppBrowser.open",l))throw hc("cordova-plugin-inappbrowser is not installed")},function(){throw new w("cordova-not-ready")})},t.Nb=function(t,e){return e(new w("operation-not-supported-in-this-environment")),me()},t.Lb=function(){return be(new w("operation-not-supported-in-this-environment"))},t.Zb=function(){return!1},t.Wb=function(){return!0},t.Sb=function(){return!0},t.Mb=function(t,e,n,r){if(this.c)return be(new w("redirect-operation-pending"));var i=this,o=l.document,s=null,a=null,u=null,c=null;return this.c=me().then(function(){return Ao(e),pc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new ko(t,r,null,o,new w("no-auth-event"),null,i),a=gr("BuildInfo.packageName",l);if("string"!=typeof a)throw new w("invalid-cordova-configuration");var u=gr("BuildInfo.displayName",l),c={};if(yr().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!yr().toLowerCase().match(/android/))return be(new w("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=lc(o),c.sessionId=o;var h=au(n.m,n.i,n.l,t,e,null,r,n.v,c,n.u,i,n.o);return n.la().then(function(){var t=n.h;return n.A.a.set(Yu,s.w(),t)}).then(function(){var t=gr("cordova.plugins.browsertab.isAvailable",l);if("function"!=typeof t)throw new w("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=gr("cordova.plugins.browsertab.openUrl",l)))throw new w("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=gr("cordova.InAppBrowser.open",l)))throw new w("invalid-cordova-configuration");t=yr(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new le(function(e,t){a=function(){var t=gr("cordova.plugins.browsertab.close",l);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(a),u=function(){s=s||vn(2e3).then(function(){t(new w("redirect-cancelled-by-user"))})},c=function(){Or()&&u()},o.addEventListener("resume",u,!1),yr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).s(function(t){return dc(i).then(function(){throw t})})}).na(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Ra(a),i.c=null})},t.Ea=function(e){this.b.push(e),pc(this).s(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new ko("unknown",null,null,null,new w("no-auth-event")),e(t))})},t.Ra=function(e){H(this.b,function(t){return t==e})};var yc={name:"pendingRedirect",D:"session"};function gc(t){return Ku(t.b,yc,t.a)}function mc(t,e,n,r){this.i={},this.u=0,this.O=t,this.m=e,this.v=n,this.G=r,this.h=[],this.f=!1,this.l=g(this.o,this),this.b=new Rc,this.A=new Uc,this.g=new vc(Pc(this.m,this.v)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.A,this.c.linkViaPopup=this.A,this.c.reauthViaPopup=this.A,this.a=bc(this.O,this.m,this.v,I,this.G)}function bc(t,e,n,r,i){var o=Ql.SDK_VERSION||null;return new(sr()?cc:ru)(t,e,n,o,r,i)}function _c(e){e.f||(e.f=!0,e.a.Ea(e.l));var n=e.a;return e.a.la().s(function(t){throw e.a==n&&e.reset(),t})}function wc(n){n.a.Wb()&&_c(n).s(function(t){var e=new ko("unknown",null,null,null,new w("operation-not-supported-in-this-environment"));Nc(t)&&n.o(e)}),n.a.Sb()||xc(n.b)}function Ec(n,t){B(n.h,t)||n.h.push(t),n.f||(t=n.g).b.get(yc,t.a).then(function(t){return"pending"==t}).then(function(t){t?gc(n.g).then(function(){_c(n).s(function(t){var e=new ko("unknown",null,null,null,new w("operation-not-supported-in-this-environment"));Nc(t)&&n.o(e)})}):wc(n)}).s(function(){wc(n)})}function Ic(t,e){H(t.h,function(t){return t==e})}mc.prototype.reset=function(){this.f=!1,this.a.Ra(this.l),this.a=bc(this.O,this.m,this.v,null,this.G),this.i={}},mc.prototype.o=function(t){if(!t)throw new w("invalid-auth-event");if(6e5<=b()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Eb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=b())),e=!0;break}}return xc(this.b),e};var Tc=new kr(2e3,1e4),Sc=new kr(3e4,6e4);function Cc(t,e,n,r,i,o,s){return t.a.Lb(e,n,r,function(){t.f||(t.f=!0,t.a.Ea(t.l))},function(){t.reset()},i,o,s)}function Nc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Ac(e,t,n,r,i){var o,s;return(s=e.g).b.set(yc,"pending",s.a).then(function(){return e.a.Mb(t,n,r,i).s(function(t){if(Nc(t))throw new w("operation-not-supported-in-this-environment");return o=t,gc(e.g).then(function(){throw o})}).then(function(){return e.a.Zb()?new le(function(){}):gc(e.g).then(function(){return e.qa()}).then(function(){}).s(function(){})})})}function kc(t,e,n,r,i){return t.a.Nb(r,function(t){e.ma(n,null,t,i)},Tc.get())}mc.prototype.qa=function(){return this.b.qa()};var Oc={};function Pc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Dc(t,e,n,r){var i=Pc(e,n,r);return Oc[i]||(Oc[i]=new mc(t,e,n,r)),Oc[i]}function Rc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function xc(t){t.g||(t.g=!0,Fc(t,!1,null,null))}function Lc(t){t.g&&!t.i&&Fc(t,!1,null,null)}function Mc(t,e){if(t.b=function(){return me(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Fc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return be(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):Mc(t,n):Mc(t,{user:null}),t.f=[],t.c=[]}function Uc(){}function jc(){this.hb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.hb},set:function(t){this.hb=t},enumerable:!1})}function Vc(t,e){this.a=e,Ur(this,"verificationId",t)}function qc(t,e,n,r){return new So(t).eb(e,n).then(function(t){return new Vc(t,r)})}function Bc(t){var e=Ri(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new w("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");jr(this,{token:t,expirationTime:Dr(1e3*e.exp),authTime:Dr(1e3*e.auth_time),issuedAtTime:Dr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Wc(t,e,n){var r=e&&e[Gc];if(!r)throw new w("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ut(e),this.g=n,this.c=new Qi(null,r),this.b=[];var i=this;U(e[Hc]||[],function(t){(t=Wr(t))&&i.b.push(t)}),Ur(this,"auth",this.a),Ur(this,"session",this.c),Ur(this,"hints",this.b)}Rc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Rc.prototype.h=function(t,e){var n,r,i,o;t?(this.reset(),this.g=!0,n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code,this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Fc(this,!0,null,t.a),me()):e.Fa(n,r)?function(e,t,n){n=n.Fa(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.S(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Fc(e,a,t,null)}).s(function(t){Fc(e,a,null,t)})}(this,t,e):be(new w("invalid-auth-event")):(Fc(this,!1,null,null),me())):be(new w("invalid-auth-event"))},Rc.prototype.qa=function(){var i=this;return new le(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new w("timeout"),n.a&&n.a.cancel(),n.a=vn(Sc.get()).then(function(){n.b||(n.g=!0,Fc(n,!0,null,r))}))})},Uc.prototype.h=function(t,e){var n,r,i,o,s;t?(n=t.c,r=t.b,t.a?(e.ma(t.c,null,t.a,t.b),me()):e.Fa(n,r)?(i=e,o=(t=t).b,s=t.c,i.Fa(s,o)(t.g,t.f,t.S(),t.i).then(function(t){i.ma(s,t,null,o)}).s(function(t){i.ma(s,null,t,o)})):be(new w("invalid-auth-event"))):be(new w("invalid-auth-event"))},Vc.prototype.confirm=function(t){return t=Co(this.verificationId,t),this.a(t)};var Hc="mfaInfo",Gc="mfaPendingCredential";function Kc(t,e,n,r){w.call(this,"multi-factor-auth-required",r,e),this.b=new Wc(t,e,n),Ur(this,"resolver",this.b)}function zc(t,e,n){if(t&&v(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Kc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Qc(){}function Xc(t){Ur(this,"factorId",t.fa),this.a=t}function Yc(t){if(Xc.call(this,t),this.a.fa!=So.PROVIDER_ID)throw new w("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Jc(t,e){for(var n in je.call(this,t),e)this[n]=e[n]}function $c(t,e){this.a=t,this.b=[],this.c=g(this.xc,this),Je(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&U(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Kr]=t.uid),t.displayName&&(n[Hr]=t.displayName),t.enrollmentTime&&(n[Gr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[zr]=t.phoneNumber);try{e=new Qr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),Zc(this,r)}function Zc(t,e){t.b=e,Ur(t,"enrolledFactors",e)}function th(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function eh(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function nh(t){this.c=t,this.b=this.a=null}function rh(t){return t.b&&1e3*t.b.c||0}function ih(t,e){var n=e.refreshToken;t.b=Di(e[qs]||""),t.a=n}function oh(e,t){return r=e.c,i=t,new le(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Ys(r,r.l+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Qa(t)):t.access_token&&t.refresh_token?e(t):n(new w("internal-error")):n(new w("network-request-failed"))},"POST",Vn(i).toString(),r.g,r.v.get()):n(new w("internal-error"))}).then(function(t){return e.b=Di(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}}).s(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function sh(t,e){this.a=t||null,this.b=e||null,jr(this,{lastSignInTime:Dr(e||null),creationTime:Dr(t||null)})}function ah(t,e,n,r,i,o){jr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function uh(t,e,n){this.G=[],this.l=t.apiKey,this.m=t.appName,this.o=t.authDomain||null;var r,i=Ql.SDK_VERSION?vr(Ql.SDK_VERSION):null;this.a=new js(this.l,N(I),i),t.emulatorConfig&&zs(this.a,t.emulatorConfig),this.b=new nh(this.a),yh(this,e[qs]),ih(this.b,e),Ur(this,"refreshToken",this.b.a),bh(this,n||{}),hn.call(this),this.P=!1,this.o&&br()&&(this.i=Dc(this.o,this.l,this.m)),this.R=[],this.f=null,this.u=(r=this,new th(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=rh(r.b)-b()-3e5;return 0<t?t:0})),this.$=g(this.gb,this);var o=this;this.pa=null,this.Ba=function(t){o.wa(t.h)},this.ba=null,this.za=function(t){zs(o.a,t.c)},this.W=null,this.X=[],this.Aa=function(t){lh(o,t.f)},this.aa=null,this.N=new $c(this,n),Ur(this,"multiFactor",this.N)}function ch(t,e){t.ba&&tn(t.ba,"languageCodeChanged",t.Ba),(t.ba=e)&&Je(e,"languageCodeChanged",t.Ba)}function hh(t,e){t.W&&tn(t.W,"emulatorConfigChanged",t.za),(t.W=e)&&Je(e,"emulatorConfigChanged",t.za)}function lh(t,e){t.X=e,Xs(t.a,Ql.SDK_VERSION?vr(Ql.SDK_VERSION,t.X):null)}function fh(t,e){t.aa&&tn(t.aa,"frameworkChanged",t.Aa),(t.aa=e)&&Je(e,"frameworkChanged",t.Aa)}function ph(e){try{return Ql.app(e.m).auth()}catch(t){throw new w("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function dh(t){t.A||t.u.b||(t.u.start(),tn(t,"tokenChanged",t.$),Je(t,"tokenChanged",t.$))}function vh(t){tn(t,"tokenChanged",t.$),t.u.stop()}function yh(t,e){t.ya=e,Ur(t,"_lat",e)}function gh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return we(e).then(function(){return t})}function mh(t){t.i&&!t.P&&(t.P=!0,Ec(t.i,t))}function bh(t,e){jr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new sh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function _h(){}function wh(t){return me().then(function(){if(t.A)throw new w("app-deleted")})}function Eh(t){return V(t.providerData,function(t){return t.providerId})}function Ih(t,e){e&&(Th(t,e.providerId),t.providerData.push(e))}function Th(t,e){H(t.providerData,function(t){return t.providerId==e})}function Sh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Ur(t,e,n)}function Ch(e,t){var n,r;e!=t&&(jr(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Ur(e,"metadata",new sh((r=t.metadata).a,r.b)):Ur(e,"metadata",new sh),U(t.providerData,function(t){Ih(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,Ur(e,"refreshToken",e.b.a),Zc(e.N,t.N.b))}function Nh(i){return i.I().then(function(t){var e,n,r=i.isAnonymous;return n=t,Ka((e=i).a,Ia,{idToken:n}).then(g(e.Jc,e)).then(function(){return r||Sh(i,"isAnonymous",!1),t})})}function Ah(t,e){e[qs]&&t.ya!=e[qs]&&(ih(t.b,e),t.dispatchEvent(new Jc("tokenChanged")),yh(t,e[qs]),Sh(t,"refreshToken",t.b.a))}function kh(t,e){return Nh(t).then(function(){if(B(Eh(t),e))return gh(t).then(function(){throw new w("provider-already-linked")})})}function Oh(t,e,n){return Vr({user:t,credential:No(e),additionalUserInfo:e=Ui(e),operationType:n})}function Ph(t,e){return Ah(t,e),t.reload().then(function(){return t})}function Dh(n,r,t,e,i){if(!br())return be(new w("operation-not-supported-in-this-environment"));if(n.f&&!i)return be(n.f);var o=Fi(t.providerId),s=Cr(n.uid+":::"),a=null;(!Er()||ar())&&n.o&&t.isOAuthProvider&&(a=au(n.o,n.l,n.m,r,t,null,s,Ql.SDK_VERSION||null,null,null,n.tenantId));var u=nr(a,o&&o.ua,o&&o.ta);return e=e().then(function(){if(xh(n),!i)return n.I().then(function(){})}).then(function(){return Cc(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new le(function(t,e){n.ma(r,null,new w("cancelled-popup-request"),n.h||null),n.g=t,n.O=e,n.h=s,n.c=kc(n.i,n,r,u,s)})}).then(function(t){return u&&er(u),t?Vr(t):null}).s(function(t){throw u&&er(u),t}),Lh(n,e,i)}function Rh(e,t,n,r,i){if(!br())return be(new w("operation-not-supported-in-this-environment"));if(e.f&&!i)return be(e.f);var o=null,s=Cr(e.uid+":::");return r=r().then(function(){if(xh(e),!i)return e.I().then(function(){})}).then(function(){return e.ga=s,gh(e)}).then(function(t){return e.ha&&(t=(t=e.ha).b.set(Uh,e.w(),t.a)),t}).then(function(){return Ac(e.i,t,n,s,e.tenantId)}).s(function(t){if(o=t,e.ha)return jh(e.ha);throw o}).then(function(){if(o)throw o}),Lh(e,r,i)}function xh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new w("internal-error");throw new w("auth-domain-config-required")}}function Lh(n,t,e){var r,i=(t=t,e=e,(r=n).f&&!e?(t.cancel(),be(r.f)):t.s(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.f||r.dispatchEvent(new Jc("userInvalidated")),r.f=t),t}));return n.G.push(i),i.na(function(){W(n.G,i)}),i.s(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=zc(t.w(),ph(n),g(n.ic,n))),e||t})}function Mh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[qs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new uh(e,n,t);return t.providerData&&U(t.providerData,function(t){t&&Ih(r,Vr(t))}),t.redirectEventId&&(r.ga=t.redirectEventId),r}function Fh(t){this.a=t,this.b=Wu()}Wc.prototype.Qc=function(t){var n=this;return t.rb(this.a.a,this.c).then(function(t){var e=ut(n.f);return delete e[Hc],delete e[Gc],ht(e,t),n.g(e)})},_(Kc,w),Qc.prototype.rb=function(t,e,n){return e.type==Xi?(o=this,s=t,a=n,e.Ha().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),ht(t,{phoneVerificationInfo:To(o.a)}),Ka(s,wa,t)})):(r=this,i=t,e.Ha().then(function(t){return ht(t={mfaPendingCredential:t},{phoneVerificationInfo:To(r.a)}),Ka(i,Ea,t)}));var r,i,o,s,a},_(Xc,Qc),_(Yc,Xc),_(Jc,je),(t=$c.prototype).xc=function(t){var e;Zc(this,(t=t.gd,e=[],U(t.mfaInfo||[],function(t){(t=Wr(t))&&e.push(t)}),e))},t.Qb=function(){return this.a.I().then(function(t){return new Qi(t,null)})},t.ec=function(e,n){var r=this,i=this.a.a;return this.Qb().then(function(t){return e.rb(i,t,n)}).then(function(t){return Ah(r.a,t),r.a.reload()})},t.ad=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Ka(e,Ga,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=j(n.b,function(t){return t.uid!=r});return Zc(n,e),Ah(n.a,t),n.a.reload().s(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.w=function(){return{multiFactor:{enrolledFactors:V(this.b,function(t){return t.w()})}}},th.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=vn(eh(n,t)).then(function(){return e=l.document,n=null,Or()||!e?me():new le(function(t){n=function(){Or()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).s(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).s(function(t){n.i(t)&&e(n,!1)})}(this,!0)},th.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},nh.prototype.w=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:rh(this)}},nh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?be(new w("user-token-expired")):t||!this.b||b()>rh(this)-3e4?this.a?oh(this,{grant_type:"refresh_token",refresh_token:this.a}):me(null):me({accessToken:this.b.toString(),refreshToken:this.a})},sh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},_(uh,hn),uh.prototype.wa=function(t){this.pa=t,Ks(this.a,t)},uh.prototype.ka=function(){return this.pa},uh.prototype.Ga=function(){return K(this.X)},uh.prototype.gb=function(){this.u.b&&(this.u.stop(),this.u.start())},Ur(uh.prototype,"providerId","firebase"),(t=uh.prototype).reload=function(){var t=this;return Lh(this,wh(this).then(function(){return Nh(t).then(function(){return gh(t)}).then(_h)}))},t.nc=function(t){return this.I(t).then(function(t){return new Bc(t)})},t.I=function(t){var e=this;return Lh(this,wh(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new w("internal-error");return t.accessToken!=e.ya&&(yh(e,t.accessToken),e.dispatchEvent(new Jc("tokenChanged"))),Sh(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Jc=function(t){if(!(t=t.users)||!t.length)throw new w("internal-error");bh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e,n=(e=(e=t).providerUserInfo)&&e.length?V(e,function(t){return new ah(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],r=0;r<n.length;r++)Ih(this,n[r]);Sh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Jc("userReloaded",{gd:t}))},t.Kc=function(t){return Mr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.sb(t)},t.sb=function(t){var e=this,n=null;return Lh(this,t.c(this.a,this.uid).then(function(t){return Ah(e,t),n=Oh(e,t,"reauthenticate"),e.f=null,e.reload()}).then(function(){return n}),!0)},t.Bc=function(t){return Mr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.pb(t)},t.pb=function(e){var n=this,r=null;return Lh(this,kh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=Oh(n,t,"link"),Ph(n,t)}).then(function(){return r}))},t.Cc=function(t,e){var n=this;return Lh(this,kh(this,"phone").then(function(){return qc(ph(n),t,e,g(n.pb,n))}))},t.Lc=function(t,e){var n=this;return Lh(this,me().then(function(){return qc(ph(n),t,e,g(n.sb,n))}),!0)},t.Ab=function(e){var n=this;return Lh(this,this.I().then(function(t){return n.a.Ab(t,e)}).then(function(t){return Ah(n,t),n.reload()}))},t.dd=function(e){var n=this;return Lh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Ah(n,t),n.reload()}))},t.Bb=function(e){var n=this;return Lh(this,this.I().then(function(t){return n.a.Bb(t,e)}).then(function(t){return Ah(n,t),n.reload()}))},t.Cb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return wh(this);var n=this;return Lh(this,this.I().then(function(t){return n.a.Cb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Ah(n,t),Sh(n,"displayName",t.displayName||null),Sh(n,"photoURL",t.photoUrl||null),U(n.providerData,function(t){"password"===t.providerId&&(Ur(t,"displayName",n.displayName),Ur(t,"photoURL",n.photoURL))}),gh(n)}).then(_h))},t.bd=function(e){var n=this;return Lh(this,Nh(this).then(function(t){return B(Eh(n),e)?Ka(n.a,ma,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return U(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),U(Eh(n),function(t){e[t]||Th(n,t)}),e[So.PROVIDER_ID]||Ur(n,"phoneNumber",null),gh(n)}):gh(n).then(function(){throw new w("no-such-provider")})}))},t.delete=function(){var e=this;return Lh(this,this.I().then(function(t){return Ka(e.a,ga,{idToken:t})}).then(function(){e.dispatchEvent(new Jc("userDeleted"))})).then(function(){for(var t=0;t<e.G.length;t++)e.G[t].cancel("app-deleted");ch(e,null),hh(e,null),fh(e,null),e.G=[],e.A=!0,vh(e),Ur(e,"refreshToken",null),e.i&&Ic(e.i,e)})},t.Eb=function(t,e){return!!("linkViaPopup"==t&&(this.h||null)==e&&this.g||"reauthViaPopup"==t&&(this.h||null)==e&&this.g||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.ma=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.h||null)||(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.h||null)?g(this.Jb,this):"reauthViaPopup"==t&&e==(this.h||null)?g(this.Kb,this):"linkViaRedirect"==t&&(this.ga||null)==e?g(this.Jb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?g(this.Kb,this):null},t.Dc=function(t){var e=this;return Dh(this,"linkViaPopup",t,function(){return kh(e,t.providerId).then(function(){return gh(e)})},!1)},t.Mc=function(t){return Dh(this,"reauthViaPopup",t,function(){return me()},!0)},t.Ec=function(t){var e=this;return Rh(this,"linkViaRedirect",t,function(){return kh(e,t.providerId)},!1)},t.Nc=function(t){return Rh(this,"reauthViaRedirect",t,function(){return me()},!0)},t.Jb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return ha(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=Oh(i,t,"link"),Ph(i,t)}).then(function(){return o}),Lh(this,t)},t.Kb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Lh(this,me().then(function(){return $i(la(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=Oh(i,t,"reauthenticate"),Ah(i,t),i.f=null,i.reload()}).then(function(){return o}),!0)},t.tb=function(e){var n=this,r=null;return Lh(this,this.I().then(function(t){return r=t,void 0===e||at(e)?{}:Ai(new mi(e))}).then(function(t){return n.a.tb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Db=function(e,n){var r=this,i=null;return Lh(this,this.I().then(function(t){return i=t,void 0===n||at(n)?{}:Ai(new mi(n))}).then(function(t){return r.a.Db(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.ic=function(t){var e=null,n=this;return Lh(this,t=$i(me(t),n.uid).then(function(t){return e=Oh(n,t,"reauthenticate"),Ah(n,t),n.f=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.w()},t.w=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.o,stsTokenManager:this.b.w(),redirectEventId:this.ga||null};return this.metadata&&ht(e,this.metadata.w()),U(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),ht(e,this.N.w()),e};var Uh={name:"redirectUser",D:"session"};function jh(t){return Ku(t.b,Uh,t.a)}function Vh(t){var e,n,r,i;this.a=t,this.b=Wu(),this.c=null,this.f=(n=Wh("local"),r=Wh("session"),i=Wh("none"),function(n,r,i){var o=Gu(r,i),s=Hu(n,r.D);return n.get(r,i).then(function(t){var e=null;try{e=Sr(l.localStorage.getItem(o))}catch(t){}if(e&&!t)return l.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=s.type&&l.localStorage.removeItem(o)})}((e=this).b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Bh,e.a).then(function(t){return t?Wh(t):n})})})}).then(function(t){return e.c=t,qh(e,t.D)}).s(function(){e.c||(e.c=n)})),this.b.addListener(Wh("local"),this.a,g(this.g,this))}function qh(t,e){var n,a,r=[];for(n in qu)qu[n]!==e&&r.push(Ku(t.b,Wh(qu[n]),t.a));return r.push(Ku(t.b,Bh,t.a)),a=r,new le(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)_e(a[s],m(t,s),o);else n(i)})}Vh.prototype.g=function(){var e=this,n=Wh("local");zh(this,function(){return me().then(function(){return e.c&&"local"!=e.c.D?e.b.get(n,e.a):null}).then(function(t){if(t)return qh(e,"local").then(function(){e.c=n})})})};var Bh={name:"persistence",D:"session"};function Wh(t){return{name:"authUser",D:t}}function Hh(t,e){return zh(t,function(){return t.b.set(t.c,e.w(),t.a)})}function Gh(t){return zh(t,function(){return Ku(t.b,t.c,t.a)})}function Kh(t,e,n){return zh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),Mh(t||{})})})}function zh(t,e){return t.f=t.f.then(e,e),t.f}function Qh(t){if(this.m=!1,Ur(this,"settings",new jc),Ur(this,"app",t),!this.app.options||!this.app.options.apiKey)throw new w("invalid-api-key");var n,e,r,i,o,s;t=Ql.SDK_VERSION?vr(Ql.SDK_VERSION):null,this.a=new js(this.app.options&&this.app.options.apiKey,N(I),t),this.R=[],this.u=[],this.P=[],this.ac=Ql.INTERNAL.createSubscribe(g(this.yc,this)),this.X=void 0,this.bc=Ql.INTERNAL.createSubscribe(g(this.zc,this)),el(this,null),this.l=new Vh(this.app.options.apiKey+":"+this.app.name),this.G=new Fh(this.app.options.apiKey+":"+this.app.name),this.$=sl(this,(e=(n=this).app.options.authDomain,t=function(e){var t=function(t,e){return t.b.get(Uh,t.a).then(function(t){return t&&e&&(t.authDomain=e),Mh(t||{})})}(e.G,e.app.options.authDomain).then(function(t){return(e.o=t)&&(t.ha=e.G),jh(e.G)});return sl(e,t)}(n).then(function(){return Kh(n.l,e,n.f)}).then(function(e){return e?(e.ha=n.G,n.o&&(n.o.ga||null)==(e.ga||null)?e:e.reload().then(function(){return Hh(n.l,e).then(function(){return e})}).s(function(t){return"auth/network-request-failed"==t.code?e:Gh(n.l)})):null}).then(function(t){el(n,t||null)}),sl(n,t))),this.i=sl(this,(r=this).$.then(function(){return Zh(r)}).s(function(){}).then(function(){if(!r.m)return r.pa()}).s(function(){}).then(function(){var t;r.m||(r.ba=!0,(t=r.l).b.addListener(Wh("local"),t.a,r.pa))})),this.ba=!1,this.pa=g(this.Yc,this),this.Ba=g(this.da,this),this.ya=g(this.kc,this),this.za=g(this.vc,this),this.Aa=g(this.wc,this),this.b=null,o=(i=this).app.options.authDomain,s=i.app.options.apiKey,o&&br()&&(i.gb=i.$.then(function(){var t;if(!i.m)return i.b=Dc(o,s,i.app.name,i.f),Ec(i.b,i),rl(i)&&mh(rl(i)),i.o&&(mh(i.o),(t=i.o).wa(i.ka()),ch(t,i),lh(t=i.o,i.N),fh(t,i),zs((t=i.o).a,i.f),hh(t,i),i.o=null),i.b})),this.INTERNAL={},this.INTERNAL.delete=g(this.delete,this),this.INTERNAL.logFramework=g(this.Fc,this),this.A=0,hn.call(this),t=this,Object.defineProperty(t,"lc",{get:function(){return this.ka()},set:function(t){this.wa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.S()},set:function(t){this.xb(t)},enumerable:!1}),t.W=null,this.N=[],this.f=null}function Xh(t){je.call(this,"languageCodeChanged"),this.h=t}function Yh(t){je.call(this,"emulatorConfigChanged"),this.c=t}function Jh(t){je.call(this,"frameworkChanged"),this.f=t}function $h(t){return t.gb||be(new w("auth-domain-config-required"))}function Zh(t){if(!br())return be(new w("operation-not-supported-in-this-environment"));var e=$h(t).then(function(){return t.b.qa()}).then(function(t){return t?Vr(t):null});return sl(t,e)}function tl(o,s){var a={};return a.apiKey=o.app.options.apiKey,a.authDomain=o.app.options.authDomain,a.appName=o.app.name,o.f&&(a.emulatorConfig=o.f),o.$.then(function(){return t=a,e=s,n=o.G,r=o.Ga(),i=new uh(t,e),n&&(i.ha=n),r&&lh(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return rl(o)&&t.uid==rl(o).uid?Ch(rl(o),t):(el(o,t),mh(t)),o.da(t)}).then(function(){ol(o)})}function el(t,e){var n,r;rl(t)&&(n=rl(t),r=t.Ba,H(n.R,function(t){return t==r}),tn(rl(t),"tokenChanged",t.ya),tn(rl(t),"userDeleted",t.za),tn(rl(t),"userInvalidated",t.Aa),vh(rl(t))),e&&(e.R.push(t.Ba),Je(e,"tokenChanged",t.ya),Je(e,"userDeleted",t.za),Je(e,"userInvalidated",t.Aa),0<t.A&&dh(e)),Ur(t,"currentUser",e),e&&(e.wa(t.ka()),ch(e,t),lh(e,t.N),fh(e,t),zs(e.a,t.f),hh(e,t))}function nl(n,t){var e=null,r=null;return sl(n,t.then(function(t){return e=No(t),r=Ui(t),tl(n,t)},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=zc(t.w(),n,g(n.jc,n))),e||t}).then(function(){return Vr({user:rl(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function rl(t){return t.currentUser}function il(t){return rl(t)&&rl(t)._lat||null}function ol(t){if(t.ba){for(var e=0;e<t.u.length;e++)t.u[e]&&t.u[e](il(t));if(t.X!==t.getUid()&&t.P.length)for(t.X=t.getUid(),e=0;e<t.P.length;e++)t.P[e]&&t.P[e](il(t))}}function sl(t,e){return t.R.push(e),e.na(function(){W(t.R,e)}),e}function al(){}function ul(){this.a={},this.b=1e12}Vh.prototype.wb=function(e){var n=null,r=this;return function(t){var e=new w("invalid-persistence-type"),n=new w("unsupported-persistence-type");t:{for(r in qu)if(qu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(cr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!_u()&&"none"!==t)throw n;break;default:if(!mr()&&"none"!==t)throw n}}(e),zh(this,function(){return e!=r.c.D?r.b.get(r.c,r.a).then(function(t){return n=t,qh(r,e)}).then(function(){if(r.c=Wh(e),n)return r.b.set(r.c,n,r.a)}):me()})},_(Qh,hn),_(Xh,je),_(Yh,je),_(Jh,je),(t=Qh.prototype).wb=function(t){return t=this.l.wb(t),sl(this,t)},t.wa=function(t){this.aa===t||this.m||(this.aa=t,Ks(this.a,this.aa),this.dispatchEvent(new Xh(this.ka())))},t.ka=function(){return this.aa},t.ed=function(){var t=l.navigator;this.wa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.fd=function(t){if(!this.f){if(!/^https?:\/\//.test(t))throw new w("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");Pr("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),l.document&&or().then(function(){var t=l.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#ff0000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),l.document.body.appendChild(t)}),this.f={url:t},this.settings.hb=!0,zs(this.a,this.f),this.dispatchEvent(new Yh(this.f))}},t.Fc=function(t){this.N.push(t),Xs(this.a,Ql.SDK_VERSION?vr(Ql.SDK_VERSION,this.N):null),this.dispatchEvent(new Jh(this.N))},t.Ga=function(){return K(this.N)},t.xb=function(t){this.W===t||this.m||(this.W=t,this.a.b=this.W)},t.S=function(){return this.W},t.toJSON=function(){return{apiKey:this.app.options.apiKey,authDomain:this.app.options.authDomain,appName:this.app.name,currentUser:rl(this)&&rl(this).w()}},t.Eb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.h==e&&!!this.g;default:return!1}},t.ma=function(t,e,n,r){"signInViaPopup"==t&&this.h==r&&(n&&this.O?this.O(n):e&&!n&&this.g&&this.g(e),this.c&&(this.c.cancel(),this.c=null),delete this.g,delete this.O)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.h==e&&this.g?g(this.hc,this):null},t.hc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then(function(){return nl(i,ca(i.a,o))})},t.Wc=function(e){if(!br())return be(new w("operation-not-supported-in-this-environment"));var n=this,t=Fi(e.providerId),r=Cr(),i=null;(!Er()||ar())&&this.app.options.authDomain&&e.isOAuthProvider&&(i=au(this.app.options.authDomain,this.app.options.apiKey,this.app.name,"signInViaPopup",e,null,r,Ql.SDK_VERSION||null,null,null,this.S(),this.f));var o=nr(i,t&&t.ua,t&&t.ta);return sl(this,t=$h(this).then(function(t){return Cc(t,o,"signInViaPopup",e,r,!!i,n.S())}).then(function(){return new le(function(t,e){n.ma("signInViaPopup",null,new w("cancelled-popup-request"),n.h),n.g=t,n.O=e,n.h=r,n.c=kc(n.b,n,"signInViaPopup",o,r)})}).then(function(t){return o&&er(o),t?Vr(t):null}).s(function(t){throw o&&er(o),t}))},t.Xc=function(t){if(!br())return be(new w("operation-not-supported-in-this-environment"));var e=this;return sl(this,$h(this).then(function(){return zh(t=e.l,function(){return t.b.set(Bh,t.c.D,t.a)});var t}).then(function(){return Ac(e.b,"signInViaRedirect",t,void 0,e.S())}))},t.qa=function(){var e=this;return Zh(this).then(function(t){return e.b&&Lc(e.b.b),t}).s(function(t){throw e.b&&Lc(e.b.b),t})},t.cd=function(t){if(!t)return be(new w("null-user"));if(this.W!=t.tenantId)return be(new w("tenant-id-mismatch"));var e=this,n={};n.apiKey=this.app.options.apiKey,n.authDomain=this.app.options.authDomain,n.appName=this.app.name;var r,i,o,s,a,u=(r=t,i=n,o=e.G,s=e.Ga(),a=r.b,(n={})[qs]=a.b&&a.b.toString(),n.refreshToken=a.a,i=new uh(i||{apiKey:r.l,authDomain:r.o,appName:r.m},n),o&&(i.ha=o),s&&lh(i,s),Ch(i,r),i);return sl(this,this.i.then(function(){if(e.app.options.apiKey!=t.l)return u.reload()}).then(function(){return rl(e)&&t.uid==rl(e).uid?(Ch(rl(e),t),e.da(t)):(el(e,u),mh(u),e.da(u))}).then(function(){ol(e)}))},t.zb=function(){var t=this,e=this.i.then(function(){return t.b&&Lc(t.b.b),rl(t)?(el(t,null),Gh(t.l).then(function(){ol(t)})):me()});return sl(this,e)},t.Yc=function(){var r=this;return Kh(this.l,this.app.options.authDomain).then(function(t){if(!r.m){var e,n;if((n=rl(r)&&t)&&(n=rl(r).uid,e=t.uid,n=null!=n&&""!==n&&null!=e&&""!==e&&n==e),n)return Ch(rl(r),t),rl(r).I();(rl(r)||t)&&(el(r,t),t&&(mh(t),t.ha=r.G),r.b&&Ec(r.b,r),ol(r))}})},t.da=function(t){return Hh(this.l,t)},t.kc=function(){ol(this),this.da(rl(this))},t.vc=function(){this.zb()},t.wc=function(){this.zb()},t.jc=function(t){var e=this;return this.i.then(function(){return nl(e,me(t))})},t.yc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(rl(e))})},t.zc=function(t){var e,n,r=this;n=function(){t.next(rl(r))},(e=this).P.push(n),sl(e,e.i.then(function(){!e.m&&B(e.P,n)&&e.X!==e.getUid()&&(e.X=e.getUid(),n(il(e)))}))},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){"function"==typeof t?t(rl(r)):"function"==typeof t.next&&t.next(rl(r))}),this.ac(t,e,n)},t.Gc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then(function(){r.X=r.getUid(),"function"==typeof t?t(rl(r)):"function"==typeof t.next&&t.next(rl(r))}),this.bc(t,e,n)},t.mc=function(t){var e=this,n=this.i.then(function(){return rl(e)?rl(e).I(t).then(function(t){return{accessToken:t}}):null});return sl(this,n)},t.Sc=function(t){var n=this;return this.i.then(function(){return nl(n,Ka(n.a,Va,{token:t}))}).then(function(t){var e=t.user;return Sh(e,"isAnonymous",!1),n.da(e),t})},t.Tc=function(t,e){var n=this;return this.i.then(function(){return nl(n,Ka(n.a,qa,{email:t,password:e}))})},t.dc=function(t,e){var n=this;return this.i.then(function(){return nl(n,Ka(n.a,va,{email:t,password:e}))})},t.Za=function(t){var e=this;return this.i.then(function(){return nl(e,t.ja(e.a))})},t.Rc=function(t){return Mr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Za(t)},t.yb=function(){var n=this;return this.i.then(function(){var t=rl(n);if(t&&t.isAnonymous){var e=Vr({providerId:null,isNewUser:!1});return Vr({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return nl(n,n.a.yb()).then(function(t){var e=t.user;return Sh(e,"isAnonymous",!0),n.da(e),t})})},t.getUid=function(){return rl(this)&&rl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.A++,0<this.A&&rl(this)&&dh(rl(this))},t.Oc=function(e){var n=this;U(this.u,function(t){t==e&&n.A--}),this.A<0&&(this.A=0),0==this.A&&rl(this)&&vh(rl(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.u.push(t),sl(this,this.i.then(function(){e.m||B(e.u,t)&&t(il(e))}))},t.removeAuthTokenListener=function(e){H(this.u,function(t){return t==e})},t.delete=function(){this.m=!0;for(var t=0;t<this.R.length;t++)this.R[t].cancel("app-deleted");return this.R=[],this.l&&(t=this.l).b.removeListener(Wh("local"),t.a,this.pa),this.b&&(Ic(this.b,this),Lc(this.b.b)),Promise.resolve()},t.gc=function(t){return sl(this,Ka(this.a,ya,{identifier:t,continueUri:_r()?$n():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.Ac=function(t){return!!wo(t)},t.vb=function(e,n){var r=this;return sl(this,me().then(function(){var t=new mi(n);if(!t.c)throw new w("argument-error",wi+" must be true when sending sign in link to email");return Ai(t)}).then(function(t){return r.a.vb(e,t)}).then(function(){}))},t.hd=function(t){return this.Qa(t).then(function(t){return t.data.email})},t.mb=function(t,e){return sl(this,this.a.mb(t,e).then(function(){}))},t.Qa=function(t){return sl(this,this.a.Qa(t).then(function(t){return new Xr(t)}))},t.ib=function(t){return sl(this,this.a.ib(t).then(function(){}))},t.ub=function(e,t){var n=this;return sl(this,me().then(function(){return void 0===t||at(t)?{}:Ai(new mi(t))}).then(function(t){return n.a.ub(e,t)}).then(function(){}))},t.Vc=function(t,e){return sl(this,qc(this,t,e,g(this.Za,this)))},t.Uc=function(n,r){var i=this;return sl(this,me().then(function(){var t=r||$n(),e=_o(n,t);if(!(t=wo(t)))throw new w("argument-error","Invalid email link!");if(t.tenantId!==i.S())throw new w("tenant-id-mismatch");return i.Za(e)}))},al.prototype.render=function(){},al.prototype.reset=function(){},al.prototype.getResponse=function(){},al.prototype.execute=function(){};var cl=null;function hl(t,e){return(e=ll(e))&&t.a[e]||null}function ll(t){return(t=void 0===t?1e12:t)?t.toString():null}function fl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=$t(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():Je(this.f,"click",this.i)}function pl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function dl(){}function vl(){}ul.prototype.render=function(t,e){return this.a[this.b.toString()]=new fl(t,e),this.b++},ul.prototype.reset=function(t){var e=hl(this,t);t=ll(t),e&&t&&(e.delete(),delete this.a[t])},ul.prototype.getResponse=function(t){return(t=hl(this,t))?t.getResponse():null},ul.prototype.execute=function(t){(t=hl(this,t))&&t.execute()},fl.prototype.getResponse=function(){return pl(this),this.b},fl.prototype.execute=function(){pl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},fl.prototype.delete=function(){pl(this),this.g=!0,clearTimeout(this.a),this.a=null,tn(this.f,"click",this.i)},Ur(dl,"FACTOR_ID","phone"),vl.prototype.g=function(){return me(cl=cl||new ul)},vl.prototype.c=function(){};var yl=null;function gl(){this.b=l.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var ml=new ft(vt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),bl=new kr(3e4,6e4);gl.prototype.g=function(i){var o=this;return new le(function(t,e){var r=setTimeout(function(){e(new w("network-request-failed"))},bl.get());!l.grecaptcha||i!==o.f&&!o.b?(l[o.a]=function(){var n;l.grecaptcha?(o.f=i,n=l.grecaptcha.render,l.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(l.grecaptcha)):(clearTimeout(r),e(new w("internal-error"))),delete l[o.a]},me(Ds(bt(ml,{onload:o.a,hl:i||""}))).s(function(){clearTimeout(r),e(new w("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(l.grecaptcha))})},gl.prototype.c=function(){this.b--};var _l=null;function wl(t,e,n,r,i,o,s){if(Ur(this,"type","recaptcha"),this.c=this.f=null,this.A=!1,this.m=e,this.g=null,s=s?yl=yl||new vl:_l=_l||new gl,this.v=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Tl])throw new w("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Sl],!l.document)throw new w("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!$t(e)||!this.i&&$t(e).hasChildNodes())throw new w("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.o=new js(t,o||null,i||null),this.u=r||function(){return null};var a=this;this.l=[];var u=this.a[El];this.a[El]=function(t){var e;Cl(a,t),"function"==typeof u?u(t):"string"!=typeof u||"function"==typeof(e=gr(u,l))&&e(t)};var c=this.a[Il];this.a[Il]=function(){var t;Cl(a,null),"function"==typeof c?c():"string"!=typeof c||"function"==typeof(t=gr(c,l))&&t()}}var El="callback",Il="expired-callback",Tl="sitekey",Sl="size";function Cl(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Nl(t,e){return t.h.push(e),e.na(function(){W(t.h,e)}),e}function Al(t){if(t.A)throw new w("internal-error","RecaptchaVerifier instance has been destroyed.")}function kl(t,e,n){var r=!1;try{this.b=n||Ql.app()}catch(t){throw new w("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new w("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ga()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Ql.SDK_VERSION?vr(Ql.SDK_VERSION,o):null,wl.call(this,n,t,e,function(){try{var e=i.b.auth().ka()}catch(t){e=null}return e},o,N(I),r)}function Ol(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new w("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],i<0||i>=Pl.length)throw new w("internal-error","Argument validator received an unsupported number of arguments.");n=Pl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new w("argument-error",t+" failed: "+r)}(t=wl.prototype).Ia=function(){var e=this;return this.f?this.f:this.f=Nl(this,me().then(function(){if(_r()&&!ur())return or();throw new w("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.v.g(e.u())}).then(function(t){return e.g=t,Ka(e.o,ka,{})}).then(function(t){e.a[Tl]=t.recaptchaSiteKey}).s(function(t){throw e.f=null,t}))},t.render=function(){Al(this);var n=this;return Nl(this,this.Ia().then(function(){var t,e;return null===n.c&&(e=n.m,n.i||(t=$t(e),e=re("DIV"),t.appendChild(e)),n.c=n.g.render(e,n.a)),n.c}))},t.verify=function(){Al(this);var i=this;return Nl(this,this.render().then(function(e){return new le(function(n){var r,t=i.g.getResponse(e);t?n(t):(r=function(t){var e;t&&(e=r,H(i.l,function(t){return t==e}),n(t))},i.l.push(r),i.i&&i.g.execute(i.c))})}))},t.reset=function(){Al(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Al(this),this.A=!0,this.v.c();for(var t,e=0;e<this.h.length;e++)this.h[e].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){e=$t(this.m);for(;t=e.firstChild;)e.removeChild(t)}},_(kl,wl);var Pl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Dl(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Rl(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function xl(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:v}}function Ll(t,e){return{name:t||"",J:"a function",optional:!!e,K:function(t){return"function"==typeof t}}}function Ml(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function Fl(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ja||!e)}}}function Ul(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.rb}}}function jl(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Vl(t,e){return v(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function ql(t){return v(t)&&"string"==typeof t.uid}function Bl(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}}function Wl(e,n,t,r){return{name:t||"",J:e.J+" or "+n.J,optional:!!r,K:function(t){return e.K(t)||n.K(t)}}}function Hl(t,e){for(var n in e){var r=e[n].name;t[r]=zl(r,t[n],e[n].j)}}function Gl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:m(function(t){return this[t]},n),set:m(function(t,e,n,r){Ol(t,[n],[r],!0),this[e]=r},r,n,e[n].jb),enumerable:!0})}}function Kl(t,e,n,r){t[e]=zl(e,n,r)}function zl(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return Ol(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=(t=(t=t).split("."))[t.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Hl(Qh.prototype,{ib:{name:"applyActionCode",j:[Dl("code")]},Qa:{name:"checkActionCode",j:[Dl("code")]},mb:{name:"confirmPasswordReset",j:[Dl("code"),Dl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Dl("email"),Dl("password")]},gc:{name:"fetchSignInMethodsForEmail",j:[Dl("email")]},qa:{name:"getRedirectResult",j:[]},Ac:{name:"isSignInWithEmailLink",j:[Dl("emailLink")]},Gc:{name:"onAuthStateChanged",j:[Wl(xl(),Ll(),"nextOrObserver"),Ll("opt_error",!0),Ll("opt_completed",!0)]},Hc:{name:"onIdTokenChanged",j:[Wl(xl(),Ll(),"nextOrObserver"),Ll("opt_error",!0),Ll("opt_completed",!0)]},ub:{name:"sendPasswordResetEmail",j:[Dl("email"),Wl(xl("opt_actionCodeSettings",!0),Ml(null,!0),"opt_actionCodeSettings",!0)]},vb:{name:"sendSignInLinkToEmail",j:[Dl("email"),xl("actionCodeSettings")]},wb:{name:"setPersistence",j:[Dl("persistence")]},Rc:{name:"signInAndRetrieveDataWithCredential",j:[Fl()]},yb:{name:"signInAnonymously",j:[]},Za:{name:"signInWithCredential",j:[Fl()]},Sc:{name:"signInWithCustomToken",j:[Dl("token")]},Tc:{name:"signInWithEmailAndPassword",j:[Dl("email"),Dl("password")]},Uc:{name:"signInWithEmailLink",j:[Dl("email"),Dl("emailLink",!0)]},Vc:{name:"signInWithPhoneNumber",j:[Dl("phoneNumber"),Bl()]},Wc:{name:"signInWithPopup",j:[jl()]},Xc:{name:"signInWithRedirect",j:[jl()]},cd:{name:"updateCurrentUser",j:[Wl({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof uh)}},Ml(),"user")]},zb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Dl(null,!0)]},ed:{name:"useDeviceLanguage",j:[]},fd:{name:"useEmulator",j:[Dl("url")]},hd:{name:"verifyPasswordResetCode",j:[Dl("code")]}}),Gl(Qh.prototype,{lc:{name:"languageCode",jb:Wl(Dl(),Ml(),"languageCode")},ti:{name:"tenantId",jb:Wl(Dl(),Ml(),"tenantId")}}),(Qh.Persistence=qu).LOCAL="local",Qh.Persistence.SESSION="session",Qh.Persistence.NONE="none",Hl(uh.prototype,{delete:{name:"delete",j:[]},nc:{name:"getIdTokenResult",j:[Rl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Rl("opt_forceRefresh",!0)]},Bc:{name:"linkAndRetrieveDataWithCredential",j:[Fl()]},pb:{name:"linkWithCredential",j:[Fl()]},Cc:{name:"linkWithPhoneNumber",j:[Dl("phoneNumber"),Bl()]},Dc:{name:"linkWithPopup",j:[jl()]},Ec:{name:"linkWithRedirect",j:[jl()]},Kc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Fl()]},sb:{name:"reauthenticateWithCredential",j:[Fl()]},Lc:{name:"reauthenticateWithPhoneNumber",j:[Dl("phoneNumber"),Bl()]},Mc:{name:"reauthenticateWithPopup",j:[jl()]},Nc:{name:"reauthenticateWithRedirect",j:[jl()]},reload:{name:"reload",j:[]},tb:{name:"sendEmailVerification",j:[Wl(xl("opt_actionCodeSettings",!0),Ml(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Dl(null,!0)]},bd:{name:"unlink",j:[Dl("provider")]},Ab:{name:"updateEmail",j:[Dl("email")]},Bb:{name:"updatePassword",j:[Dl("password")]},dd:{name:"updatePhoneNumber",j:[Fl("phone")]},Cb:{name:"updateProfile",j:[xl("profile")]},Db:{name:"verifyBeforeUpdateEmail",j:[Dl("email"),Wl(xl("opt_actionCodeSettings",!0),Ml(null,!0),"opt_actionCodeSettings",!0)]}}),Hl(ul.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Hl(al.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Hl(le.prototype,{na:{name:"finally"},s:{name:"catch"},then:{name:"then"}}),Gl(jc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",jb:Rl("appVerificationDisabledForTesting")}}),Hl(Vc.prototype,{confirm:{name:"confirm",j:[Dl("verificationCode")]}}),Kl(Ji,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[io,mo,Io,eo],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Wl(Dl(),xl(),"json")]),Kl(bo,"credential",function(t,e){return new go(t,e)},[Dl("email"),Dl("password")]),Hl(go.prototype,{w:{name:"toJSON",j:[Dl(null,!0)]}}),Hl(uo.prototype,{Ca:{name:"addScope",j:[Dl("scope")]},Ka:{name:"setCustomParameters",j:[xl("customOAuthParameters")]}}),Kl(uo,"credential",co,[Wl(Dl(),xl(),"token")]),Kl(bo,"credentialWithLink",_o,[Dl("email"),Dl("emailLink")]),Hl(ho.prototype,{Ca:{name:"addScope",j:[Dl("scope")]},Ka:{name:"setCustomParameters",j:[xl("customOAuthParameters")]}}),Kl(ho,"credential",lo,[Wl(Dl(),xl(),"token")]),Hl(fo.prototype,{Ca:{name:"addScope",j:[Dl("scope")]},Ka:{name:"setCustomParameters",j:[xl("customOAuthParameters")]}}),Kl(fo,"credential",po,[Wl(Dl(),Wl(xl(),Ml()),"idToken"),Wl(Dl(),Ml(),"accessToken",!0)]),Hl(vo.prototype,{Ka:{name:"setCustomParameters",j:[xl("customOAuthParameters")]}}),Kl(vo,"credential",yo,[Wl(Dl(),xl(),"token"),Dl("secret",!0)]),Hl(ao.prototype,{Ca:{name:"addScope",j:[Dl("scope")]},credential:{name:"credential",j:[Wl(Dl(),Wl(xl(),Ml()),"optionsOrIdToken"),Wl(Dl(),Ml(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[xl("customOAuthParameters")]}}),Hl(no.prototype,{w:{name:"toJSON",j:[Dl(null,!0)]}}),Hl(Zi.prototype,{w:{name:"toJSON",j:[Dl(null,!0)]}}),Kl(So,"credential",Co,[Dl("verificationId"),Dl("verificationCode")]),Hl(So.prototype,{eb:{name:"verifyPhoneNumber",j:[Wl(Dl(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Vl(t.session,Xi)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Vl(t.session,Yi)&&ql(t.multiFactorHint):t.session&&t.multiFactorUid?Vl(t.session,Yi)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Bl()]}}),Hl(Eo.prototype,{w:{name:"toJSON",j:[Dl(null,!0)]}}),Hl(w.prototype,{toJSON:{name:"toJSON",j:[Dl(null,!0)]}}),Hl(Lo.prototype,{toJSON:{name:"toJSON",j:[Dl(null,!0)]}}),Hl(xo.prototype,{toJSON:{name:"toJSON",j:[Dl(null,!0)]}}),Hl(Kc.prototype,{toJSON:{name:"toJSON",j:[Dl(null,!0)]}}),Hl(Wc.prototype,{Qc:{name:"resolveSignIn",j:[Ul()]}}),Hl($c.prototype,{Qb:{name:"getSession",j:[]},ec:{name:"enroll",j:[Ul(),Dl("displayName",!0)]},ad:{name:"unenroll",j:[Wl({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:ql},Dl(),"multiFactorInfoIdentifier")]}}),Hl(kl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Kl(ci,"parseLink",gi,[Dl("link")]),Kl(dl,"assertion",function(t){return new Yc(t)},[Fl("phone")]),function(){if(void 0===Ql||!Ql.INTERNAL||!Ql.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Jr,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:Yr,VERIFY_AND_CHANGE_EMAIL:$r,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Qh,AuthCredential:Ji,Error:w};Kl(t,"EmailAuthProvider",bo,[]),Kl(t,"FacebookAuthProvider",uo,[]),Kl(t,"GithubAuthProvider",ho,[]),Kl(t,"GoogleAuthProvider",fo,[]),Kl(t,"TwitterAuthProvider",vo,[]),Kl(t,"OAuthProvider",ao,[Dl("providerId")]),Kl(t,"SAMLAuthProvider",so,[Dl("providerId")]),Kl(t,"PhoneAuthProvider",So,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Qh)}}]),Kl(t,"RecaptchaVerifier",kl,[Wl(Dl(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),xl("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Ql.app.App)}}]),Kl(t,"ActionCodeURL",ci,[]),Kl(t,"PhoneMultiFactorGenerator",dl,[]),Ql.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Qh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Ql.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:g((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:g(t.mc,t),addAuthTokenListener:g(t.cc,t),removeAuthTokenListener:g(t.Oc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Ql.registerVersion("@firebase/auth","0.15.1"),Ql.INTERNAL.extendNamespace({User:uh})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{});var Ys=(Js.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Jo(e))},Js.prototype.get=function(t){t=this.domStorage_.getItem(this.prefixedName_(t));return null==t?null:Yo(t)},Js.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},Js.prototype.prefixedName_=function(t){return this.prefix_+t},Js.prototype.toString=function(){return this.domStorage_.toString()},Js);function Js(t){this.domStorage_=t,this.prefix_="firebase:"}var $s=(Zs.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},Zs.prototype.get=function(t){return Zo(this.cache_,t)?this.cache_[t]:null},Zs.prototype.remove=function(t){delete this.cache_[t]},Zs);function Zs(){this.cache_={},this.isInMemoryStorage=!0}function ta(t){var e=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i,o=t.charCodeAt(r);55296<=o&&o<=56319&&(i=o-55296,Ao(++r<t.length,"Surrogate pair missing trail surrogate."),o=65536+(i<<10)+(t.charCodeAt(r)-56320)),o<128?e[n++]=o:(o<2048?e[n++]=o>>6|192:(o<65536?e[n++]=o>>12|224:(e[n++]=o>>18|240,e[n++]=o>>12&63|128),e[n++]=o>>6&63|128),e[n++]=63&o|128)}return e}(t);return(t=new rs).update(e),t=t.digest(),Oo.encodeByteArray(t)}function ea(t,e){Ao(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(fa.logLevel=Ns.VERBOSE,va=fa.log.bind(fa),e&&la.set("logging_enabled",!0)):"function"==typeof t?va=t:(va=null,la.remove("logging_enabled"))}function na(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+da.apply(void 0,Io(t));fa.error(n)}function ra(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+da.apply(void 0,Io(t));throw fa.error(n),new Error(n)}function ia(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+da.apply(void 0,Io(t));fa.warn(n)}function oa(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function sa(t,e){return t===e?0:t<e?-1:1}function aa(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+Jo(e))}function ua(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var ca,Rr=function(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Ys(e)}}catch(t){}return new $s},ha=Rr("localStorage"),la=Rr("sessionStorage"),fa=new Rs("@firebase/database"),pa=(ca=1,function(){return ca++}),da=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=da.apply(null,i):n+="object"==typeof i?Jo(i):i,n+=" "}return n},va=null,ya=!0,ga=function(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];!0===ya&&(ya=!1,null===va&&!0===la.get("logging_enabled")&&ea(!0)),va&&(t=da.apply(null,e),va(t))},ma=function(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];ga.apply(void 0,Io([n],t))}},ba="[MIN_NAME]",_a="[MAX_NAME]",wa=function(t,e){if(t===e)return 0;if(t===ba||e===_a)return-1;if(e===ba||t===_a)return 1;var n=Aa(t),r=Aa(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null===r&&t<e?-1:1},Ea=function(t){if("object"!=typeof t||null===t)return Jo(t);var e,n=[];for(e in t)n.push(e);n.sort();for(var r="{",i=0;i<n.length;i++)0!==i&&(r+=","),r+=Jo(n[i]),r+=":",r+=Ea(t[n[i]]);return r+="}"};function Ia(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function Ta(t){var e,n,r,i;Ao(!oa(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));for(var o=[],s=52;s;--s)o.push(r%2?1:0),r=Math.floor(r/2);for(s=11;s;--s)o.push(n%2?1:0),n=Math.floor(n/2);o.push(e?1:0),o.reverse();var a=o.join(""),u="";for(s=0;s<64;s+=8){var c=parseInt(a.substr(s,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function Sa(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw ia("Exception was thrown by user callback.",t),e},Math.floor(0))}}function Ca(t,e){return"object"==typeof(e=setTimeout(t,e))&&e.unref&&e.unref(),e}var Na=new RegExp("^-?(0*)\\d{1,10}$"),Aa=function(t){if(Na.test(t)){t=Number(t);if(-2147483648<=t&&t<=2147483647)return t}return null},ka=(Object.defineProperty(Oa,"Empty",{get:function(){return new Oa("")},enumerable:!1,configurable:!0}),Oa.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},Oa.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},Oa.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new Oa(this.pieces_,t)},Oa.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},Oa.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},Oa.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},Oa.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},Oa.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new Oa(t,0)},Oa.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof Oa)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else for(var r=t.split("/"),n=0;n<r.length;n++)0<r[n].length&&e.push(r[n]);return new Oa(e,0)},Oa.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},Oa.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return Oa.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},Oa.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=wa(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},Oa.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},Oa.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},Oa);function Oa(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var Pa=(Object.defineProperty(Da,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!1,configurable:!0}),Object.defineProperty(Da,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!1,configurable:!0}),Da.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=ps(t),this.checkValid_()},Da.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=ps(t),0<this.parts_.length&&--this.byteLength_},Da.prototype.checkValid_=function(){if(this.byteLength_>Da.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+Da.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>Da.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Da.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},Da.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},Da);function Da(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=ps(this.parts_[n]);this.checkValid_()}var Ra="firebaseio.com",xa="websocket",La="long_polling",Ma=(Fa.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},Fa.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Fa.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},Fa.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},Fa.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&ha.set("host:"+this.host,this.internalHost))},Fa.prototype.connectionURL=function(t,e){var n;if(Ao("string"==typeof t,"typeof type must == string"),Ao("object"==typeof e,"typeof params must == object"),t===xa)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==La)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return Ia(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},Fa.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Fa.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},Fa);function Fa(t,e,n,r,i,o,s){void 0===i&&(i=!1),void 0===o&&(o=""),void 0===s&&(s=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=i,this.persistenceKey=o,this.includeNamespaceInQueryParams=s,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=ha.get("host:"+t)||this.host}function Ua(t,e){var n=Ya(t),r=n.namespace;return"firebase.com"===n.domain&&ra(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),r&&"undefined"!==r||"localhost"===n.domain||ra("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ia("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),t="ws"===n.scheme||"wss"===n.scheme,{repoInfo:new Ma(n.host,n.secure,r,e,t,"",r!==n.subdomain),path:new ka(n.pathString)}}function ja(t){return"string"==typeof t&&0!==t.length&&!Ja.test(t)}function Va(t){return"string"==typeof t&&0!==t.length&&!$a.test(t)}function qa(t){return null===t||"string"==typeof t||"number"==typeof t&&!oa(t)||t&&"object"==typeof t&&Zo(t,".sv")}function Ba(t,e,n,r,i){i&&void 0===n||tu(hs(t,e,i),n,r)}function Wa(t,e,n,r,i){if(!i||void 0!==n){var o=hs(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];Ia(n,function(t,e){t=new ka(t);if(tu(o,e,r.child(t)),".priority"===t.getBack()&&!qa(e))throw new Error(o+"contains an invalid value for '"+t.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(t)}),function(t,e){for(var n,r=0;r<e.length;r++)for(var i=(n=e[r]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!ja(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+n.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(ka.comparePaths);var s=null;for(r=0;r<e.length;r++){if(n=e[r],null!==s&&s.contains(n))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+n.toString());s=n}}(o,s)}}function Ha(t,e,n,r){if(!r||void 0!==n){if(oa(n))throw new Error(hs(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!qa(n))throw new Error(hs(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function Ga(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(hs(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function Ka(t,e,n,r){if(!(r&&void 0===n||ja(n)))throw new Error(hs(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function za(t,e,n,r){if(!(r&&void 0===n||Va(n)))throw new Error(hs(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function Qa(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function Xa(t,e,n){var r=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!ja(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==r.length&&(r=(r=r)&&r.replace(/^\/*\.info(\/|$)/,"/"),!Va(r)))throw new Error(hs(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var Ya=function(t){var e,n,r,i="",o="",s="",a="",u="",c=!0,h="https",l=443;return"string"==typeof t&&(0<=(r=t.indexOf("//"))&&(h=t.substring(0,r-1),t=t.substring(r+2)),-1===(e=t.indexOf("/"))&&(e=t.length),-1===(n=t.indexOf("?"))&&(n=t.length),i=t.substring(0,Math.min(e,n)),e<n&&(a=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(e,n))),n=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=wo(t.split("&")),o=i.next();!o.done;o=i.next()){var s,a=o.value;0!==a.length&&(2===(s=a.split("=")).length?r[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):ia("Invalid query segment '"+a+"' in query '"+t+"'"))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,n))),0<=(r=i.indexOf(":"))?(c="https"===h||"wss"===h,l=parseInt(i.substring(r+1),10)):r=i.length,"localhost"===(r=i.slice(0,r)).toLowerCase()?o="localhost":r.split(".").length<=2?o=r:(r=i.indexOf("."),s=i.substring(0,r).toLowerCase(),o=i.substring(r+1),u=s),"ns"in n&&(u=n.ns)),{host:i,port:l,domain:o,subdomain:s,secure:c,scheme:h,pathString:a,namespace:u}},Ja=/[\[\].#$\/\u0000-\u001F\u007F]/,$a=/[\[\].#$\u0000-\u001F\u007F]/,Za=10485760,tu=function(n,t,e){var r=e instanceof ka?new Pa(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(oa(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>Za/3&&ps(t)>Za)throw new Error(n+"contains a string greater than "+Za+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(Ia(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!ja(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),tu(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},eu=(nu.prototype.cancel=function(t){cs("OnDisconnect.cancel",0,1,arguments.length),ls("OnDisconnect.cancel",1,t,!0);var e=new Ro;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},nu.prototype.remove=function(t){cs("OnDisconnect.remove",0,1,arguments.length),Qa("OnDisconnect.remove",this.path_),ls("OnDisconnect.remove",1,t,!0);var e=new Ro;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},nu.prototype.set=function(t,e){cs("OnDisconnect.set",1,2,arguments.length),Qa("OnDisconnect.set",this.path_),Ba("OnDisconnect.set",1,t,this.path_,!1),ls("OnDisconnect.set",2,e,!0);var n=new Ro;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},nu.prototype.setWithPriority=function(t,e,n){cs("OnDisconnect.setWithPriority",2,3,arguments.length),Qa("OnDisconnect.setWithPriority",this.path_),Ba("OnDisconnect.setWithPriority",1,t,this.path_,!1),Ha("OnDisconnect.setWithPriority",2,e,!1),ls("OnDisconnect.setWithPriority",3,n,!0);var r=new Ro;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},nu.prototype.update=function(t,e){if(cs("OnDisconnect.update",1,2,arguments.length),Qa("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,ia("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wa("OnDisconnect.update",1,t,this.path_,!1),ls("OnDisconnect.update",2,e,!0);var i=new Ro;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},nu);function nu(t,e){this.repo_=t,this.path_=e}var ru=(iu.prototype.toJSON=function(){return cs("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},iu);function iu(t,e){this.committed=t,this.snapshot=e}var ou,su,au,uu=(ou="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",su=0,au=[],function(t){var e=t===su;su=t;for(var n=new Array(8),r=7;0<=r;r--)n[r]=ou.charAt(t%64),t=Math.floor(t/64);Ao(0===t,"Cannot push at time == 0");var i=n.join("");if(e){for(r=11;0<=r&&63===au[r];r--)au[r]=0;au[r]++}else for(r=0;r<12;r++)au[r]=Math.floor(64*Math.random());for(r=0;r<12;r++)i+=ou.charAt(au[r]);return Ao(20===i.length,"nextPushId: Length should be 20."),i}),cu=(hu.Wrap=function(t,e){return new hu(t,e)},hu);function hu(t,e){this.name=t,this.node=e}var lu,K=(fu.prototype.getCompare=function(){return this.compare.bind(this)},fu.prototype.indexedValueChanged=function(t,e){t=new cu(ba,t),e=new cu(ba,e);return 0!==this.compare(t,e)},fu.prototype.minPost=function(){return cu.MIN},fu);function fu(){}var pu,du=(go(vu,pu=K),Object.defineProperty(vu,"__EMPTY_NODE",{get:function(){return lu},set:function(t){lu=t},enumerable:!1,configurable:!0}),vu.prototype.compare=function(t,e){return wa(t.name,e.name)},vu.prototype.isDefinedOn=function(t){throw ko("KeyIndex.isDefinedOn not expected to be called.")},vu.prototype.indexedValueChanged=function(t,e){return!1},vu.prototype.minPost=function(){return cu.MIN},vu.prototype.maxPost=function(){return new cu(_a,lu)},vu.prototype.makePost=function(t,e){return Ao("string"==typeof t,"KeyIndex indexValue must always be a string."),new cu(t,lu)},vu.prototype.toString=function(){return".key"},vu);function vu(){return null!==pu&&pu.apply(this,arguments)||this}var yu,gu=new du;function mu(t){return"number"==typeof t?"number:"+Ta(t):"string:"+t}var bu,_u,wu,Eu,Iu=function(t){var e;t.isLeafNode()?(e=t.val(),Ao("string"==typeof e||"number"==typeof e||"object"==typeof e&&Zo(e,".sv"),"Priority must be a string or number.")):Ao(t===yu||t.isEmpty(),"priority of unexpected type."),Ao(t===yu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")},Tu=(Object.defineProperty(Su,"__childrenNodeConstructor",{get:function(){return bu},set:function(t){bu=t},enumerable:!1,configurable:!0}),Su.prototype.isLeafNode=function(){return!0},Su.prototype.getPriority=function(){return this.priorityNode_},Su.prototype.updatePriority=function(t){return new Su(this.value_,t)},Su.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:Su.__childrenNodeConstructor.EMPTY_NODE},Su.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:Su.__childrenNodeConstructor.EMPTY_NODE},Su.prototype.hasChild=function(){return!1},Su.prototype.getPredecessorChildName=function(t,e){return null},Su.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Su.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},Su.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(Ao(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,Su.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},Su.prototype.isEmpty=function(){return!1},Su.prototype.numChildren=function(){return 0},Su.prototype.forEachChild=function(t,e){return!1},Su.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Su.prototype.hash=function(){var t,e;return null===this.lazyHash_&&(t="",this.priorityNode_.isEmpty()||(t+="priority:"+mu(this.priorityNode_.val())+":"),t+=(e=typeof this.value_)+":",t+="number"==e?Ta(this.value_):this.value_,this.lazyHash_=ta(t)),this.lazyHash_},Su.prototype.getValue=function(){return this.value_},Su.prototype.compareTo=function(t){return t===Su.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Su.__childrenNodeConstructor?-1:(Ao(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},Su.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=Su.VALUE_TYPE_ORDER.indexOf(e),i=Su.VALUE_TYPE_ORDER.indexOf(n);return Ao(0<=r,"Unknown leaf type: "+e),Ao(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},Su.prototype.withIndex=function(){return this},Su.prototype.isIndexed=function(){return!0},Su.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))},Su.VALUE_TYPE_ORDER=["object","boolean","number","string"],Su);function Su(t,e){void 0===e&&(e=Su.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,Ao(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),Iu(this.priorityNode_)}function Cu(){return null!==Eu&&Eu.apply(this,arguments)||this}var Nu=new(go(Cu,Eu=K),Cu.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),r=n.compareTo(r);return 0===r?wa(t.name,e.name):r},Cu.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},Cu.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},Cu.prototype.minPost=function(){return cu.MIN},Cu.prototype.maxPost=function(){return new cu(_a,new Tu("[PRIORITY-POST]",wu))},Cu.prototype.makePost=function(t,e){t=_u(t);return new cu(e,new Tu("[PRIORITY-POST]",t))},Cu.prototype.toString=function(){return".priority"},Cu),Au=(ku.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_.pop(),e=this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value};if(this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e},ku.prototype.hasNext=function(){return 0<this.nodeStack_.length},ku.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},ku);function ku(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var Ou=(Pu.prototype.copy=function(t,e,n,r,i){return new Pu(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Pu.prototype.count=function(){return this.left.count()+1+this.right.count()},Pu.prototype.isEmpty=function(){return!1},Pu.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Pu.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Pu.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Pu.prototype.minKey=function(){return this.min_().key},Pu.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Pu.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Pu.prototype.removeMin_=function(){if(this.left.isEmpty())return Ru.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Pu.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.isEmpty()||r.left.isRed_()||r.left.left.isRed_()||(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),r.right.isEmpty()||r.right.isRed_()||r.right.left.isRed_()||(r=r.moveRedRight_()),0===e(t,r.key)){if(r.right.isEmpty())return Ru.EMPTY_NODE;n=r.right.min_(),r=r.copy(n.key,n.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.fixUp_()},Pu.prototype.isRed_=function(){return this.color},Pu.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},Pu.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},Pu.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},Pu.prototype.rotateLeft_=function(){var t=this.copy(null,null,Pu.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Pu.prototype.rotateRight_=function(){var t=this.copy(null,null,Pu.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Pu.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Pu.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Pu.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Pu.RED=!0,Pu.BLACK=!1,Pu);function Pu(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Pu.RED,this.left=null!=r?r:Ru.EMPTY_NODE,this.right=null!=i?i:Ru.EMPTY_NODE}Du.prototype.copy=function(t,e,n,r,i){return this},Du.prototype.insert=function(t,e,n){return new Ou(t,e,null)},Du.prototype.remove=function(t,e){return this},Du.prototype.count=function(){return 0},Du.prototype.isEmpty=function(){return!0},Du.prototype.inorderTraversal=function(t){return!1},Du.prototype.reverseTraversal=function(t){return!1},Du.prototype.minKey=function(){return null},Du.prototype.maxKey=function(){return null},Du.prototype.check_=function(){return 0},Du.prototype.isRed_=function(){return!1},M=Du;function Du(){}var Ru=(xu.prototype.insert=function(t,e){return new xu(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Ou.BLACK,null,null))},xu.prototype.remove=function(t){return new xu(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ou.BLACK,null,null))},xu.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},xu.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},xu.prototype.isEmpty=function(){return this.root_.isEmpty()},xu.prototype.count=function(){return this.root_.count()},xu.prototype.minKey=function(){return this.root_.minKey()},xu.prototype.maxKey=function(){return this.root_.maxKey()},xu.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},xu.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},xu.prototype.getIterator=function(t){return new Au(this.root_,null,this.comparator_,!1,t)},xu.prototype.getIteratorFrom=function(t,e){return new Au(this.root_,t,this.comparator_,!1,e)},xu.prototype.getReverseIteratorFrom=function(t,e){return new Au(this.root_,t,this.comparator_,!0,e)},xu.prototype.getReverseIterator=function(t){return new Au(this.root_,null,this.comparator_,!0,t)},xu.EMPTY_NODE=new M,xu);function xu(t,e){void 0===e&&(e=xu.EMPTY_NODE),this.comparator_=t,this.root_=e}var Lu=Math.log(2),Mu=(Fu.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Fu);function Fu(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Lu,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var Uu,ju,Vu=function(c,t,h,e){c.sort(t);var l=function(t,e){var n=e-t;if(0==n)return null;if(1==n)return r=c[t],i=h?h(r):r,new Ou(i,r.node,Ou.BLACK,null,null);var n=parseInt(n/2,10)+t,t=l(t,n),e=l(n+1,e),r=c[n],i=h?h(r):r;return new Ou(i,r.node,Ou.BLACK,t,e)},n=function(t){for(var e=null,n=null,i=c.length,r=function(t,e){var n=i-t,r=i;i-=t;t=l(1+n,r),r=c[n],n=h?h(r):r;o(new Ou(n,r.node,e,null,t))},o=function(t){e=e?e.left=t:n=t},s=0;s<t.count;++s){var a=t.nextBitIsOne(),u=Math.pow(2,t.count-(s+1));a?r(u,Ou.BLACK):(r(u,Ou.BLACK),r(u,Ou.RED))}return n}(new Mu(c.length));return new Ru(e||t,n)},qu={},Bu=(Object.defineProperty(Wu,"Default",{get:function(){return Ao(Nu,"ChildrenNode.ts has not been loaded"),Uu=Uu||new Wu({".priority":qu},{".priority":Nu})},enumerable:!1,configurable:!0}),Wu.prototype.get=function(t){var e=ts(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof Ru?e:null},Wu.prototype.hasIndex=function(t){return Zo(this.indexSet_,t.toString())},Wu.prototype.addIndex=function(t,e){Ao(t!==gu,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(cu.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?Vu(r,t.getCompare()):qu;var a=t.toString(),u=mo({},this.indexSet_);u[a]=t;e=mo({},this.indexes_);return e[a]=n,new Wu(e,u)},Wu.prototype.addToIndexes=function(s,a){var u=this;return new Wu(ns(this.indexes_,function(t,e){var n=ts(u.indexSet_,e);if(Ao(n,"Missing index implementation for "+e),t===qu){if(n.isDefinedOn(s.node)){for(var r=[],i=a.getIterator(cu.Wrap),o=i.getNext();o;)o.name!==s.name&&r.push(o),o=i.getNext();return r.push(s),Vu(r,n.getCompare())}return qu}n=a.get(s.name);return n&&(t=t.remove(new cu(s.name,n))),t.insert(s,s.node)}),this.indexSet_)},Wu.prototype.removeFromIndexes=function(n,r){return new Wu(ns(this.indexes_,function(t){if(t===qu)return t;var e=r.get(n.name);return e?t.remove(new cu(n.name,e)):t}),this.indexSet_)},Wu);function Wu(t,e){this.indexes_=t,this.indexSet_=e}function Hu(t,e){return wa(t.name,e.name)}function Gu(t,e){return wa(t,e)}var Ku,zu=(Object.defineProperty(Qu,"EMPTY_NODE",{get:function(){return ju=ju||new Qu(new Ru(Gu),null,Bu.Default)},enumerable:!1,configurable:!0}),Qu.prototype.isLeafNode=function(){return!1},Qu.prototype.getPriority=function(){return this.priorityNode_||ju},Qu.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new Qu(this.children_,t,this.indexMap_)},Qu.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();t=this.children_.get(t);return null===t?ju:t},Qu.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},Qu.prototype.hasChild=function(t){return null!==this.children_.get(t)},Qu.prototype.updateImmediateChild=function(t,e){if(Ao(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new cu(t,e),r=void 0,i=void 0,i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_)),n=r.isEmpty()?ju:this.priorityNode_;return new Qu(r,n,i)},Qu.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;Ao(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");e=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,e)},Qu.prototype.isEmpty=function(){return this.children_.isEmpty()},Qu.prototype.numChildren=function(){return this.children_.count()},Qu.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(Nu,function(t,e){r[t]=e.val(n),i++,s&&Qu.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t,e=[];for(t in r)e[t]=r[t];return e}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},Qu.prototype.hash=function(){var n;return null===this.lazyHash_&&(n="",this.getPriority().isEmpty()||(n+="priority:"+mu(this.getPriority().val())+":"),this.forEachChild(Nu,function(t,e){e=e.hash();""!==e&&(n+=":"+t+":"+e)}),this.lazyHash_=""===n?"":ta(n)),this.lazyHash_},Qu.prototype.getPredecessorChildName=function(t,e,n){n=this.resolveIndex_(n);if(n){e=n.getPredecessorKey(new cu(t,e));return e?e.name:null}return this.children_.getPredecessorKey(t)},Qu.prototype.getFirstChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.minKey();return t&&t.name}return this.children_.minKey()},Qu.prototype.getFirstChild=function(t){t=this.getFirstChildName(t);return t?new cu(t,this.children_.get(t)):null},Qu.prototype.getLastChildName=function(t){t=this.resolveIndex_(t);if(t){t=t.maxKey();return t&&t.name}return this.children_.maxKey()},Qu.prototype.getLastChild=function(t){t=this.getLastChildName(t);return t?new cu(t,this.children_.get(t)):null},Qu.prototype.forEachChild=function(t,e){t=this.resolveIndex_(t);return t?t.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},Qu.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},Qu.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,cu.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},Qu.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},Qu.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,cu.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},Qu.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Yu?-1:0},Qu.prototype.withIndex=function(t){if(t===gu||this.indexMap_.hasIndex(t))return this;t=this.indexMap_.addIndex(t,this.children_);return new Qu(this.children_,this.priorityNode_,t)},Qu.prototype.isIndexed=function(t){return t===gu||this.indexMap_.hasIndex(t)},Qu.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;if(this.getPriority().equals(t.getPriority())){if(this.children_.count()!==t.children_.count())return!1;for(var e=this.getIterator(Nu),n=t.getIterator(Nu),r=e.getNext(),i=n.getNext();r&&i;){if(r.name!==i.name||!r.node.equals(i.node))return!1;r=e.getNext(),i=n.getNext()}return null===r&&null===i}return!1},Qu.prototype.resolveIndex_=function(t){return t===gu?null:this.indexMap_.get(t.toString())},Qu.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,Qu);function Qu(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&Iu(this.priorityNode_),this.children_.isEmpty()&&Ao(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function Xu(){return Ku.call(this,new Ru(Gu),zu.EMPTY_NODE,Bu.Default)||this}var Yu=new(go(Xu,Ku=zu),Xu.prototype.compareTo=function(t){return t===this?0:1},Xu.prototype.equals=function(t){return t===this},Xu.prototype.getPriority=function(){return this},Xu.prototype.getImmediateChild=function(t){return zu.EMPTY_NODE},Xu.prototype.isEmpty=function(){return!1},Xu);Object.defineProperties(cu,{MIN:{value:new cu(ba,zu.EMPTY_NODE)},MAX:{value:new cu(_a,Yu)}}),du.__EMPTY_NODE=zu.EMPTY_NODE,Tu.__childrenNodeConstructor=zu,yu=Yu,wu=Yu;var Ju,$u=!0;function Zu(n,t){if(void 0===t&&(t=null),null===n)return zu.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(t=n[".priority"]),Ao(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Tu(n,Zu(t));if(n instanceof Array||!$u){var r=zu.EMPTY_NODE;return Ia(n,function(t,e){Zo(n,t)&&"."!==t.substring(0,1)&&(!(e=Zu(e)).isLeafNode()&&e.isEmpty()||(r=r.updateImmediateChild(t,e)))}),r.updatePriority(Zu(t))}var i=[],o=!1;if(Ia(n,function(t,e){"."!==t.substring(0,1)&&((e=Zu(e)).isEmpty()||(o=o||!e.getPriority().isEmpty(),i.push(new cu(t,e))))}),0===i.length)return zu.EMPTY_NODE;var e=Vu(i,Hu,function(t){return t.name},Gu);if(o){var s=Vu(i,Nu.getCompare());return new zu(e,Zu(t),new Bu({".priority":s},{".priority":Nu}))}return new zu(e,Zu(t),Bu.Default)}function tc(){return null!==Ju&&Ju.apply(this,arguments)||this}_u=Zu;var ec,nc=new(go(tc,Ju=K),tc.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?wa(t.name,e.name):n},tc.prototype.isDefinedOn=function(t){return!0},tc.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},tc.prototype.minPost=function(){return cu.MIN},tc.prototype.maxPost=function(){return cu.MAX},tc.prototype.makePost=function(t,e){t=Zu(t);return new cu(e,t)},tc.prototype.toString=function(){return".value"},tc),rc=(go(ic,ec=K),ic.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},ic.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},ic.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),r=n.compareTo(r);return 0===r?wa(t.name,e.name):r},ic.prototype.makePost=function(t,e){t=Zu(t),t=zu.EMPTY_NODE.updateChild(this.indexPath_,t);return new cu(e,t)},ic.prototype.maxPost=function(){var t=zu.EMPTY_NODE.updateChild(this.indexPath_,Yu);return new cu(_a,t)},ic.prototype.toString=function(){return this.indexPath_.slice().join("/")},ic);function ic(t){var e=ec.call(this)||this;return e.indexPath_=t,Ao(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var oc=(sc.prototype.val=function(){return cs("DataSnapshot.val",0,0,arguments.length),this.node_.val()},sc.prototype.exportVal=function(){return cs("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},sc.prototype.toJSON=function(){return cs("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},sc.prototype.exists=function(){return cs("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},sc.prototype.child=function(t){cs("DataSnapshot.child",0,1,arguments.length),t=String(t),za("DataSnapshot.child",1,t,!1);var e=new ka(t),t=this.ref_.child(e);return new sc(this.node_.getChild(e),t,Nu)},sc.prototype.hasChild=function(t){cs("DataSnapshot.hasChild",1,1,arguments.length),za("DataSnapshot.hasChild",1,t,!1);t=new ka(t);return!this.node_.getChild(t).isEmpty()},sc.prototype.getPriority=function(){return cs("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},sc.prototype.forEach=function(n){var r=this;return cs("DataSnapshot.forEach",1,1,arguments.length),ls("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new sc(e,r.ref_.child(t),Nu))})},sc.prototype.hasChildren=function(){return cs("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(sc.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!1,configurable:!0}),sc.prototype.numChildren=function(){return cs("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},sc.prototype.getRef=function(){return cs("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(sc.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),sc);function sc(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var ac=(uc.prototype.getPath=function(){var t=this.snapshot.getRef();return("value"===this.eventType?t:t.getParent()).path},uc.prototype.getEventType=function(){return this.eventType},uc.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},uc.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+Jo(this.snapshot.exportVal())},uc);function uc(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var cc=(hc.prototype.getPath=function(){return this.path},hc.prototype.getEventType=function(){return"cancel"},hc.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},hc.prototype.toString=function(){return this.path.toString()+":cancel"},hc);function hc(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var lc=(fc.prototype.respondsTo=function(t){return"value"===t},fc.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new ac("value",this,new oc(t.snapshotNode,e.getRef(),n))},fc.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Ao(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},fc.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new cc(this,t,e):null},fc.prototype.matches=function(t){return t instanceof fc&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},fc.prototype.hasAnyCallback=function(){return null!==this.callback_},fc);function fc(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var pc,dc=(vc.prototype.respondsTo=function(t){t="children_removed"===(t="children_added"===t?"child_added":t)?"child_removed":t;return Zo(this.callbacks_,t)},vc.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new cc(this,t,e):null},vc.prototype.createEvent=function(t,e){Ao(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),e=e.getQueryParams().getIndex();return new ac(t.type,this,new oc(t.snapshotNode,n,e),t.prevName)},vc.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){Ao(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},vc.prototype.matches=function(e){var n=this;if(e instanceof vc){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});t=t[0],r=r[0];return!(r!==t||e.callbacks_[t]&&this.callbacks_[r]&&e.callbacks_[t]!==this.callbacks_[r])}}}return!1},vc.prototype.hasAnyCallback=function(){return null!==this.callbacks_},vc);function vc(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var yc=(Object.defineProperty(gc,"__referenceConstructor",{get:function(){return Ao(pc,"Reference.ts has not been loaded"),pc},set:function(t){pc=t},enumerable:!1,configurable:!0}),gc.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===gu){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==ba)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==_a)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Nu){if(null!=e&&!qa(e)||null!=n&&!qa(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(Ao(t.getIndex()instanceof rc||t.getIndex()===nc,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},gc.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},gc.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},gc.prototype.getQueryParams=function(){return this.queryParams_},gc.prototype.getRef=function(){return cs("Query.ref",0,0,arguments.length),new gc.__referenceConstructor(this.repo,this.path)},gc.prototype.on=function(t,e,n,r){cs("Query.on",2,4,arguments.length),Ga("Query.on",1,t,!1),ls("Query.on",2,e,!1);n=gc.getCancelAndContextArgs_("Query.on",n,r);return"value"===t?this.onValueEvent(e,n.cancel,n.context):((r={})[t]=e,this.onChildEvent(r,n.cancel,n.context)),e},gc.prototype.onValueEvent=function(t,e,n){n=new lc(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,n)},gc.prototype.onChildEvent=function(t,e,n){n=new dc(t,e,n);this.repo.addEventCallbackForQuery(this,n)},gc.prototype.off=function(t,e,n){cs("Query.off",0,3,arguments.length),Ga("Query.off",1,t,!0),ls("Query.off",2,e,!0),fs("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new lc(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new dc(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},gc.prototype.once=function(e,n,t,r){var i=this;cs("Query.once",1,4,arguments.length),Ga("Query.once",1,e,!1),ls("Query.once",2,n,!0);var o=gc.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new Ro;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},gc.prototype.limitToFirst=function(t){if(cs("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new gc(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},gc.prototype.limitToLast=function(t){if(cs("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new gc(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},gc.prototype.orderByChild=function(t){if(cs("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');za("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");t=new ka(t);if(t.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");t=new rc(t),t=this.queryParams_.orderBy(t);return gc.validateQueryEndpoints_(t),new gc(this.repo,this.path,t,!0)},gc.prototype.orderByKey=function(){cs("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(gu);return gc.validateQueryEndpoints_(t),new gc(this.repo,this.path,t,!0)},gc.prototype.orderByPriority=function(){cs("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Nu);return gc.validateQueryEndpoints_(t),new gc(this.repo,this.path,t,!0)},gc.prototype.orderByValue=function(){cs("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(nc);return gc.validateQueryEndpoints_(t),new gc(this.repo,this.path,t,!0)},gc.prototype.startAt=function(t,e){void 0===t&&(t=null),cs("Query.startAt",0,2,arguments.length),Ba("Query.startAt",1,t,this.path,!0),Ka("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(gc.validateLimit_(n),gc.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new gc(this.repo,this.path,n,this.orderByCalled_)},gc.prototype.endAt=function(t,e){void 0===t&&(t=null),cs("Query.endAt",0,2,arguments.length),Ba("Query.endAt",1,t,this.path,!0),Ka("Query.endAt",2,e,!0);e=this.queryParams_.endAt(t,e);if(gc.validateLimit_(e),gc.validateQueryEndpoints_(e),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new gc(this.repo,this.path,e,this.orderByCalled_)},gc.prototype.equalTo=function(t,e){if(cs("Query.equalTo",1,2,arguments.length),Ba("Query.equalTo",1,t,this.path,!1),Ka("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},gc.prototype.toString=function(){return cs("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},gc.prototype.toJSON=function(){return cs("Query.toJSON",0,1,arguments.length),this.toString()},gc.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},gc.prototype.queryIdentifier=function(){var t=this.queryObject(),t=Ea(t);return"{}"===t?"default":t},gc.prototype.isEqual=function(t){if(cs("Query.isEqual",1,1,arguments.length),!(t instanceof gc)){throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.")}var e=this.repo===t.repo,n=this.path.equals(t.path),t=this.queryIdentifier()===t.queryIdentifier();return e&&n&&t},gc.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,ls(t,3,r.cancel,!0),r.context=n,fs(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(hs(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(gc.prototype,"ref",{get:function(){return this.getRef()},enumerable:!1,configurable:!0}),gc);function gc(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var mc=(bc.prototype.getImmediateChild=function(t){return new bc(this.node_.getImmediateChild(t))},bc.prototype.node=function(){return this.node_},bc);function bc(t){this.node_=t}var _c=(wc.prototype.getImmediateChild=function(t){t=this.path_.child(t);return new wc(this.syncTree_,t)},wc.prototype.node=function(){return this.syncTree_.calcCompleteEventCache(this.path_)},wc);function wc(t,e){this.syncTree_=t,this.path_=e}function Ec(t,e,n,r){return Nc(e,new _c(n,t),r)}function Ic(t,e,n){return Nc(t,new mc(e),n)}var Tc=function(t,e,n){return t&&"object"==typeof t?(Ao(".sv"in t,"Unexpected leaf node or priority contents"),"string"==typeof t[".sv"]?Sc(t[".sv"],e,n):"object"==typeof t[".sv"]?Cc(t[".sv"],e):void Ao(!1,"Unexpected server value: "+JSON.stringify(t,null,2))):t},Sc=function(t,e,n){if("timestamp"===t)return n.timestamp;Ao(!1,"Unexpected server value: "+t)},Cc=function(t,e,n){t.hasOwnProperty("increment")||Ao(!1,"Unexpected server value: "+JSON.stringify(t,null,2));t=t.increment;"number"!=typeof t&&Ao(!1,"Unexpected increment value: "+t);e=e.node();if(Ao(null!=e,"Expected ChildrenNode.EMPTY_NODE for nulls"),!e.isLeafNode())return t;e=e.getValue();return"number"!=typeof e?t:e+t};function Nc(t,r,i){var e=t.getPriority().val(),n=Tc(e,r.getImmediateChild(".priority"),i);if(t.isLeafNode()){var o=t,e=Tc(o.getValue(),r,i);return e!==o.getValue()||n!==o.getPriority().val()?new Tu(e,Zu(n)):t}var t=t,s=t;return n!==t.getPriority().val()&&(s=s.updatePriority(new Tu(n))),t.forEachChild(Nu,function(t,e){var n=Nc(e,r.getImmediateChild(t),i);n!==e&&(s=s.updateImmediateChild(t,n))}),s}var Ac,kc=(Oc.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},Oc.prototype.remember=function(t,e){var n;t.isEmpty()?(this.value=e,this.children.clear()):null!==this.value?this.value=this.value.updateChild(t,e):(n=t.getFront(),this.children.has(n)||this.children.set(n,new Oc),n=this.children.get(n),t=t.popFront(),n.remember(t,e))},Oc.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Nu,function(t,e){n.remember(new ka(t),e)}),this.forget(t)}if(0<this.children.size){e=t.getFront();return t=t.popFront(),this.children.has(e)&&this.children.get(e).forget(t)&&this.children.delete(e),0===this.children.size}return!0},Oc.prototype.forEachTree=function(n,r){null!==this.value?r(n,this.value):this.forEachChild(function(t,e){t=new ka(n.toString()+"/"+t);e.forEachTree(t,r)})},Oc.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},Oc);function Oc(){this.value=null,this.children=new Map}(Rr=Ac=Ac||{})[Rr.OVERWRITE=0]="OVERWRITE",Rr[Rr.MERGE=1]="MERGE",Rr[Rr.ACK_USER_WRITE=2]="ACK_USER_WRITE",Rr[Rr.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Pc=(Dc.User=new Dc(!0,!1,null,!1),Dc.Server=new Dc(!1,!0,null,!1),Dc.forServerTaggedQuery=function(t){return new Dc(!1,!0,t,!0)},Dc);function Dc(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,Ao(!r||e,"Tagged queries must be from server.")}var Rc,xc=(Lc.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return Ao(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new ka(t));return new Lc(ka.Empty,e,this.revert)}return Ao(this.path.getFront()===t,"operationForChild called for unrelated child."),new Lc(this.path.popFront(),this.affectedTree,this.revert)},Lc);function Lc(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Ac.ACK_USER_WRITE,this.source=Pc.User}var Mc=(Fc.fromObject=function(t){var n=Fc.Empty;return Ia(t,function(t,e){n=n.set(new ka(t),e)}),n},Fc.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},Fc.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:ka.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;e=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==e?null:{path:new ka(n).child(e.path),value:e.value}},Fc.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},Fc.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),e=this.children.get(e);return null!==e?e.subtree(t.popFront()):Fc.Empty},Fc.prototype.set=function(t,e){if(t.isEmpty())return new Fc(e,this.children);var n=t.getFront(),e=(this.children.get(n)||Fc.Empty).set(t.popFront(),e),e=this.children.insert(n,e);return new Fc(this.value,e)},Fc.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?Fc.Empty:new Fc(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){n=n.remove(t.popFront()),t=void 0,t=n.isEmpty()?this.children.remove(e):this.children.insert(e,n);return null===this.value&&t.isEmpty()?Fc.Empty:new Fc(this.value,t)}return this},Fc.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),e=this.children.get(e);return e?e.get(t.popFront()):null},Fc.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),t=(this.children.get(n)||Fc.Empty).setTree(t.popFront(),e),e=void 0,e=t.isEmpty()?this.children.remove(n):this.children.insert(n,t);return new Fc(this.value,e)},Fc.prototype.fold=function(t){return this.fold_(ka.Empty,t)},Fc.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},Fc.prototype.findOnPath=function(t,e){return this.findOnPath_(t,ka.Empty,e)},Fc.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),r=this.children.get(i);return r?r.findOnPath_(t.popFront(),e.child(i),n):null},Fc.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,ka.Empty,e)},Fc.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):Fc.Empty},Fc.prototype.foreach=function(t){this.foreach_(ka.Empty,t)},Fc.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},Fc.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},Fc.Empty=new Fc(null),Fc);function Fc(t,e){void 0===e&&(e=Rc=Rc||new Ru(sa)),this.value=t,this.children=e}var Uc=(jc.prototype.operationForChild=function(t){return this.path.isEmpty()?new jc(this.source,ka.Empty):new jc(this.source,this.path.popFront())},jc);function jc(t,e){this.source=t,this.path=e,this.type=Ac.LISTEN_COMPLETE}var Vc=(qc.prototype.operationForChild=function(t){return this.path.isEmpty()?new qc(this.source,ka.Empty,this.snap.getImmediateChild(t)):new qc(this.source,this.path.popFront(),this.snap)},qc);function qc(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Ac.OVERWRITE}var Bc=(Wc.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new ka(t));return e.isEmpty()?null:e.value?new Vc(this.source,ka.Empty,e.value):new Wc(this.source,ka.Empty,e)}return Ao(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new Wc(this.source,this.path.popFront(),this.children)},Wc.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Wc);function Wc(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Ac.MERGE}var Hc=(Gc.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Gc.prototype.isFiltered=function(){return this.filtered_},Gc.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;t=t.getFront();return this.isCompleteForChild(t)},Gc.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},Gc.prototype.getNode=function(){return this.node_},Gc);function Gc(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var Kc=(zc.prototype.updateEventSnap=function(t,e,n){return new zc(new Hc(t,e,n),this.serverCache_)},zc.prototype.updateServerSnap=function(t,e,n){return new zc(this.eventCache_,new Hc(t,e,n))},zc.prototype.getEventCache=function(){return this.eventCache_},zc.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},zc.prototype.getServerCache=function(){return this.serverCache_},zc.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},zc.Empty=new zc(new Hc(zu.EMPTY_NODE,!1,!1),new Hc(zu.EMPTY_NODE,!1,!1)),zc);function zc(t,e){this.eventCache_=t,this.serverCache_=e}var Qc=(Xc.valueChange=function(t){return new Xc(Xc.VALUE,t)},Xc.childAddedChange=function(t,e){return new Xc(Xc.CHILD_ADDED,e,t)},Xc.childRemovedChange=function(t,e){return new Xc(Xc.CHILD_REMOVED,e,t)},Xc.childChangedChange=function(t,e,n){return new Xc(Xc.CHILD_CHANGED,e,t,n)},Xc.childMovedChange=function(t,e){return new Xc(Xc.CHILD_MOVED,e,t)},Xc.CHILD_ADDED="child_added",Xc.CHILD_REMOVED="child_removed",Xc.CHILD_CHANGED="child_changed",Xc.CHILD_MOVED="child_moved",Xc.VALUE="value",Xc);function Xc(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var Yc=(Jc.prototype.updateChild=function(t,e,n,r,i,o){Ao(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(Qc.childRemovedChange(e,s)):Ao(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(Qc.childAddedChange(e,n)):o.trackChildChange(Qc.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},Jc.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Nu,function(t,e){n.hasChild(t)||i.trackChildChange(Qc.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(Nu,function(t,e){var n;r.hasChild(t)?(n=r.getImmediateChild(t)).equals(e)||i.trackChildChange(Qc.childChangedChange(t,e,n)):i.trackChildChange(Qc.childAddedChange(t,e))})),n.withIndex(this.index_)},Jc.prototype.updatePriority=function(t,e){return t.isEmpty()?zu.EMPTY_NODE:t.updatePriority(e)},Jc.prototype.filtersNodes=function(){return!1},Jc.prototype.getIndexedFilter=function(){return this},Jc.prototype.getIndex=function(){return this.index_},Jc);function Jc(t){this.index_=t}var $c=(Zc.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;Ao(e===Qc.CHILD_ADDED||e===Qc.CHILD_CHANGED||e===Qc.CHILD_REMOVED,"Only child changes supported for tracking"),Ao(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===Qc.CHILD_ADDED&&i===Qc.CHILD_REMOVED)this.changeMap.set(n,Qc.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===Qc.CHILD_REMOVED&&i===Qc.CHILD_ADDED)this.changeMap.delete(n);else if(e===Qc.CHILD_REMOVED&&i===Qc.CHILD_CHANGED)this.changeMap.set(n,Qc.childRemovedChange(n,r.oldSnap));else if(e===Qc.CHILD_CHANGED&&i===Qc.CHILD_ADDED)this.changeMap.set(n,Qc.childAddedChange(n,t.snapshotNode));else{if(e!==Qc.CHILD_CHANGED||i!==Qc.CHILD_CHANGED)throw ko("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,Qc.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},Zc.prototype.getChanges=function(){return Array.from(this.changeMap.values())},Zc);function Zc(){this.changeMap=new Map}function th(){}var eh=new(th.prototype.getCompleteChild=function(t){return null},th.prototype.getChildAfterChild=function(t,e,n){return null},th),nh=(rh.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);e=null!=this.optCompleteServerCache_?new Hc(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,e)},rh.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),t=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===t.length?null:t[0]},rh);function rh(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}var ih=function(t,e){this.viewCache=t,this.changes=e},oh=(sh.prototype.assertIndexed=function(t){Ao(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),Ao(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},sh.prototype.applyOperation=function(t,e,n,r){var i=new $c;if(e.type===Ac.OVERWRITE)var o=e,s=o.source.fromUser?this.applyUserOverwrite_(t,o.path,o.snap,n,r,i):(Ao(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered()&&!o.path.isEmpty(),this.applyServerOverwrite_(t,o.path,o.snap,n,r,a,i));else if(e.type===Ac.MERGE){o=e;s=o.source.fromUser?this.applyUserMerge_(t,o.path,o.children,n,r,i):(Ao(o.source.fromServer,"Unknown source."),a=o.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,o.path,o.children,n,r,a,i))}else if(e.type===Ac.ACK_USER_WRITE){var a=e;s=a.revert?this.revertUserWrite_(t,a.path,n,r,i):this.ackUserWrite_(t,a.path,a.affectedTree,n,r,i)}else{if(e.type!==Ac.LISTEN_COMPLETE)throw ko("Unknown operation type: "+e.type);s=this.listenComplete_(t,e.path,n,i)}i=i.getChanges();return sh.maybeAddValueEvent_(t,s,i),new ih(s,i)},sh.maybeAddValueEvent_=function(t,e,n){var r,i,o=e.getEventCache();o.isFullyInitialized()&&(r=o.getNode().isLeafNode()||o.getNode().isEmpty(),i=t.getCompleteEventSnap(),(0<n.length||!t.getEventCache().isFullyInitialized()||r&&!o.getNode().equals(i)||!o.getNode().getPriority().equals(i.getPriority()))&&n.push(Qc.valueChange(e.getCompleteEventSnap())))},sh.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s,a,u,c,h=void 0,l=void 0;return h=e.isEmpty()?(Ao(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()?(s=(s=t.getCompleteServerSnap())instanceof zu?s:zu.EMPTY_NODE,s=n.calcCompleteEventChildren(s),this.filter_.updateFullNode(t.getEventCache().getNode(),s,i)):(a=n.calcCompleteEventCache(t.getCompleteServerSnap()),this.filter_.updateFullNode(t.getEventCache().getNode(),a,i))):".priority"===(a=e.getFront())?(Ao(1===e.getLength(),"Can't have a priority with additional path components"),u=o.getNode(),l=t.getServerCache().getNode(),null!=(c=n.calcEventCacheAfterServerOverwrite(e,u,l))?this.filter_.updatePriority(u,c):o.getNode()):(u=e.popFront(),c=void 0,null!=(c=o.isCompleteForChild(a)?(l=t.getServerCache().getNode(),null!=(l=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),l))?o.getNode().getImmediateChild(a).updateChild(u,l):o.getNode().getImmediateChild(a)):n.calcCompleteChild(a,t.getServerCache()))?this.filter_.updateChild(o.getNode(),a,c,u,r,i):o.getNode()),t.updateEventSnap(h,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},sh.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a=t.getServerCache(),u=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())h=u.updateFullNode(a.getNode(),n,null);else if(u.filtersNodes()&&!a.isFiltered())var c=a.getNode().updateChild(e,n),h=u.updateFullNode(a.getNode(),c,null);else{o=e.getFront();if(!a.isCompleteForPath(e)&&1<e.getLength())return t;c=e.popFront(),n=a.getNode().getImmediateChild(o).updateChild(c,n);h=".priority"===o?u.updatePriority(a.getNode(),n):u.updateChild(a.getNode(),o,n,c,eh,null)}u=t.updateServerSnap(h,a.isFullyInitialized()||e.isEmpty(),u.filtersNodes()),i=new nh(r,u,i);return this.generateEventCacheAfterServerEvent_(u,e,r,i,s)},sh.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new nh(r,t,i);return e.isEmpty()?(a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),t.updateEventSnap(a,!0,this.filter_.filtersNodes())):".priority"===(s=e.getFront())?(a=this.filter_.updatePriority(t.getEventCache().getNode(),n),t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered())):(r=e.popFront(),i=u.getNode().getImmediateChild(s),a=void 0,a=r.isEmpty()?n:null!=(e=c.getCompleteChild(s))?".priority"===r.getBack()&&e.getChild(r.parent()).isEmpty()?e:e.updateChild(r,n):zu.EMPTY_NODE,i.equals(a)?t:(o=this.filter_.updateChild(u.getNode(),s,a,r,c,o),t.updateEventSnap(o,u.isFullyInitialized(),this.filter_.filtersNodes())))},sh.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},sh.prototype.applyUserMerge_=function(n,r,t,i,o,s){var a=this,u=n;return t.foreach(function(t,e){t=r.child(t);sh.cacheHasChild_(n,t.getFront())&&(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),t.foreach(function(t,e){t=r.child(t);sh.cacheHasChild_(n,t.getFront())||(u=a.applyUserOverwrite_(u,t,e,i,o,s))}),u},sh.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},sh.prototype.applyServerMerge_=function(r,t,e,i,o,s,a){var u=this;if(r.getServerCache().getNode().isEmpty()&&!r.getServerCache().isFullyInitialized())return r;var c=r,e=t.isEmpty()?e:Mc.Empty.setTree(t,e),h=r.getServerCache().getNode();return e.children.inorderTraversal(function(t,e){var n;h.hasChild(t)&&(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new ka(t),e,i,o,s,a))}),e.children.inorderTraversal(function(t,e){var n=!r.getServerCache().isCompleteForChild(t)&&null==e.value;h.hasChild(t)||n||(n=r.getServerCache().getNode().getImmediateChild(t),e=u.applyMerge_(n,e),c=u.applyServerOverwrite_(c,new ka(t),e,i,o,s,a))}),c},sh.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=Mc.Empty;return a.getNode().forEachChild(gu,function(t,e){u=u.set(new ka(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=Mc.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},sh.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),i=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(i,e,n,eh,r)},sh.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s,a,u=new nh(n,t,r),c=t.getEventCache().getNode(),r=void 0;return e.isEmpty()||".priority"===e.getFront()?(a=void 0,a=t.getServerCache().isFullyInitialized()?n.calcCompleteEventCache(t.getCompleteServerSnap()):(s=t.getServerCache().getNode(),Ao(s instanceof zu,"serverChildren would be complete if leaf node"),n.calcCompleteEventChildren(s)),r=this.filter_.updateFullNode(c,a,i)):(s=e.getFront(),null==(a=n.calcCompleteChild(s,t.getServerCache()))&&t.getServerCache().isCompleteForChild(s)&&(a=c.getImmediateChild(s)),(r=null!=a?this.filter_.updateChild(c,s,a,e.popFront(),u,i):t.getEventCache().getNode().hasChild(s)?this.filter_.updateChild(c,s,zu.EMPTY_NODE,e.popFront(),u,i):c).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(r=this.filter_.updateFullNode(r,o,i))),o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(ka.Empty),t.updateEventSnap(r,o,this.filter_.filtersNodes())},sh);function sh(t){this.filter_=t}var ah=(uh.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===Qc.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(Qc.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,Qc.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,Qc.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,Qc.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,Qc.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,Qc.VALUE,t,n,e),i},uh.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this,t=t.filter(function(t){return t.type===e});t.sort(this.compareChanges_.bind(this)),t.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},uh.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},uh.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw ko("Should only compare child_ events.");t=new cu(t.childName,t.snapshotNode),e=new cu(e.childName,e.snapshotNode);return this.index_.compare(t,e)},uh);function uh(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var ch,hh=(lh.prototype.getQuery=function(){return this.query_},lh.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},lh.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},lh.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},lh.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},lh.prototype.removeEventRegistration=function(t,e){var n,r=[];if(e&&(Ao(null==t,"A cancel should cancel all event registrations."),n=this.query_.path,this.eventRegistrations_.forEach(function(t){t=t.createCancelEvent(e,n);t&&r.push(t)})),t){for(var i=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){i=i.concat(this.eventRegistrations_.slice(o+1));break}}else i.push(s)}this.eventRegistrations_=i}else this.eventRegistrations_=[];return r},lh.prototype.applyOperation=function(t,e,n){t.type===Ac.MERGE&&null!==t.source.queryId&&(Ao(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),Ao(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,n=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(n.viewCache),Ao(n.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=n.viewCache,this.generateEventsForChanges_(n.changes,n.viewCache.getEventCache().getNode(),null)},lh.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Nu,function(t,e){n.push(Qc.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(Qc.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},lh.prototype.generateEventsForChanges_=function(t,e,n){n=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,n)},lh);function lh(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new Yc(n.getIndex()),i=n.getNodeFilter();this.processor_=new oh(i);var o=e.getServerCache(),t=e.getEventCache(),n=r.updateFullNode(zu.EMPTY_NODE,o.getNode(),null),e=i.updateFullNode(zu.EMPTY_NODE,t.getNode(),null),r=new Hc(n,o.isFullyInitialized(),r.filtersNodes()),i=new Hc(e,t.isFullyInitialized(),i.filtersNodes());this.viewCache_=new Kc(i,r),this.eventGenerator_=new ah(this.query_)}var fh=(Object.defineProperty(ph,"__referenceConstructor",{get:function(){return Ao(ch,"Reference.ts has not been loaded"),ch},set:function(t){Ao(!ch,"__referenceConstructor has already been defined"),ch=t},enumerable:!1,configurable:!0}),ph.prototype.isEmpty=function(){return 0===this.views.size},ph.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return Ao(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=wo(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},ph.prototype.addEventRegistration=function(t,e,n,r,i){var o,s,a=t.queryIdentifier(),u=this.views.get(a);return u||(s=!1,s=!!(o=n.calcCompleteEventCache(i?r:null))||(o=r instanceof zu?n.calcCompleteEventChildren(r):zu.EMPTY_NODE,!1),i=new Kc(new Hc(o,s,!1),new Hc(r,i,!1)),u=new hh(t,i),this.views.set(a,u)),u.addEventRegistration(e),u.getInitialEvents(e)},ph.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=wo(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=Eo(h.value,2),f=l[0],p=l[1],a=a.concat(p.removeEventRegistration(e,n));p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new ph.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},ph.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=wo(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},ph.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=wo(this.views.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r||s.getCompleteServerCache(t)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},ph.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();t=t.queryIdentifier();return this.views.get(t)},ph.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},ph.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},ph.prototype.getCompleteView=function(){var e,t;try{for(var n=wo(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},ph);function ph(){this.views=new Map}var dh=(vh.prototype.addWrite=function(t,e){if(t.isEmpty())return new vh(new Mc(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,n=ka.relativePath(r,t),i=i.updateChild(n,e);return new vh(this.writeTree_.set(r,i))}e=new Mc(e);return new vh(this.writeTree_.setTree(t,e))},vh.prototype.addWrites=function(n,t){var r=this;return Ia(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},vh.prototype.removeWrite=function(t){return t.isEmpty()?vh.Empty:new vh(this.writeTree_.setTree(t,Mc.Empty))},vh.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},vh.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(ka.relativePath(e.path,t)):null},vh.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Nu,function(t,e){n.push(new cu(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new cu(t,e.value))}),n},vh.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new vh(null!=e?new Mc(e):this.writeTree_.subtree(t))},vh.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},vh.prototype.apply=function(t){return function n(r,t,i){{if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(Ao(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}}(ka.Empty,this.writeTree_,t)},vh.Empty=new vh(new Mc(null)),vh);function vh(t){this.writeTree_=t}var yh=(gh.prototype.childWrites=function(t){return new mh(t,this)},gh.prototype.addOverwrite=function(t,e,n,r){Ao(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},gh.prototype.addMerge=function(t,e,n){Ao(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},gh.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},gh.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});Ao(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):Ia(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},gh.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},gh.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(ka.Empty)){var o=gh.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e),s=t||zu.EMPTY_NODE;return o.apply(s)}return null}o=this.visibleWrites_.getCompleteNode(e);if(null!=o)return o;o=this.visibleWrites_.childCompoundWrite(e);if(o.isEmpty())return t;if(null!=t||o.hasCompleteWrite(ka.Empty)){var s=t||zu.EMPTY_NODE;return o.apply(s)}return null},gh.prototype.calcCompleteEventChildren=function(t,e){var n=zu.EMPTY_NODE,r=this.visibleWrites_.getCompleteNode(t);if(r)return r.isLeafNode()||r.forEachChild(Nu,function(t,e){n=n.updateImmediateChild(t,e)}),n;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Nu,function(t,e){e=i.childCompoundWrite(new ka(t)).apply(e);n=n.updateImmediateChild(t,e)}),i.getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){n=n.updateImmediateChild(t.name,t.node)}),n},gh.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){Ao(n||r,"Either existingEventSnap or existingServerSnap must exist");t=t.child(e);if(this.visibleWrites_.hasCompleteWrite(t))return null;t=this.visibleWrites_.childCompoundWrite(t);return t.isEmpty()?r.getChild(e):t.apply(r.getChild(e))},gh.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),t=this.visibleWrites_.getCompleteNode(r);return null!=t?t:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},gh.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},gh.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),t=a.getCompleteNode(ka.Empty);if(null!=t)s=t;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var u=[],c=o.getCompare(),h=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),l=h.getNext();l&&u.length<r;)0!==c(l,n)&&u.push(l),l=h.getNext();return u},gh.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},gh.prototype.resetTree_=function(){this.visibleWrites_=gh.layerTree_(this.allWrites_,gh.DefaultFilter_,ka.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},gh.DefaultFilter_=function(t){return t.visible},gh.layerTree_=function(t,e,n){for(var r=dh.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=ka.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=ka.relativePath(s,n),r=r.addWrite(ka.Empty,o.snap.getChild(a)));else{if(!o.children)throw ko("WriteRecord should have .snap or .children");n.contains(s)?(a=ka.relativePath(n,s),r=r.addWrites(a,o.children)):s.contains(n)&&((a=ka.relativePath(s,n)).isEmpty()?r=r.addWrites(ka.Empty,o.children):(o=ts(o.children,a.getFront()))&&(a=o.getChild(a.popFront()),r=r.addWrite(ka.Empty,a)))}}}return r},gh);function gh(){this.visibleWrites_=dh.Empty,this.allWrites_=[],this.lastWriteId_=-1}var mh=(bh.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},bh.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},bh.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},bh.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},bh.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},bh.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},bh.prototype.child=function(t){return new bh(this.treePath_.child(t),this.writeTree_)},bh);function bh(t,e){this.treePath_=t,this.writeTree_=e}var _h=(wh.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new Vc(Pc.User,t,e)):[]},wh.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);e=Mc.fromObject(e);return this.applyOperationToSyncPoints_(new Bc(Pc.User,t,e))},wh.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=Mc.Empty;return null!=n.snap?r=r.set(ka.Empty,!0):Ia(n.children,function(t,e){r=r.set(new ka(t),e)}),this.applyOperationToSyncPoints_(new xc(n.path,r,e))}return[]},wh.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new Vc(Pc.Server,t,e))},wh.prototype.applyServerMerge=function(t,e){e=Mc.fromObject(e);return this.applyOperationToSyncPoints_(new Bc(Pc.Server,t,e))},wh.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Uc(Pc.Server,t))},wh.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];n=wh.parseQueryKey_(r),r=n.path,n=n.queryId,t=ka.relativePath(r,t),e=new Vc(Pc.forServerTaggedQuery(n),t,e);return this.applyTaggedOperation_(r,e)},wh.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){n=wh.parseQueryKey_(r),r=n.path,n=n.queryId,t=ka.relativePath(r,t),e=Mc.fromObject(e),e=new Bc(Pc.forServerTaggedQuery(n),t,e);return this.applyTaggedOperation_(r,e)}return[]},wh.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){e=wh.parseQueryKey_(n),n=e.path,e=e.queryId,t=ka.relativePath(n,t),t=new Uc(Pc.forServerTaggedQuery(e),t);return this.applyTaggedOperation_(n,t)}return[]},wh.prototype.addEventRegistration=function(t,e){var n=t.path,r=null,i=!1;this.syncPointTree_.foreachOnPath(n,function(t,e){t=ka.relativePath(t,n);r=r||e.getCompleteServerCache(t),i=i||e.hasCompleteView()});var o=this.syncPointTree_.get(n);o?(i=i||o.hasCompleteView(),r=r||o.getCompleteServerCache(ka.Empty)):(o=new fh,this.syncPointTree_=this.syncPointTree_.set(n,o)),null!=r?c=!0:(c=!1,r=zu.EMPTY_NODE,this.syncPointTree_.subtree(n).foreachChild(function(t,e){e=e.getCompleteServerCache(ka.Empty);e&&(r=r.updateImmediateChild(t,e))}));var s,a=o.viewExistsForQuery(t);a||t.getQueryParams().loadsAllData()||(u=wh.makeQueryKey_(t),Ao(!this.queryToTagMap.has(u),"View does not exist, but we have a tag"),s=wh.getNextQueryTag_(),this.queryToTagMap.set(u,s),this.tagToQueryMap.set(s,u));var u=this.pendingWriteTree_.childWrites(n),c=o.addEventRegistration(t,e,u,r,c);return a||i||(o=o.viewForQuery(t),c=c.concat(this.setupListener_(t,o))),c},wh.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));e=a.removed,s=a.events,o=-1!==e.findIndex(function(t){return t.getQueryParams().loadsAllData()}),a=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(o&&!a){i=this.syncPointTree_.subtree(i);if(!i.isEmpty())for(var u=this.collectDistinctViewsForSubTree_(i),c=0;c<u.length;++c){var h=u[c],l=h.getQuery(),h=this.createListenerForView_(h);this.listenProvider_.startListening(wh.queryForListening_(l),this.tagForQuery_(l),h.hashFn,h.onComplete)}}!a&&0<e.length&&!n&&(o?this.listenProvider_.stopListening(wh.queryForListening_(t),null):e.forEach(function(t){var e=r.queryToTagMap.get(wh.makeQueryKey_(t));r.listenProvider_.stopListening(wh.queryForListening_(t),e)})),this.removeTags_(e)}return s},wh.prototype.calcCompleteEventCache=function(n,t){var e=this.pendingWriteTree_,r=this.syncPointTree_.findOnPath(n,function(t,e){t=ka.relativePath(t,n),t=e.getCompleteServerCache(t);if(t)return t});return e.calcCompleteEventCache(n,r,t,!0)},wh.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),Ia(n,function(t,e){r=r.concat(e)}),r})},wh.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n,r=t[e];r.getQueryParams().loadsAllData()||(n=wh.makeQueryKey_(r),r=this.queryToTagMap.get(n),this.queryToTagMap.delete(n),this.tagToQueryMap.delete(r))}},wh.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},wh.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),e=this.createListenerForView_(e),e=this.listenProvider_.startListening(wh.queryForListening_(t),r,e.hashFn,e.onComplete),n=this.syncPointTree_.subtree(n);if(r)Ao(!n.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var i=n.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),Ia(n,function(t,e){r=r.concat(e)}),r}),o=0;o<i.length;++o){var s=i[o];this.listenProvider_.stopListening(wh.queryForListening_(s),this.tagForQuery_(s))}return e},wh.prototype.createListenerForView_=function(t){var e=this,n=t.getQuery(),r=this.tagForQuery_(n);return{hashFn:function(){return(t.getServerCache()||zu.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return r?e.applyTaggedListenComplete(n.path,r):e.applyListenComplete(n.path);t=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");n=new Error(t+" at "+e.path.toString()+": "+n);return n.code=t.toUpperCase(),n}(t,n);return e.removeEventRegistration(n,null,t)}}},wh.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},wh.parseQueryKey_=function(t){var e=t.indexOf("$");return Ao(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new ka(t.substr(0,e))}},wh.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},wh.prototype.tagForQuery_=function(t){t=wh.makeQueryKey_(t);return this.queryToTagMap.get(t)},wh.getNextQueryTag_=function(){return wh.nextQueryTag_++},wh.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);Ao(n,"Missing sync point for query tag that we're tracking");t=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,t,null)},wh.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(ka.Empty))},wh.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(ka.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(ka.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);return u&&a&&(e=n?n.getImmediateChild(s):null,s=r.child(s),o=o.concat(this.applyOperationHelper_(a,u,e,s))),i&&(o=o.concat(i.applyOperation(t,r,n))),o},wh.prototype.applyOperationDescendantsHelper_=function(i,t,o,s){var a=this,e=t.get(ka.Empty);null==o&&null!=e&&(o=e.getCompleteServerCache(ka.Empty));var u=[];return t.children.inorderTraversal(function(t,e){var n=o?o.getImmediateChild(t):null,r=s.child(t),t=i.operationForChild(t);t&&(u=u.concat(a.applyOperationDescendantsHelper_(t,e,n,r)))}),e&&(u=u.concat(e.applyOperation(i,s,o))),u},wh.nextQueryTag_=1,wh);function wh(t){this.listenProvider_=t,this.syncPointTree_=Mc.Empty,this.pendingWriteTree_=new yh,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var Eh=(Ih.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Ih.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Ih);function Ih(){this.rootNode_=zu.EMPTY_NODE}var Th=(Sh.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),Zo(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},Sh.prototype.get=function(){return Po(this.counters_)},Sh);function Sh(){this.counters_={}}var Ch=(Nh.getCollection=function(t){t=t.toString();return this.collections_[t]||(this.collections_[t]=new Th),this.collections_[t]},Nh.getOrCreateReporter=function(t,e){t=t.toString();return this.reporters_[t]||(this.reporters_[t]=e()),this.reporters_[t]},Nh.collections_={},Nh.reporters_={},Nh);function Nh(){}var Ah=(kh.prototype.get=function(){var t=this.collection_.get(),n=mo({},t);return this.last_&&Ia(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},kh);function kh(t){this.collection_=t,this.last_=null}var Oh=(Ph.prototype.includeStat=function(t){this.statsToReport_[t]=!0},Ph.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;Ia(t,function(t,e){0<e&&Zo(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),Ca(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},Ph);function Ph(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Ah(t);t=1e4+2e4*Math.random();Ca(this.reportStats_.bind(this),Math.floor(t))}var Dh=(Rh.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new xh(i)),e.add(r)}e&&this.eventLists_.push(e)},Rh.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},Rh.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},Rh.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},Rh);function Rh(){this.eventLists_=[],this.recursionDepth_=0}var xh=(Lh.prototype.add=function(t){this.events_.push(t)},Lh.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e,n=this.events_[t];null!==n&&(this.events_[t]=null,e=n.getEventRunner(),va&&ga("event: "+n.toString()),Sa(e))}},Lh.prototype.getPath=function(){return this.path_},Lh);function Lh(t){this.path_=t,this.events_=[]}Mh.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=Io(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},Mh.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});t=this.getInitialEvent(t);t&&e.apply(n,t)},Mh.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},Mh.prototype.validateEventType_=function(e){Ao(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},M=Mh;function Mh(t){this.allowedEvents_=t,this.listeners_={},Ao(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Fh,Uh=(go(jh,Fh=M),jh.getInstance=function(){return new jh},jh.prototype.getInitialEvent=function(t){return Ao("visible"===t,"Unknown event type: "+t),[this.visible_]},jh);function jh(){var e,t,n=Fh.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var Vh,qh=(go(Bh,Vh=M),Bh.getInstance=function(){return new Bh},Bh.prototype.getInitialEvent=function(t){return Ao("online"===t,"Unknown event type: "+t),[this.online_]},Bh.prototype.currentlyOnline=function(){return this.online_},Bh);function Bh(){var t=Vh.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||Mo()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var Wh=(Hh.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},Hh.prototype.handleResponse=function(t,e){var n=this;this.pendingResponses[t]=e;for(var r=this;this.pendingResponses[this.currentResponseNum];){if("break"===function(){var e=r.pendingResponses[r.currentResponseNum];delete r.pendingResponses[r.currentResponseNum];for(var t=0;t<e.length;++t)!function(t){e[t]&&Sa(function(){n.onMessage_(e[t])})}(t);if(r.currentResponseNum===r.closeAfterResponse)return r.onClose&&(r.onClose(),r.onClose=null),"break";r.currentResponseNum++}())break}},Hh);function Hh(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var Gh="pLPCommand",Kh="pRTLPCB",zh=(Qh.prototype.open=function(t,e){var n,r,i,s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Wh(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),n=function(){var t;s.isClosed_||(s.scriptTagHolder=new Xh(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Eo(t,5),r=n[0],i=n[1],o=n[2];n[3],n[4];if(s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Eo(t,2),r=n[0],n=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,n)},function(){s.onClosed_()},s.urlFn),(t={start:"t"}).ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),s.applicationId&&(t.p=s.applicationId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Ra)&&(t.r="f"),t=s.urlFn(t),s.log_("Connecting via long-poll to "+t),s.scriptTagHolder.addTag(t,function(){}))},"complete"===document.readyState?n():(r=!1,i=function(){document.body?r||(r=!0,n()):setTimeout(i,Math.floor(10))},document.addEventListener?(document.addEventListener("DOMContentLoaded",i,!1),window.addEventListener("load",i,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&i()}),window.attachEvent("onload",i)))},Qh.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},Qh.forceAllow=function(){Qh.forceAllow_=!0},Qh.forceDisallow=function(){Qh.forceDisallow_=!0},Qh.isAvailable=function(){return!!Qh.forceAllow_||!(Qh.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI)},Qh.prototype.markConnectionHealthy=function(){},Qh.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},Qh.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},Qh.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},Qh.prototype.send=function(t){t=Jo(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);for(var t=function(t){t=So(t);return Oo.encodeByteArray(t,!0)}(t),e=ua(t,1840),n=0;n<e.length;n++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,e.length,e[n]),this.curSegmentNum++},Qh.prototype.addDisconnectPingFrame=function(t,e){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)},Qh.prototype.incrementIncomingBytes_=function(t){t=Jo(t).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)},Qh);function Qh(t,e,n,r,i){this.connId=t,this.repoInfo=e,this.applicationId=n,this.transportSessionId=r,this.lastSessionId=i,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ma(t),this.stats_=Ch.getCollection(e),this.urlFn=function(t){return e.connectionURL(La,t)}}var Xh=(Yh.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||ga("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},Yh.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},Yh.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},Yh.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var t=this.urlFn(t),e="",n=0;0<this.pendingSegs.length;){if(!(this.pendingSegs[0].d.length+30+e.length<=1870))break;var r=this.pendingSegs.shift(),e=e+"&seg"+n+"="+r.seg+"&ts"+n+"="+r.ts+"&d"+n+"="+r.d;n++}return t+=e,this.addLongPollTag_(t,this.currentSerial),!0}return!1},Yh.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},Yh.prototype.addLongPollTag_=function(t,e){var n=this;this.outstandingRequests.add(e);function r(){n.outstandingRequests.delete(e),n.newRequest_()}var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},Yh.prototype.addTag=function(t,n){var r=this;setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){ga("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},Yh);function Yh(t,e,n,r){this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,this.uniqueCallbackIdentifier=pa(),window[Gh+this.uniqueCallbackIdentifier]=t,window[Kh+this.uniqueCallbackIdentifier]=e,this.myIFrame=Yh.createIFrame_();e="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length)&&(e='<script>document.domain="'+document.domain+'";<\/script>');var i="<html><body>"+e+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(i),this.myIFrame.doc.close()}catch(t){ga("frame writing exception"),t.stack&&ga(t.stack),ga(t)}}var Jh="";function $h(t){Jh=t}var Zh=null;"undefined"!=typeof MozWebSocket?Zh=MozWebSocket:"undefined"!=typeof WebSocket&&(Zh=WebSocket);var tl=(el.connectionURL_=function(t,e,n){var r={v:"5"};return"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(Ra)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL(xa,r)},el.prototype.open=function(e,t){var n,r=this;this.onDisconnect=t,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ha.set("previous_websocket_failure",!0);try{jo()||(n={headers:{"X-Firebase-GMPID":this.applicationId||""}},this.mySock=new Zh(this.connURL,[],n))}catch(t){this.log_("Error instantiating WebSocket.");e=t.message||t.data;return e&&this.log_(e),void this.onClosed_()}this.mySock.onopen=function(){r.log_("Websocket connected."),r.everConnected_=!0},this.mySock.onclose=function(){r.log_("Websocket connection was disconnected."),r.mySock=null,r.onClosed_()},this.mySock.onmessage=function(t){r.handleIncomingFrame(t)},this.mySock.onerror=function(t){r.log_("WebSocket error.  Closing connection.");t=t.message||t.data;t&&r.log_(t),r.onClosed_()}},el.prototype.start=function(){},el.forceDisallow=function(){el.forceDisallow_=!0},el.isAvailable=function(){var t,e=!1;return"undefined"!=typeof navigator&&navigator.userAgent&&((t=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/))&&1<t.length&&parseFloat(t[1])<4.4&&(e=!0)),!e&&null!==Zh&&!el.forceDisallow_},el.previouslyFailed=function(){return ha.isInMemoryStorage||!0===ha.get("previous_websocket_failure")},el.prototype.markConnectionHealthy=function(){ha.remove("previous_websocket_failure")},el.prototype.appendFrame_=function(t){this.frames.push(t),this.frames.length===this.totalFrames&&(t=this.frames.join(""),this.frames=null,t=Yo(t),this.onMessage(t))},el.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},el.prototype.extractFrameCount_=function(t){if(Ao(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},el.prototype.handleIncomingFrame=function(t){null!==this.mySock&&(t=t.data,this.bytesReceived+=t.length,this.stats_.incrementCounter("bytes_received",t.length),this.resetKeepAlive(),null!==this.frames?this.appendFrame_(t):null!==(t=this.extractFrameCount_(t))&&this.appendFrame_(t))},el.prototype.send=function(t){this.resetKeepAlive();t=Jo(t);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);var e=ua(t,16384);1<e.length&&this.sendString_(String(e.length));for(var n=0;n<e.length;n++)this.sendString_(e[n])},el.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},el.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},el.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},el.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},el.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},el.responsesRequiredToBeHealthy=2,el.healthyTimeout=3e4,el);function el(t,e,n,r,i){this.connId=t,this.applicationId=n,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ma(this.connId),this.stats_=Ch.getCollection(e),this.connURL=el.connectionURL_(e,r,i),this.nodeAdmin=e.nodeAdmin}var nl=(Object.defineProperty(rl,"ALL_TRANSPORTS",{get:function(){return[zh,tl]},enumerable:!1,configurable:!0}),rl.prototype.initTransports_=function(t){var e,n,r=tl&&tl.isAvailable(),i=r&&!tl.previouslyFailed();if(t.webSocketOnly&&(r||ia("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[tl];else{var o=this.transports_=[];try{for(var s=wo(rl.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},rl.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},rl.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},rl);function rl(t){this.initTransports_(t)}var il=(ol.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));e=e.healthyTimeout||0;0<e&&(this.healthyTimeout_=Ca(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(e)))},ol.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},ol.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},ol.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},ol.prototype.sendRequest=function(t){t={t:"d",d:t};this.sendData_(t)},ol.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},ol.prototype.onSecondaryControl_=function(t){"t"in t&&("a"===(t=t.t)?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_()))},ol.prototype.onSecondaryMessageReceived_=function(t){var e=aa("t",t),t=aa("d",t);if("c"===e)this.onSecondaryControl_(t);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(t)}},ol.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},ol.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},ol.prototype.onPrimaryMessageReceived_=function(t){var e=aa("t",t),t=aa("d",t);"c"===e?this.onControl_(t):"d"===e&&this.onDataMessage_(t)},ol.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},ol.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},ol.prototype.onControl_=function(t){var e=aa("t",t);if("d"in t){t=t.d;if("h"===e)this.onHandshake_(t);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var n=0;n<this.pendingDataMessages.length;++n)this.onDataMessage_(this.pendingDataMessages[n]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(t):"r"===e?this.onReset_(t):"e"===e?na("Server Error: "+t):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):na("Unknown control packet command: "+e)}},ol.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&ia("Protocol version mismatch detected"),this.tryStartUpgrade_())},ol.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},ol.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),t=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,t),Ca(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},ol.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},ol.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Ca(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},ol.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},ol.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},ol.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ha.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},ol.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},ol.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},ol.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},ol.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},ol);function ol(t,e,n,r,i,o,s,a){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.onMessage_=r,this.onReady_=i,this.onDisconnect_=o,this.onKill_=s,this.lastSessionId=a,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ma("c:"+this.id+":"),this.transportManager_=new nl(e),this.log_("Connection created"),this.start_()}sl.prototype.put=function(t,e,n,r){},sl.prototype.merge=function(t,e,n,r){},sl.prototype.refreshAuthToken=function(t){},sl.prototype.onDisconnectPut=function(t,e,n){},sl.prototype.onDisconnectMerge=function(t,e,n){},sl.prototype.onDisconnectCancel=function(t,e){},sl.prototype.reportStats=function(t){},du=sl;function sl(){}var al,ul=1e3,cl=3e5,hl=(go(ll,al=du),ll.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,e={r:r,a:t,b:e};this.log_(Jo(e)),Ao(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(e),n&&(this.requestCBHash_[r]=n)},ll.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),Ao(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),Ao(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");n={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,n),this.connected_&&this.sendListen_(n)},ll.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;ll.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},ll.warnOnListenWarnings_=function(t,e){t&&"object"==typeof t&&Zo(t,"w")&&(t=ts(t,"w"),Array.isArray(t)&&~t.indexOf("no_index")&&(t='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',e=e.path.toString(),ia("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+t+" at "+e+" to your security rules for better performance.")))},ll.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},ll.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||function(t){t=$o(t).claims;return"object"==typeof t&&!0===t.admin}(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},ll.prototype.tryAuth=function(){var n,t,e,r=this;this.connected_&&this.authToken_&&(t=function(t){t=$o(t).claims;return!!t&&"object"==typeof t&&t.hasOwnProperty("iat")}(n=this.authToken_)?"auth":"gauth",e={cred:n},null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,t=t.d||"error";r.authToken_===n&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,t))}))},ll.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),Ao(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},ll.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);t={p:t};r&&(t.q=n,t.t=r),this.sendRequest("n",t)},ll.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},ll.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},ll.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},ll.prototype.sendOnDisconnect_=function(t,e,n,r){n={p:e,d:n};this.log_("onDisconnect "+t,n),this.sendRequest(t,n,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},ll.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},ll.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},ll.prototype.putInternal=function(t,e,n,r,i){n={p:e,d:n};void 0!==i&&(n.h=i),this.outstandingPuts_.push({action:t,request:n,onComplete:r}),this.outstandingPutCount_++;r=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(r):this.log_("Buffering put: "+e)},ll.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},ll.prototype.reportStats=function(t){var e=this;this.connected_&&(t={c:t},this.log_("reportStats",t),this.sendRequest("s",t,function(t){"ok"!==t.s&&(t=t.d,e.log_("reportStats","Error sending stats: "+t))}))},ll.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+Jo(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},ll.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):na("Unrecognized action received from server: "+Jo(t)+"\nAre you using the latest client?")},ll.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},ll.prototype.scheduleConnect_=function(t){var e=this;Ao(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},ll.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ul,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},ll.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=ul,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},ll.prototype.onRealtimeDisconnect_=function(){var t;this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()&&(this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=ul),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime()),t=(new Date).getTime()-this.lastConnectionAttemptTime_,t=Math.max(0,this.reconnectDelay_-t),t=Math.random()*t,this.log_("Trying to reconnect in "+t+"ms"),this.scheduleConnect_(t),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)),this.onConnectStatus_(!1)},ll.prototype.establishConnection_=function(){var e,n,r,i,o,s,a,u,c,t,h=this;this.shouldReconnect_()&&(this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null,e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+ll.nextConnectionId_++,s=(o=this).lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())},this.realtime_={close:c,sendRequest:function(t){Ao(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}},t=this.forceTokenRefresh_,this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?ga("getToken() completed but was canceled"):(ga("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new il(i,o.repoInfo_,o.applicationId_,e,n,r,function(t){ia(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||(h.repoInfo_.nodeAdmin&&ia(t),c())}))},ll.prototype.interrupt=function(t){ga("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},ll.prototype.resume=function(t){ga("Resuming connection for reason: "+t),delete this.interruptReasons_[t],es(this.interruptReasons_)&&(this.reconnectDelay_=ul,this.realtime_||this.scheduleConnect_(0))},ll.prototype.handleTimestamp_=function(t){t-=(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:t})},ll.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},ll.prototype.onListenRevoked_=function(t,e){e=e?e.map(function(t){return Ea(t)}).join("$"):"default",e=this.removeListen_(t,e);e&&e.onComplete&&e.onComplete("permission_denied")},ll.prototype.removeListen_=function(t,e){var n,r=new ka(t).toString();return this.listens.has(r)?(n=(t=this.listens.get(r)).get(e),t.delete(e),0===t.size&&this.listens.delete(r)):n=void 0,n},ll.prototype.onAuthRevoked_=function(t,e){ga("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},ll.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},ll.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=wo(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,wo(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},ll.prototype.sendConnectStats_=function(){var t={};t["sdk.js."+Jh.replace(/\./g,"-")]=1,Mo()?t["framework.cordova"]=1:Uo()&&(t["framework.reactnative"]=1),this.reportStats(t)},ll.prototype.shouldReconnect_=function(){var t=qh.getInstance().currentlyOnline();return es(this.interruptReasons_)&&t},ll.nextPersistentConnectionId_=0,ll.nextConnectionId_=0,ll);function ll(t,e,n,r,i,o,s){var a=al.call(this)||this;if(a.repoInfo_=t,a.applicationId_=e,a.onDataUpdate_=n,a.onConnectStatus_=r,a.onServerInfoUpdate_=i,a.authTokenProvider_=o,a.authOverride_=s,a.id=ll.nextPersistentConnectionId_++,a.log_=ma("p:"+a.id+":"),a.interruptReasons_={},a.listens=new Map,a.outstandingPuts_=[],a.outstandingPutCount_=0,a.onDisconnectRequestQueue_=[],a.connected_=!1,a.reconnectDelay_=ul,a.maxReconnectDelay_=cl,a.securityDebugCallback_=null,a.lastSessionId=null,a.establishConnectionTimer_=null,a.visible_=!1,a.requestCBHash_={},a.requestNumber_=0,a.realtime_=null,a.authToken_=null,a.forceTokenRefresh_=!1,a.invalidAuthTokenCount_=0,a.firstConnection_=!0,a.lastConnectionAttemptTime_=null,a.lastConnectionEstablishedTime_=null,s&&!jo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return a.scheduleConnect_(0),Uh.getInstance().on("visible",a.onVisible_,a),-1===t.host.indexOf("fblocal")&&qh.getInstance().on("online",a.onOnline_,a),a}var fl,pl=(go(dl,fl=du),dl.prototype.reportStats=function(t){throw new Error("Method not implemented.")},dl.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(Ao(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},dl.prototype.listen=function(t,e,n,r){var i=this,o=t.path.toString();this.log_("Listen called for "+o+" "+t.queryIdentifier());var s=dl.getListenId_(t,n),a={};this.listens_[s]=a;t=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(o+".json",t,function(t,e){404===t&&(t=e=null),null===t&&i.onDataUpdate_(o,e,!1,n),ts(i.listens_,s)===a&&r(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},dl.prototype.unlisten=function(t,e){e=dl.getListenId_(t,e);delete this.listens_[e]},dl.prototype.refreshAuthToken=function(t){},dl.prototype.restRequest_=function(r,i,o){var s=this;void 0===i&&(i={}),i.format="export",this.authTokenProvider_.getToken(!1).then(function(t){t=t&&t.accessToken;t&&(i.auth=t);var e=(s.repoInfo_.secure?"https://":"http://")+s.repoInfo_.host+r+"?ns="+s.repoInfo_.namespace+function(t){for(var n=[],e=0,r=Object.entries(t);e<r.length;e++){var i=r[e];!function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}(i[0],i[1])}return n.length?"&"+n.join("&"):""}(i);s.log_("Sending REST request for "+e);var n=new XMLHttpRequest;n.onreadystatechange=function(){if(o&&4===n.readyState){s.log_("REST Response for "+e+" received. status:",n.status,"response:",n.responseText);var t=null;if(200<=n.status&&n.status<300){try{t=Yo(n.responseText)}catch(t){ia("Failed to parse JSON response for "+e+": "+n.responseText)}o(null,t)}else 401!==n.status&&404!==n.status&&ia("Got unsuccessful REST response for "+e+" Status: "+n.status),o(n.status);o=null}},n.open("GET",e,!0),n.send()})},dl);function dl(t,e,n){var r=fl.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=ma("p:rest:"),r.listens_={},r}var vl="repo_interrupt",yl=(gl.prototype.start=function(){var s=this;if(this.stats_=Ch.getCollection(this.repoInfo_),this.forceRestClient_||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new pl(this.repoInfo_,this.onDataUpdate_.bind(this),this.authTokenProvider_),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var t=this.app.options.databaseAuthVariableOverride;if(null!=t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Jo(t)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new hl(this.repoInfo_,this.app.options.appId,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),this.authTokenProvider_,t),this.server_=this.persistentConnection_}this.authTokenProvider_.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=Ch.getOrCreateReporter(this.repoInfo_,function(){return new Oh(s.stats_,s.server_)}),this.transactionsInit_(),this.infoData_=new Eh,this.infoSyncTree_=new _h({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new _h({startListening:function(n,t,e,r){return s.server_.listen(n,e,t,function(t,e){e=r(t,e);s.eventQueue_.raiseEventsForChangedPath(n.path,e)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})},gl.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},gl.prototype.name=function(){return this.repoInfo_.namespace},gl.prototype.serverTime=function(){var t=this.infoData_.getNode(new ka(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},gl.prototype.generateServerValues=function(){return(t=(t={timestamp:this.serverTime()})||{}).timestamp=t.timestamp||(new Date).getTime(),t;var t},gl.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new ka(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o,s=[],t=i;0<(s=r?n?(o=ns(e,function(t){return Zu(t)}),this.serverSyncTree_.applyTaggedQueryMerge(i,o,r)):(o=Zu(e),this.serverSyncTree_.applyTaggedQueryOverwrite(i,o,r)):n?(n=ns(e,function(t){return Zu(t)}),this.serverSyncTree_.applyServerMerge(i,n)):(e=Zu(e),this.serverSyncTree_.applyServerOverwrite(i,e))).length&&(t=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(t,s)},gl.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},gl.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},gl.prototype.onServerInfoUpdate_=function(t){var n=this;Ia(t,function(t,e){n.updateInfo_(t,e)})},gl.prototype.updateInfo_=function(t,e){t=new ka("/.info/"+t),e=Zu(e);this.infoData_.updateSnapshot(t,e);e=this.infoSyncTree_.applyServerOverwrite(t,e);this.eventQueue_.raiseEventsForChangedPath(t,e)},gl.prototype.getNextWriteId_=function(){return this.nextWriteId_++},gl.prototype.setWithPriority=function(r,t,e,i){var o=this;this.log_("set",{path:r.toString(),value:t,priority:e});var n=this.generateServerValues(),t=Zu(t,e),e=this.serverSyncTree_.calcCompleteEventCache(r),n=Ic(t,e,n),s=this.getNextWriteId_(),n=this.serverSyncTree_.applyUserOverwrite(r,n,s,!0);this.eventQueue_.queueEvents(n),this.server_.put(r.toString(),t.val(!0),function(t,e){var n="ok"===t;n||ia("set at "+r+" failed: "+t);n=o.serverSyncTree_.ackUserWrite(s,!n);o.eventQueue_.raiseEventsForChangedPath(r,n),o.callOnCompleteCallback(i,t,e)});t=this.abortTransactions_(r);this.rerunTransactions_(t),this.eventQueue_.raiseEventsForChangedPath(t,[])},gl.prototype.update=function(i,t,o){var s=this;this.log_("update",{path:i.toString(),value:t});var a,e,n=!0,r=this.generateServerValues(),u={};Ia(t,function(t,e){n=!1,u[t]=Ec(i.child(t),Zu(e),s.serverSyncTree_,r)}),n?(ga("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(o,"ok")):(a=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(i,u,a),this.eventQueue_.queueEvents(e),this.server_.merge(i.toString(),t,function(t,e){var n="ok"===t;n||ia("update at "+i+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(a,!n),n=0<r.length?s.rerunTransactions_(i):i;s.eventQueue_.raiseEventsForChangedPath(n,r),s.callOnCompleteCallback(o,t,e)}),Ia(t,function(t){t=s.abortTransactions_(i.child(t));s.rerunTransactions_(t)}),this.eventQueue_.raiseEventsForChangedPath(i,[]))},gl.prototype.runOnDisconnectEvents_=function(){var n=this;this.log_("onDisconnectEvents");var r=this.generateServerValues(),i=new kc;this.onDisconnect_.forEachTree(ka.Empty,function(t,e){e=Ec(t,e,n.serverSyncTree_,r);i.remember(t,e)});var o=[];i.forEachTree(ka.Empty,function(t,e){o=o.concat(n.serverSyncTree_.applyServerOverwrite(t,e));t=n.abortTransactions_(t);n.rerunTransactions_(t)}),this.onDisconnect_=new kc,this.eventQueue_.raiseEventsForChangedPath(ka.Empty,o)},gl.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},gl.prototype.onDisconnectSet=function(n,t,r){var i=this,o=Zu(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},gl.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=Zu(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},gl.prototype.onDisconnectUpdate=function(n,r,i){var o=this;if(es(r))return ga("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(n.toString(),r,function(t,e){"ok"===t&&Ia(r,function(t,e){e=Zu(e);o.onDisconnect_.remember(n.child(t),e)}),o.callOnCompleteCallback(i,t,e)})},gl.prototype.addEventCallbackForQuery=function(t,e){e=(".info"===t.path.getFront()?this.infoSyncTree_:this.serverSyncTree_).addEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,e)},gl.prototype.removeEventCallbackForQuery=function(t,e){e=(".info"===t.path.getFront()?this.infoSyncTree_:this.serverSyncTree_).removeEventRegistration(t,e);this.eventQueue_.raiseEventsAtPath(t.path,e)},gl.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(vl)},gl.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(vl)},gl.prototype.stats=function(t){var i;void 0===t&&(t=!1),"undefined"!=typeof console&&(t=t?(this.statsListener_||(this.statsListener_=new Ah(this.stats_)),this.statsListener_.get()):this.stats_.get(),i=Object.keys(t).reduce(function(t,e){return Math.max(e.length,t)},0),Ia(t,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)}))},gl.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},gl.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),ga.apply(void 0,Io([n],t))},gl.prototype.callOnCompleteCallback=function(n,r,i){n&&Sa(function(){var t,e;"ok"===r?n(null):(e=t=(r||"error").toUpperCase(),i&&(e+=": "+i),(e=new Error(e)).code=t,n(e))})},Object.defineProperty(gl.prototype,"database",{get:function(){return this.__database||(this.__database=new Ul(this))},enumerable:!1,configurable:!0}),gl);function gl(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.app=n,this.authTokenProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Dh,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new kc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}var ml=(bl.prototype.getStartPost=function(){return this.startPost_},bl.prototype.getEndPost=function(){return this.endPost_},bl.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},bl.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new cu(e,n))||(n=zu.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},bl.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=zu.EMPTY_NODE);var r=(r=e.withIndex(this.index_)).updatePriority(zu.EMPTY_NODE),i=this;return e.forEachChild(Nu,function(t,e){i.matches(new cu(t,e))||(r=r.updateImmediateChild(t,zu.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},bl.prototype.updatePriority=function(t,e){return t},bl.prototype.filtersNodes=function(){return!0},bl.prototype.getIndexedFilter=function(){return this.indexedFilter_},bl.prototype.getIndex=function(){return this.index_},bl.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},bl.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},bl);function bl(t){this.indexedFilter_=new Yc(t.getIndex()),this.index_=t.getIndex(),this.startPost_=bl.getStartPost_(t),this.endPost_=bl.getEndPost_(t)}var _l=(wl.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new cu(e,n))||(n=zu.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},wl.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=zu.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=zu.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(zu.EMPTY_NODE);var a,u=void 0,c=void 0,h=void 0,i=void 0;h=this.reverse_?(i=r.getReverseIterator(this.index_),u=this.rangedFilter_.getEndPost(),c=this.rangedFilter_.getStartPost(),a=this.index_.getCompare(),function(t,e){return a(e,t)}):(i=r.getIterator(this.index_),u=this.rangedFilter_.getStartPost(),c=this.rangedFilter_.getEndPost(),this.index_.getCompare());for(var o=0,l=!1;i.hasNext();){s=i.getNext();!l&&h(u,s)<=0&&(l=!0),l&&o<this.limit_&&h(s,c)<=0?o++:r=r.updateImmediateChild(s.name,zu.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},wl.prototype.updatePriority=function(t,e){return t},wl.prototype.filtersNodes=function(){return!0},wl.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},wl.prototype.getIndex=function(){return this.index_},wl.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o,s;s=this.reverse_?(o=this.index_.getCompare(),function(t,e){return o(e,t)}):this.index_.getCompare();var a=t;Ao(a.numChildren()===this.limit_,"");var u=new cu(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:s(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(Qc.childChangedChange(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(Qc.childRemovedChange(e,l));l=a.updateImmediateChild(e,zu.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(Qc.childAddedChange(f.name,f.node)),l.updateImmediateChild(f.name,f.node)):l}return!n.isEmpty()&&h&&0<=s(c,u)?(null!=i&&(i.trackChildChange(Qc.childRemovedChange(c.name,c.node)),i.trackChildChange(Qc.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,zu.EMPTY_NODE)):t},wl);function wl(t){this.rangedFilter_=new ml(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var El=(Il.prototype.hasStart=function(){return this.startSet_},Il.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===Il.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},Il.prototype.getIndexStartValue=function(){return Ao(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Il.prototype.getIndexStartName=function(){return Ao(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:ba},Il.prototype.hasEnd=function(){return this.endSet_},Il.prototype.getIndexEndValue=function(){return Ao(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Il.prototype.getIndexEndName=function(){return Ao(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:_a},Il.prototype.hasLimit=function(){return this.limitSet_},Il.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Il.prototype.getLimit=function(){return Ao(this.limitSet_,"Only valid if limit has been set"),this.limit_},Il.prototype.getIndex=function(){return this.index_},Il.prototype.copy_=function(){var t=new Il;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Il.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},Il.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Il.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},Il.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Il.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},Il.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},Il.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},Il.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},Il.prototype.getQueryObject=function(){var t,e=Il.WIRE_PROTOCOL_CONSTANTS_,n={};return this.startSet_&&(n[e.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(n[e.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(n[e.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(n[e.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_&&(n[e.LIMIT]=this.limit_,""===(t=this.viewFrom_)&&(t=this.isViewFromLeft()?e.VIEW_FROM_LEFT:e.VIEW_FROM_RIGHT),n[e.VIEW_FROM]=t),this.index_!==Nu&&(n[e.INDEX]=this.index_.toString()),n},Il.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Il.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Nu},Il.prototype.getNodeFilter=function(){return this.loadsAllData()?new Yc(this.getIndex()):new(this.hasLimit()?_l:ml)(this)},Il.prototype.toRestQueryStringParameters=function(){var t,e=Il.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===Nu?e.PRIORITY_INDEX:this.index_===nc?e.VALUE_INDEX:this.index_===gu?e.KEY_INDEX:(Ao(this.index_ instanceof rc,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=Jo(t),this.startSet_&&(n[e.START_AT]=Jo(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+Jo(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=Jo(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+Jo(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},Il.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},Il.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},Il.DEFAULT=new Il,Il);function Il(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Nu}var Tl,Sl=(go(Cl,Tl=yc),Cl.prototype.getKey=function(){return cs("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},Cl.prototype.child=function(t){var e,n,r,i;return cs("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof ka||(null===this.path.getFront()?(e="Reference.child",i=!(n=1),r=(r=t)&&r.replace(/^\/*\.info(\/|$)/,"/"),za(e,n,r,i)):za("Reference.child",1,t,!1)),new Cl(this.repo,this.path.child(t))},Cl.prototype.getParent=function(){cs("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new Cl(this.repo,t)},Cl.prototype.getRoot=function(){cs("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},Cl.prototype.databaseProp=function(){return this.repo.database},Cl.prototype.set=function(t,e){cs("Reference.set",1,2,arguments.length),Qa("Reference.set",this.path),Ba("Reference.set",1,t,this.path,!1),ls("Reference.set",2,e,!0);var n=new Ro;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},Cl.prototype.update=function(t,e){if(cs("Reference.update",1,2,arguments.length),Qa("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,ia("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wa("Reference.update",1,t,this.path,!1),ls("Reference.update",2,e,!0);var i=new Ro;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},Cl.prototype.setWithPriority=function(t,e,n){if(cs("Reference.setWithPriority",2,3,arguments.length),Qa("Reference.setWithPriority",this.path),Ba("Reference.setWithPriority",1,t,this.path,!1),Ha("Reference.setWithPriority",2,e,!1),ls("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new Ro;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},Cl.prototype.remove=function(t){return cs("Reference.remove",0,1,arguments.length),Qa("Reference.remove",this.path),ls("Reference.remove",1,t,!0),this.set(null,t)},Cl.prototype.transaction=function(t,r,e){if(cs("Reference.transaction",1,3,arguments.length),Qa("Reference.transaction",this.path),ls("Reference.transaction",1,t,!1),ls("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(hs(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new Ro;"function"==typeof r&&i.promise.catch(function(){});return this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new ru(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},Cl.prototype.setPriority=function(t,e){cs("Reference.setPriority",1,2,arguments.length),Qa("Reference.setPriority",this.path),Ha("Reference.setPriority",1,t,!1),ls("Reference.setPriority",2,e,!0);var n=new Ro;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},Cl.prototype.push=function(t,e){cs("Reference.push",0,2,arguments.length),Qa("Reference.push",this.path),Ba("Reference.push",1,t,this.path,!0),ls("Reference.push",2,e,!0);var n=this.repo.serverTime(),r=uu(n),n=this.child(r),i=this.child(r),t=null!=t?n.set(t,e).then(function(){return i}):Promise.resolve(i);return n.then=t.then.bind(t),n.catch=t.then.bind(t,void 0),"function"==typeof e&&t.catch(function(){}),n},Cl.prototype.onDisconnect=function(){return Qa("Reference.onDisconnect",this.path),new eu(this.repo,this.path)},Object.defineProperty(Cl.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!1,configurable:!0}),Object.defineProperty(Cl.prototype,"key",{get:function(){return this.getKey()},enumerable:!1,configurable:!0}),Object.defineProperty(Cl.prototype,"parent",{get:function(){return this.getParent()},enumerable:!1,configurable:!0}),Object.defineProperty(Cl.prototype,"root",{get:function(){return this.getRoot()},enumerable:!1,configurable:!0}),Cl);function Cl(t,e){if(!(t instanceof yl))throw new Error("new Reference() no longer supported - use app.database().");return Tl.call(this,t,e,El.DEFAULT,!1)||this}yc.__referenceConstructor=Sl,fh.__referenceConstructor=Sl;var Nl,Al=function(){this.children={},this.childCount=0,this.value=null},kl=(Ol.prototype.subTree=function(t){for(var e=t instanceof ka?t:new ka(t),n=this,r=e.getFront();null!==r;)n=new Ol(r,n,ts(n.node_.children,r)||new Al),r=(e=e.popFront()).getFront();return n},Ol.prototype.getValue=function(){return this.node_.value},Ol.prototype.setValue=function(t){Ao(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},Ol.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Ol.prototype.hasChildren=function(){return 0<this.node_.childCount},Ol.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Ol.prototype.forEachChild=function(n){var r=this;Ia(this.node_.children,function(t,e){n(new Ol(t,r,e))})},Ol.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},Ol.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},Ol.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},Ol.prototype.path=function(){return new ka(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Ol.prototype.name=function(){return this.name_},Ol.prototype.parent=function(){return this.parent_},Ol.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Ol.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=Zo(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},Ol);function Ol(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Al),this.name_=t,this.parent_=e,this.node_=n}(K=Nl=Nl||{})[K.RUN=0]="RUN",K[K.SENT=1]="SENT",K[K.COMPLETED=2]="COMPLETED",K[K.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",K[K.NEEDS_ABORT=4]="NEEDS_ABORT",yl.MAX_TRANSACTION_RETRIES_=25,yl.prototype.transactionsInit_=function(){this.transactionQueueTree_=new kl},yl.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);function i(){}var o=new Sl(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:pa(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},e=this.getLatestState_(t);s.currentInputSnapshot=e;var a,n=s.update(e.val());void 0===n?(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete&&(a=new oc(s.currentInputSnapshot,new Sl(this,s.path),Nu),s.onComplete(null,!1,a))):(tu("transaction failed: Data returned ",n,s.path),s.status=Nl.RUN,(a=(r=this.transactionQueueTree_.subTree(t)).getValue()||[]).push(s),r.setValue(a),r=void 0,"object"==typeof n&&null!==n&&Zo(n,".priority")?(r=ts(n,".priority"),Ao(qa(r),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):r=(this.serverSyncTree_.calcCompleteEventCache(t)||zu.EMPTY_NODE).getPriority().val(),a=this.generateServerValues(),r=Zu(n,r),a=Ic(r,e,a),s.currentOutputSnapshotRaw=r,s.currentOutputSnapshotResolved=a,s.currentWriteId=this.getNextWriteId_(),s=this.serverSyncTree_.applyUserOverwrite(t,a,s.currentWriteId,s.applyLocally),this.eventQueue_.raiseEventsForChangedPath(t,s),this.sendReadyTransactions_())},yl.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||zu.EMPTY_NODE},yl.prototype.sendReadyTransactions_=function(t){var e,n=this;void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()?(e=this.buildTransactionQueue_(t),Ao(0<e.length,"Sending zero length transaction queue"),e.every(function(t){return t.status===Nl.RUN})&&this.sendTransactionQueue_(t.path(),e)):t.hasChildren()&&t.forEachChild(function(t){n.sendReadyTransactions_(t)})},yl.prototype.sendTransactionQueue_=function(s,a){for(var u=this,t=a.map(function(t){return t.currentWriteId}),e=this.getLatestState_(s,t),n=e,t=e.hash(),r=0;r<a.length;r++){var i=a[r];Ao(i.status===Nl.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),i.status=Nl.SENT,i.retryCount++;var o=ka.relativePath(s,i.path),n=n.updateChild(o,i.currentOutputSnapshotRaw)}var e=n.val(!0),c=s;this.server_.put(c.toString(),e,function(t){u.log_("transaction put response",{path:c.toString(),status:t});var e=[];if("ok"===t){for(var n,r,i=[],o=0;o<a.length;o++){a[o].status=Nl.COMPLETED,e=e.concat(u.serverSyncTree_.ackUserWrite(a[o].currentWriteId)),a[o].onComplete&&(n=a[o].currentOutputSnapshotResolved,r=new Sl(u,a[o].path),r=new oc(n,r,Nu),i.push(a[o].onComplete.bind(null,null,!0,r))),a[o].unwatcher()}u.pruneCompletedTransactionsBelowNode_(u.transactionQueueTree_.subTree(s)),u.sendReadyTransactions_(),u.eventQueue_.raiseEventsForChangedPath(s,e);for(o=0;o<i.length;o++)Sa(i[o])}else{if("datastale"===t)for(o=0;o<a.length;o++)a[o].status===Nl.SENT_NEEDS_ABORT?a[o].status=Nl.NEEDS_ABORT:a[o].status=Nl.RUN;else{ia("transaction at "+c.toString()+" failed: "+t);for(o=0;o<a.length;o++)a[o].status=Nl.NEEDS_ABORT,a[o].abortReason=t}u.rerunTransactions_(s)}},t)},yl.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),t=e.path(),e=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(e,t),t},yl.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n=[],r=[],i=t.filter(function(t){return t.status===Nl.RUN}).map(function(t){return t.currentWriteId}),o=0;o<t.length;o++){var s,a,u,c=t[o],h=ka.relativePath(e,c.path),l=!1,f=void 0;Ao(null!==h,"rerunTransactionsUnderNode_: relativePath should not be null."),c.status===Nl.NEEDS_ABORT?(l=!0,f=c.abortReason,r=r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))):c.status===Nl.RUN&&(r=c.retryCount>=yl.MAX_TRANSACTION_RETRIES_?(l=!0,f="maxretry",r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))):(s=this.getLatestState_(c.path,i),c.currentInputSnapshot=s,void 0!==(u=t[o].update(s.val()))?(tu("transaction failed: Data returned ",u,c.path),a=Zu(u),"object"==typeof u&&null!=u&&Zo(u,".priority")||(a=a.updatePriority(s.getPriority())),h=c.currentWriteId,u=this.generateServerValues(),u=Ic(a,s,u),c.currentOutputSnapshotRaw=a,c.currentOutputSnapshotResolved=u,c.currentWriteId=this.getNextWriteId_(),i.splice(i.indexOf(h),1),(r=r.concat(this.serverSyncTree_.applyUserOverwrite(c.path,u,c.currentWriteId,c.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(h,!0))):(l=!0,f="nodata",r.concat(this.serverSyncTree_.ackUserWrite(c.currentWriteId,!0))))),this.eventQueue_.raiseEventsForChangedPath(e,r),r=[],l&&(t[o].status=Nl.COMPLETED,c=t[o].unwatcher,setTimeout(c,Math.floor(0)),t[o].onComplete&&("nodata"===f?(l=new Sl(this,t[o].path),c=t[o].currentInputSnapshot,l=new oc(c,l,Nu),n.push(t[o].onComplete.bind(null,null,!1,l))):n.push(t[o].onComplete.bind(null,new Error(f),!1,null))))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(o=0;o<n.length;o++)Sa(n[o]);this.sendReadyTransactions_()}},yl.prototype.getAncestorTransactionNode_=function(t){for(var e=this.transactionQueueTree_,n=t.getFront();null!==n&&null===e.getValue();)e=e.subTree(n),n=(t=t.popFront()).getFront();return e},yl.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},yl.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},yl.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Nl.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},yl.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),t=this.transactionQueueTree_.subTree(t);return t.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(t),t.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},yl.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++){e[o].status===Nl.SENT_NEEDS_ABORT||(e[o].status===Nl.SENT?(Ao(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=Nl.SENT_NEEDS_ABORT,e[o].abortReason="set"):(Ao(e[o].status===Nl.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)Sa(n[o])}};var Pl=(Dl.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(ga("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},Dl.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},Dl.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},Dl.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ia(t)},Dl);function Dl(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var Rl=(xl.prototype.getToken=function(t){return Promise.resolve({accessToken:xl.EMULATOR_AUTH_TOKEN})},xl.prototype.addTokenChangeListener=function(t){t(xl.EMULATOR_AUTH_TOKEN)},xl.prototype.removeTokenChangeListener=function(t){},xl.prototype.notifyForInvalidToken=function(){},xl.EMULATOR_AUTH_TOKEN="owner",xl);function xl(){}var Ll,Ml=(Fl.getInstance=function(){return Ll=Ll||new Fl},Fl.prototype.interrupt=function(){var e,t,n,r;try{for(var i=wo(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,wo(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Fl.prototype.resume=function(){var e,t,n,r;try{for(var i=wo(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,wo(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Fl.prototype.applyEmulatorSettings=function(t,e,n){t.repoInfo_=new Ma(e+":"+n,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams),t.repoInfo_.nodeAdmin&&(t.authTokenProvider_=new Rl)},Fl.prototype.databaseFromApp=function(t,e,n,r){var i=n||t.options.databaseURL;void 0===i&&(t.options.projectId||ra("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),ga("Using default host for project ",t.options.projectId),i=t.options.projectId+"-default-rtdb.firebaseio.com");var o,s=Ua(i,r),a=s.repoInfo,n=void 0;"undefined"!=typeof process&&(n=process.env.FIREBASE_DATABASE_EMULATOR_HOST),n?(o=!0,i="http://"+n+"?ns="+a.namespace,a=(s=Ua(i,r)).repoInfo):o=!s.repoInfo.secure;e=r&&o?new Rl:new Pl(t,e);return Xa("Invalid Firebase Database URL",1,s),s.path.isEmpty()||ra("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(a,t,e).database},Fl.prototype.deleteRepo=function(t){var e=ts(this.repos_,t.app.name);e&&ts(e,t.key)===t||ra("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.key]},Fl.prototype.createRepo=function(t,e,n){var r=ts(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=ts(r,t.toURLString());return i&&ra("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new yl(t,this.useRestClient_,e,n),r[t.toURLString()]=i},Fl.prototype.forceRestClient=function(t){this.useRestClient_=t},Fl);function Fl(){this.repos_={},this.useRestClient_=!1}var Ul=(Object.defineProperty(jl.prototype,"repo_",{get:function(){return this.instanceStarted_||(this.repoInternal_.start(),this.instanceStarted_=!0),this.repoInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(jl.prototype,"root_",{get:function(){return this.rootInternal_||(this.rootInternal_=new Sl(this.repo_,ka.Empty)),this.rootInternal_},enumerable:!1,configurable:!0}),Object.defineProperty(jl.prototype,"app",{get:function(){return this.repo_.app},enumerable:!1,configurable:!0}),jl.prototype.useEmulator=function(t,e){this.checkDeleted_("useEmulator"),this.instanceStarted_?ra("Cannot call useEmulator() after instance has already been initialized."):Ml.getInstance().applyEmulatorSettings(this.repoInternal_,t,e)},jl.prototype.ref=function(t){return this.checkDeleted_("ref"),cs("database.ref",0,1,arguments.length),t instanceof Sl?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},jl.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),cs(e,1,1,arguments.length);var n=Ua(t,this.repo_.repoInfo_.nodeAdmin);Xa(e,1,n);t=n.repoInfo;return t.isCustomHost()||t.host===this.repo_.repoInfo_.host||ra(e+": Host name does not match the current database: (found "+t.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},jl.prototype.checkDeleted_=function(t){null===this.repoInternal_&&ra("Cannot call "+t+" on a deleted database.")},jl.prototype.goOffline=function(){cs("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},jl.prototype.goOnline=function(){cs("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},jl.ServerValue={TIMESTAMP:{".sv":"timestamp"},increment:function(t){return{".sv":{increment:t}}}},jl);function jl(t){var e=this;this.repoInternal_=t,this.instanceStarted_=!1,this.INTERNAL={delete:function(){return bo(e,void 0,void 0,function(){return _o(this,function(t){return this.checkDeleted_("delete"),Ml.getInstance().deleteRepo(this.repo_),this.repoInternal_=null,this.rootInternal_=null,[2]})})}},t instanceof yl||ra("Don't call new Database() directly - please use firebase.database().")}var Vl=Object.freeze({__proto__:null,forceLongPolling:function(){tl.forceDisallow(),zh.forceAllow()},forceWebSockets:function(){zh.forceDisallow()},isWebSocketsAvailable:function(){return tl.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)},initStandalone:function(t){var e=t.app,n=t.url,r=t.version,i=t.customAuthImpl,o=t.namespace,t=void 0!==(t=t.nodeAdmin)&&t;return $h(r),(r=new Es("auth-internal",new Ts("database-standalone"))).setComponent(new bs("auth-internal",function(){return i},"PRIVATE")),{instance:Ml.getInstance().databaseFromApp(e,r,n,t),namespace:o}}}),Rr=hl;hl.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},hl.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var ql,Bl=Object.freeze({__proto__:null,DataConnection:Rr,RealTimeConnection:il,hijackHash:function(i){var o=hl.prototype.put;return hl.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){hl.prototype.put=o}},ConnectionTarget:Ma,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){Ml.getInstance().forceRestClient(t)}}),Wl=Ul.ServerValue;$h((ql=Ql).SDK_VERSION),ql.INTERNAL.registerComponent(new bs("database",function(t,e){var n=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return Ml.getInstance().databaseFromApp(n,t,e)},"PUBLIC").setServiceProps({Reference:Sl,Query:yc,Database:Ul,DataSnapshot:oc,enableLogging:ea,INTERNAL:Vl,ServerValue:Wl,TEST_ACCESS:Bl}).setMultipleInstances(!0)),ql.registerVersion("@firebase/database","0.7.0");var Hl=function(t,e){return(Hl=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Gl(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var M="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Kl={},zl=M||self;function Xl(){}function Yl(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function Jl(t){var e=Yl(t);return"array"==e||"object"==e&&"number"==typeof t.length}function $l(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Zl="closure_uid_"+(1e9*Math.random()>>>0),tf=0;function ef(t,e,n){return t.call.apply(t.bind,arguments)}function nf(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function rf(t,e,n){return(rf=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?ef:nf).apply(null,arguments)}function of(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var sf=Date.now;function af(t,e){function n(){}n.prototype=e.prototype,t.S=e.prototype,t.prototype=new n,t.prototype.constructor=t}function uf(){this.j=this.j,this.i=this.i}uf.prototype.j=!1,uf.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,Zl)&&t[Zl]||(t[Zl]=++tf))},uf.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var cf=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},hf=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function lf(){return Array.prototype.concat.apply([],arguments)}function ff(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function pf(t){return/^[\s\xa0]*$/.test(t)}var df,vf=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function yf(t,e){return-1!=t.indexOf(e)}function gf(t,e){return t<e?-1:e<t?1:0}t:{var mf=zl.navigator;if(mf){mf=mf.userAgent;if(mf){df=mf;break t}}df=""}function bf(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function _f(t){var e,n={};for(e in t)n[e]=t[e];return n}var wf="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ef(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<wf.length;i++)e=wf[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function If(t){return If[" "](t),t}If[" "]=Xl;var Tf,Sf=yf(df,"Opera"),Cf=yf(df,"Trident")||yf(df,"MSIE"),Nf=yf(df,"Edge"),Af=Nf||Cf,kf=yf(df,"Gecko")&&!(yf(df.toLowerCase(),"webkit")&&!yf(df,"Edge"))&&!(yf(df,"Trident")||yf(df,"MSIE"))&&!yf(df,"Edge"),Of=yf(df.toLowerCase(),"webkit")&&!yf(df,"Edge");function Pf(){var t=zl.document;return t?t.documentMode:void 0}t:{var Df="",Rf=(Rf=df,kf?/rv:([^\);]+)(\)|;)/.exec(Rf):Nf?/Edge\/([\d\.]+)/.exec(Rf):Cf?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Rf):Of?/WebKit\/(\S+)/.exec(Rf):Sf?/(?:Version)[ \/]?(\S+)/.exec(Rf):void 0);if(Rf&&(Df=Rf?Rf[1]:""),Cf){Rf=Pf();if(null!=Rf&&Rf>parseFloat(Df)){Tf=String(Rf);break t}}Tf=Df}var xf={};function Lf(a){return t=a,e=function(){for(var t=0,e=vf(String(Tf)).split("."),n=vf(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=gf(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||gf(0==o[2].length,0==s[2].length)||gf(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=xf,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var Mf=zl.document&&Cf?Pf()||(parseInt(Tf,10)||void 0):void 0,Ff=!Cf||9<=Number(Mf),Uf=Cf&&!Lf("9"),jf=function(){if(!zl.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{zl.addEventListener("test",Xl,e),zl.removeEventListener("test",Xl,e)}catch(t){}return t}();function Vf(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function qf(t,e){if(Vf.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(kf){t:{try{If(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Bf[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}Vf.prototype.b=function(){this.defaultPrevented=!0},af(qf,Vf);var Bf={2:"touch",3:"pen",4:"mouse"};qf.prototype.b=function(){qf.S.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,Uf)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var Wf="closure_listenable_"+(1e6*Math.random()|0),Hf=0;function Gf(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Hf,this.Y=this.Z=!1}function Kf(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function zf(t){this.src=t,this.a={},this.b=0}function Qf(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=cf(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(Kf(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Xf(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}zf.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Xf(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Gf(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Yf="closure_lm_"+(1e6*Math.random()|0),Jf={};function $f(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=sp(r);return e&&e[Wf]?e.wa(n,r,$l(i)?!!i.capture:!!i,o):Zf(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)$f(t,e[o],n,r,i);return null}return n=sp(n),t&&t[Wf]?t.va(e,n,$l(r)?!!r.capture:!!r,i):Zf(t,e,n,!1,r,i)}function Zf(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=$l(i)?!!i.capture:!!i;if(s&&!Ff)return null;var a,u,c=ip(t);if(c||(t[Yf]=c=new zf(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=rp,r=u=Ff?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)jf||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(ep(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function tp(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[Wf]?Qf(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(ep(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=ip(e))?(Qf(n,t),0==n.b&&(n.src=null,e[Yf]=null)):Kf(t)))}function ep(t){return t in Jf?Jf[t]:Jf[t]="on"+t}function np(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&tp(t),n.call(r,e)}function rp(t,e){if(t.Y)return!0;if(Ff)return np(t,new qf(e,this));if(!e)t:{e=["window","event"];for(var n=zl,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return np(t,e=new qf(e,this))}function ip(t){return(t=t[Yf])instanceof zf?t:null}var op="__closure_events_fn_"+(1e9*Math.random()>>>0);function sp(e){return"function"==Yl(e)?e:(e[op]||(e[op]=function(t){return e.handleEvent(t)}),e[op])}function ap(){uf.call(this),this.c=new zf(this),(this.J=this).C=null}function up(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,a,u=e[o];u&&!u.Y&&u.capture==n&&(s=u.listener,a=u.ca||u.src,u.Z&&Qf(t.c,u),i=!1!==s.call(a,r)&&i)}return i&&!r.defaultPrevented}af(ap,uf),ap.prototype[Wf]=!0,(du=ap.prototype).addEventListener=function(t,e,n,r){$f(this,t,e,n,r)},du.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=$l(i)?!!i.capture:!!i,r=sp(r),e&&e[Wf]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Xf(s=e.a[n],r,i,o))&&(Kf(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&ip(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Xf(n,r,i,o)),(r=-1<e?n[e]:null)&&tp(r))}(this,t,e,n,r)},du.dispatchEvent=function(t){var e,n=this.C;if(n)for(e=[];n;n=n.C)e.push(n);n=this.J;var r=t.type||t;if("string"==typeof t?t=new Vf(t,n):t instanceof Vf?t.target=t.target||n:(s=t,Ef(t=new Vf(r,n),s)),s=!0,e)for(var i=e.length-1;0<=i;i--)var o=t.a=e[i],s=up(o,r,!0,t)&&s;if(s=up(o=t.a=n,r,!0,t)&&s,s=up(o,r,!1,t)&&s,e)for(i=0;i<e.length;i++)s=up(o=t.a=e[i],r,!1,t)&&s;return s},du.G=function(){if(ap.S.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Kf(n[r]);delete e.a[t],e.b--}}this.C=null},du.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},du.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var cp=zl.JSON.stringify;function hp(){this.b=this.a=null}var lp,fp=(pp.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new pp(function(){return new dp},function(t){t.reset()},100));function pp(t,e,n){this.f=n,this.c=t,this.g=e,this.b=0,this.a=null}function dp(){this.next=this.b=this.a=null}function vp(t,e){var n;lp||(n=zl.Promise.resolve(void 0),lp=function(){n.then(mp)}),yp||(lp(),yp=!0),gp.add(t,e)}hp.prototype.add=function(t,e){var n=fp.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},dp.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var yp=!(dp.prototype.reset=function(){this.next=this.b=this.a=null}),gp=new hp;function mp(){for(var t,e;n=e=void 0,n=null,(e=gp).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){zl.setTimeout(function(){throw t},0)}(t)}var n=fp;n.g(t),n.b<n.f&&(n.b++,t.next=n.a,n.a=t)}yp=!1}function bp(t,e){ap.call(this),this.b=t||1,this.a=e||zl,this.f=rf(this.Ya,this),this.g=sf()}function _p(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function wp(t,e,n){if("function"==Yl(t))n&&(t=rf(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=rf(t.handleEvent,t)}return 2147483647<Number(e)?-1:zl.setTimeout(t,e||0)}af(bp,ap),(du=bp.prototype).aa=!1,du.M=null,du.Ya=function(){var t;this.aa&&(0<(t=sf()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),this.dispatchEvent("tick"),this.aa&&(_p(this),this.start())))},du.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=sf())},du.G=function(){bp.S.G.call(this),_p(this),delete this.a};var Ep,Ip,Tp,Sp=(Hl(Ip=Np,Tp=Ep=uf),Ip.prototype=null===Tp?Object.create(Tp):(Cp.prototype=Tp.prototype,new Cp),Np.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=wp(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},Np.prototype.G=function(){Ep.prototype.G.call(this),this.a&&(zl.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},Np);function Cp(){this.constructor=Ip}function Np(t,e,n){var r=Ep.call(this)||this;return r.g=null!=n?t.bind(n):t,r.h=e,r.b=null,r.c=!1,r.a=null,r}function Ap(t){uf.call(this),this.b=t,this.a={}}af(Ap,uf);var kp=[];function Op(t,e,n,r){Array.isArray(n)||(n&&(kp[0]=n.toString()),n=kp);for(var i=0;i<n.length;i++){var o=$f(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Pp(t){bf(t.a,function(t,e){this.a.hasOwnProperty(e)&&tp(t)},t),t.a={}}function Dp(){this.a=!0}function Rp(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}}return cp(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}Ap.prototype.G=function(){Ap.S.G.call(this),Pp(this)},Ap.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Dp.prototype.info=function(){};var xp=null;function Lp(){return xp=xp||new ap}function Mp(t){Vf.call(this,"serverreachability",t)}function Fp(t){var e=Lp();e.dispatchEvent(new Mp(e))}function Up(t){Vf.call(this,"statevent",t)}function jp(t){var e=Lp();e.dispatchEvent(new Up(e))}function Vp(t){Vf.call(this,"timingevent",t)}function qp(t,e){if("function"!=Yl(t))throw Error("Fn must not be null and must be a function");return zl.setTimeout(function(){t()},e)}af(Mp,Vf),af(Up,Vf),af(Vp,Vf);K={NO_ERROR:0,Za:1,gb:2,fb:3,bb:4,eb:5,hb:6,Da:7,TIMEOUT:8,kb:9},Rr={ab:"complete",ob:"success",Ea:"error",Da:"abort",mb:"ready",nb:"readystatechange",TIMEOUT:"timeout",ib:"incrementaldata",lb:"progress",cb:"downloadprogress",pb:"uploadprogress"};function Bp(){}function Wp(t){var e;return(e=t.a)||(e=t.a={}),e}function Hp(){}Bp.prototype.a=null;var Gp,M={OPEN:"a",$a:"b",Ea:"c",jb:"d"};function Kp(){Vf.call(this,"d")}function zp(){Vf.call(this,"c")}function Qp(){}function Xp(t,e,n,r){this.g=t,this.c=e,this.f=n,this.T=r||1,this.J=new Ap(this),this.P=Yp,t=Af?125:void 0,this.R=new bp(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.U=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.W=this.C=this.V=this.I=!1}af(Kp,Vf),af(zp,Vf),af(Qp,Bp),Gp=new Qp;var Yp=45e3,Jp={},$p={};function Zp(t,e,n){t.H=1,t.i=_d(dd(e)),t.j=n,t.I=!0,td(t,null)}function td(t,e){t.u=sf(),nd(t),t.l=dd(t.i);var s,a,u,c,h,l,n=t.l,r=t.T;Array.isArray(r)||(r=[String(r)]),Rd(n.b,"t",r),t.D=0,t.a=Cv(t.g,t.g.C?e:null),0<t.O&&(t.F=new Sp(rf(t.Ca,t,t.a),t.O)),Op(t.J,t.a,"readystatechange",t.Wa),e=t.B?_f(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),Fp(1),s=t.c,a=t.m,u=t.l,c=t.f,h=t.T,l=t.j,s.info(function(){if(s.a)if(l)for(var t="",e=l.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=l;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+a+"\n"+u+"\n"+t})}function ed(t,e,n){for(var r,i,o,s=!0;!t.A&&t.D<n.length;){var a=(a=n,o=i=void 0,i=(r=t).D,-1==(o=a.indexOf("\n",i))?$p:(i=Number(a.substring(i,o)),isNaN(i)?Jp:(o+=1)+i>a.length?$p:(a=a.substr(o,i),r.D=o+i,a)));if(a==$p){4==e&&(t.h=4,jp(14),s=!1),Rp(t.c,t.f,null,"[Incomplete Response]");break}if(a==Jp){t.h=4,jp(15),Rp(t.c,t.f,n,"[Invalid Chunk]"),s=!1;break}Rp(t.c,t.f,a,null),ad(t,a)}4==e&&0==n.length&&(t.h=1,jp(16),s=!1),t.b=t.b&&s,s?0<n.length&&!t.W&&(t.W=!0,(e=t.g).a==t&&e.V&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),mv(e),e.F=!0)):(Rp(t.c,t.f,n,"[Invalid Chunked Response]"),sd(t),od(t))}function nd(t){t.U=sf()+t.P,rd(t,t.P)}function rd(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=qp(rf(t.Ua,t),e)}function id(t){t.o&&(zl.clearTimeout(t.o),t.o=null)}function od(t){0==t.g.v||t.A||wv(t.g,t)}function sd(t){id(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,_p(t.R),Pp(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ad(t,e){try{var n,r,i,o,s,a=t.g;if(0!=a.v&&(a.a==t||Vd(a.b,t)))if(a.I=t.N,!t.C&&Vd(a.b,t)&&3==a.v){try{var u=a.ka.a.parse(e)}catch(t){u=null}if(Array.isArray(u)&&3==u.length){var c=u;if(0==c[0]){t:if(!a.j){if(a.a){if(!(a.a.u+3e3<t.u))break t;_v(a),cv(a)}gv(a),jp(18)}}else a.oa=c[1],0<a.oa-a.P&&c[2]<37500&&a.H&&0==a.o&&!a.m&&(a.m=qp(rf(a.Ra,a),6e3));if(jd(a.b)<=1&&a.ea){try{a.ea()}catch(t){}a.ea=void 0}}else Iv(a,11)}else if(!t.C&&a.a!=t||_v(a),!pf(e))for(e=u=a.ka.a.parse(e),u=0;u<e.length;u++){c=e[u],a.P=c[0],c=c[1],2==a.v?"c"==c[0]?(a.J=c[1],a.ga=c[2],null!=(r=c[3])&&(a.ha=r,a.c.info("VER="+a.ha)),null!=(o=c[4])&&(a.pa=o,a.c.info("SVER="+a.pa)),null!=(r=c[5])&&"number"==typeof r&&0<r&&(n=1.5*r,a.D=n,a.c.info("backChannelRequestTimeoutMs_="+n)),n=a,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(yf(r,"spdy")||yf(r,"quic")||yf(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(qd(i,i.b),i.b=null)),!n.A||(s=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=s,bd(n.B,n.A,s))),a.v=3,a.f&&a.f.ta(),a.V&&(a.N=sf()-t.u,a.c.info("Handshake RTT: "+a.N+"ms")),i=t,(n=a).la=Sv(n,n.C?n.ga:null,n.fa),i.C?(Bd(n.b,i),o=i,(s=n.D)&&o.setTimeout(s),o.o&&(id(o),nd(o)),n.a=i):yv(n),0<a.g.length&&fv(a)):"stop"!=c[0]&&"close"!=c[0]||Iv(a,7):3==a.v&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?Iv(a,7):uv(a):"noop"!=c[0]&&a.f&&a.f.sa(c),a.o=0)}Fp(4)}catch(t){}}function ud(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(Jl(t)||"string"==typeof t)hf(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(Jl(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(Jl(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function cd(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof cd)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function hd(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];ld(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)ld(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function ld(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(du=Xp.prototype).setTimeout=function(t){this.P=t},du.Wa=function(t){t=t.target;var e=this.F;e&&3==iv(t)?e.f():this.Ca(t)},du.Ca=function(t){try{if(t==this.a)t:{var e=iv(this.a),n=this.a.ua(),r=this.a.X();if(!(e<3||3==e&&!Af&&!this.a.$())){this.A||4!=e||7==n||Fp(8==n||r<=0?3:2),id(this);var i=this.a.X();this.N=i;n=this.a.$();if(this.b=200==i,r=this.c,a=this.m,u=this.l,c=this.f,h=this.T,l=e,f=i,r.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+h+"]: "+a+"\n"+u+"\n"+l+" "+f}),this.b){if(this.V&&!this.C){e:{if(this.a){var o=this.a;if((o=o.a?o.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!pf(o)){var s=o;break e}}s=null}if(!s){this.b=!1,this.h=3,jp(12),sd(this),od(this);break t}Rp(this.c,this.f,s,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ad(this,s)}this.I?(ed(this,e,n),Af&&this.b&&3==e&&(Op(this.J,this.R,"tick",this.Va),this.R.start())):(Rp(this.c,this.f,n,null),ad(this,n)),4==e&&sd(this),this.b&&!this.A&&(4==e?wv(this.g,this):(this.b=!1,nd(this)))}else 400==i&&0<n.indexOf("Unknown SID")?(this.h=3,jp(12)):(this.h=0,jp(13)),sd(this),od(this)}}}catch(t){}var a,u,c,h,l,f},du.Va=function(){var t,e;this.a&&(t=iv(this.a),e=this.a.$(),this.D<e.length&&(id(this),ed(this,t,e),this.b&&4!=t&&nd(this)))},du.cancel=function(){this.A=!0,sd(this)},du.Ua=function(){this.o=null;var t,e,n=sf();0<=n-this.U?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(Fp(3),jp(17)),sd(this),this.h=2,od(this)):rd(this,this.U-n)},(du=cd.prototype).K=function(){hd(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},du.L=function(){return hd(this),this.a.concat()},du.get=function(t,e){return ld(this.b,t)?this.b[t]:e},du.set=function(t,e){ld(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},du.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var fd=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function pd(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof pd?(this.a=void 0!==e?e:t.a,vd(this,t.f),this.j=t.j,yd(this,t.c),gd(this,t.h),this.g=t.g,e=t.b,(n=new kd).c=e.c,e.a&&(n.a=new cd(e.a),n.b=e.b),md(this,n),this.i=t.i):t&&(n=String(t).match(fd))?(this.a=!!e,vd(this,n[1]||"",!0),this.j=wd(n[2]||""),yd(this,n[3]||"",!0),gd(this,n[4]),this.g=wd(n[5]||"",!0),md(this,n[6]||"",!0),this.i=wd(n[7]||"")):(this.a=!!e,this.b=new kd(null,this.a))}function dd(t){return new pd(t)}function vd(t,e,n){t.f=n?wd(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function yd(t,e,n){t.c=n?wd(e,!0):e}function gd(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function md(t,e,n){var r,i;e instanceof kd?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(Od(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Pd(this,e),Rd(this,n,t))},r)),r.f=i):(n||(e=Ed(e,Nd)),t.b=new kd(e,t.a))}function bd(t,e,n){t.b.set(e,n)}function _d(t){return bd(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^sf()).toString(36)),t}function wd(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ed(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Id),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Id(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}pd.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ed(e,Td,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(Ed(e,Td,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ed(n,"/"==n.charAt(0)?Cd:Sd,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",Ed(n,Ad)),t.join("")};var Td=/[#\/\?@]/g,Sd=/[#\?:]/g,Cd=/[#\?]/g,Nd=/[#\?@]/g,Ad=/#/g;function kd(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Od(n){n.a||(n.a=new cd,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Pd(t,e){Od(t),e=xd(t,e),ld(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,ld((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&hd(t)))}function Dd(t,e){return Od(t),e=xd(t,e),ld(t.a.b,e)}function Rd(t,e,n){Pd(t,e),0<n.length&&(t.c=null,t.a.set(xd(t,e),ff(n)),t.b+=n.length)}function xd(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function Ld(t,e){this.b=t,this.a=e}function Md(t){this.g=t||Fd,t=zl.PerformanceNavigationTiming?0<(t=zl.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(zl.ia&&zl.ia.ya&&zl.ia.ya()&&zl.ia.ya().qb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}(du=kd.prototype).add=function(t,e){Od(this),this.c=null,t=xd(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},du.forEach=function(n,r){Od(this),this.a.forEach(function(t,e){hf(t,function(t){n.call(r,t,e,this)},this)},this)},du.L=function(){Od(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},du.K=function(t){Od(this);var e=[];if("string"==typeof t)Dd(this,t)&&(e=lf(e,this.a.get(xd(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=lf(e,t[n])}return e},du.set=function(t,e){return Od(this),this.c=null,Dd(this,t=xd(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},du.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},du.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var Fd=10;function Ud(t){return t.b||t.a&&t.a.size>=t.f}function jd(t){return t.b?1:t.a?t.a.size:0}function Vd(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function qd(t,e){t.a?t.a.add(e):t.b=e}function Bd(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Wd(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return ff(t.c);var r=t.c;try{for(var i=Gl(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Hd(){}function Gd(){this.a=new Hd}function Kd(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}Md.prototype.cancel=function(){var e,t;if(this.c=Wd(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Gl(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},Hd.prototype.stringify=function(t){return zl.JSON.stringify(t,void 0)},Hd.prototype.parse=function(t){return zl.JSON.parse(t,void 0)};var zd=zl.JSON.parse;function Qd(t){ap.call(this),this.headers=new cd,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Xd,this.D=this.F=!1}af(Qd,ap);var Xd="",Yd=/^https?$/i,Jd=["POST","PUT"];function $d(t){return"content-type"==t.toLowerCase()}function Zd(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,tv(t),nv(t)}function tv(t){t.u||(t.u=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ev(t){if(t.b&&void 0!==Kl&&(!t.s[1]||4!=iv(t)||2!=t.X()))if(t.l&&4==iv(t))wp(t.za,0,t);else if(t.dispatchEvent("readystatechange"),4==iv(t)){t.b=!1;try{var e,n,r,i,o=t.X();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}if((e=s)||((n=0===o)&&(!(i=String(t.B).match(fd)[1]||null)&&zl.self&&zl.self.location&&(i=(r=zl.self.location.protocol).substr(0,r.length-1)),n=!Yd.test(i?i.toLowerCase():"")),e=n),e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<iv(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.X()+"]",tv(t)}}finally{nv(t)}}}function nv(t,e){if(t.a){rv(t);var n=t.a,r=t.s[0]?Xl:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function rv(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(zl.clearTimeout(t.m),t.m=null)}function iv(t){return t.a?t.a.readyState:0}function ov(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",bf(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):bd(t,e,n))}function sv(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function av(t){this.pa=0,this.g=[],this.c=new Dp,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.W=this.i=this.O=this.l=null,this.La=this.R=0,this.Ia=sv("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.T=!0,this.I=this.oa=this.P=-1,this.U=this.o=this.u=0,this.Fa=sv("baseRetryDelayMs",5e3,t),this.Ma=sv("retryDelaySeedMs",1e4,t),this.Ja=sv("forwardChannelMaxRetries",2,t),this.ma=sv("forwardChannelRequestTimeoutMs",2e4,t),this.Ka=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Md(t&&t.concurrentRequestLimit),this.ka=new Gd,this.da=t&&t.fastHandshake||!1,this.Ga=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.T=!1),this.V=!this.da&&this.T&&t&&t.c||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null}function uv(t){var e,n;hv(t),3==t.v&&(e=t.R++,bd(n=dd(t.B),"SID",t.J),bd(n,"RID",e),bd(n,"TYPE","terminate"),dv(t,n),(e=new Xp(t,t.c,e,void 0)).H=2,e.i=_d(dd(n)),n=!1,zl.navigator&&zl.navigator.sendBeacon&&(n=zl.navigator.sendBeacon(e.i.toString(),"")),!n&&zl.Image&&((new Image).src=e.i,n=!0),n||(e.a=Cv(e.g,null),e.a.ba(e.i)),e.u=sf(),nd(e)),Tv(t)}function cv(t){t.a&&(mv(t),t.a.cancel(),t.a=null)}function hv(t){cv(t),t.j&&(zl.clearTimeout(t.j),t.j=null),_v(t),t.b.cancel(),t.h&&("number"==typeof t.h&&zl.clearTimeout(t.h),t.h=null)}function lv(t,e){t.g.push(new Ld(t.La++,e)),3==t.v&&fv(t)}function fv(t){Ud(t.b)||t.h||(t.h=!0,vp(t.Ba,t),t.u=0)}function pv(t,e){var n=e?e.f:t.R++,r=dd(t.B);bd(r,"SID",t.J),bd(r,"RID",n),bd(r,"AID",t.P),dv(t,r),t.i&&t.l&&ov(r,t.i,t.l),n=new Xp(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=vv(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),qd(t.b,n),Zp(n,r,e)}function dv(t,n){t.f&&ud({},function(t,e){bd(n,e,t)})}function vv(t,e,n){n=Math.min(t.g.length,n);var r=t.f?rf(t.f.Ha,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{!function(t,r,e){var i=e||"";try{ud(t,function(t,e){var n=t;$l(t)&&(n=cp(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function yv(t){t.a||t.j||(t.U=1,vp(t.Aa,t),t.o=0)}function gv(t){return!(t.a||t.j||3<=t.o)&&(t.U++,t.j=qp(rf(t.Aa,t),Ev(t,t.o)),t.o++,1)}function mv(t){null!=t.s&&(zl.clearTimeout(t.s),t.s=null)}function bv(t){t.a=new Xp(t,t.c,"rpc",t.U),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=dd(t.la);bd(e,"RID","rpc"),bd(e,"SID",t.J),bd(e,"CI",t.H?"0":"1"),bd(e,"AID",t.P),dv(t,e),bd(e,"TYPE","xmlhttp"),t.i&&t.l&&ov(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=_d(dd(e)),n.j=null,n.I=!0,td(n,t)}function _v(t){null!=t.m&&(zl.clearTimeout(t.m),t.m=null)}function wv(t,e){var n,r=null;if(t.a==e){_v(t),mv(t),t.a=null;var i=2}else{if(!Vd(t.b,e))return;r=e.s,Bd(t.b,e),i=1}if(t.I=e.N,0!=t.v)if(e.b){1==i?(r=e.j?e.j.length:0,e=sf()-e.u,n=t.u,(i=Lp()).dispatchEvent(new Vp(i)),fv(t)):yv(t)}else if(3==(n=e.h)||0==n&&0<t.I||!(1==i&&function(t,e){if(!(jd(t.b)>=t.b.f-(t.h?1:0))){if(t.h)return t.g=e.s.concat(t.g),1;if(!(1==t.v||2==t.v||t.u>=(t.Ia?0:t.Ja)))return t.h=qp(rf(t.Ba,t,e),Ev(t,t.u)),t.u++,1}}(t,e)||2==i&&gv(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),n){case 1:Iv(t,5);break;case 4:Iv(t,10);break;case 3:Iv(t,6);break;default:Iv(t,2)}}function Ev(t,e){var n=t.Fa+Math.floor(Math.random()*t.Ma);return t.f||(n*=2),n*e}function Iv(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=rf(t.Xa,t),r||(r=new pd("//www.google.com/images/cleardot.gif"),zl.location&&"http"==zl.location.protocol||vd(r,"https"),_d(r)),n=r.toString(),r=o,o=new Dp,zl.Image?((i=new Image).onload=of(Kd,o,i,"TestLoadImage: loaded",!0,r),i.onerror=of(Kd,o,i,"TestLoadImage: error",!1,r),i.onabort=of(Kd,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=of(Kd,o,i,"TestLoadImage: timeout",!1,r),zl.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):jp(2),t.v=0,t.f&&t.f.ra(e),Tv(t),hv(t)}function Tv(t){t.v=0,t.I=-1,t.f&&(0==Wd(t.b).length&&0==t.g.length||(t.b.c.length=0,ff(t.g),t.g.length=0),t.f.qa())}function Sv(t,e,n){var r,i,o,s,a,u=(s=n)instanceof pd?dd(s):new pd(s,void 0);return""!=u.c?(e&&yd(u,e+"."+u.c),gd(u,u.h)):(a=zl.location,r=a.protocol,i=e?e+"."+a.hostname:a.hostname,o=+a.port,s=n,a=new pd(null,void 0),r&&vd(a,r),i&&yd(a,i),o&&gd(a,o),s&&(a.g=s),u=a),t.W&&bf(t.W,function(t,e){bd(u,e,t)}),e=t.A,n=t.na,e&&n&&bd(u,e,n),bd(u,"VER",t.ha),dv(t,u),u}function Cv(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Qd(t.Ka)).F=t.C,e}function Nv(){}function Av(){if(Cf&&!(10<=Number(Mf)))throw Error("Environmental error: no available transport.")}function kv(t,e){ap.call(this),this.a=new av(e),this.l=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!pf(t)&&(this.a.i=t),this.h=e&&e.supportsCrossDomainXhr||!1,this.g=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!pf(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new Dv(this)}function Ov(t){Kp.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function Pv(){zp.call(this),this.status=1}function Dv(t){this.a=t}(du=Qd.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Wp(this.H):Wp(Gp),this.a.onreadystatechange=rf(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Zd(this,t)}t=n||"";var i,o=new cd(this.headers);r&&ud(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=$d,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=zl.FormData&&t instanceof zl.FormData,0<=cf(Jd,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{rv(this),0<this.o&&((this.D=(i=this.a,Cf&&Lf(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=rf(this.xa,this)):this.m=wp(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Zd(this,t)}},du.xa=function(){void 0!==Kl&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},du.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),nv(this))},du.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),nv(this,!0)),Qd.S.G.call(this)},du.za=function(){this.j||(this.A||this.l||this.g?ev(this):this.Ta())},du.Ta=function(){ev(this)},du.X=function(){try{return 2<iv(this)?this.a.status:-1}catch(t){return-1}},du.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},du.Na=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),zd(e)}},du.ua=function(){return this.h},du.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(du=av.prototype).ha=8,du.v=1,du.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Xp(this,this.c,t,void 0),r=this.l;if(this.O&&(r?Ef(r=_f(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=vv(this,n,e),bd(i=dd(this.B),"RID",t),bd(i,"CVER",22),this.A&&bd(i,"X-HTTP-Session-Id",this.A),dv(this,i),this.i&&r&&ov(i,this.i,r),qd(this.b,n),this.Ga&&bd(i,"TYPE","init"),this.da?(bd(i,"$req",e),bd(i,"SID","null"),n.V=!0,Zp(n,i,null)):Zp(n,i,e),this.v=2}}else 3==this.v&&(t?pv(this,t):0==this.g.length||Ud(this.b)||pv(this))},du.Aa=function(){var t;this.j=null,bv(this),this.V&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=qp(rf(this.Sa,this),t))},du.Sa=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,cv(this),bv(this))},du.Ra=function(){null!=this.m&&(this.m=null,cv(this),gv(this),jp(19))},du.Xa=function(t){t?(this.c.info("Successfully pinged google.com"),jp(2)):(this.c.info("Failed to ping google.com"),jp(1))},(du=Nv.prototype).ta=function(){},du.sa=function(){},du.ra=function(){},du.qa=function(){},du.Ha=function(){},Av.prototype.a=function(t,e){return new kv(t,e)},af(kv,ap),(du=kv.prototype).addEventListener=function(t,e,n,r){kv.S.addEventListener.call(this,t,e,n,r)},du.removeEventListener=function(t,e,n,r){kv.S.removeEventListener.call(this,t,e,n,r)},du.Oa=function(){this.a.f=this.f,this.h&&(this.a.C=!0);var t=this.a,e=this.l,n=this.b||void 0;jp(0),t.fa=e,t.W=n||{},t.H=t.T,t.B=Sv(t,null,t.fa),fv(t)},du.close=function(){uv(this.a)},du.Pa=function(t){var e;"string"==typeof t?((e={}).__data__=t,lv(this.a,e)):this.g?((e={}).__data__=cp(t),lv(this.a,e)):lv(this.a,t)},du.G=function(){this.a.f=null,delete this.f,uv(this.a),delete this.a,kv.S.G.call(this)},af(Ov,Kp),af(Pv,zp),af(Dv,Nv),Dv.prototype.ta=function(){this.a.dispatchEvent("a")},Dv.prototype.sa=function(t){this.a.dispatchEvent(new Ov(t))},Dv.prototype.ra=function(t){this.a.dispatchEvent(new Pv)},Dv.prototype.qa=function(){this.a.dispatchEvent("b")},Av.prototype.createWebChannel=Av.prototype.a,kv.prototype.send=kv.prototype.Pa,kv.prototype.open=kv.prototype.Oa,K.NO_ERROR=0,K.TIMEOUT=8,K.HTTP_ERROR=6,Rr.COMPLETE="complete",(Hp.EventType=M).OPEN="a",M.CLOSE="b",M.ERROR="c",M.MESSAGE="d",ap.prototype.listen=ap.prototype.va,Qd.prototype.listenOnce=Qd.prototype.wa,Qd.prototype.getLastError=Qd.prototype.Qa,Qd.prototype.getLastErrorCode=Qd.prototype.ua,Qd.prototype.getStatus=Qd.prototype.X,Qd.prototype.getResponseJson=Qd.prototype.Na,Qd.prototype.getResponseText=Qd.prototype.$,Qd.prototype.send=Qd.prototype.ba;var Rv,xv=K,Lv=Rr,Mv=Hp,Fv=Qd,Uv={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},jv=(go(qv,Rv=Error),qv),Vv=new Rs("@firebase/firestore");function qv(t,e){var n=this;return(n=Rv.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function Bv(){return Vv.logLevel}function Wv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vv.logLevel<=Ns.DEBUG&&(e=n.map(Kv),Vv.debug.apply(Vv,To(["Firestore (8.0.0): "+t],e)))}function Hv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vv.logLevel<=Ns.ERROR&&(e=n.map(Kv),Vv.error.apply(Vv,To(["Firestore (8.0.0): "+t],e)))}function Gv(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];Vv.logLevel<=Ns.WARN&&(e=n.map(Kv),Vv.warn.apply(Vv,To(["Firestore (8.0.0): "+t],e)))}function Kv(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function zv(t){void 0===t&&(t="Unexpected state");t="FIRESTORE (8.0.0) INTERNAL ASSERTION FAILED: "+t;throw Hv(t),new Error(t)}function Qv(t){t||zv()}var Xv=(Yv.t=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Yv);function Yv(){}function Jv(t,e){return t<e?-1:e<t?1:0}function $v(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function Zv(t){return t+"\0"}var ty=(ey.fromBase64String=function(t){return new ey(atob(t))},ey.fromUint8Array=function(t){return new ey(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},ey.prototype.toBase64=function(){return t=this.i,btoa(t);var t},ey.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.i)},ey.prototype.o=function(){return 2*this.i.length},ey.prototype.h=function(t){return Jv(this.i,t.i)},ey.prototype.isEqual=function(t){return this.i===t.i},ey);function ey(t){this.i=t}ty.u=new ty("");var ny=(ry.fromBase64String=function(t){try{return new ry(ty.fromBase64String(t))}catch(t){throw new jv(Uv.INVALID_ARGUMENT,"Failed to construct Bytes from Base64 string: "+t)}},ry.fromUint8Array=function(t){return new ry(ty.fromUint8Array(t))},ry.prototype.toBase64=function(){return this.l.toBase64()},ry.prototype.toUint8Array=function(){return this.l.toUint8Array()},ry.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},ry.prototype.isEqual=function(t){return this.l.isEqual(t.l)},ry);function ry(t){this.l=t}function iy(){if("undefined"==typeof Uint8Array)throw new jv(Uv.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function oy(){if("undefined"==typeof atob)throw new jv(Uv.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function sy(t,e,n,r,i,o){this._=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.T=o}var ay,uy=(go(ly,ay=ny),ly.fromBase64String=function(t){oy();try{return new ly(ty.fromBase64String(t))}catch(t){throw new jv(Uv.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},ly.fromUint8Array=function(t){return iy(),new ly(ty.fromUint8Array(t))},ly.prototype.toBase64=function(){return oy(),ay.prototype.toBase64.call(this)},ly.prototype.toUint8Array=function(){return iy(),ay.prototype.toUint8Array.call(this)},ly.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},ly),cy=(Object.defineProperty(hy.prototype,"I",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),hy.prototype.isEqual=function(t){return t instanceof hy&&t.projectId===this.projectId&&t.database===this.database},hy.prototype.h=function(t){return Jv(this.projectId,t.projectId)||Jv(this.database,t.database)},hy);function hy(t,e){this.projectId=t,this.database=e||"(default)"}function ly(){return null!==ay&&ay.apply(this,arguments)||this}function fy(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function py(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function dy(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var vy,yy,gy=(Oy.prototype.get=function(t){var e=this.m(t),e=this.R[e];if(void 0!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];if(this.A(o,t))return i}},Oy.prototype.has=function(t){return void 0!==this.get(t)},Oy.prototype.set=function(t,e){var n=this.m(t),r=this.R[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.A(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.R[n]=[[t,e]]},Oy.prototype.delete=function(t){var e=this.m(t),n=this.R[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.A(n[r][0],t))return 1===n.length?delete this.R[e]:n.splice(r,1),!0;return!1},Oy.prototype.forEach=function(s){py(this.R,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];s(o,i)}})},Oy.prototype.P=function(){return dy(this.R)},Oy),my=(ky.now=function(){return ky.fromMillis(Date.now())},ky.fromDate=function(t){return ky.fromMillis(t.getTime())},ky.fromMillis=function(t){var e=Math.floor(t/1e3);return new ky(e,1e6*(t-1e3*e))},ky.prototype.toDate=function(){return new Date(this.toMillis())},ky.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},ky.prototype.g=function(t){return this.seconds===t.seconds?Jv(this.nanoseconds,t.nanoseconds):Jv(this.seconds,t.seconds)},ky.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},ky.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},ky.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},ky.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},ky),by=(Ay.V=function(t){return new Ay(t)},Ay.min=function(){return new Ay(new my(0,0))},Ay.prototype.h=function(t){return this.timestamp.g(t.timestamp)},Ay.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},Ay.prototype.p=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},Ay.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},Ay.prototype.v=function(){return this.timestamp},Ay),M=(Object.defineProperty(Ny.prototype,"length",{get:function(){return this.S},enumerable:!1,configurable:!0}),Ny.prototype.isEqual=function(t){return 0===Ny.D(this,t)},Ny.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Ny?t.forEach(function(t){e.push(t)}):e.push(t),this.C(e)},Ny.prototype.limit=function(){return this.offset+this.length},Ny.prototype.N=function(t){return t=void 0===t?1:t,this.C(this.segments,this.offset+t,this.length-t)},Ny.prototype.F=function(){return this.C(this.segments,this.offset,this.length-1)},Ny.prototype.k=function(){return this.segments[this.offset]},Ny.prototype.O=function(){return this.get(this.length-1)},Ny.prototype.get=function(t){return this.segments[this.offset+t]},Ny.prototype.P=function(){return 0===this.length},Ny.prototype.M=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Ny.prototype.$=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Ny.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Ny.prototype.L=function(){return this.segments.slice(this.offset,this.limit())},Ny.D=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Ny),_y=(go(Cy,yy=M),Cy.prototype.C=function(t,e,n){return new Cy(t,e,n)},Cy.prototype.B=function(){return this.L().join("/")},Cy.prototype.toString=function(){return this.B()},Cy.q=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new jv(Uv.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new Cy(n)},Cy.U=function(){return new Cy([])},Cy),wy=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Ey=(go(Sy,vy=M),Sy.prototype.C=function(t,e,n){return new Sy(t,e,n)},Sy.K=function(t){return wy.test(t)},Sy.prototype.B=function(){return this.L().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),Sy.K(t)||(t="`"+t+"`"),t}).join(".")},Sy.prototype.toString=function(){return this.B()},Sy.prototype.W=function(){return 1===this.length&&"__name__"===this.get(0)},Sy.j=function(){return new Sy(["__name__"])},Sy.G=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new jv(Uv.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new jv(Uv.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new jv(Uv.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new jv(Uv.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Sy(e)},Sy.U=function(){return new Sy([])},Sy),Iy=(Ty.H=function(t){return new Ty(_y.q(t))},Ty.J=function(t){return new Ty(_y.q(t).N(5))},Ty.prototype.Y=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},Ty.prototype.isEqual=function(t){return null!==t&&0===_y.D(this.path,t.path)},Ty.prototype.toString=function(){return this.path.toString()},Ty.D=function(t,e){return _y.D(t.path,e.path)},Ty.X=function(t){return t.length%2==0},Ty.Z=function(t){return new Ty(new _y(t.slice()))},Ty);function Ty(t){this.path=t}function Sy(){return null!==vy&&vy.apply(this,arguments)||this}function Cy(){return null!==yy&&yy.apply(this,arguments)||this}function Ny(t,e,n){void 0===e?e=0:e>t.length&&zv(),void 0===n?n=t.length-e:n>t.length-e&&zv(),this.segments=t,this.offset=e,this.S=n}function Ay(t){this.timestamp=t}function ky(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new jv(Uv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new jv(Uv.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new jv(Uv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new jv(Uv.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Oy(t,e){this.m=t,this.A=e,this.R={}}function Py(t){return null==t}function Dy(t){return 0===t&&1/t==-1/0}function Ry(t){return"number"==typeof t&&Number.isInteger(t)&&!Dy(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var xy=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.tt=null};function Ly(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new xy(t,e,n,r,i,o,s)}function My(t){var e=t;return null===e.tt&&(t=e.path.B(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return(t=t).field.B()+t.op.toString()+Lg(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return(t=t).field.B()+t.dir}).join(","),Py(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=d_(e.startAt)),e.endAt&&(t+="|ub:",t+=d_(e.endAt)),e.tt=t),e.tt}function Fy(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,a=0;a<t.filters.length;a++)if(o=t.filters[a],s=e.filters[a],o.op!==s.op||!o.field.isEqual(s.field)||!Pg(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!y_(t.startAt,e.startAt)&&y_(t.endAt,e.endAt)}function Uy(t){return Iy.X(t.path)&&null===t.collectionGroup&&0===t.filters.length}function jy(t){this.count=t}var Vy,qy=(By.prototype.st=function(t){return new By(this.target,this.targetId,this.et,t,this.nt,this.lastLimboFreeSnapshotVersion,this.resumeToken)},By.prototype.it=function(t,e){return new By(this.target,this.targetId,this.et,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},By.prototype.rt=function(t){return new By(this.target,this.targetId,this.et,this.sequenceNumber,this.nt,t,this.resumeToken)},By);function By(t,e,n,r,i,o,s){void 0===i&&(i=by.min()),void 0===o&&(o=by.min()),void 0===s&&(s=ty.u),this.target=t,this.targetId=e,this.et=n,this.sequenceNumber=r,this.nt=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function Wy(t){switch(t){case Uv.OK:return zv(),0;case Uv.CANCELLED:case Uv.UNKNOWN:case Uv.DEADLINE_EXCEEDED:case Uv.RESOURCE_EXHAUSTED:case Uv.INTERNAL:case Uv.UNAVAILABLE:case Uv.UNAUTHENTICATED:return;case Uv.INVALID_ARGUMENT:case Uv.NOT_FOUND:case Uv.ALREADY_EXISTS:case Uv.PERMISSION_DENIED:case Uv.FAILED_PRECONDITION:case Uv.ABORTED:case Uv.OUT_OF_RANGE:case Uv.UNIMPLEMENTED:case Uv.DATA_LOSS:return 1;default:return zv(),0}}function Hy(t){if(void 0===t)return Hv("GRPC error has no .code"),Uv.UNKNOWN;switch(t){case Vy.OK:return Uv.OK;case Vy.CANCELLED:return Uv.CANCELLED;case Vy.UNKNOWN:return Uv.UNKNOWN;case Vy.DEADLINE_EXCEEDED:return Uv.DEADLINE_EXCEEDED;case Vy.RESOURCE_EXHAUSTED:return Uv.RESOURCE_EXHAUSTED;case Vy.INTERNAL:return Uv.INTERNAL;case Vy.UNAVAILABLE:return Uv.UNAVAILABLE;case Vy.UNAUTHENTICATED:return Uv.UNAUTHENTICATED;case Vy.INVALID_ARGUMENT:return Uv.INVALID_ARGUMENT;case Vy.NOT_FOUND:return Uv.NOT_FOUND;case Vy.ALREADY_EXISTS:return Uv.ALREADY_EXISTS;case Vy.PERMISSION_DENIED:return Uv.PERMISSION_DENIED;case Vy.FAILED_PRECONDITION:return Uv.FAILED_PRECONDITION;case Vy.ABORTED:return Uv.ABORTED;case Vy.OUT_OF_RANGE:return Uv.OUT_OF_RANGE;case Vy.UNIMPLEMENTED:return Uv.UNIMPLEMENTED;case Vy.DATA_LOSS:return Uv.DATA_LOSS;default:return zv()}}(K=Vy=Vy||{})[K.OK=0]="OK",K[K.CANCELLED=1]="CANCELLED",K[K.UNKNOWN=2]="UNKNOWN",K[K.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",K[K.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",K[K.NOT_FOUND=5]="NOT_FOUND",K[K.ALREADY_EXISTS=6]="ALREADY_EXISTS",K[K.PERMISSION_DENIED=7]="PERMISSION_DENIED",K[K.UNAUTHENTICATED=16]="UNAUTHENTICATED",K[K.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",K[K.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",K[K.ABORTED=10]="ABORTED",K[K.OUT_OF_RANGE=11]="OUT_OF_RANGE",K[K.UNIMPLEMENTED=12]="UNIMPLEMENTED",K[K.INTERNAL=13]="INTERNAL",K[K.UNAVAILABLE=14]="UNAVAILABLE",K[K.DATA_LOSS=15]="DATA_LOSS";var Gy=(Yy.prototype.ot=function(t,e){return new Yy(this.D,this.root.ot(t,e,this.D).copy(null,null,zy.at,null,null))},Yy.prototype.remove=function(t){return new Yy(this.D,this.root.remove(t,this.D).copy(null,null,zy.at,null,null))},Yy.prototype.get=function(t){for(var e=this.root;!e.P();){var n=this.D(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Yy.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.P();){var r=this.D(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},Yy.prototype.P=function(){return this.root.P()},Object.defineProperty(Yy.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),Yy.prototype.ht=function(){return this.root.ht()},Yy.prototype.ct=function(){return this.root.ct()},Yy.prototype.ut=function(t){return this.root.ut(t)},Yy.prototype.forEach=function(n){this.ut(function(t,e){return n(t,e),!1})},Yy.prototype.toString=function(){var n=[];return this.ut(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},Yy.prototype.lt=function(t){return this.root.lt(t)},Yy.prototype._t=function(){return new Ky(this.root,null,this.D,!1)},Yy.prototype.ft=function(t){return new Ky(this.root,t,this.D,!1)},Yy.prototype.dt=function(){return new Ky(this.root,null,this.D,!0)},Yy.prototype.wt=function(t){return new Ky(this.root,t,this.D,!0)},Yy),Ky=(Xy.prototype.It=function(){var t=this.Tt.pop(),e={key:t.key,value:t.value};if(this.Et)for(t=t.left;!t.P();)this.Tt.push(t),t=t.right;else for(t=t.right;!t.P();)this.Tt.push(t),t=t.left;return e},Xy.prototype.At=function(){return 0<this.Tt.length},Xy.prototype.Rt=function(){if(0===this.Tt.length)return null;var t=this.Tt[this.Tt.length-1];return{key:t.key,value:t.value}},Xy),zy=(Qy.prototype.copy=function(t,e,n,r,i){return new Qy(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Qy.prototype.P=function(){return!1},Qy.prototype.ut=function(t){return this.left.ut(t)||t(this.key,this.value)||this.right.ut(t)},Qy.prototype.lt=function(t){return this.right.lt(t)||t(this.key,this.value)||this.left.lt(t)},Qy.prototype.min=function(){return this.left.P()?this:this.left.min()},Qy.prototype.ht=function(){return this.min().key},Qy.prototype.ct=function(){return this.right.P()?this.key:this.right.ct()},Qy.prototype.ot=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.ot(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.ot(t,e,n))).Pt()},Qy.prototype.gt=function(){if(this.left.P())return Qy.EMPTY;var t=this;return t.left.Vt()||t.left.left.Vt()||(t=t.yt()),(t=t.copy(null,null,null,t.left.gt(),null)).Pt()},Qy.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.P()||r.left.Vt()||r.left.left.Vt()||(r=r.yt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.Vt()&&(r=r.bt()),r.right.P()||r.right.Vt()||r.right.left.Vt()||(r=r.vt()),0===e(t,r.key)){if(r.right.P())return Qy.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.gt())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Pt()},Qy.prototype.Vt=function(){return this.color},Qy.prototype.Pt=function(){var t=this;return t.right.Vt()&&!t.left.Vt()&&(t=t.St()),t.left.Vt()&&t.left.left.Vt()&&(t=t.bt()),t.left.Vt()&&t.right.Vt()&&(t=t.Dt()),t},Qy.prototype.yt=function(){var t=this.Dt();return t.right.left.Vt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.bt())).St()).Dt()),t},Qy.prototype.vt=function(){var t=this.Dt();return t.left.left.Vt()&&(t=(t=t.bt()).Dt()),t},Qy.prototype.St=function(){var t=this.copy(null,null,Qy.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Qy.prototype.bt=function(){var t=this.copy(null,null,Qy.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Qy.prototype.Dt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Qy.prototype.Ct=function(){var t=this.Nt();return Math.pow(2,t)<=this.size+1},Qy.prototype.Nt=function(){if(this.Vt()&&this.left.Vt())throw zv();if(this.right.Vt())throw zv();var t=this.left.Nt();if(t!==this.right.Nt())throw zv();return t+(this.Vt()?0:1)},Qy);function Qy(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Qy.RED,this.left=null!=r?r:Qy.EMPTY,this.right=null!=i?i:Qy.EMPTY,this.size=this.left.size+1+this.right.size}function Xy(t,e,n,r){this.Et=r,this.Tt=[];for(var i=1;!t.P();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Et?t.left:t.right;else{if(0===i){this.Tt.push(t);break}this.Tt.push(t),t=this.Et?t.right:t.left}}function Yy(t,e){this.D=t,this.root=e||zy.EMPTY}function Jy(){this.size=0}zy.EMPTY=null,zy.RED=!0,zy.at=!1,zy.EMPTY=(Object.defineProperty(Jy.prototype,"key",{get:function(){throw zv()},enumerable:!1,configurable:!0}),Object.defineProperty(Jy.prototype,"value",{get:function(){throw zv()},enumerable:!1,configurable:!0}),Object.defineProperty(Jy.prototype,"color",{get:function(){throw zv()},enumerable:!1,configurable:!0}),Object.defineProperty(Jy.prototype,"left",{get:function(){throw zv()},enumerable:!1,configurable:!0}),Object.defineProperty(Jy.prototype,"right",{get:function(){throw zv()},enumerable:!1,configurable:!0}),Jy.prototype.copy=function(t,e,n,r,i){return this},Jy.prototype.ot=function(t,e,n){return new zy(t,e)},Jy.prototype.remove=function(t,e){return this},Jy.prototype.P=function(){return!0},Jy.prototype.ut=function(t){return!1},Jy.prototype.lt=function(t){return!1},Jy.prototype.ht=function(){return null},Jy.prototype.ct=function(){return null},Jy.prototype.Vt=function(){return!1},Jy.prototype.Ct=function(){return!0},Jy.prototype.Nt=function(){return 0},new Jy);var $y=(ng.prototype.has=function(t){return null!==this.data.get(t)},ng.prototype.first=function(){return this.data.ht()},ng.prototype.last=function(){return this.data.ct()},Object.defineProperty(ng.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),ng.prototype.indexOf=function(t){return this.data.indexOf(t)},ng.prototype.forEach=function(n){this.data.ut(function(t,e){return n(t),!1})},ng.prototype.xt=function(t,e){for(var n=this.data.ft(t[0]);n.At();){var r=n.It();if(0<=this.D(r.key,t[1]))return;e(r.key)}},ng.prototype.Ft=function(t,e){for(var n=void 0!==e?this.data.ft(e):this.data._t();n.At();)if(!t(n.It().key))return},ng.prototype.kt=function(t){t=this.data.ft(t);return t.At()?t.It().key:null},ng.prototype._t=function(){return new Zy(this.data._t())},ng.prototype.ft=function(t){return new Zy(this.data.ft(t))},ng.prototype.add=function(t){return this.copy(this.data.remove(t).ot(t,!0))},ng.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},ng.prototype.P=function(){return this.data.P()},ng.prototype.Ot=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},ng.prototype.isEqual=function(t){if(!(t instanceof ng))return!1;if(this.size!==t.size)return!1;for(var e=this.data._t(),n=t.data._t();e.At();){var r=e.It().key,i=n.It().key;if(0!==this.D(r,i))return!1}return!0},ng.prototype.L=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},ng.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},ng.prototype.copy=function(t){var e=new ng(this.D);return e.data=t,e},ng),Zy=(eg.prototype.It=function(){return this.Mt.It().key},eg.prototype.At=function(){return this.Mt.At()},eg),tg=new Gy(Iy.D);function eg(t){this.Mt=t}function ng(t){this.D=t,this.data=new Gy(this.D)}var rg=new Gy(Iy.D);var ig=new Gy(Iy.D),og=new $y(Iy.D);function sg(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=og,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var ag=new $y(Jv);var ug=(Tg.Bt=function(t){return new Tg(t.D)},Tg.prototype.has=function(t){return null!=this.$t.get(t)},Tg.prototype.get=function(t){return this.$t.get(t)},Tg.prototype.first=function(){return this.Lt.ht()},Tg.prototype.last=function(){return this.Lt.ct()},Tg.prototype.P=function(){return this.Lt.P()},Tg.prototype.indexOf=function(t){t=this.$t.get(t);return t?this.Lt.indexOf(t):-1},Object.defineProperty(Tg.prototype,"size",{get:function(){return this.Lt.size},enumerable:!1,configurable:!0}),Tg.prototype.forEach=function(n){this.Lt.ut(function(t,e){return n(t),!1})},Tg.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.$t.ot(t.key,t),e.Lt.ot(t,null))},Tg.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.$t.remove(t),this.Lt.remove(e)):this},Tg.prototype.isEqual=function(t){if(!(t instanceof Tg))return!1;if(this.size!==t.size)return!1;for(var e=this.Lt._t(),n=t.Lt._t();e.At();){var r=e.It().key,i=n.It().key;if(!r.isEqual(i))return!1}return!0},Tg.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},Tg.prototype.copy=function(t,e){var n=new Tg;return n.D=this.D,n.$t=t,n.Lt=e,n},Tg),cg=(Ig.prototype.track=function(t){var e=t.doc.key,n=this.qt.get(e);!n||0!==t.type&&3===n.type?this.qt=this.qt.ot(e,t):3===t.type&&1!==n.type?this.qt=this.qt.ot(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.qt=this.qt.ot(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.qt=this.qt.remove(e):1===t.type&&2===n.type?this.qt=this.qt.ot(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.qt=this.qt.ot(e,{type:2,doc:t.doc}):zv()},Ig.prototype.Ut=function(){var n=[];return this.qt.ut(function(t,e){n.push(e)}),n},Ig),hg=(Eg.Gt=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new Eg(t,e,ug.Bt(e),i,n,r,!0,!1)},Object.defineProperty(Eg.prototype,"hasPendingWrites",{get:function(){return!this.Qt.P()},enumerable:!1,configurable:!0}),Eg.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Wt===t.Wt&&this.Qt.isEqual(t.Qt)&&Fb(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.Kt.isEqual(t.Kt)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},Eg),lg=(wg.Xt=function(t,e){var n=new Map;return n.set(t,fg.Zt(t,e)),new wg(by.min(),n,ag,tg,sg())},wg),fg=(_g.Zt=function(t,e){return new _g(ty.u,e,sg(),sg(),sg())},_g),pg=function(t,e,n,r){this.ie=t,this.removedTargetIds=e,this.key=n,this.re=r},dg=function(t,e){this.targetId=t,this.oe=e},vg=function(t,e,n,r){void 0===n&&(n=ty.u),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},yg=(Object.defineProperty(bg.prototype,"te",{get:function(){return this.ue},enumerable:!1,configurable:!0}),Object.defineProperty(bg.prototype,"resumeToken",{get:function(){return this.ce},enumerable:!1,configurable:!0}),Object.defineProperty(bg.prototype,"_e",{get:function(){return 0!==this.ae},enumerable:!1,configurable:!0}),Object.defineProperty(bg.prototype,"fe",{get:function(){return this.le},enumerable:!1,configurable:!0}),bg.prototype.de=function(t){0<t.o()&&(this.le=!0,this.ce=t)},bg.prototype.we=function(){var n=sg(),r=sg(),i=sg();return this.he.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:zv()}}),new fg(this.ce,this.ue,n,r,i)},bg.prototype.Ee=function(){this.le=!1,this.he=Cg()},bg.prototype.Te=function(t,e){this.le=!0,this.he=this.he.ot(t,e)},bg.prototype.Ie=function(t){this.le=!0,this.he=this.he.remove(t)},bg.prototype.me=function(){this.ae+=1},bg.prototype.Ae=function(){--this.ae},bg.prototype.Re=function(){this.le=!0,this.ue=!0},bg),gg=(mg.prototype.be=function(t){for(var e=0,n=t.ie;e<n.length;e++){var r=n[e];t.re instanceof mb?this.ve(r,t.re):t.re instanceof bb&&this.Se(r,t.key,t.re)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Se(s,t.key,t.re)}},mg.prototype.De=function(n){var r=this;this.Ce(n,function(t){var e=r.Ne(t);switch(n.state){case 0:r.xe(t)&&e.de(n.resumeToken);break;case 1:e.Ae(),e._e||e.Ee(),e.de(n.resumeToken);break;case 2:e.Ae(),e._e||r.removeTarget(t);break;case 3:r.xe(t)&&(e.Re(),e.de(n.resumeToken));break;case 4:r.xe(t)&&(r.Fe(t),e.de(n.resumeToken));break;default:zv()}})},mg.prototype.Ce=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.ge.forEach(function(t,e){r.xe(e)&&n(e)})},mg.prototype.ke=function(t){var e=t.targetId,n=t.oe.count,t=this.Oe(e);t&&(Uy(t=t.target)?0===n?(t=new Iy(t.path),this.Se(e,t,new bb(t,by.min()))):Qv(1===n):this.Me(e)!==n&&(this.Fe(e),this.pe=this.pe.add(e)))},mg.prototype.$e=function(r){var i=this,o=new Map;this.ge.forEach(function(t,e){var n=i.Oe(e);n&&(t.te&&Uy(n.target)&&(n=new Iy(n.target.path),null!==i.Ve.get(n)||i.Le(e,n)||i.Se(e,n,new bb(n,r))),t.fe&&(o.set(e,t.we()),t.Ee()))});var s=sg();this.ye.forEach(function(t,e){var n=!0;e.Ft(function(t){t=i.Oe(t);return!t||2===t.et||(n=!1)}),n&&(s=s.add(t))});var t=new lg(r,o,this.pe,this.Ve,s);return this.Ve=tg,this.ye=Sg(),this.pe=new $y(Jv),t},mg.prototype.ve=function(t,e){var n;this.xe(t)&&(n=this.Le(t,e.key)?2:0,this.Ne(t).Te(e.key,n),this.Ve=this.Ve.ot(e.key,e),this.ye=this.ye.ot(e.key,this.Be(e.key).add(t)))},mg.prototype.Se=function(t,e,n){var r;this.xe(t)&&(r=this.Ne(t),this.Le(t,e)?r.Te(e,1):r.Ie(e),this.ye=this.ye.ot(e,this.Be(e).delete(t)),n&&(this.Ve=this.Ve.ot(e,n)))},mg.prototype.removeTarget=function(t){this.ge.delete(t)},mg.prototype.Me=function(t){var e=this.Ne(t).we();return this.Pe.qe(t).size+e.ee.size-e.se.size},mg.prototype.me=function(t){this.Ne(t).me()},mg.prototype.Ne=function(t){var e=this.ge.get(t);return e||(e=new yg,this.ge.set(t,e)),e},mg.prototype.Be=function(t){var e=this.ye.get(t);return e||(e=new $y(Jv),this.ye=this.ye.ot(t,e)),e},mg.prototype.xe=function(t){var e=null!==this.Oe(t);return e||Wv("WatchChangeAggregator","Detected inactive target",t),e},mg.prototype.Oe=function(t){var e=this.ge.get(t);return e&&e._e?null:this.Pe.Ue(t)},mg.prototype.Fe=function(e){var n=this;this.ge.set(e,new yg),this.Pe.qe(e).forEach(function(t){n.Se(e,t,null)})},mg.prototype.Le=function(t,e){return this.Pe.qe(t).has(e)},mg);function mg(t){this.Pe=t,this.ge=new Map,this.Ve=tg,this.ye=Sg(),this.pe=new $y(Jv)}function bg(){this.ae=0,this.he=Cg(),this.ce=ty.u,this.ue=!1,this.le=!0}function _g(t,e,n,r,i){this.resumeToken=t,this.te=e,this.ee=n,this.ne=r,this.se=i}function wg(t,e,n,r,i){this.nt=t,this.zt=e,this.Ht=n,this.Jt=r,this.Yt=i}function Eg(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.Kt=n,this.docChanges=r,this.Qt=i,this.fromCache=o,this.Wt=s,this.jt=a}function Ig(){this.qt=new Gy(Iy.D)}function Tg(n){this.D=n?function(t,e){return n(t,e)||Iy.D(t.key,e.key)}:function(t,e){return Iy.D(t.key,e.key)},this.$t=rg,this.Lt=new Gy(this.D)}function Sg(){return new Gy(Iy.D)}function Cg(){return new Gy(Iy.D)}function Ng(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ag(t){t=Mg(t.mapValue.fields.__local_write_time__.timestampValue);return new my(t.seconds,t.nanos)}var kg=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Og(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Ng(t)?4:10:zv()}function Pg(r,i){var t,e=Og(r);if(e!==Og(i))return!1;switch(e){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return Ag(r).isEqual(Ag(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=Mg(r.timestampValue),t=Mg(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return t=i,Ug(r.bytesValue).isEqual(Ug(t.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,Fg((t=r).geoPointValue.latitude)===Fg(e.geoPointValue.latitude)&&Fg(t.geoPointValue.longitude)===Fg(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Fg(t.integerValue)===Fg(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){t=Fg(t.doubleValue),e=Fg(e.doubleValue);return t===e?Dy(t)===Dy(e):isNaN(t)&&isNaN(e)}return!1}(r,i);case 9:return $v(r.arrayValue.values||[],i.arrayValue.values||[],Pg);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(fy(e)!==fy(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!Pg(e[t],n[t])))return!1;return!0}();default:return zv()}}function Dg(t,e){return void 0!==(t.values||[]).find(function(t){return Pg(t,e)})}function Rg(t,e){var n,r,i=Og(t),o=Og(e);if(i!==o)return Jv(i,o);switch(i){case 0:return 0;case 1:return Jv(t.booleanValue,e.booleanValue);case 2:return n=e,r=Fg(t.integerValue||t.doubleValue),n=Fg(n.integerValue||n.doubleValue),r<n?-1:n<r?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1;case 3:return xg(t.timestampValue,e.timestampValue);case 4:return xg(Ag(t),Ag(e));case 5:return Jv(t.stringValue,e.stringValue);case 6:return function(t,e){t=Ug(t),e=Ug(e);return t.h(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Jv(n[i],r[i]);if(0!==o)return o}return Jv(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return i=t.geoPointValue,r=e.geoPointValue,0!==(n=Jv(Fg(i.latitude),Fg(r.latitude)))?n:Jv(Fg(i.longitude),Fg(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Rg(n[i],r[i]);if(o)return o}return Jv(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Jv(r[s],o[s]);if(0!==a)return a;a=Rg(n[r[s]],i[o[s]]);if(0!==a)return a}return Jv(r.length,o.length)}(t.mapValue,e.mapValue);default:throw zv()}}function xg(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Jv(t,e);var n=Mg(t),t=Mg(e),e=Jv(n.seconds,t.seconds);return 0!==e?e:Jv(n.nanos,t.nanos)}function Lg(t){return function s(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var t=Mg(t);return"time("+t.seconds+","+t.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Ug(t.bytesValue).toBase64():"referenceValue"in t?(e=t.referenceValue,Iy.J(e).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=s(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(t.mapValue):zv();var e}(t)}function Mg(t){if(Qv(!!t),"string"!=typeof t)return{seconds:Fg(t.seconds),nanos:Fg(t.nanos)};var e=0,n=kg.exec(t);Qv(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n));t=new Date(t);return{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function Fg(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Ug(t){return"string"==typeof t?ty.fromBase64String(t):ty.fromUint8Array(t)}function jg(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.B()}}function Vg(t){return t&&"integerValue"in t}function qg(t){return!!t&&"arrayValue"in t}function Bg(t){return t&&"nullValue"in t}function Wg(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Hg(t){return t&&"mapValue"in t}var Gg={asc:"ASCENDING",desc:"DESCENDING"},Kg={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},zg=function(t,e){this._=t,this.Ke=e};function Qg(t){return{integerValue:""+t}}function Xg(t,e){if(t.Ke){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Dy(e)?"-0":e}}function Yg(t,e){return Ry(e)?Qg(e):Xg(t,e)}function Jg(t,e){return t.Ke?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function $g(t,e){return t.Ke?e.toBase64():e.toUint8Array()}function Zg(t){return Qv(!!t),by.V((t=Mg(t),new my(t.seconds,t.nanos)))}function tm(t,e){return new _y(["projects",t.projectId,"databases",t.database]).child("documents").child(e).B()}function em(t){t=_y.q(t);return Qv(bm(t)),t}function nm(t,e){return tm(t._,e.path)}function rm(t,e){e=em(e);return Qv(e.get(1)===t._.projectId),Qv(!e.get(3)&&!t._.database||e.get(3)===t._.database),new Iy(am(e))}function im(t,e){return tm(t._,e)}function om(t){t=em(t);return 4===t.length?_y.U():am(t)}function sm(t){return new _y(["projects",t._.projectId,"databases",t._.database]).B()}function am(t){return Qv(4<t.length&&"documents"===t.get(4)),t.N(5)}function um(t,e,n){return{name:nm(t,e),fields:n.proto.mapValue.fields}}function cm(t,e){var n,r,i;if(e instanceof Ym)n={update:um(t,e.key,e.value)};else if(e instanceof ab)n={delete:nm(t,e.key)};else if(e instanceof Jm)n={update:um(t,e.key,e.data),updateMask:(i=e.Qe,r=[],i.fields.forEach(function(t){return r.push(t.B())}),{fieldPaths:r})};else if(e instanceof nb)n={transform:{document:nm(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof Im)return{fieldPath:t.field.B(),setToServerValue:"REQUEST_TIME"};if(e instanceof Tm)return{fieldPath:t.field.B(),appendMissingElements:{values:e.elements}};if(e instanceof km)return{fieldPath:t.field.B(),removeAllFromArray:{values:e.elements}};if(e instanceof Rm)return{fieldPath:t.field.B(),increment:e.We};throw zv()})}};else{if(!(e instanceof ub))return zv();n={verify:nm(t,e.key)}}return e.Ge.je||(n.currentDocument=void 0!==(i=e.Ge).updateTime?{updateTime:(e=t,t=i.updateTime,Jg(e,t.v()))}:void 0!==i.exists?{exists:i.exists}:zv()),n}function hm(e,t){var n=t.currentDocument?void 0!==(o=t.currentDocument).updateTime?qm.updateTime(Zg(o.updateTime)):void 0!==o.exists?qm.exists(o.exists):qm.ze():qm.ze();if(t.update){t.update.name;var r=rm(e,t.update.name),i=new cb({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=(o=t.updateMask.fieldPaths||[],new Fm(o.map(function(t){return Ey.G(t)})));return new Jm(r,i,o,n)}return new Ym(r,i,n)}if(t.delete){var s=rm(e,t.delete);return new ab(s,n)}if(t.transform){i=rm(e,t.transform.document),s=t.transform.fieldTransforms.map(function(t){return function(t,e){var n,r=null;"setToServerValue"in e?(Qv("REQUEST_TIME"===e.setToServerValue),r=new Im):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],r=new Tm(n)):"removeAllFromArray"in e?(n=e.removeAllFromArray.values||[],r=new km(n)):"increment"in e?r=new Rm(t,e.increment):zv();e=Ey.G(e.fieldPath);return new Um(e,r)}(e,t)});return Qv(!0===n.exists),new nb(i,s)}if(t.verify){t=rm(e,t.verify);return new ub(t,n)}return zv()}function lm(t,e){return{documents:[im(t,e.path)]}}function fm(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=im(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=im(t,r.F()),n.structuredQuery.from=[{collectionId:r.O()}]);r=function(t){if(0!==t.length){t=t.map(function(t){if("=="===t.op){if(Wg(t.value))return{unaryFilter:{field:ym(t.field),op:"IS_NAN"}};if(Bg(t.value))return{unaryFilter:{field:ym(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Wg(t.value))return{unaryFilter:{field:ym(t.field),op:"IS_NOT_NAN"}};if(Bg(t.value))return{unaryFilter:{field:ym(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ym(t.field),op:(e=t.op,Kg[e]),value:t.value}};var e});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(e.filters);r&&(n.structuredQuery.where=r);r=function(t){if(0!==t.length)return t.map(function(t){return{field:ym((t=t).field),direction:(t=t.dir,Gg[t])}})}(e.orderBy);r&&(n.structuredQuery.orderBy=r);r=e.limit,r=t.Ke||Py(r)?r:{value:r};return null!==r&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=dm(e.startAt)),e.endAt&&(n.structuredQuery.endAt=dm(e.endAt)),n}function pm(t){var e=om(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;0<r&&(Qv(1===r),(s=n.from[0]).allDescendants?i=s.collectionId:e=e.child(s.collectionId));var o=[];n.where&&(o=function e(t){return t?void 0!==t.unaryFilter?[mm(t)]:void 0!==t.fieldFilter?[(n=t,Wb.create(gm(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return zv()}}(),n.fieldFilter.value))]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(t,e){return t.concat(e)}):zv():[];var n}(n.where));t=[];n.orderBy&&(t=n.orderBy.map(function(t){return new g_(gm((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}));r=null;n.limit&&(r=Py(a="object"==typeof(a=n.limit)?a.value:a)?null:a);var s=null;n.startAt&&(s=vm(n.startAt));var a=null;return n.endAt&&(a=vm(n.endAt)),Rb(Sb(e,i,t,o,r,"F",s,a))}function dm(t){return{before:t.before,values:t.position}}function vm(t){var e=!!t.before,t=t.values||[];return new c_(t,e)}function ym(t){return{fieldPath:t.B()}}function gm(t){return Ey.G(t.fieldPath)}function mm(t){switch(t.unaryFilter.op){case"IS_NAN":var e=gm(t.unaryFilter.field);return Wb.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=gm(t.unaryFilter.field);return Wb.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":n=gm(t.unaryFilter.field);return Wb.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":t=gm(t.unaryFilter.field);return Wb.create(t,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return zv()}}function bm(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}Rr=function(){this.He=void 0};function _m(t,e){return t instanceof Rm?Vg(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var wm,Em,Im=(go(Cm,Em=Rr),Cm),Tm=(go(Sm,wm=Rr),Sm);function Sm(t){var e=this;return(e=wm.call(this)||this).elements=t,e}function Cm(){return null!==Em&&Em.apply(this,arguments)||this}function Nm(t,e){for(var n=Mm(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return Pg(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var Am,km=(go(Om,Am=Rr),Om);function Om(t){var e=this;return(e=Am.call(this)||this).elements=t,e}function Pm(t,e){for(var n=Mm(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!Pg(t,e)})}(i[r]);return{arrayValue:{values:n}}}var Dm,Rm=(go(xm,Dm=Rr),xm);function xm(t,e){var n=this;return(n=Dm.call(this)||this).serializer=t,n.We=e,n}function Lm(t){return Fg(t.integerValue||t.doubleValue)}function Mm(t){return qg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Fm=(jm.prototype.Je=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].M(t))return!0;return!1},jm.prototype.isEqual=function(t){return $v(this.fields,t.fields,function(t,e){return t.isEqual(e)})},jm),Um=function(t,e){this.field=t,this.transform=e};function jm(t){(this.fields=t).sort(Ey.D)}function Vm(t,e){this.version=t,this.transformResults=e}var qm=(Bm.ze=function(){return new Bm},Bm.exists=function(t){return new Bm(void 0,t)},Bm.updateTime=function(t){return new Bm(t)},Object.defineProperty(Bm.prototype,"je",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),Bm.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},Bm);function Bm(t,e){this.updateTime=t,this.exists=e}function Wm(t,e){return void 0!==t.updateTime?e instanceof mb&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof mb}M=function(){};function Hm(t,e,n){return t instanceof Ym?new mb(t.key,n.version,t.value,{hasCommittedMutations:!0}):t instanceof Jm?function(t,e,n){if(!Wm(t.Ge,e))return new _b(t.key,n.version);e=tb(t,e);return new mb(t.key,n.version,e,{hasCommittedMutations:!0})}(t,e,n):t instanceof nb?function(t,e,n){if(Qv(null!=n.transformResults),!Wm(t.Ge,e))return new _b(t.key,n.version);var r=e,e=function(t,e,n){var r=[];Qv(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof mb&&(a=e.field(o.field)),r.push((o=s,s=a,a=n[i],o instanceof Tm?Nm(o,s):o instanceof km?Pm(o,s):a))}return r}(t.fieldTransforms,e,n.transformResults),n=n.version,e=ib(t,r.data(),e);return new mb(t.key,n,e,{hasCommittedMutations:!0})}(t,e,n):new bb(t.key,n.version,{hasCommittedMutations:!0})}function Gm(t,e,n,r){return t instanceof Ym?function(t,e){if(!Wm(t.Ge,e))return e;e=zm(e);return new mb(t.key,e,t.value,{Ye:!0})}(t,e):t instanceof Jm?function(t,e){if(!Wm(t.Ge,e))return e;var n=zm(e),e=tb(t,e);return new mb(t.key,n,e,{Ye:!0})}(t,e):t instanceof nb?function(t,e,n,r){if(!Wm(t.Ge,e))return e;var i=e,r=function(t,e,n,r){for(var i,o=[],s=0,a=t;s<a.length;s++){var u=a[s],c=u.transform,h=null;n instanceof mb&&(h=n.field(u.field)),null===h&&r instanceof mb&&(h=r.field(u.field)),o.push((i=h,u=e,h=void 0,(c=c)instanceof Im?(h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:u.seconds,nanos:u.nanoseconds}}}},i&&(h.fields.__previous_value__=i),{mapValue:h}):c instanceof Tm?Nm(c,i):c instanceof km?Pm(c,i):(c=_m(h=c,i),i=Lm(c)+Lm(h.We),Vg(c)&&Vg(h.We)?Qg(i):Xg(h.serializer,i))))}return o}(t.fieldTransforms,n,e,r),r=ib(t,i.data(),r);return new mb(t.key,i.version,r,{Ye:!0})}(t,e,r,n):(e=e,Wm((t=t).Ge,e)?new bb(t.key,by.min()):e)}function Km(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.Ge.isEqual(e.Ge)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.Qe.isEqual(e.Qe):2!==t.type||$v(t.fieldTransforms,t.fieldTransforms,function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof Tm&&e instanceof Tm||t instanceof km&&e instanceof km?$v(t.elements,e.elements,Pg):t instanceof Rm&&e instanceof Rm?Pg(t.We,e.We):t instanceof Im&&e instanceof Im)}))}function zm(t){return t instanceof mb?t.version:by.min()}var Qm,Xm,Ym=(go(Zm,Xm=M),Zm),Jm=(go($m,Qm=M),$m);function $m(t,e,n,r){var i=this;return(i=Qm.call(this)||this).key=t,i.data=e,i.Qe=n,i.Ge=r,i.type=1,i}function Zm(t,e,n){var r=this;return(r=Xm.call(this)||this).key=t,r.value=e,r.Ge=n,r.type=0,r}function tb(t,e){return n=t,e=e instanceof mb?e.data():cb.empty(),r=new hb(e),n.Qe.fields.forEach(function(t){var e;t.P()||(null!==(e=n.data.field(t))?r.set(t,e):r.delete(t))}),r.Xe();var n,r}var eb,nb=(go(rb,eb=M),rb);function rb(t,e){var n=this;return(n=eb.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.Ge=qm.exists(!0),n}function ib(t,e,n){for(var r=new hb(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.Xe()}var ob,sb,ab=(go(db,sb=M),db),ub=(go(pb,ob=M),pb),cb=(fb.empty=function(){return new fb({mapValue:{}})},fb.prototype.field=function(t){if(t.P())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Hg(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.O()])||null},fb.prototype.isEqual=function(t){return Pg(this.proto,t.proto)},fb),hb=(lb.prototype.set=function(t,e){return this.en(t,e),this},lb.prototype.delete=function(t){return this.en(t,null),this},lb.prototype.en=function(t,e){for(var n=this.tn,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===Og(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.O(),e)},lb.prototype.Xe=function(){var t=this.nn(Ey.U(),this.tn);return null!=t?new cb(t):this.Ze},lb.prototype.nn=function(r,t){var i=this,o=!1,e=this.Ze.field(r),s=Hg(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.nn(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},lb);function lb(t){void 0===t&&(t=cb.empty()),this.Ze=t,this.tn=new Map}function fb(t){this.proto=t}function pb(t,e){var n=this;return(n=ob.call(this)||this).key=t,n.Ge=e,n.type=4,n}function db(t,e){var n=this;return(n=sb.call(this)||this).key=t,n.Ge=e,n.type=3,n}var vb,yb,gb,K=function(t,e){this.key=t,this.version=e},mb=(go(Tb,gb=K),Tb.prototype.field=function(t){return this.sn.field(t)},Tb.prototype.data=function(){return this.sn},Tb.prototype.rn=function(){return this.sn.proto},Tb.prototype.isEqual=function(t){return t instanceof Tb&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.Ye===t.Ye&&this.hasCommittedMutations===t.hasCommittedMutations&&this.sn.isEqual(t.sn)},Tb.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.sn.toString()+", {hasLocalMutations: "+this.Ye+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(Tb.prototype,"hasPendingWrites",{get:function(){return this.Ye||this.hasCommittedMutations},enumerable:!1,configurable:!0}),Tb),bb=(go(Ib,yb=K),Ib.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(Ib.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),Ib.prototype.isEqual=function(t){return t instanceof Ib&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Ib),_b=(go(Eb,vb=K),Eb.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(Eb.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),Eb.prototype.isEqual=function(t){return t instanceof Eb&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},Eb),wb=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.on=n,this.filters=r,this.limit=i,this.an=o,this.startAt=s,this.endAt=a,this.hn=null,this.cn=null,this.startAt,this.endAt};function Eb(){return null!==vb&&vb.apply(this,arguments)||this}function Ib(t,e,n){var r=this;return(r=yb.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function Tb(t,e,n,r){var i=this;return(i=gb.call(this,t,e)||this).sn=n,i.Ye=!!r.Ye,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function Sb(t,e,n,r,i,o,s,a){return new wb(t,e,n,r,i,o,s,a)}function Cb(t){return new wb(t)}function Nb(t){return!Py(t.limit)&&"F"===t.an}function Ab(t){return!Py(t.limit)&&"L"===t.an}function kb(t){return 0<t.on.length?t.on[0].field:null}function Ob(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.un())return r.field}return null}function Pb(t){return null!==t.collectionGroup}function Db(t){var e=t;if(null===e.hn){e.hn=[];var n=Ob(e),t=kb(e);if(null!==n&&null===t)n.W()||e.hn.push(new g_(n)),e.hn.push(new g_(Ey.j(),"asc"));else{for(var r=!1,i=0,o=e.on;i<o.length;i++){var s=o[i];e.hn.push(s),s.field.W()&&(r=!0)}r||(n=0<e.on.length?e.on[e.on.length-1].dir:"asc",e.hn.push(new g_(Ey.j(),n)))}}return e.hn}function Rb(t){var e=t;if(!e.cn)if("F"===e.an)e.cn=Ly(e.path,e.collectionGroup,Db(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Db(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new g_(o.field,s))}var a=e.endAt?new c_(e.endAt.position,!e.endAt.before):null,t=e.startAt?new c_(e.startAt.position,!e.startAt.before):null;e.cn=Ly(e.path,e.collectionGroup,n,e.filters,e.limit,a,t)}return e.cn}function xb(t,e,n){return new wb(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Lb(t,e){return new wb(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,e,t.endAt)}function Mb(t,e){return new wb(t.path,t.collectionGroup,t.on.slice(),t.filters.slice(),t.limit,t.an,t.startAt,e)}function Fb(t,e){return Fy(Rb(t),Rb(e))&&t.an===e.an}function Ub(t){return My(Rb(t))+"|lt:"+t.an}function jb(t){return"Query(target="+(e=Rb(t),n=e.path.B(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(t=t).field.B()+" "+t.op+" "+Lg(t.value)}).join(", ")+"]"),Py(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(t=t).field.B()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+d_(e.startAt)),e.endAt&&(n+=", endAt: "+d_(e.endAt)),"Target("+n+")")+"; limitType="+t.an+")";var e,n}function Vb(i,t){return e=i,n=t.key.path,(null!==e.collectionGroup?t.key.Y(e.collectionGroup)&&e.path.M(n):Iy.X(e.path)?e.path.isEqual(n):e.path.$(n))&&function(t){for(var e=0,n=i.on;e<n.length;e++){var r=n[e];if(!r.field.W()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||v_(t.startAt,Db(t),n))&&(!t.endAt||!v_(t.endAt,Db(t),n)));var e,n}function qb(a){return function(t,e){for(var n=!1,r=0,i=Db(a);r<i.length;r++){var o=i[r],s=function(t,r,e){e=t.field.W()?Iy.D(r.key,e.key):function(t,e){var n=r.field(t),t=e.field(t);return null!==n&&null!==t?Rg(n,t):zv()}(t.field,e);switch(t.dir){case"asc":return e;case"desc":return-1*e;default:return zv()}}(o,t,e);if(0!==s)return s;n=n||o.field.W()}return 0}}var Bb,Wb=(go(Hb,Bb=function(){}),Hb.create=function(t,e,n){return t.W()?"in"===e||"not-in"===e?this.ln(t,e,n):new Qb(t,e,n):"array-contains"===e?new o_(t,n):"in"===e?new s_(t,n):"not-in"===e?new a_(t,n):"array-contains-any"===e?new u_(t,n):new Hb(t,e,n)},Hb.ln=function(t,e,n){return new("in"===e?Xb:Yb)(t,n)},Hb.prototype.matches=function(t){t=t.field(this.field);return"!="===this.op?null!==t&&this._n(Rg(t,this.value)):null!==t&&Og(this.value)===Og(t)&&this._n(Rg(t,this.value))},Hb.prototype._n=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return zv()}},Hb.prototype.un=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},Hb);function Hb(t,e,n){var r=this;return(r=Bb.call(this)||this).field=t,r.op=e,r.value=n,r}var Gb,Kb,zb,Qb=(go(Zb,zb=Wb),Zb.prototype.matches=function(t){t=Iy.D(t.key,this.key);return this._n(t)},Zb),Xb=(go($b,Kb=Wb),$b.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},$b),Yb=(go(Jb,Gb=Wb),Jb.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},Jb);function Jb(t,e){var n=this;return(n=Gb.call(this,t,"not-in",e)||this).keys=t_(0,e),n}function $b(t,e){var n=this;return(n=Kb.call(this,t,"in",e)||this).keys=t_(0,e),n}function Zb(t,e,n){var r=this;return(r=zb.call(this,t,e,n)||this).key=Iy.J(n.referenceValue),r}function t_(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return Iy.J(t.referenceValue)})}var e_,n_,r_,i_,o_=(go(p_,i_=Wb),p_.prototype.matches=function(t){t=t.field(this.field);return qg(t)&&Dg(t.arrayValue,this.value)},p_),s_=(go(f_,r_=Wb),f_.prototype.matches=function(t){t=t.field(this.field);return null!==t&&Dg(this.value.arrayValue,t)},f_),a_=(go(l_,n_=Wb),l_.prototype.matches=function(t){if(Dg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;t=t.field(this.field);return null!==t&&!Dg(this.value.arrayValue,t)},l_),u_=(go(h_,e_=Wb),h_.prototype.matches=function(t){var e=this,t=t.field(this.field);return!(!qg(t)||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return Dg(e.value.arrayValue,t)})},h_),c_=function(t,e){this.position=t,this.before=e};function h_(t,e){return e_.call(this,t,"array-contains-any",e)||this}function l_(t,e){return n_.call(this,t,"not-in",e)||this}function f_(t,e){return r_.call(this,t,"in",e)||this}function p_(t,e){return i_.call(this,t,"array-contains",e)||this}function d_(t){return(t.before?"b":"a")+":"+t.position.map(Lg).join(",")}function v_(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.W()?Iy.D(Iy.J(s.referenceValue),n.key):Rg(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function y_(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Pg(t.position[n],e.position[n]))return!1;return!0}var g_=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function m_(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}var b_,__=(k_.prototype.reset=function(){this.In=0},k_.prototype.Rn=function(){this.In=this.Tn},k_.prototype.Pn=function(t){var e=this;this.cancel();var n=Math.floor(this.In+this.gn()),r=Math.max(0,Date.now()-this.An),i=Math.max(0,n-r);0<i&&Wv("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.In+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.mn=this.fn.Vn(this.dn,i,function(){return e.An=Date.now(),t()}),this.In*=this.En,this.In<this.wn&&(this.In=this.wn),this.In>this.Tn&&(this.In=this.Tn)},k_.prototype.yn=function(){null!==this.mn&&(this.mn.pn(),this.mn=null)},k_.prototype.cancel=function(){null!==this.mn&&(this.mn.cancel(),this.mn=null)},k_.prototype.gn=function(){return(Math.random()-.5)*this.In},k_),w_=(A_.prototype.catch=function(t){return this.next(void 0,t)},A_.prototype.next=function(r,i){var o=this;return this.Dn&&zv(),this.Dn=!0,this.Sn?this.error?this.Cn(i,this.error):this.Nn(r,this.result):new A_(function(e,n){o.bn=function(t){o.Nn(r,t).next(e,n)},o.vn=function(t){o.Cn(i,t).next(e,n)}})},A_.prototype.xn=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},A_.prototype.Fn=function(t){try{var e=t();return e instanceof A_?e:A_.resolve(e)}catch(t){return A_.reject(t)}},A_.prototype.Nn=function(t,e){return t?this.Fn(function(){return t(e)}):A_.resolve(e)},A_.prototype.Cn=function(t,e){return t?this.Fn(function(){return t(e)}):A_.reject(e)},A_.resolve=function(n){return new A_(function(t,e){t(n)})},A_.reject=function(n){return new A_(function(t,e){e(n)})},A_.kn=function(t){return new A_(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},A_.On=function(t){for(var n=A_.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?A_.resolve(t):e()})}(r[e]);return n},A_.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.kn(i)},A_),E_=(N_.delete=function(t){return Wv("SimpleDb","Removing database:",t),L_(window.indexedDB.deleteDatabase(t)).xn()},N_.Ln=function(){if("undefined"==typeof indexedDB)return!1;if(N_.Bn())return!0;var t=Lo(),e=N_.$n(t),n=0<e&&e<10,e=N_.qn(t),e=0<e&&e<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||e)},N_.Bn=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Un)},N_.Kn=function(t,e){return t.store(e)},N_.$n=function(t){t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),t=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(t)},N_.qn=function(t){t=t.match(/Android ([\d.]+)/i),t=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(t)},N_.prototype.Qn=function(o){return bo(this,void 0,void 0,function(){var e,i=this;return _o(this,function(t){switch(t.label){case 0:return this.db?[3,2]:(Wv("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,n){var r=indexedDB.open(i.name,i.version);r.onsuccess=function(t){t=t.target.result;e(t)},r.onblocked=function(){n(new T_(o,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){t=t.target.error;"VersionError"===t.name?n(new jv(Uv.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new T_(o,t))},r.onupgradeneeded=function(t){Wv("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;i.Mn.createOrUpgrade(e,r.transaction,t.oldVersion,i.version).next(function(){Wv("SimpleDb","Database upgrade to version "+i.version+" complete")})}})]);case 1:e.db=t.sent(),t.label=2;case 2:return[2,(this.Wn&&(this.db.onversionchange=function(t){return i.Wn(t)}),this.db)]}})})},N_.prototype.jn=function(e){this.Wn=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},N_.prototype.runTransaction=function(a,n,u,c){return bo(this,void 0,void 0,function(){var i,o,s,e;return _o(this,function(t){switch(t.label){case 0:i="readonly"===n,o=0,e=function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:++o,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,s.Qn(a)];case 2:return s.db=t.sent(),e=P_.open(s.db,a,i?"readonly":"readwrite",u),n=c(e).catch(function(t){return e.abort(t),w_.reject(t)}).xn(),r={},n.catch(function(){}),[4,e.Gn];case 3:return[2,(r.value=(t.sent(),n),r)];case 4:return n=t.sent(),r="FirebaseError"!==n.name&&o<3,Wv("SimpleDb","Transaction failed with error:",n.message,"Retrying:",r),s.close(),r?[3,5]:[2,{value:Promise.reject(n)}];case 5:return[2]}})},s=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(e=t.sent()))return[2,e.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},N_.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},N_),I_=(Object.defineProperty(C_.prototype,"Sn",{get:function(){return this.Hn},enumerable:!1,configurable:!0}),Object.defineProperty(C_.prototype,"Yn",{get:function(){return this.Jn},enumerable:!1,configurable:!0}),Object.defineProperty(C_.prototype,"cursor",{set:function(t){this.zn=t},enumerable:!1,configurable:!0}),C_.prototype.done=function(){this.Hn=!0},C_.prototype.Xn=function(t){this.Jn=t},C_.prototype.delete=function(){return L_(this.zn.delete())},C_),T_=(go(S_,b_=jv),S_);function S_(t,e){var n=this;return(n=b_.call(this,Uv.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function C_(t){this.zn=t,this.Hn=!1,this.Jn=null}function N_(t,e,n){this.name=t,this.version=e,this.Mn=n,12.2===N_.$n(Lo())&&Hv("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function A_(t){var e=this;this.bn=null,this.vn=null,this.result=void 0,this.error=void 0,this.Sn=!1,this.Dn=!1,t(function(t){e.Sn=!0,e.result=t,e.bn&&e.bn(t)},function(t){e.Sn=!0,e.error=t,e.vn&&e.vn(t)})}function k_(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.fn=t,this.dn=e,this.wn=n,this.En=r,this.Tn=i,this.In=0,this.mn=null,this.An=Date.now(),this.reset()}function O_(t){return"IndexedDbTransactionError"===t.name}var P_=(x_.open=function(t,e,n,r){try{return new x_(e,t.transaction(r,n))}catch(t){throw new T_(e,t)}},Object.defineProperty(x_.prototype,"Gn",{get:function(){return this.Zn.promise},enumerable:!1,configurable:!0}),x_.prototype.abort=function(t){t&&this.Zn.reject(t),this.aborted||(Wv("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},x_.prototype.store=function(t){t=this.transaction.objectStore(t);return new D_(t)},x_),D_=(R_.prototype.put=function(t,e){t=void 0!==e?(Wv("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(Wv("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t));return L_(t)},R_.prototype.add=function(t){return Wv("SimpleDb","ADD",this.store.name,t,t),L_(this.store.add(t))},R_.prototype.get=function(e){var n=this;return L_(this.store.get(e)).next(function(t){return void 0===t&&(t=null),Wv("SimpleDb","GET",n.store.name,e,t),t})},R_.prototype.delete=function(t){return Wv("SimpleDb","DELETE",this.store.name,t),L_(this.store.delete(t))},R_.prototype.count=function(){return Wv("SimpleDb","COUNT",this.store.name),L_(this.store.count())},R_.prototype.ts=function(t,e){var e=this.cursor(this.options(t,e)),n=[];return this.es(e,function(t,e){n.push(e)}).next(function(){return n})},R_.prototype.ns=function(t,e){Wv("SimpleDb","DELETE ALL",this.store.name);e=this.options(t,e);e.ss=!1;e=this.cursor(e);return this.es(e,function(t,e,n){return n.delete()})},R_.prototype.rs=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.es(n,e)},R_.prototype.os=function(r){var t=this.cursor({});return new w_(function(n,e){t.onerror=function(t){t=F_(t.target.error);e(t)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},R_.prototype.es=function(t,i){var o=[];return new w_(function(r,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n=t.target.result;n?(e=new I_(n),(t=i(n.primaryKey,n.value,e))instanceof w_&&(t=t.catch(function(t){return e.done(),w_.reject(t)}),o.push(t)),e.Sn?r():null===e.Yn?n.continue():n.continue(e.Yn)):r()}}).next(function(){return w_.kn(o)})},R_.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},R_.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.ss?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},R_);function R_(t){this.store=t}function x_(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.Zn=new m_,this.transaction.oncomplete=function(){n.Zn.resolve()},this.transaction.onabort=function(){t.error?n.Zn.reject(new T_(e,t.error)):n.Zn.resolve()},this.transaction.onerror=function(t){t=F_(t.target.error);n.Zn.reject(new T_(e,t))}}function L_(t){return new w_(function(e,n){t.onsuccess=function(t){t=t.target.result;e(t)},t.onerror=function(t){t=F_(t.target.error);n(t)}})}var M_=!1;function F_(t){var e=E_.$n(Lo());if(12.2<=e&&e<13){e="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(e)){var n=new jv("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return M_||(M_=!0,setTimeout(function(){throw n},0)),n}}return t}function U_(){return"undefined"!=typeof window?window:null}function j_(){return"undefined"!=typeof document?document:null}var V_=(W_._s=function(t,e,n,r,i){i=new W_(t,e,Date.now()+n,r,i);return i.start(n),i},W_.prototype.start=function(t){var e=this;this.fs=setTimeout(function(){return e.ds()},t)},W_.prototype.pn=function(){return this.ds()},W_.prototype.cancel=function(t){null!==this.fs&&(this.clearTimeout(),this.ls.reject(new jv(Uv.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},W_.prototype.ds=function(){var e=this;this.hs.ws(function(){return null!==e.fs?(e.clearTimeout(),e.op().then(function(t){return e.ls.resolve(t)})):Promise.resolve()})},W_.prototype.clearTimeout=function(){null!==this.fs&&(this.us(this),clearTimeout(this.fs),this.fs=null)},W_),q_=(Object.defineProperty(B_.prototype,"ps",{get:function(){return this.Is},enumerable:!1,configurable:!0}),B_.prototype.ws=function(t){this.enqueue(t)},B_.prototype.bs=function(t){this.vs(),this.Ss(t)},B_.prototype.Ds=function(){var t;this.Is||(this.Is=!0,(t=j_())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.ys))},B_.prototype.enqueue=function(t){return this.vs(),this.Is?new Promise(function(t){}):this.Ss(t)},B_.prototype.Cs=function(t){var e=this;this.ws(function(){return e.Ts.push(t),e.Ns()})},B_.prototype.Ns=function(){return bo(this,void 0,void 0,function(){var e,n=this;return _o(this,function(t){switch(t.label){case 0:if(0===this.Ts.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.Ts[0]()];case 2:return t.sent(),this.Ts.shift(),this.Vs.reset(),[3,4];case 3:if(!O_(e=t.sent()))throw e;return Wv("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.Ts.length&&this.Vs.Pn(function(){return n.Ns()}),t.label=5;case 5:return[2]}})})},B_.prototype.Ss=function(t){var r=this,e=this.Es.then(function(){return r.Ps=!0,t().catch(function(t){throw r.Rs=t,r.Ps=!1,Hv("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.Ps=!1,t})});return this.Es=e},B_.prototype.Vn=function(t,e,n){var r=this;this.vs(),-1<this.gs.indexOf(t)&&(e=0);n=V_._s(this,t,e,n,function(t){return r.xs(t)});return this.As.push(n),n},B_.prototype.vs=function(){this.Rs&&zv()},B_.prototype.Fs=function(){},B_.prototype.ks=function(){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,e=this.Es];case 1:t.sent(),t.label=2;case 2:if(e!==this.Es)return[3,0];t.label=3;case 3:return[2]}})})},B_.prototype.Os=function(t){for(var e=0,n=this.As;e<n.length;e++)if(n[e].dn===t)return!0;return!1},B_.prototype.Ms=function(r){var i=this;return this.ks().then(function(){i.As.sort(function(t,e){return t.cs-e.cs});for(var t=0,e=i.As;t<e.length;t++){var n=e[t];if(n.pn(),"all"!==r&&n.dn===r)break}return i.ks()})},B_.prototype.$s=function(t){this.gs.push(t)},B_.prototype.xs=function(t){t=this.As.indexOf(t);this.As.splice(t,1)},B_);function B_(){var e=this;this.Es=Promise.resolve(),this.Ts=[],this.Is=!1,this.As=[],this.Rs=null,this.Ps=!1,this.gs=[],this.Vs=new __(this,"async_queue_retry"),this.ys=function(){var t=j_();t&&Wv("AsyncQueue","Visibility state changed to  ",t.visibilityState),e.Vs.yn()};var t=j_();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.ys)}function W_(t,e,n,r,i){this.hs=t,this.dn=e,this.cs=n,this.op=r,this.us=i,this.ls=new m_,this.then=this.ls.promise.then.bind(this.ls.promise),this.ls.promise.catch(function(t){})}function H_(t,e){if(Hv("AsyncQueue",e+": "+t),O_(t))return new jv(Uv.UNAVAILABLE,e+": "+t);throw t}function G_(){this.Ls=void 0,this.listeners=[]}function K_(){this.Bs=new gy(Ub,Fb),this.onlineState="Unknown",this.qs=new Set}function z_(s,a){return bo(this,void 0,void 0,function(){var e,n,r,i,o;return _o(this,function(t){switch(t.label){case 0:if(e=s,n=a.query,r=!1,(i=e.Bs.get(n))||(r=!0,i=new G_),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.Us(n)];case 2:return o.Ls=t.sent(),[3,4];case 3:return o=t.sent(),o=H_(o,"Initialization of query '"+jb(a.query)+"' failed"),[2,void a.onError(o)];case 4:return e.Bs.set(n,i),i.listeners.push(a),a.Ks(e.onlineState),i.Ls&&a.Qs(i.Ls)&&X_(e),[2]}})})}function Q_(s,a){return bo(this,void 0,void 0,function(){var e,n,r,i,o;return _o(this,function(t){return e=s,n=a.query,r=!1,(i=e.Bs.get(n))&&0<=(o=i.listeners.indexOf(a))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.Bs.delete(n),e.Ws(n))]:[2]})})}function X_(t){t.qs.forEach(function(t){t.next()})}var Y_=(Z_.prototype.Qs=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new hg(t.query,t.docs,t.Kt,e,t.Qt,t.fromCache,t.Wt,!0)}var o=!1;return this.Gs?this.Hs(t)&&(this.js.next(t),o=!0):this.Js(t,this.onlineState)&&(this.Ys(t),o=!0),this.zs=t,o},Z_.prototype.onError=function(t){this.js.error(t)},Z_.prototype.Ks=function(t){this.onlineState=t;var e=!1;return this.zs&&!this.Gs&&this.Js(this.zs,t)&&(this.Ys(this.zs),e=!0),e},Z_.prototype.Js=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.Xs&&n||t.docs.P()&&"Offline"!==e)},Z_.prototype.Hs=function(t){if(0<t.docChanges.length)return!0;var e=this.zs&&this.zs.hasPendingWrites!==t.hasPendingWrites;return!(!t.Wt&&!e)&&!0===this.options.includeMetadataChanges},Z_.prototype.Ys=function(t){t=hg.Gt(t.query,t.docs,t.Qt,t.fromCache),this.Gs=!0,this.js.next(t)},Z_),J_=($_.prototype.Zs=function(){return null!=this.uid},$_.prototype.ti=function(){return this.Zs()?"uid:"+this.uid:"anonymous-user"},$_.prototype.isEqual=function(t){return t.uid===this.uid},$_);function $_(t){this.uid=t}function Z_(t,e,n){this.query=t,this.js=e,this.Gs=!1,this.zs=null,this.onlineState="Unknown",this.options=n||{}}J_.UNAUTHENTICATED=new J_(null),J_.ei=new J_("google-credentials-uid"),J_.ni=new J_("first-party-uid");var tw=(ew.prototype.ii=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},ew.prototype.next=function(){var t=++this.previousValue;return this.ri&&this.ri(t),t},ew);function ew(t,e){var n=this;this.previousValue=t,e&&(e.si=function(t){return n.ii(t)},this.ri=function(t){return e.oi(t)})}function nw(t,e){return"firestore_clients_"+t+"_"+e}function rw(t,e,n){n="firestore_mutations_"+t+"_"+n;return e.Zs()&&(n+="_"+e.uid),n}function iw(t,e){return"firestore_targets_"+t+"_"+e}tw.ai=-1;var ow=(kw.hi=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new jv(r.error.code,r.error.message)),i?new kw(t,e,r.state,o):(Hv("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},kw.prototype.ci=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},kw),sw=(Aw.hi=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new jv(n.error.code,n.error.message)),r?new Aw(t,n.state,i):(Hv("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},Aw.prototype.ci=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},Aw),aw=(Nw.hi=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=ag,o=0;r&&o<n.activeTargetIds.length;++o)r=Ry(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new Nw(t,i):(Hv("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},Nw),uw=(Cw.hi=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new Cw(e.clientId,e.onlineState):(Hv("SharedClientState","Failed to parse online state: "+t),null)},Cw),cw=(Sw.prototype.ui=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},Sw.prototype.li=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},Sw.prototype.ci=function(){var t={activeTargetIds:this.activeTargetIds.L(),updateTimeMs:Date.now()};return JSON.stringify(t)},Sw),hw=(Tw.Ln=function(t){return!(!t||!t.localStorage)},Tw.prototype.start=function(){return bo(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l=this;return _o(this,function(t){switch(t.label){case 0:return[4,this.fi.pi()];case 1:for(s=t.sent(),e=0,n=s;e<n.length;e++)(r=n[e])!==this._i&&(i=this.getItem(nw(this.persistenceKey,r)))&&(o=aw.hi(r,i))&&(this.Ti=this.Ti.ot(o.clientId,o));for(this.bi(),(s=this.storage.getItem(this.yi))&&(a=this.vi(s))&&this.Si(a),u=0,c=this.mi;u<c.length;u++)h=c[u],this.Ei(h);return this.mi=[],this.window.addEventListener("unload",function(){return l.Di()}),this.Ii=!0,[2]}})})},Tw.prototype.oi=function(t){this.setItem(this.Ri,JSON.stringify(t))},Tw.prototype.Ci=function(){return this.Ni(this.Ti)},Tw.prototype.xi=function(n){var r=!1;return this.Ti.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},Tw.prototype.Fi=function(t){this.ki(t,"pending")},Tw.prototype.Oi=function(t,e,n){this.ki(t,e,n),this.Mi(t)},Tw.prototype.$i=function(t){var e,n="not-current";return this.xi(t)&&(!(e=this.storage.getItem(iw(this.persistenceKey,t)))||(e=sw.hi(t,e))&&(n=e.state)),this.Li.ui(t),this.bi(),n},Tw.prototype.Bi=function(t){this.Li.li(t),this.bi()},Tw.prototype.qi=function(t){return this.Li.activeTargetIds.has(t)},Tw.prototype.Ui=function(t){this.removeItem(iw(this.persistenceKey,t))},Tw.prototype.Ki=function(t,e,n){this.Qi(t,e,n)},Tw.prototype.Wi=function(t,e,n){var r=this;e.forEach(function(t){r.Mi(t)}),this.currentUser=t,n.forEach(function(t){r.Fi(t)})},Tw.prototype.ji=function(t){this.Gi(t)},Tw.prototype.Di=function(){this.Ii&&(this.window.removeEventListener("storage",this.wi),this.removeItem(this.Ai),this.Ii=!1)},Tw.prototype.getItem=function(t){var e=this.storage.getItem(t);return Wv("SharedClientState","READ",t,e),e},Tw.prototype.setItem=function(t,e){Wv("SharedClientState","SET",t,e),this.storage.setItem(t,e)},Tw.prototype.removeItem=function(t){Wv("SharedClientState","REMOVE",t),this.storage.removeItem(t)},Tw.prototype.Ei=function(t){var e=this,s=t;if(s.storageArea===this.storage){if(Wv("SharedClientState","EVENT",s.key,s.newValue),s.key===this.Ai)return void Hv("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.fn.Cs(function(){return bo(e,void 0,void 0,function(){var e,n,r,i,o;return _o(this,function(t){if(this.Ii){if(null!==s.key)if(this.Pi.test(s.key)){if(null==s.newValue)return e=this.zi(s.key),[2,this.Hi(e,null)];if(e=this.Ji(s.key,s.newValue))return[2,this.Hi(e.clientId,e)]}else if(this.gi.test(s.key)){if(null!==s.newValue&&(n=this.Yi(s.key,s.newValue)))return[2,this.Xi(n)]}else if(this.Vi.test(s.key)){if(null!==s.newValue&&(r=this.Zi(s.key,s.newValue)))return[2,this.tr(r)]}else if(s.key===this.yi){if(null!==s.newValue&&(i=this.vi(s.newValue)))return[2,this.Si(i)]}else s.key===this.Ri&&(o=function(t){var e=tw.ai;if(null!=t)try{var n=JSON.parse(t);Qv("number"==typeof n),e=n}catch(t){Hv("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(s.newValue))!==tw.ai&&this.si(o)}else this.mi.push(s);return[2]})})})}},Object.defineProperty(Tw.prototype,"Li",{get:function(){return this.Ti.get(this._i)},enumerable:!1,configurable:!0}),Tw.prototype.bi=function(){this.setItem(this.Ai,this.Li.ci())},Tw.prototype.ki=function(t,e,n){n=new ow(this.currentUser,t,e,n),t=rw(this.persistenceKey,this.currentUser,t);this.setItem(t,n.ci())},Tw.prototype.Mi=function(t){t=rw(this.persistenceKey,this.currentUser,t);this.removeItem(t)},Tw.prototype.Gi=function(t){t={clientId:this._i,onlineState:t};this.storage.setItem(this.yi,JSON.stringify(t))},Tw.prototype.Qi=function(t,e,n){var r=iw(this.persistenceKey,t),n=new sw(t,e,n);this.setItem(r,n.ci())},Tw.prototype.zi=function(t){t=this.Pi.exec(t);return t?t[1]:null},Tw.prototype.Ji=function(t,e){t=this.zi(t);return aw.hi(t,e)},Tw.prototype.Yi=function(t,e){var n=this.gi.exec(t),t=Number(n[1]),n=void 0!==n[2]?n[2]:null;return ow.hi(new J_(n),t,e)},Tw.prototype.Zi=function(t,e){t=this.Vi.exec(t),t=Number(t[1]);return sw.hi(t,e)},Tw.prototype.vi=function(t){return uw.hi(t)},Tw.prototype.Xi=function(e){return bo(this,void 0,void 0,function(){return _o(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.fi.er(e.batchId,e.state,e.error)]:(Wv("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},Tw.prototype.tr=function(t){return this.fi.nr(t.targetId,t.state,t.error)},Tw.prototype.Hi=function(t,e){var n=this,r=e?this.Ti.ot(t,e):this.Ti.remove(t),i=this.Ni(this.Ti),o=this.Ni(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.fi.sr(s,a).then(function(){n.Ti=r})},Tw.prototype.Si=function(t){this.Ti.get(t.clientId)&&this.di(t.onlineState)},Tw.prototype.Ni=function(t){var n=ag;return t.forEach(function(t,e){n=n.Ot(e.activeTargetIds)}),n},Tw),lw=(Iw.prototype.Fi=function(t){},Iw.prototype.Oi=function(t,e,n){},Iw.prototype.$i=function(t){return this.ir.ui(t),this.rr[t]||"not-current"},Iw.prototype.Ki=function(t,e,n){this.rr[t]=e},Iw.prototype.Bi=function(t){this.ir.li(t)},Iw.prototype.qi=function(t){return this.ir.activeTargetIds.has(t)},Iw.prototype.Ui=function(t){delete this.rr[t]},Iw.prototype.Ci=function(){return this.ir.activeTargetIds},Iw.prototype.xi=function(t){return this.ir.activeTargetIds.has(t)},Iw.prototype.start=function(){return this.ir=new cw,Promise.resolve()},Iw.prototype.Wi=function(t,e,n){},Iw.prototype.ji=function(t){},Iw.prototype.Di=function(){},Iw.prototype.oi=function(t){},Iw),fw=(Ew.prototype.hr=function(t,e,n){for(var r=n.cr,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Hm(o,e,r[i]))}return e},Ew.prototype.ur=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Gm(i,e,e,this.ar))}for(var o=e,s=0,a=this.mutations;s<a.length;s++){var u=a[s];u.key.isEqual(t)&&(e=Gm(u,e,o,this.ar))}return e},Ew.prototype.lr=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.ur(t.key,n.get(t.key));e&&(i=i.ot(t.key,e))}),i},Ew.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},sg())},Ew.prototype.isEqual=function(t){return this.batchId===t.batchId&&$v(this.mutations,t.mutations,Km)&&$v(this.baseMutations,t.baseMutations,Km)},Ew),pw=(ww.from=function(t,e,n){Qv(t.mutations.length===n.length);for(var r=ig,i=t.mutations,o=0;o<i.length;o++)r=r.ot(i[o].key,n[o].version);return new ww(t,e,n,r)},ww),Rr=(Object.defineProperty(_w.prototype,"readTime",{get:function(){return this.Tr},set:function(t){this.Tr=t},enumerable:!1,configurable:!0}),_w.prototype.Ir=function(t,e){this.mr(),this.readTime=e,this.wr.set(t.key,t)},_w.prototype.Ar=function(t,e){this.mr(),e&&(this.readTime=e),this.wr.set(t,null)},_w.prototype.Rr=function(t,e){this.mr();var n=this.wr.get(e);return void 0!==n?w_.resolve(n):this.Pr(t,e)},_w.prototype.getEntries=function(t,e){return this.gr(t,e)},_w.prototype.apply=function(t){return this.mr(),this.Er=!0,this.Vr(t)},_w.prototype.mr=function(){},_w),dw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",M=(bw.prototype.pr=function(t){this.yr.push(t)},bw.prototype.br=function(){this.yr.forEach(function(t){return t()})},bw),vw=(mw.prototype.Cr=function(e,n){var r=this;return this.Sr.Nr(e,n).next(function(t){return r.Fr(e,n,t)})},mw.prototype.Fr=function(t,r,i){return this.vr.Rr(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].ur(r,t);return t})},mw.prototype.kr=function(t,e,i){var o=tg;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].ur(t,e);o=o.ot(t,e)}),o},mw.prototype.Or=function(e,t){var n=this;return this.vr.getEntries(e,t).next(function(t){return n.Mr(e,t)})},mw.prototype.Mr=function(e,r){var i=this;return this.Sr.$r(e,r).next(function(t){var t=i.kr(e,r,t),n=tg;return t.forEach(function(t,e){e=e||new bb(t,by.min()),n=n.ot(t,e)}),n})},mw.prototype.Lr=function(t,e,n){return r=e,Iy.X(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Br(t,e.path):Pb(e)?this.qr(t,e,n):this.Ur(t,e,n);var r},mw.prototype.Br=function(t,e){return this.Cr(t,new Iy(e)).next(function(t){var e=rg;return t instanceof mb&&(e=e.ot(t.key,t)),e})},mw.prototype.qr=function(n,r,i){var o=this,s=r.collectionGroup,a=rg;return this.Dr.Kr(n,s).next(function(t){return w_.forEach(t,function(t){var e,e=(e=r,t=t.child(s),new wb(t,null,e.on.slice(),e.filters.slice(),e.limit,e.an,e.startAt,e.endAt));return o.Ur(n,e,i).next(function(t){t.forEach(function(t,e){a=a.ot(t,e)})})}).next(function(){return a})})},mw.prototype.Ur=function(e,n,t){var c,h,r=this;return this.vr.Lr(e,n,t).next(function(t){return c=t,r.Sr.Qr(e,n)}).next(function(t){return h=t,r.Wr(e,h,c).next(function(t){c=t;for(var e=0,n=h;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,u=c.get(a),u=Gm(s,u,u,r.ar);c=u instanceof mb?c.ot(a,u):c.remove(a)}})}).next(function(){return c.forEach(function(t,e){Vb(n,e)||(c=c.remove(t))}),c})},mw.prototype.Wr=function(t,e,n){for(var r=sg(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Jm&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.vr.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof mb&&(c=c.ot(t,e))}),c})},mw),yw=(gw.zr=function(t,e){for(var n=sg(),r=sg(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new gw(t,e.fromCache,n,r)},gw);function gw(t,e,n,r){this.targetId=t,this.fromCache=e,this.jr=n,this.Gr=r}function mw(t,e,n){this.vr=t,this.Sr=e,this.Dr=n}function bw(){this.yr=[]}function _w(){this.wr=new gy(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.Er=!1}function ww(t,e,n,r){this.batch=t,this._r=e,this.cr=n,this.dr=r}function Ew(t,e,n,r){this.batchId=t,this.ar=e,this.baseMutations=n,this.mutations=r}function Iw(){this.ir=new cw,this.rr={},this.di=null,this.si=null}function Tw(t,e,n,r,i){this.window=t,this.fn=e,this.persistenceKey=n,this._i=r,this.fi=null,this.di=null,this.si=null,this.wi=this.Ei.bind(this),this.Ti=new Gy(Jv),this.Ii=!1,this.mi=[];n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Ai=nw(this.persistenceKey,this._i),this.Ri="firestore_sequence_number_"+this.persistenceKey,this.Ti=this.Ti.ot(this._i,new cw),this.Pi=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.gi=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.Vi=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.yi="firestore_online_state_"+this.persistenceKey,this.window.addEventListener("storage",this.wi)}function Sw(){this.activeTargetIds=ag}function Cw(t,e){this.clientId=t,this.onlineState=e}function Nw(t,e){this.clientId=t,this.activeTargetIds=e}function Aw(t,e,n){this.targetId=t,this.state=e,this.error=n}function kw(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function Ow(t,e){var n=t[0],r=t[1],t=e[0],e=e[1],t=Jv(n,t);return 0===t?Jv(r,e):t}var Pw=(Lw.prototype.Yr=function(){return++this.Jr},Lw.prototype.Xr=function(t){var e=[t,this.Yr()];this.buffer.size<this.Hr?this.buffer=this.buffer.add(e):Ow(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(Lw.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),Lw),Dw={Zr:!1,eo:0,no:0,so:0},Rw=(xw.ao=function(t){return new xw(t,xw.ho,xw.co)},xw);function xw(t,e,n){this.io=t,this.ro=e,this.oo=n}function Lw(t){this.Hr=t,this.buffer=new $y(Ow),this.Jr=0}Rw.uo=-1,Rw.lo=1048576,Rw._o=41943040,Rw.ho=10,Rw.co=1e3,Rw.fo=new Rw(Rw._o,Rw.ho,Rw.co),Rw.do=new Rw(Rw.uo,0,0);var Mw=(jw.prototype.start=function(t){this.wo.params.io!==Rw.uo&&this.Io(t)},jw.prototype.stop=function(){this.To&&(this.To.cancel(),this.To=null)},Object.defineProperty(jw.prototype,"Ii",{get:function(){return null!==this.To},enumerable:!1,configurable:!0}),jw.prototype.Io=function(n){var t=this,e=this.Eo?3e5:6e4;Wv("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.To=this.hs.Vn("lru_garbage_collection",e,function(){return bo(t,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:this.To=null,this.Eo=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n.mo(this.wo)];case 2:return t.sent(),[3,7];case 3:return O_(e=t.sent())?(Wv("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,gI(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.Io(n)];case 8:return t.sent(),[2]}})})})},jw),Fw=(Uw.prototype.Ro=function(t,e){return this.Ao.Po(t).next(function(t){return Math.floor(e/100*t)})},Uw.prototype.Vo=function(t,e){var n=this;if(0===e)return w_.resolve(tw.ai);var r=new Pw(e);return this.Ao.Ce(t,function(t){return r.Xr(t.sequenceNumber)}).next(function(){return n.Ao.yo(t,function(t){return r.Xr(t)})}).next(function(){return r.maxValue})},Uw.prototype.po=function(t,e,n){return this.Ao.po(t,e,n)},Uw.prototype.bo=function(t,e){return this.Ao.bo(t,e)},Uw.prototype.vo=function(e,n){var r=this;return this.params.io===Rw.uo?(Wv("LruGarbageCollector","Garbage collection skipped; disabled"),w_.resolve(Dw)):this.So(e).next(function(t){return t<r.params.io?(Wv("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.io),Dw):r.Do(e,n)})},Uw.prototype.So=function(t){return this.Ao.So(t)},Uw.prototype.Do=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.Ro(e,this.params.ro).next(function(t){return i=t>h.params.oo?(Wv("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.oo+" from "+t),h.params.oo):t,s=Date.now(),h.Vo(e,i)}).next(function(t){return r=t,a=Date.now(),h.po(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.bo(e,r)}).next(function(t){return c=Date.now(),Bv()<=Ns.DEBUG&&Wv("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),w_.resolve({Zr:!0,eo:i,no:o,so:t})})},Uw);function Uw(t,e){this.Ao=t,this.params=e}function jw(t,e){this.wo=t,this.hs=e,this.Eo=!1,this.To=null}function Vw(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=qw(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}(t.get(n),e);return qw(e)}function qw(t){return t+""}function Bw(t){var e=t.length;if(Qv(2<=e),2===e)return Qv(""===t.charAt(0)&&""===t.charAt(1)),_y.U();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&zv(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:zv()}o=s+2}return new _y(r)}var Ww=function(t){this.Co=t};function Hw(t,e){if(e.document)return n=t.Co,r=e.document,i=!!e.hasCommittedMutations,t=rm(n,r.name),n=Zg(r.updateTime),r=new cb({mapValue:{fields:r.fields}}),new mb(t,n,r,{hasCommittedMutations:!!i});var n,r;if(e.noDocument){var i=Iy.Z(e.noDocument.path),o=Xw(e.noDocument.readTime);return new bb(i,o,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){o=Iy.Z(e.unknownDocument.path),e=Xw(e.unknownDocument.version);return new _b(o,e)}return zv()}function Gw(t,e,n){var r=Kw(n),n=e.key.path.F().L();if(e instanceof mb){var i={name:nm(i=t.Co,(o=e).key),fields:o.rn().mapValue.fields,updateTime:Jg(i,o.version.v())},o=e.hasCommittedMutations;return new kE(null,null,i,o,r,n)}if(e instanceof bb){var i=e.key.path.L(),o=Qw(e.version),s=e.hasCommittedMutations;return new kE(null,new NE(i,o),null,s,r,n)}if(e instanceof _b){s=e.key.path.L(),e=Qw(e.version);return new kE(new AE(s,e),null,null,!0,r,n)}return zv()}function Kw(t){t=t.v();return[t.seconds,t.nanoseconds]}function zw(t){t=new my(t[0],t[1]);return by.V(t)}function Qw(t){t=t.v();return new mE(t.seconds,t.nanoseconds)}function Xw(t){t=new my(t.seconds,t.nanoseconds);return by.V(t)}function Yw(e,t){var n=(t.baseMutations||[]).map(function(t){return hm(e.Co,t)}),r=t.mutations.map(function(t){return hm(e.Co,t)}),i=my.fromMillis(t.localWriteTimeMs);return new fw(t.batchId,i,n,r)}function Jw(t){var e=Xw(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?Xw(t.lastLimboFreeSnapshotVersion):by.min(),r=void 0!==t.query.documents?(Qv(1===(r=t.query).documents.length),Rb(Cb(om(r.documents[0])))):pm(t.query);return new qy(r,t.targetId,0,t.lastListenSequenceNumber,e,n,ty.fromBase64String(t.resumeToken))}function $w(t,e){var n=Qw(e.nt),r=Qw(e.lastLimboFreeSnapshotVersion),i=(Uy(e.target)?lm:fm)(t.Co,e.target),t=e.resumeToken.toBase64();return new PE(e.targetId,My(e.target),n,t,e.sequenceNumber,r,i)}var Zw=(tE.Fo=function(t,e,n,r){return Qv(""!==t.uid),new tE(t.Zs()?t.uid:"",e,n,r)},tE.prototype.ko=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return rE(t).rs({index:TE.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},tE.prototype.Oo=function(d,v,y,g){var m=this,b=iE(d),_=rE(d);return _.add({}).next(function(t){Qv("number"==typeof t);for(var e,n,r,i,o,s=new fw(t,v,y,g),a=(e=m.serializer,n=m.userId,i=(r=s).baseMutations.map(function(t){return cm(e.Co,t)}),o=r.mutations.map(function(t){return cm(e.Co,t)}),new TE(n,r.batchId,r.ar.toMillis(),i,o)),u=[],c=new $y(function(t,e){return Jv(t.B(),e.B())}),h=0,l=g;h<l.length;h++){var f=l[h],p=SE.key(m.userId,f.key.path,t),c=c.add(f.key.path.F());u.push(_.put(a)),u.push(b.put(p,SE.PLACEHOLDER))}return c.forEach(function(t){u.push(m.Dr.Mo(d,t))}),d.pr(function(){m.xo[t]=s.keys()}),w_.kn(u).next(function(){return s})})},tE.prototype.$o=function(t,e){var n=this;return rE(t).get(e).next(function(t){return t?(Qv(t.userId===n.userId),Yw(n.serializer,t)):null})},tE.prototype.Lo=function(t,e){var n=this;return this.xo[e]?w_.resolve(this.xo[e]):this.$o(t,e).next(function(t){if(t){t=t.keys();return n.xo[e]=t}return null})},tE.prototype.Bo=function(t,e){var r=this,i=e+1,e=IDBKeyRange.lowerBound([this.userId,i]),o=null;return rE(t).rs({index:TE.userMutationsIndex,range:e},function(t,e,n){e.userId===r.userId&&(Qv(e.batchId>=i),o=Yw(r.serializer,e)),n.done()}).next(function(){return o})},tE.prototype.qo=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return rE(t).rs({index:TE.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},tE.prototype.Uo=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return rE(t).ts(TE.userMutationsIndex,n).next(function(t){return t.map(function(t){return Yw(e.serializer,t)})})},tE.prototype.Nr=function(o,s){var a=this,t=SE.prefixForPath(this.userId,s.path),t=IDBKeyRange.lowerBound(t),u=[];return iE(o).rs({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=Bw(i);if(r===a.userId&&s.path.isEqual(i))return rE(o).get(t).next(function(t){if(!t)throw zv();Qv(t.userId===a.userId),u.push(Yw(a.serializer,t))});n.done()}).next(function(){return u})},tE.prototype.$r=function(e,t){var s=this,a=new $y(Jv),n=[];return t.forEach(function(o){var t=SE.prefixForPath(s.userId,o.path),t=IDBKeyRange.lowerBound(t),t=iE(e).rs({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=Bw(i);r===s.userId&&o.path.isEqual(i)?a=a.add(t):n.done()});n.push(t)}),w_.kn(n).next(function(){return s.Ko(e,a)})},tE.prototype.Qr=function(t,e){var o=this,s=e.path,a=s.length+1,e=SE.prefixForPath(this.userId,s),e=IDBKeyRange.lowerBound(e),u=new $y(Jv);return iE(t).rs({range:e},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=Bw(i);r===o.userId&&s.M(i)?i.length===a&&(u=u.add(t)):n.done()}).next(function(){return o.Ko(t,u)})},tE.prototype.Ko=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(rE(e).get(t).next(function(t){if(null===t)throw zv();Qv(t.userId===n.userId),r.push(Yw(n.serializer,t))}))}),w_.kn(i).next(function(){return r})},tE.prototype.Qo=function(e,n){var r=this;return nE(e.Wo,this.userId,n).next(function(t){return e.pr(function(){r.jo(n.batchId)}),w_.forEach(t,function(t){return r.No.Go(e,t)})})},tE.prototype.jo=function(t){delete this.xo[t]},tE.prototype.zo=function(e){var i=this;return this.ko(e).next(function(t){if(!t)return w_.resolve();var t=IDBKeyRange.lowerBound(SE.prefixForUser(i.userId)),r=[];return iE(e).rs({range:t},function(t,e,n){t[0]===i.userId?(t=Bw(t[1]),r.push(t)):n.done()}).next(function(){Qv(0===r.length)})})},tE.prototype.Ho=function(t,e){return eE(t,this.userId,e)},tE.prototype.Jo=function(t){var e=this;return oE(t).get(this.userId).next(function(t){return t||new IE(e.userId,-1,"")})},tE);function tE(t,e,n,r){this.userId=t,this.serializer=e,this.Dr=n,this.No=r,this.xo={}}function eE(t,o,e){var e=SE.prefixForPath(o,e.path),s=e[1],e=IDBKeyRange.lowerBound(e),a=!1;return iE(t).rs({range:e,ss:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function nE(t,e,n){var r=t.store(TE.store),i=t.store(SE.store),o=[],t=IDBKeyRange.only(n.batchId),s=0,t=r.rs({range:t},function(t,e,n){return s++,n.delete()});o.push(t.next(function(){Qv(1===s)}));for(var a=[],u=0,c=n.mutations;u<c.length;u++){var h=c[u],l=SE.key(e,h.key.path,n.batchId);o.push(i.delete(l)),a.push(h.key)}return w_.kn(o).next(function(){return a})}function rE(t){return JE.Kn(t,TE.store)}function iE(t){return JE.Kn(t,SE.store)}function oE(t){return JE.Kn(t,IE.store)}var sE,aE=(hE.prototype.Ir=function(t,e,n){return fE(t).put(pE(e),n)},hE.prototype.Ar=function(t,e){t=fE(t),e=pE(e);return t.delete(e)},hE.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.Yo(e,t)})},hE.prototype.Rr=function(t,e){var n=this;return fE(t).get(pE(e)).next(function(t){return n.Xo(t)})},hE.prototype.Zo=function(t,e){var n=this;return fE(t).get(pE(e)).next(function(t){var e=n.Xo(t);return e?{ta:e,size:dE(t)}:null})},hE.prototype.getEntries=function(t,e){var n=this,r=tg;return this.ea(t,e,function(t,e){e=n.Xo(e);r=r.ot(t,e)}).next(function(){return r})},hE.prototype.na=function(t,e){var r=this,i=tg,o=new Gy(Iy.D);return this.ea(t,e,function(t,e){var n=r.Xo(e);o=n?(i=i.ot(t,n),o.ot(t,dE(e))):(i=i.ot(t,null),o.ot(t,0))}).next(function(){return{sa:i,ia:o}})},hE.prototype.ea=function(t,e,i){if(e.P())return w_.resolve();var n=IDBKeyRange.bound(e.first().path.L(),e.last().path.L()),o=e._t(),s=o.It();return fE(t).rs({range:n},function(t,e,n){for(var r=Iy.Z(t);s&&Iy.D(s,r)<0;)i(s,null),s=o.It();s&&s.isEqual(r)&&(i(s,e),s=o.At()?o.It():null),s?n.Xn(s.path.L()):n.done()}).next(function(){for(;s;)i(s,null),s=o.At()?o.It():null})},hE.prototype.Lr=function(t,r,e){var n,i=this,o=rg,s=r.path.length+1,a={};return e.isEqual(by.min())?(n=r.path.L(),a.range=IDBKeyRange.lowerBound(n)):(n=r.path.L(),e=Kw(e),a.range=IDBKeyRange.lowerBound([n,e],!0),a.index=kE.collectionReadTimeIndex),fE(t).rs(a,function(t,e,n){t.length===s&&(e=Hw(i.serializer,e),r.path.M(e.key.path)?e instanceof mb&&Vb(r,e)&&(o=o.ot(e.key,e)):n.done())}).next(function(){return o})},hE.prototype.ra=function(t){return new uE(this,!!t&&t.oa)},hE.prototype.aa=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},hE.prototype.getMetadata=function(t){return lE(t).get(OE.key).next(function(t){return Qv(!!t),t})},hE.prototype.Yo=function(t,e){return lE(t).put(OE.key,e)},hE.prototype.Xo=function(t){if(t){t=Hw(this.serializer,t);return t instanceof bb&&t.version.isEqual(by.min())?null:t}return null},hE),uE=(go(cE,sE=Rr),cE.prototype.Vr=function(i){var o=this,s=[],a=0,u=new $y(function(t,e){return Jv(t.B(),e.B())});return this.wr.forEach(function(t,e){var n,r=o.ca.get(t);e?(n=Gw(o.ha.serializer,e,o.readTime),u=u.add(t.path.F()),e=dE(n),a+=e-r,s.push(o.ha.Ir(i,t,n))):(a-=r,o.oa?(r=Gw(o.ha.serializer,new bb(t,by.min()),o.readTime),s.push(o.ha.Ir(i,t,r))):s.push(o.ha.Ar(i,t)))}),u.forEach(function(t){s.push(o.ha.Dr.Mo(i,t))}),s.push(this.ha.updateMetadata(i,a)),w_.kn(s)},cE.prototype.Pr=function(t,e){var n=this;return this.ha.Zo(t,e).next(function(t){return null===t?(n.ca.set(e,0),null):(n.ca.set(e,t.size),t.ta)})},cE.prototype.gr=function(t,e){var n=this;return this.ha.na(t,e).next(function(t){var e=t.sa;return t.ia.forEach(function(t,e){n.ca.set(t,e)}),e})},cE);function cE(t,e){var n=this;return(n=sE.call(this)||this).ha=t,n.oa=e,n.ca=new gy(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}function hE(t,e){this.serializer=t,this.Dr=e}function lE(t){return JE.Kn(t,OE.store)}function fE(t){return JE.Kn(t,kE.store)}function pE(t){return t.path.L()}function dE(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw zv();e=t.noDocument}return JSON.stringify(e).length}var vE=(EE.prototype.Mo=function(t,e){return this.ua.add(e),w_.resolve()},EE.prototype.Kr=function(t,e){return w_.resolve(this.ua.getEntries(e))},EE),yE=(wE.prototype.add=function(t){var e=t.O(),n=t.F(),r=this.index[e]||new $y(_y.D),t=!r.has(n);return this.index[e]=r.add(n),t},wE.prototype.has=function(t){var e=t.O(),t=t.F(),e=this.index[e];return e&&e.has(t)},wE.prototype.getEntries=function(t){return(this.index[t]||new $y(_y.D)).L()},wE),gE=(_E.prototype.createOrUpgrade=function(e,n,t,r){var i=this;Qv(t<r&&0<=t&&r<=10);var o=new P_("createOrUpgrade",n);t<1&&1<=r&&(e.createObjectStore(bE.store),(s=e).createObjectStore(IE.store,{keyPath:IE.keyPath}),s.createObjectStore(TE.store,{keyPath:TE.keyPath,autoIncrement:!0}).createIndex(TE.userMutationsIndex,TE.userMutationsKeyPath,{unique:!0}),s.createObjectStore(SE.store),LE(e),e.createObjectStore(kE.store));var s,a=w_.resolve();return t<3&&3<=r&&(0!==t&&((s=e).deleteObjectStore(DE.store),s.deleteObjectStore(PE.store),s.deleteObjectStore(RE.store),LE(e)),a=a.next(function(){return t=o.store(RE.store),e=new RE(0,0,by.min().v(),0),t.put(RE.key,e);var t,e})),t<4&&4<=r&&(0!==t&&(a=a.next(function(){return n=e,(r=o).store(TE.store).ts().next(function(t){n.deleteObjectStore(TE.store),n.createObjectStore(TE.store,{keyPath:TE.keyPath,autoIncrement:!0}).createIndex(TE.userMutationsIndex,TE.userMutationsKeyPath,{unique:!0});var e=r.store(TE.store),t=t.map(function(t){return e.put(t)});return w_.kn(t)});var n,r})),a=a.next(function(){e.createObjectStore(ME.store,{keyPath:ME.keyPath})})),t<5&&5<=r&&(a=a.next(function(){return i.removeAcknowledgedMutations(o)})),t<6&&6<=r&&(a=a.next(function(){return e.createObjectStore(OE.store),i.addDocumentGlobal(o)})),t<7&&7<=r&&(a=a.next(function(){return i.ensureSequenceNumbers(o)})),t<8&&8<=r&&(a=a.next(function(){return i.createCollectionParentIndex(e,o)})),t<9&&9<=r&&(a=a.next(function(){var t;(t=e).objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges"),(t=n.objectStore(kE.store)).createIndex(kE.readTimeIndex,kE.readTimeIndexPath,{unique:!1}),t.createIndex(kE.collectionReadTimeIndex,kE.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=r&&(a=a.next(function(){return i.rewriteCanonicalIds(o)})),a},_E.prototype.addDocumentGlobal=function(e){var n=0;return e.store(kE.store).rs(function(t,e){n+=dE(e)}).next(function(){var t=new OE(n);return e.store(OE.store).put(OE.key,t)})},_E.prototype.removeAcknowledgedMutations=function(n){var r=this,t=n.store(IE.store),i=n.store(TE.store);return t.ts().next(function(t){return w_.forEach(t,function(e){var t=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return i.ts(TE.userMutationsIndex,t).next(function(t){return w_.forEach(t,function(t){Qv(t.userId===e.userId);t=Yw(r.serializer,t);return nE(n,e.userId,t).next(function(){})})})})})},_E.prototype.ensureSequenceNumbers=function(t){var o=t.store(DE.store),e=t.store(kE.store);return t.store(RE.store).get(RE.key).next(function(r){var i=[];return e.rs(function(t,e){var n=new _y(t),t=[0,Vw(n)];i.push(o.get(t).next(function(t){return t?w_.resolve():o.put(new DE(0,Vw(n),r.highestListenSequenceNumber))}))}).next(function(){return w_.kn(i)})})},_E.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(xE.store,{keyPath:xE.keyPath});function r(t){if(i.add(t)){var e=t.O(),t=t.F();return n.put({collectionId:e,parent:Vw(t)})}}var n=e.store(xE.store),i=new yE;return e.store(kE.store).rs({ss:!0},function(t,e){t=new _y(t);return r(t.F())}).next(function(){return e.store(SE.store).rs({ss:!0},function(t,e){t[0];var n=t[1],n=(t[2],Bw(n));return r(n.F())})})},_E.prototype.rewriteCanonicalIds=function(t){var n=this,r=t.store(PE.store);return r.rs(function(t,e){e=Jw(e),e=$w(n.serializer,e);return r.put(e)})},_E),mE=function(t,e){this.seconds=t,this.nanoseconds=e},bE=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};function _E(t){this.serializer=t}function wE(){this.index={}}function EE(){this.ua=new yE}bE.store="owner",bE.key="owner";var IE=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};IE.store="mutationQueues",IE.keyPath="userId";var TE=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};TE.store="mutations",TE.keyPath="batchId",TE.userMutationsIndex="userMutationsIndex",TE.userMutationsKeyPath=["userId","batchId"];var SE=(CE.prefixForUser=function(t){return[t]},CE.prefixForPath=function(t,e){return[t,Vw(e)]},CE.key=function(t,e,n){return[t,Vw(e),n]},CE);function CE(){}SE.store="documentMutations",SE.PLACEHOLDER=new SE;var NE=function(t,e){this.path=t,this.readTime=e},AE=function(t,e){this.path=t,this.version=e},kE=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};kE.store="remoteDocuments",kE.readTimeIndex="readTimeIndex",kE.readTimeIndexPath="readTime",kE.collectionReadTimeIndex="collectionReadTimeIndex",kE.collectionReadTimeIndexPath=["parentPath","readTime"];var OE=function(t){this.byteSize=t};OE.store="remoteDocumentGlobal",OE.key="remoteDocumentGlobalKey";var PE=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};PE.store="targets",PE.keyPath="targetId",PE.queryTargetsIndexName="queryTargetsIndex",PE.queryTargetsKeyPath=["canonicalId","targetId"];var DE=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};DE.store="targetDocuments",DE.keyPath=["targetId","path"],DE.documentTargetsIndex="documentTargetsIndex",DE.documentTargetsKeyPath=["path","targetId"];var RE=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};RE.key="targetGlobalKey",RE.store="targetGlobal";var xE=function(t,e){this.collectionId=t,this.parent=e};function LE(t){t.createObjectStore(DE.store,{keyPath:DE.keyPath}).createIndex(DE.documentTargetsIndex,DE.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(PE.store,{keyPath:PE.keyPath}).createIndex(PE.queryTargetsIndexName,PE.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(RE.store)}xE.store="collectionParents",xE.keyPath=["collectionId","parent"];var ME=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ME.store="clientMetadata",ME.keyPath="clientId";var FE=To(To(To([IE.store,TE.store,SE.store,kE.store,PE.store,bE.store,RE.store,DE.store],[ME.store]),[OE.store]),[xE.store]),UE=(jE.prototype.Mo=function(t,e){var n=this;if(this.la.has(e))return w_.resolve();var r=e.O(),i=e.F();t.pr(function(){n.la.add(e)});i={collectionId:r,parent:Vw(i)};return VE(t).put(i)},jE.prototype.Kr=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[Zv(i),""],!1,!0);return VE(t).ts(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(Bw(r.parent))}return o})},jE);function jE(){this.la=new yE}function VE(t){return JE.Kn(t,xE.store)}var qE=(HE.prototype.next=function(){return this._a+=2,this._a},HE.fa=function(){return new HE(0)},HE.da=function(){return new HE(-1)},HE),BE=(WE.prototype.wa=function(n){var r=this;return this.Ea(n).next(function(t){var e=new qE(t.highestTargetId);return t.highestTargetId=e.next(),r.Ta(n,t).next(function(){return t.highestTargetId})})},WE.prototype.Ia=function(t){return this.Ea(t).next(function(t){return by.V(new my(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},WE.prototype.ma=function(t){return this.Ea(t).next(function(t){return t.highestListenSequenceNumber})},WE.prototype.Aa=function(e,n,r){var i=this;return this.Ea(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.v()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.Ta(e,t)})},WE.prototype.Ra=function(e,n){var r=this;return this.Pa(e,n).next(function(){return r.Ea(e).next(function(t){return t.targetCount+=1,r.ga(n,t),r.Ta(e,t)})})},WE.prototype.Va=function(t,e){return this.Pa(t,e)},WE.prototype.ya=function(e,t){var n=this;return this.pa(e,t.targetId).next(function(){return GE(e).delete(t.targetId)}).next(function(){return n.Ea(e)}).next(function(t){return Qv(0<t.targetCount),--t.targetCount,n.Ta(e,t)})},WE.prototype.po=function(n,r,i){var o=this,s=0,a=[];return GE(n).rs(function(t,e){e=Jw(e);e.sequenceNumber<=r&&null===i.get(e.targetId)&&(s++,a.push(o.ya(n,e)))}).next(function(){return w_.kn(a)}).next(function(){return s})},WE.prototype.Ce=function(t,n){return GE(t).rs(function(t,e){e=Jw(e);n(e)})},WE.prototype.Ea=function(t){return KE(t).get(RE.key).next(function(t){return Qv(null!==t),t})},WE.prototype.Ta=function(t,e){return KE(t).put(RE.key,e)},WE.prototype.Pa=function(t,e){return GE(t).put($w(this.serializer,e))},WE.prototype.ga=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},WE.prototype.ba=function(t){return this.Ea(t).next(function(t){return t.targetCount})},WE.prototype.va=function(t,r){var e=My(r),e=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),i=null;return GE(t).rs({range:e,index:PE.queryTargetsIndexName},function(t,e,n){e=Jw(e);Fy(r,e.target)&&(i=e,n.done())}).next(function(){return i})},WE.prototype.Sa=function(n,t,r){var i=this,o=[],s=zE(n);return t.forEach(function(t){var e=Vw(t.path);o.push(s.put(new DE(r,e))),o.push(i.No.Da(n,r,t))}),w_.kn(o)},WE.prototype.Ca=function(n,t,r){var i=this,o=zE(n);return w_.forEach(t,function(t){var e=Vw(t.path);return w_.kn([o.delete([r,e]),i.No.Na(n,r,t)])})},WE.prototype.pa=function(t,e){t=zE(t),e=IDBKeyRange.bound([e],[e+1],!1,!0);return t.delete(e)},WE.prototype.xa=function(t,e){var e=IDBKeyRange.bound([e],[e+1],!1,!0),t=zE(t),r=sg();return t.rs({range:e,ss:!0},function(t,e,n){t=Bw(t[1]),t=new Iy(t);r=r.add(t)}).next(function(){return r})},WE.prototype.Ho=function(t,e){var e=Vw(e.path),e=IDBKeyRange.bound([e],[Zv(e)],!1,!0),i=0;return zE(t).rs({index:DE.documentTargetsIndex,ss:!0,range:e},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},WE.prototype.Ue=function(t,e){return GE(t).get(e).next(function(t){return t?Jw(t):null})},WE);function WE(t,e){this.No=t,this.serializer=e}function HE(t){this._a=t}function GE(t){return JE.Kn(t,PE.store)}function KE(t){return JE.Kn(t,RE.store)}function zE(t){return JE.Kn(t,DE.store)}var QE,XE="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",YE=(go(ZE,QE=M),ZE),JE=($E.Kn=function(t,e){if(t instanceof YE)return E_.Kn(t.Wo,e);throw zv()},$E.prototype.start=function(){var e=this;return this.za().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new jv(Uv.FAILED_PRECONDITION,XE);return e.Ha(),e.Ja(),e.Ya(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.ja.ma(t)})}).then(function(t){e.Ma=new tw(t,e.ka)}).then(function(){e.$a=!0}).catch(function(t){return e.Wa&&e.Wa.close(),Promise.reject(t)})},$E.prototype.Xa=function(n){var t=this;return this.Ka=function(e){return bo(t,void 0,void 0,function(){return _o(this,function(t){return this.Ii?[2,n(e)]:[2]})})},n(this.isPrimary)},$E.prototype.Za=function(n){var t=this;this.Wa.jn(function(e){return bo(t,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},$E.prototype.th=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.fn.ws(function(){return bo(e,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return this.Ii?[4,this.za()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},$E.prototype.za=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return eI(e).put(new ME(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.eh(e).next(function(t){t||(n.isPrimary=!1,n.fn.Cs(function(){return n.Ka(!1)}))})}).next(function(){return n.nh(e)}).next(function(t){return n.isPrimary&&!t?n.sh(e).next(function(){return!1}):!!t&&n.ih(e).next(function(){return!0})})}).catch(function(t){if(O_(t))return Wv("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return Wv("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.fn.Cs(function(){return n.Ka(t)}),n.isPrimary=t})},$E.prototype.eh=function(t){var e=this;return tI(t).get(bE.key).next(function(t){return w_.resolve(e.rh(t))})},$E.prototype.oh=function(t){return eI(t).delete(this.clientId)},$E.prototype.ah=function(){return bo(this,void 0,void 0,function(){var e,n,r,i,o=this;return _o(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.hh(this.Ua,18e5)?[3,2]:(this.Ua=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=$E.Kn(t,ME.store);return r.ts().next(function(t){var e=o.uh(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return w_.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.Ga)for(n=0,r=e;n<r.length;n++)i=r[n],this.Ga.removeItem(this.lh(i.clientId));t.label=2;case 2:return[2]}})})},$E.prototype.Ya=function(){var t=this;this.qa=this.fn.Vn("client_metadata_refresh",4e3,function(){return t.za().then(function(){return t.ah()}).then(function(){return t.Ya()})})},$E.prototype.rh=function(t){return!!t&&t.ownerId===this.clientId},$E.prototype.nh=function(e){var r=this;return this.Oa?w_.resolve(!0):tI(e).get(bE.key).next(function(t){if(null!==t&&r.hh(t.leaseTimestampMs,5e3)&&!r._h(t.ownerId)){if(r.rh(t)&&r.networkEnabled)return!0;if(!r.rh(t)){if(!t.allowTabSynchronization)throw new jv(Uv.FAILED_PRECONDITION,XE);return!1}}return!(!r.networkEnabled||!r.inForeground)||eI(e).ts().next(function(t){return void 0===r.uh(t,5e3).find(function(t){if(r.clientId!==t.clientId){var e=!r.networkEnabled&&t.networkEnabled,n=!r.inForeground&&t.inForeground,t=r.networkEnabled===t.networkEnabled;if(e||n&&t)return!0}return!1})})}).next(function(t){return r.isPrimary!==t&&Wv("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},$E.prototype.Di=function(){return bo(this,void 0,void 0,function(){var n=this;return _o(this,function(t){switch(t.label){case 0:return this.$a=!1,this.fh(),this.qa&&(this.qa.cancel(),this.qa=null),this.dh(),this.wh(),[4,this.Wa.runTransaction("shutdown","readwrite",[bE.store,ME.store],function(t){var e=new YE(t,tw.ai);return n.sh(e).next(function(){return n.oh(e)})})];case 1:return t.sent(),this.Wa.close(),this.Eh(),[2]}})})},$E.prototype.uh=function(t,e){var n=this;return t.filter(function(t){return n.hh(t.updateTimeMs,e)&&!n._h(t.clientId)})},$E.prototype.pi=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return eI(t).ts().next(function(t){return e.uh(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty($E.prototype,"Ii",{get:function(){return this.$a},enumerable:!1,configurable:!0}),$E.prototype.Th=function(t){return Zw.Fo(t,this.serializer,this.Dr,this.No)},$E.prototype.Ih=function(){return this.ja},$E.prototype.mh=function(){return this.vr},$E.prototype.Ah=function(){return this.Dr},$E.prototype.runTransaction=function(e,n,r){var i=this;Wv("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.Wa.runTransaction(e,t,FE,function(t){return o=new YE(t,i.Ma?i.Ma.next():tw.ai),"readwrite-primary"===n?i.eh(o).next(function(t){return!!t||i.nh(o)}).next(function(t){if(!t)throw Hv("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.fn.Cs(function(){return i.Ka(!1)}),new jv(Uv.FAILED_PRECONDITION,dw);return r(o)}).next(function(t){return i.ih(o).next(function(){return t})}):i.Rh(o).next(function(){return r(o)})}).then(function(t){return o.br(),t})},$E.prototype.Rh=function(t){var e=this;return tI(t).get(bE.key).next(function(t){if(null!==t&&e.hh(t.leaseTimestampMs,5e3)&&!e._h(t.ownerId)&&!e.rh(t)&&!(e.Oa||e.allowTabSynchronization&&t.allowTabSynchronization))throw new jv(Uv.FAILED_PRECONDITION,XE)})},$E.prototype.ih=function(t){var e=new bE(this.clientId,this.allowTabSynchronization,Date.now());return tI(t).put(bE.key,e)},$E.Ln=function(){return E_.Ln()},$E.prototype.sh=function(t){var e=this,n=tI(t);return n.get(bE.key).next(function(t){return e.rh(t)?(Wv("IndexedDbPersistence","Releasing primary lease."),n.delete(bE.key)):w_.resolve()})},$E.prototype.hh=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Hv("Detected an update time that is in the future: "+t+" > "+n),1))},$E.prototype.Ha=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ba=function(){t.fn.ws(function(){return t.inForeground="visible"===t.document.visibilityState,t.za()})},this.document.addEventListener("visibilitychange",this.Ba),this.inForeground="visible"===this.document.visibilityState)},$E.prototype.dh=function(){this.Ba&&(this.document.removeEventListener("visibilitychange",this.Ba),this.Ba=null)},$E.prototype.Ja=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.La=function(){e.fh(),e.fn.ws(function(){return e.Di()})},this.window.addEventListener("unload",this.La))},$E.prototype.wh=function(){this.La&&(this.window.removeEventListener("unload",this.La),this.La=null)},$E.prototype._h=function(t){try{var e=null!==(null===(e=this.Ga)||void 0===e?void 0:e.getItem(this.lh(t)));return Wv("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Hv("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},$E.prototype.fh=function(){if(this.Ga)try{this.Ga.setItem(this.lh(this.clientId),String(Date.now()))}catch(t){Hv("Failed to set zombie client id.",t)}},$E.prototype.Eh=function(){if(this.Ga)try{this.Ga.removeItem(this.lh(this.clientId))}catch(t){}},$E.prototype.lh=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},$E);function $E(t,e,n,r,i,o,s,a,u,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.fn=i,this.window=o,this.document=s,this.ka=u,this.Oa=c,this.Ma=null,this.$a=!1,this.isPrimary=!1,this.networkEnabled=!0,this.La=null,this.inForeground=!1,this.Ba=null,this.qa=null,this.Ua=Number.NEGATIVE_INFINITY,this.Ka=function(t){return Promise.resolve()},!$E.Ln())throw new jv(Uv.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.No=new nI(this,r),this.Qa=e+"main",this.serializer=new Ww(a),this.Wa=new E_(this.Qa,10,new gE(this.serializer)),this.ja=new BE(this.No,this.serializer),this.Dr=new UE,this.vr=(e=this.serializer,a=this.Dr,new aE(e,a)),this.window&&this.window.localStorage?this.Ga=this.window.localStorage:(this.Ga=null,!1===c&&Hv("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function ZE(t,e){var n=this;return(n=QE.call(this)||this).Wo=t,n.Fa=e,n}function tI(t){return JE.Kn(t,bE.store)}function eI(t){return JE.Kn(t,ME.store)}var nI=(rI.prototype.Po=function(t){var n=this.Ph(t);return this.db.Ih().ba(t).next(function(e){return n.next(function(t){return e+t})})},rI.prototype.Ph=function(t){var e=0;return this.yo(t,function(t){e++}).next(function(){return e})},rI.prototype.Ce=function(t,e){return this.db.Ih().Ce(t,e)},rI.prototype.yo=function(t,n){return this.gh(t,function(t,e){return n(e)})},rI.prototype.Da=function(t,e,n){return iI(t,n)},rI.prototype.Na=function(t,e,n){return iI(t,n)},rI.prototype.po=function(t,e,n){return this.db.Ih().po(t,e,n)},rI.prototype.Go=iI,rI.prototype.Vh=function(t,e){return r=e,i=!1,oE(n=t).os(function(t){return eE(n,t,r).next(function(t){return t&&(i=!0),w_.resolve(!t)})}).next(function(){return i});var n,r,i},rI.prototype.bo=function(n,r){var i=this,o=this.db.mh().ra(),s=[],a=0;return this.gh(n,function(e,t){t<=r&&(t=i.Vh(n,e).next(function(t){if(!t)return a++,o.Rr(n,e).next(function(){return o.Ar(e),zE(n).delete([0,Vw(e.path)])})}),s.push(t))}).next(function(){return w_.kn(s)}).next(function(){return o.apply(n)}).next(function(){return a})},rI.prototype.removeTarget=function(t,e){e=e.st(t.Fa);return this.db.Ih().Va(t,e)},rI.prototype.yh=iI,rI.prototype.gh=function(t,r){var i,t=zE(t),o=tw.ai;return t.rs({index:DE.documentTargetsIndex},function(t,e){var n=t[0],t=(t[1],e.path),e=e.sequenceNumber;0===n?(o!==tw.ai&&r(new Iy(Bw(i)),o),o=e,i=t):o=tw.ai}).next(function(){o!==tw.ai&&r(new Iy(Bw(i)),o)})},rI.prototype.So=function(t){return this.db.mh().aa(t)},rI);function rI(t,e){this.db=t,this.wo=new Fw(this,e)}function iI(t,e){return zE(t).put((t=t.Fa,new DE(0,Vw(e.path),t)))}function oI(t,e){var n=t.projectId;return t.I||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var sI=(aI.prototype.mo=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.vo(t,n.bh)})},aI);function aI(t,e,n){this.persistence=t,this.ph=e,this.bh=new Gy(Jv),this.Sh=new gy(My,Fy),this.Dh=by.min(),this.Sr=t.Th(n),this.Ch=t.mh(),this.ja=t.Ih(),this.Nh=new vw(this.Ch,this.Sr,this.persistence.Ah()),this.ph.xh(this.Nh)}function uI(t,h){var l=t;return l.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e,r,i,o,s,n,a,u=h.batch.keys(),c=l.Ch.ra({oa:!0});return e=l,r=t,o=c,s=(i=h).batch,n=s.keys(),a=w_.resolve(),n.forEach(function(n){a=a.next(function(){return o.Rr(r,n)}).next(function(t){var e=t,t=i.dr.get(n);Qv(null!==t),(!e||e.version.h(t)<0)&&(e=s.hr(n,e,i))&&o.Ir(e,i._r)})}),a.next(function(){return e.Sr.Qo(r,s)}).next(function(){return c.apply(t)}).next(function(){return l.Sr.zo(t)}).next(function(){return l.Nh.Or(t,u)})})}function cI(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.ja.Ia(t)})}function hI(t,u){var c=t,h=u.nt,l=c.bh;return c.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var i=c.Ch.ra({oa:!0});l=c.bh;var a=[];u.zt.forEach(function(t,e){var n,r,i,o=l.get(e);o&&(a.push(c.ja.Ca(s,t.se,e).next(function(){return c.ja.Sa(s,t.ee,e)})),0<(i=t.resumeToken).o()&&(n=o.it(i,h).st(s.Fa),l=l.ot(e,n),r=o,i=t,Qv(0<(o=n).resumeToken.o()),(0===r.resumeToken.o()||3e8<=o.nt.p()-r.nt.p()||0<i.ee.size+i.ne.size+i.se.size)&&a.push(c.ja.Va(s,n))))});var t,o=tg,n=sg();return u.Jt.forEach(function(t,e){n=n.add(t)}),a.push(i.getEntries(s,n).next(function(r){u.Jt.forEach(function(t,e){var n=r.get(t);e instanceof bb&&e.version.isEqual(by.min())?(i.Ar(t,h),o=o.ot(t,e)):null==n||0<e.version.h(n.version)||0===e.version.h(n.version)&&n.hasPendingWrites?(i.Ir(e,h),o=o.ot(t,e)):Wv("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),u.Yt.has(t)&&a.push(c.persistence.No.yh(s,t))})})),h.isEqual(by.min())||(t=c.ja.Ia(s).next(function(t){return c.ja.Aa(s,s.Fa,h)}),a.push(t)),w_.kn(a).next(function(){return i.apply(s)}).next(function(){return c.Nh.Mr(s,o)})}).then(function(t){return c.bh=l,t})}function lI(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.ja.va(e,r).next(function(t){return t?(n=t,w_.resolve(n)):i.ja.wa(e).next(function(t){return n=new qy(r,t,0,e.Fa),i.ja.Ra(e,n).next(function(){return n})})})}).then(function(t){var e=i.bh.get(t.targetId);return(null===e||0<t.nt.h(e.nt))&&(i.bh=i.bh.ot(t.targetId,t),i.Sh.set(r,t.targetId)),t})}function fI(i,o,s){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:n=(e=i).bh.get(o),r=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.No.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!O_(r=t.sent()))throw r;return Wv("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.bh=e.bh.remove(o),e.Sh.delete(n.target),[2]}})})}function pI(t,o,s){var a=t,u=by.min(),c=sg();return a.persistence.runTransaction("Execute query","readonly",function(e){return t=a,n=e,r=Rb(o),(void 0!==(t=(i=t).Sh.get(r))?w_.resolve(i.bh.get(t)):i.ja.va(n,r)).next(function(t){if(t)return u=t.lastLimboFreeSnapshotVersion,a.ja.xa(e,t.targetId).next(function(t){c=t})}).next(function(){return a.ph.Lr(e,o,s?u:by.min(),s?c:sg())}).next(function(t){return{documents:t,Fh:c}});var t,n,r,i})}function dI(t,e){var n=t,r=n.ja,t=n.bh.get(e);return t?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Ue(t,e).next(function(t){return t?t.target:null})})}function vI(t){var s=t;return s.persistence.runTransaction("Get new document changes","readonly",function(t){return e=s.Ch,n=t,t=s.Dh,r=e,i=tg,o=Kw(t),t=fE(n),n=IDBKeyRange.lowerBound(o,!0),t.rs({index:kE.readTimeIndex,range:n},function(t,e){var n=Hw(r.serializer,e);i=i.ot(n.key,n),o=e.readTime}).next(function(){return{kh:i,readTime:zw(o)}});var e,n,r,i,o}).then(function(t){var e=t.kh,t=t.readTime;return s.Dh=t,e})}function yI(n){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){return[2,(e=n).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return t=fE(t),r=by.min(),t.rs({index:kE.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=zw(e.readTime)),n.done()}).next(function(){return r});var r}).then(function(t){e.Dh=t})]})})}function gI(e){return bo(this,void 0,void 0,function(){return _o(this,function(t){if(e.code!==Uv.FAILED_PRECONDITION||e.message!==dw)throw e;return Wv("LocalStore","Unexpectedly lost primary lease"),[2]})})}function mI(t,e){this.user=e,this.type="OAuth",this.Gh={},this.Gh.Authorization="Bearer "+t}function bI(t,e,n,r,i){var o=this;this.Gc=t,this.zc=e,this.hs=n,this.Hc={},this.Jc=[],this.Yc=new Map,this.Xc=new Set,this.Zc=[],this.tu=i,this.tu.eu(function(t){n.ws(function(){return bo(o,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return ZI(this)?(Wv("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return(e=n).Xc.add(4),[4,GI(e)];case 1:return t.sent(),e.nu.set("Unknown"),e.Xc.delete(4),[4,HI(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.nu=new DI(n,r)}var _I,wI,EI,II=(WI.prototype.P=function(){return this.Oh.P()},WI.prototype.Da=function(t,e){e=new TI(t,e);this.Oh=this.Oh.add(e),this.$h=this.$h.add(e)},WI.prototype.Bh=function(t,e){var n=this;t.forEach(function(t){return n.Da(t,e)})},WI.prototype.Na=function(t,e){this.qh(new TI(t,e))},WI.prototype.Uh=function(t,e){var n=this;t.forEach(function(t){return n.Na(t,e)})},WI.prototype.Kh=function(t){var e=this,n=new Iy(new _y([])),r=new TI(n,t),t=new TI(n,t+1),i=[];return this.$h.xt([r,t],function(t){e.qh(t),i.push(t.key)}),i},WI.prototype.Qh=function(){var e=this;this.Oh.forEach(function(t){return e.qh(t)})},WI.prototype.qh=function(t){this.Oh=this.Oh.delete(t),this.$h=this.$h.delete(t)},WI.prototype.Wh=function(t){var e=new Iy(new _y([])),n=new TI(e,t),t=new TI(e,t+1),r=sg();return this.$h.xt([n,t],function(t){r=r.add(t.key)}),r},WI.prototype.Ho=function(t){var e=new TI(t,0),e=this.Oh.kt(e);return null!==e&&t.isEqual(e.key)},WI),TI=(BI.Mh=function(t,e){return Iy.D(t.key,e.key)||Jv(t.jh,e.jh)},BI.Lh=function(t,e){return Jv(t.jh,e.jh)||Iy.D(t.key,e.key)},BI),SI=(qI.prototype.getToken=function(){return Promise.resolve(null)},qI.prototype.Hh=function(){},qI.prototype.Jh=function(t){(this.zh=t)(J_.UNAUTHENTICATED)},qI.prototype.Yh=function(){this.zh=null},qI),CI=(VI.prototype.getToken=function(){var e=this,n=this.tc,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.tc!==n?(Wv("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(Qv("string"==typeof t.accessToken),new mI(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},VI.prototype.Hh=function(){this.forceRefresh=!0},VI.prototype.Jh=function(t){this.zh=t,this.Zh&&t(this.currentUser)},VI.prototype.Yh=function(){this.auth&&this.auth.removeAuthTokenListener(this.Xh),this.Xh=null,this.zh=null},VI.prototype.ec=function(){var t=this.auth&&this.auth.getUid();return Qv(null===t||"string"==typeof t),new J_(t)},VI),NI=(Object.defineProperty(jI.prototype,"Gh",{get:function(){var t={"X-Goog-AuthUser":this.sc},e=this.nc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),jI),AI=(UI.prototype.getToken=function(){return Promise.resolve(new NI(this.nc,this.sc))},UI.prototype.Jh=function(t){t(J_.ni)},UI.prototype.Yh=function(){},UI.prototype.Hh=function(){},UI),K=(FI.prototype.cc=function(){return 1===this.state||2===this.state||4===this.state},FI.prototype.uc=function(){return 2===this.state},FI.prototype.start=function(){3!==this.state?this.auth():this.lc()},FI.prototype.stop=function(){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return this.cc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},FI.prototype._c=function(){this.state=0,this.Vs.reset()},FI.prototype.fc=function(){var t=this;this.uc()&&null===this.hc&&(this.hc=this.fn.Vn(this.ic,6e4,function(){return t.dc()}))},FI.prototype.wc=function(t){this.Ec(),this.stream.send(t)},FI.prototype.dc=function(){return bo(this,void 0,void 0,function(){return _o(this,function(t){return this.uc()?[2,this.close(0)]:[2]})})},FI.prototype.Ec=function(){this.hc&&(this.hc.cancel(),this.hc=null)},FI.prototype.close=function(e,n){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return this.Ec(),this.Vs.cancel(),this.ac++,3!==e?this.Vs.reset():n&&n.code===Uv.RESOURCE_EXHAUSTED?(Hv(n.toString()),Hv("Using maximum backoff delay to prevent overloading the backend."),this.Vs.Rn()):n&&n.code===Uv.UNAUTHENTICATED&&this.oc.Hh(),null!==this.stream&&(this.Tc(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ic(n)];case 1:return t.sent(),[2]}})})},FI.prototype.Tc=function(){},FI.prototype.auth=function(){var n=this;this.state=1;var t=this.mc(this.ac),e=this.ac;this.oc.getToken().then(function(t){n.ac===e&&n.Ac(t)},function(e){t(function(){var t=new jv(Uv.UNKNOWN,"Fetching auth token failed: "+e.message);return n.Rc(t)})})},FI.prototype.Ac=function(t){var e=this,n=this.mc(this.ac);this.stream=this.Pc(t),this.stream.gc(function(){n(function(){return e.state=2,e.listener.gc()})}),this.stream.Ic(function(t){n(function(){return e.Rc(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},FI.prototype.lc=function(){var t=this;this.state=4,this.Vs.Pn(function(){return bo(t,void 0,void 0,function(){return _o(this,function(t){return this.state=0,this.start(),[2]})})})},FI.prototype.Rc=function(t){return Wv("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},FI.prototype.mc=function(e){var n=this;return function(t){n.fn.ws(function(){return n.ac===e?t():(Wv("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},FI),kI=(go(MI,EI=K),MI.prototype.Pc=function(t){return this.rc.Vc("Listen",t)},MI.prototype.onMessage=function(t){this.Vs.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(i=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===i?1:"REMOVE"===i?2:"CURRENT"===i?3:"RESET"===i?4:zv(),r=e.targetChange.targetIds||[],i=(o=e.targetChange.resumeToken,t.Ke?(Qv(void 0===o||"string"==typeof o),ty.fromBase64String(o||"")):(Qv(void 0===o||o instanceof Uint8Array),ty.fromUint8Array(o||new Uint8Array))),o=e.targetChange.cause,s=o&&(o=void 0===(s=o).code?Uv.UNKNOWN:Hy(s.code),new jv(o,s.message||"")),r=new vg(n,r,i,s||null)}else if("documentChange"in e){e.documentChange;var a=e.documentChange;a.document,a.document.name,a.document.updateTime;var i=rm(t,a.document.name),u=Zg(a.document.updateTime),s=new cb({mapValue:{fields:a.document.fields}}),u=new mb(i,u,s,{}),s=a.targetIds||[],a=a.removedTargetIds||[];r=new pg(s,a,u.key,u)}else if("documentDelete"in e){e.documentDelete;a=e.documentDelete;a.document;var u=rm(t,a.document),c=a.readTime?Zg(a.readTime):by.min(),c=new bb(u,c),a=a.removedTargetIds||[];r=new pg([],a,c.key,c)}else if("documentRemove"in e){e.documentRemove;c=e.documentRemove;c.document;var h=rm(t,c.document),c=c.removedTargetIds||[];r=new pg([],c,h,null)}else{if(!("filter"in e))return zv();e.filter;h=e.filter;h.targetId;e=h.count||0,e=new jy(e),h=h.targetId;r=new dg(h,e)}return r}(this.serializer,t),t=function(t){if(!("targetChange"in t))return by.min();t=t.targetChange;return(!t.targetIds||!t.targetIds.length)&&t.readTime?Zg(t.readTime):by.min()}(t);return this.listener.yc(e,t)},MI.prototype.bc=function(t){var e,n,r,i={};i.database=sm(this.serializer),i.addTarget=(e=this.serializer,(r=Uy(r=(n=t).target)?{documents:lm(e,r)}:{query:fm(e,r)}).targetId=n.targetId,0<n.resumeToken.o()&&(r.resumeToken=$g(e,n.resumeToken)),r);var o,t=(this.serializer,o=t,null==(t=function(){switch(o.et){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return zv()}}())?null:{"goog-listen-tags":t});t&&(i.labels=t),this.wc(i)},MI.prototype.vc=function(t){var e={};e.database=sm(this.serializer),e.removeTarget=t,this.wc(e)},MI),OI=(go(LI,wI=K),Object.defineProperty(LI.prototype,"Dc",{get:function(){return this.Sc},enumerable:!1,configurable:!0}),LI.prototype.start=function(){this.Sc=!1,this.lastStreamToken=void 0,wI.prototype.start.call(this)},LI.prototype.Tc=function(){this.Sc&&this.Cc([])},LI.prototype.Pc=function(t){return this.rc.Vc("Write",t)},LI.prototype.onMessage=function(t){if(Qv(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Sc){this.Vs.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(Qv(void 0!==r),n.map(function(t){return function(t,e){var n=t.updateTime?Zg(t.updateTime):Zg(e);n.isEqual(by.min())&&(n=Zg(e));e=null;return t.transformResults&&0<t.transformResults.length&&(e=t.transformResults),new Vm(n,e)}(t,r)})):[]),n=Zg(t.commitTime);return this.listener.Nc(n,e)}var n,r;return Qv(!t.writeResults||0===t.writeResults.length),this.Sc=!0,this.listener.xc()},LI.prototype.Fc=function(){var t={};t.database=sm(this.serializer),this.wc(t)},LI.prototype.Cc=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return cm(e.serializer,t)})};this.wc(t)},LI),PI=(go(xI,_I=function(){}),xI.prototype.Oc=function(){if(this.kc)throw new jv(Uv.FAILED_PRECONDITION,"The client has already been terminated.")},xI.prototype.Mc=function(e,n,r){var i=this;return this.Oc(),this.credentials.getToken().then(function(t){return i.rc.Mc(e,n,r,t)}).catch(function(t){throw t.code===Uv.UNAUTHENTICATED&&i.credentials.Hh(),t})},xI.prototype.$c=function(e,n,r){var i=this;return this.Oc(),this.credentials.getToken().then(function(t){return i.rc.$c(e,n,r,t)}).catch(function(t){throw t.code===Uv.UNAUTHENTICATED&&i.credentials.Hh(),t})},xI.prototype.terminate=function(){this.kc=!1},xI),DI=(RI.prototype.Uc=function(){var t=this;0===this.Lc&&(this.Kc("Unknown"),this.Bc=this.hs.Vn("online_state_timeout",1e4,function(){return t.Bc=null,t.Qc("Backend didn't respond within 10 seconds."),t.Kc("Offline"),Promise.resolve()}))},RI.prototype.Wc=function(t){"Online"===this.state?this.Kc("Unknown"):(this.Lc++,1<=this.Lc&&(this.jc(),this.Qc("Connection failed 1 times. Most recent error: "+t.toString()),this.Kc("Offline")))},RI.prototype.set=function(t){this.jc(),this.Lc=0,"Online"===t&&(this.qc=!1),this.Kc(t)},RI.prototype.Kc=function(t){t!==this.state&&(this.state=t,this.di(t))},RI.prototype.Qc=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.qc?(Hv(t),this.qc=!1):Wv("OnlineStateTracker",t)},RI.prototype.jc=function(){null!==this.Bc&&(this.Bc.cancel(),this.Bc=null)},RI);function RI(t,e){this.hs=t,this.di=e,this.state="Unknown",this.Lc=0,this.Bc=null,this.qc=!0}function xI(t,e,n){var r=this;return(r=_I.call(this)||this).credentials=t,r.rc=e,r.serializer=n,r.kc=!1,r}function LI(t,e,n,r,i){var o=this;return(o=wI.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.Sc=!1,o}function MI(t,e,n,r,i){var o=this;return(o=EI.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function FI(t,e,n,r,i,o){this.fn=t,this.ic=n,this.rc=r,this.oc=i,this.listener=o,this.state=0,this.ac=0,this.hc=null,this.stream=null,this.Vs=new __(t,e)}function UI(t,e){this.nc=t,this.sc=e}function jI(t,e){this.nc=t,this.sc=e,this.type="FirstParty",this.user=J_.ni}function VI(t){var e=this;this.Xh=null,this.currentUser=J_.UNAUTHENTICATED,this.Zh=!1,this.tc=0,this.zh=null,this.forceRefresh=!1,this.Xh=function(){e.tc++,e.currentUser=e.ec(),e.Zh=!0,e.zh&&e.zh(e.currentUser)},this.tc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.Xh):(this.Xh(null),t.get().then(function(t){e.auth=t,e.Xh&&e.auth.addAuthTokenListener(e.Xh)},function(){}))}function qI(){this.zh=null}function BI(t,e){this.key=t,this.jh=e}function WI(){this.Oh=new $y(TI.Mh),this.$h=new $y(TI.Lh)}function HI(r){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:if(!ZI(r))return[3,4];e=0,n=r.Zc,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function GI(r){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:e=0,n=r.Zc,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function KI(n){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return e=n,Wv("RemoteStore","RemoteStore shutting down."),e.Xc.add(5),[4,GI(e)];case 1:return t.sent(),e.tu.Di(),e.nu.set("Unknown"),[2]}})})}function zI(t,e){t.Yc.has(e.targetId)||(t.Yc.set(e.targetId,e),$I(t)?JI(t):uT(t).uc()&&XI(t,e))}function QI(t,e){var n=t,t=uT(n);n.Yc.delete(e),t.uc()&&YI(n,e),0===n.Yc.size&&(t.uc()?t.fc():ZI(n)&&n.nu.set("Unknown"))}function XI(t,e){t.su.me(e.targetId),uT(t).bc(e)}function YI(t,e){t.su.me(e),uT(t).vc(e)}function JI(e){e.su=new gg({qe:function(t){return e.Hc.qe(t)},Ue:function(t){return e.Yc.get(t)||null}}),uT(e).start(),e.nu.Uc()}function $I(t){return ZI(t)&&!uT(t).cc()&&0<t.Yc.size}function ZI(t){return 0===t.Xc.size}function tT(t){t.su=void 0}function eT(s,a,u){return bo(this,void 0,void 0,function(){var n,o;return _o(this,function(t){switch(t.label){case 0:if(s.nu.set("Online"),!(a instanceof vg&&2===a.state&&a.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return bo(this,void 0,void 0,function(){var e,n,r,i;return _o(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.Yc.has(i)?[4,o.Hc.iu(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.Yc.delete(i),o.su.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(s,a)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),Wv("RemoteStore","Failed to remove targets %s: %s ",a.targetIds.join(","),n),[4,nT(s,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(a instanceof pg?s.su.be(a):a instanceof dg?s.su.ke(a):s.su.De(a),u.isEqual(by.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,cI(s.Gc)];case 8:return o=t.sent(),0<=u.h(o)?[4,(i=u,(e=(r=s).su.$e(i)).zt.forEach(function(t,e){var n;0<t.resumeToken.o()&&((n=r.Yc.get(e))&&r.Yc.set(e,n.it(t.resumeToken,i)))}),e.Ht.forEach(function(t){var e=r.Yc.get(t);e&&(r.Yc.set(t,e.it(ty.u,e.nt)),YI(r,t),e=new qy(e.target,t,1,e.sequenceNumber),XI(r,e))}),r.Hc.ru(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return Wv("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,nT(s,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}function nT(n,r,i){return bo(this,void 0,void 0,function(){var e=this;return _o(this,function(t){switch(t.label){case 0:if(!O_(r))throw r;return n.Xc.add(1),[4,GI(n)];case 1:return t.sent(),n.nu.set("Offline"),i=i||function(){return cI(n.Gc)},n.hs.Cs(function(){return bo(e,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return Wv("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.Xc.delete(1),[4,HI(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function rT(e,n){return n().catch(function(t){return nT(e,t,n)})}function iT(u){return bo(this,void 0,void 0,function(){var i,o,s,a;return _o(this,function(t){switch(t.label){case 0:o=cT(i=u),s=0<i.Jc.length?i.Jc[i.Jc.length-1].batchId:-1,t.label=1;case 1:if(!(ZI(i)&&i.Jc.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(e=i.Gc,n=s,(r=e).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===n&&(n=-1),r.Sr.Bo(t,n)}))];case 3:return null===(a=t.sent())?(0===i.Jc.length&&o.fc(),[3,7]):(s=a.batchId,function(t,e){t.Jc.push(e);t=cT(t);t.uc()&&t.Dc&&t.Cc(e.mutations)}(i,a),[3,6]);case 4:return a=t.sent(),[4,nT(i,a)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return oT(i)&&sT(i),[2]}var e,n,r})})}function oT(t){return ZI(t)&&!cT(t).cc()&&0<t.Jc.length}function sT(t){cT(t).start()}function aT(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return e=n,r?(e.Xc.delete(2),[4,HI(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.Xc.add(2),[4,GI(e)]);case 3:t.sent(),e.nu.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}function uT(n){var t,e,r,i=this;return n.hu||(n.hu=(t=n.zc,e=n.hs,r={gc:function(n){return bo(this,void 0,void 0,function(){return _o(this,function(t){return n.Yc.forEach(function(t,e){XI(n,t)}),[2]})})}.bind(null,n),Ic:function(e,n){return bo(this,void 0,void 0,function(){return _o(this,function(t){return tT(e),$I(e)?(e.nu.Wc(n),JI(e)):e.nu.set("Unknown"),[2]})})}.bind(null,n),yc:eT.bind(null,n)},t.Oc(),new kI(e,t.rc,t.credentials,t.serializer,r)),n.Zc.push(function(e){return bo(i,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return e?(n.hu._c(),$I(n)?JI(n):n.nu.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.hu.stop()];case 2:t.sent(),tT(n),t.label=3;case 3:return[2]}})})})),n.hu}function cT(n){var t,e,r,i=this;return n.cu||(n.cu=(t=n.zc,e=n.hs,r={gc:function(e){return bo(this,void 0,void 0,function(){return _o(this,function(t){return cT(e).Fc(),[2]})})}.bind(null,n),Ic:function(e,n){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return n&&cT(e).Dc?[4,function(r,i){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return Wy(n=i.code)&&n!==Uv.ABORTED?(e=r.Jc.shift(),cT(r)._c(),[4,rT(r,function(){return r.Hc.au(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,iT(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return oT(e)&&sT(e),[2]}})})}.bind(null,n),xc:function(o){return bo(this,void 0,void 0,function(){var e,n,r,i;return _o(this,function(t){for(e=cT(o),n=0,r=o.Jc;n<r.length;n++)i=r[n],e.Cc(i.mutations);return[2]})})}.bind(null,n),Nc:function(r,i,o){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return e=r.Jc.shift(),n=pw.from(e,i,o),[4,rT(r,function(){return r.Hc.ou(n)})];case 1:return t.sent(),[4,iT(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.Oc(),new OI(e,t.rc,t.credentials,t.serializer,r)),n.Zc.push(function(e){return bo(i,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return e?(n.cu._c(),[4,iT(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.cu.stop()];case 3:t.sent(),0<n.Jc.length&&(Wv("RemoteStore","Stopping write stream with "+n.Jc.length+" pending writes"),n.Jc=[]),t.label=4;case 4:return[2]}})})})),n.cu}var hT=function(t){this.key=t},lT=function(t){this.key=t},fT=(Object.defineProperty(gT.prototype,"wu",{get:function(){return this.uu},enumerable:!1,configurable:!0}),gT.prototype.Eu=function(t,e){var s=this,a=e?e.Tu:new cg,u=(e||this).du,c=(e||this).Qt,h=u,l=!1,f=Nb(this.query)&&u.size===this.query.limit?u.last():null,p=Ab(this.query)&&u.size===this.query.limit?u.first():null;if(t.ut(function(t,e){var n=u.get(t),r=(r=e instanceof mb?e:null)&&(Vb(s.query,r)?r:null),i=!!n&&s.Qt.has(n.key),o=!!r&&(r.Ye||s.Qt.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(a.track({type:3,doc:r}),e=!0):s.Iu(n,r)||(a.track({type:2,doc:r}),e=!0,(f&&0<s.fu(r,f)||p&&s.fu(r,p)<0)&&(l=!0)):!n&&r?(a.track({type:0,doc:r}),e=!0):n&&!r&&(a.track({type:1,doc:n}),e=!0,(f||p)&&(l=!0)),e&&(c=r?(h=h.add(r),o?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),Nb(this.query)||Ab(this.query))for(;h.size>this.query.limit;){var n=Nb(this.query)?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);a.track({type:1,doc:n})}return{du:h,Tu:a,mu:l,Qt:c}},gT.prototype.Iu=function(t,e){return t.Ye&&e.hasCommittedMutations&&!e.Ye},gT.prototype.Vr=function(t,e,n){var o=this,r=this.du;this.du=t.du,this.Qt=t.Qt;var i=t.Tu.Ut();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.fu(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return zv()}}var r,i}),this.Au(n);var s=e?this.Ru():[],n=0===this._u.size&&this.te?1:0,e=n!==this.lu;return this.lu=n,0!==i.length||e?{snapshot:new hg(this.query,t.du,r,i,t.Qt,0==n,e,!1),Pu:s}:{Pu:s}},gT.prototype.Ks=function(t){return this.te&&"Offline"===t?(this.te=!1,this.Vr({du:this.du,Tu:new cg,Qt:this.Qt,mu:!1},!1)):{Pu:[]}},gT.prototype.gu=function(t){return!this.uu.has(t)&&!!this.du.has(t)&&!this.du.get(t).Ye},gT.prototype.Au=function(t){var e=this;t&&(t.ee.forEach(function(t){return e.uu=e.uu.add(t)}),t.ne.forEach(function(t){}),t.se.forEach(function(t){return e.uu=e.uu.delete(t)}),this.te=t.te)},gT.prototype.Ru=function(){var e=this;if(!this.te)return[];var n=this._u;this._u=sg(),this.du.forEach(function(t){e.gu(t.key)&&(e._u=e._u.add(t.key))});var r=[];return n.forEach(function(t){e._u.has(t)||r.push(new lT(t))}),this._u.forEach(function(t){n.has(t)||r.push(new hT(t))}),r},gT.prototype.Vu=function(t){this.uu=t.Fh,this._u=sg();t=this.Eu(t.documents);return this.Vr(t,!0)},gT.prototype.yu=function(){return hg.Gt(this.query,this.du,this.Qt,0===this.lu)},gT),pT=function(t,e,n){this.query=t,this.targetId=e,this.view=n},dT=function(t){this.key=t,this.pu=!1},vT=(Object.defineProperty(yT.prototype,"Uu",{get:function(){return!0===this.qu},enumerable:!1,configurable:!0}),yT);function yT(t,e,n,r,i,o){this.Gc=t,this.bu=e,this.vu=n,this.Su=r,this.currentUser=i,this.Du=o,this.Cu={},this.Nu=new gy(Ub,Fb),this.xu=new Map,this.Fu=[],this.ku=new Gy(Iy.D),this.Ou=new Map,this.Mu=new II,this.$u={},this.Lu=new Map,this.Bu=qE.da(),this.onlineState="Unknown",this.qu=void 0}function gT(t,e){this.query=t,this.uu=e,this.lu=null,this.te=!1,this._u=sg(),this.Qt=sg(),this.fu=qb(t),this.du=new ug(this.fu)}function mT(i,o,s,a){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return i.Ku=function(t,e,n){return function(r,i,o,s){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return(e=i.view.Eu(o)).mu?[4,pI(r.Gc,i.query,!1).then(function(t){t=t.documents;return i.view.Eu(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=s&&s.zt.get(i.targetId),n=i.view.Vr(e,r.Uu,n),[2,(CT(r,i.targetId,n.Pu),n.snapshot)]}})})}(i,t,e,n)},[4,pI(i.Gc,o,!0)];case 1:return n=t.sent(),r=new fT(o,n.Fh),e=r.Eu(n.documents),n=fg.Zt(s,a&&"Offline"!==i.onlineState),n=r.Vr(e,i.Uu,n),CT(i,s,n.Pu),r=new pT(o,s,r),[2,(i.Nu.set(o,r),i.xu.has(s)?i.xu.get(s).push(o):i.xu.set(s,[o]),n.snapshot)]}})})}function bT(r,i){return bo(this,void 0,void 0,function(){var n,e;return _o(this,function(t){switch(t.label){case 0:n=r,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,hI(n.Gc,i)];case 2:return e=t.sent(),i.zt.forEach(function(t,e){e=n.Ou.get(e);e&&(Qv(t.ee.size+t.ne.size+t.se.size<=1),0<t.ee.size?e.pu=!0:0<t.ne.size?Qv(e.pu):0<t.se.size&&(Qv(e.pu),e.pu=!1))}),[4,AT(n,e,i)];case 3:return t.sent(),[3,6];case 4:return[4,gI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}function _T(t,n,e){var r,t=t;(t.Uu&&0===e||!t.Uu&&1===e)&&(r=[],t.Nu.forEach(function(t,e){e=e.view.Ks(n);e.snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.Bs.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].Ks(i)&&(o=!0)}),o&&X_(t)}(t.vu,n),r.length&&t.Cu.yc(r),t.onlineState=n,t.Uu&&t.Su.ji(n))}function wT(s,a,u){return bo(this,void 0,void 0,function(){var n,o;return _o(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.Gc,r=a,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.Sr.$o(e,r).next(function(t){return Qv(null!==t),n=t.keys(),i.Sr.Qo(e,t)}).next(function(){return i.Sr.zo(e)}).next(function(){return i.Nh.Or(e,n)})}))];case 2:return o=t.sent(),IT(n,a,u),ET(n,a),n.Su.Oi(a,"rejected",u),[4,AT(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,gI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}function ET(t,e){(t.Lu.get(e)||[]).forEach(function(t){t.resolve()}),t.Lu.delete(e)}function IT(t,e,n){var r=t,i=r.$u[r.currentUser.ti()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.$u[r.currentUser.ti()]=i)}function TT(e,t,n){void 0===n&&(n=null),e.Su.Bi(t);for(var r=0,i=e.xu.get(t);r<i.length;r++){var o=i[r];e.Nu.delete(o),n&&e.Cu.Qu(o,n)}e.xu.delete(t),e.Uu&&e.Mu.Kh(t).forEach(function(t){e.Mu.Ho(t)||ST(e,t)})}function ST(t,e){var n=t.ku.get(e);null!==n&&(QI(t.bu,n),t.ku=t.ku.remove(e),t.Ou.delete(n),NT(t))}function CT(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof hT?(t.Mu.Da(o.key,e),function(t,e){e=e.key;t.ku.get(e)||(Wv("SyncEngine","New document in limbo: "+e),t.Fu.push(e),NT(t))}(t,o)):o instanceof lT?(Wv("SyncEngine","Document no longer in limbo: "+o.key),t.Mu.Na(o.key,e),t.Mu.Ho(o.key)||ST(t,o.key)):zv()}}function NT(t){for(;0<t.Fu.length&&t.ku.size<t.Du;){var e=t.Fu.shift(),n=t.Bu.next();t.Ou.set(n,new dT(e)),t.ku=t.ku.ot(e,n),zI(t.bu,new qy(Rb(Cb(e.path)),n,2,tw.ai))}}function AT(e,s,a){return bo(this,void 0,void 0,function(){var n,r,i,o;return _o(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).Nu.P()?[3,3]:(n.Nu.forEach(function(t,e){o.push(n.Ku(e,s,a).then(function(t){t&&(n.Uu&&n.Su.Ki(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=yw.zr(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.Cu.yc(r),[4,function(u,c){return bo(this,void 0,void 0,function(){var r,e,n,i,o,s,a;return _o(this,function(t){switch(t.label){case 0:r=u,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return w_.forEach(c,function(e){return w_.forEach(e.jr,function(t){return r.persistence.No.Da(n,e.targetId,t)}).next(function(){return w_.forEach(e.Gr,function(t){return r.persistence.No.Na(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!O_(e=t.sent()))throw e;return Wv("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=c;n<i.length;n++)a=i[n],o=a.targetId,a.fromCache||(s=r.bh.get(o),a=s.nt,a=s.rt(a),r.bh=r.bh.ot(o,a));return[2]}})})}(n.Gc,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function kT(i,o){return bo(this,void 0,void 0,function(){var n,r;return _o(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(Wv("SyncEngine","User change. New user:",o.ti()),[4,function(i,o){return bo(this,void 0,void 0,function(){var e,n,m,r;return _o(this,function(t){switch(t.label){case 0:return n=(e=i).Sr,m=e.Nh,[4,e.persistence.runTransaction("Handle user change","readonly",function(y){var g;return e.Sr.Uo(y).next(function(t){return g=t,n=e.persistence.Th(o),m=new vw(e.Ch,n,e.persistence.Ah()),n.Uo(y)}).next(function(t){for(var e=[],n=[],r=sg(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++)var c=u[a],r=r.add(c.key)}for(var h=0,l=t;h<l.length;h++){var f=l[h];n.push(f.batchId);for(var p=0,d=f.mutations;p<d.length;p++){var v=d[p];r=r.add(v.key)}}return m.Or(y,r).next(function(t){return{Wu:t,ju:e,Gu:n}})})})];case 1:return r=t.sent(),[2,(e.Sr=n,e.Nh=m,e.ph.xh(e.Nh),r)]}})})}(n.Gc,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Lu.forEach(function(t){t.forEach(function(t){t.reject(new jv(Uv.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Lu.clear(),n.Su.Wi(o,r.ju,r.Gu),[4,AT(n,r.Wu)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}function OT(a,u,c,h){return bo(this,void 0,void 0,function(){var o,s;return _o(this,function(t){switch(t.label){case 0:return[4,(e=(o=a).Gc,n=u,i=(r=e).Sr,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.Lo(e,n).next(function(t){return t?r.Nh.Or(e,t):w_.resolve(null)})}))];case 1:return null===(s=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,iT(o.bu)];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(IT(o,u,h||null),ET(o,u),o.Gc.Sr.jo(u)):zv(),t.label=4;case 4:return[4,AT(o,s)];case 5:return t.sent(),[3,7];case 6:Wv("SyncEngine","Cannot apply mutation batch with id: "+u),t.label=7;case 7:return[2]}var e,n,r,i})})}function PT(h,l){return bo(this,void 0,void 0,function(){var r,e,i,o,s,a,u,c;return _o(this,function(t){switch(t.label){case 0:return xT(r=h),LT(r),!0!==l||!0===r.qu?[3,3]:(e=r.Su.Ci(),[4,DT(r,e.L())]);case 1:return i=t.sent(),r.qu=!0,[4,aT(r.bu,!0)];case 2:for(t.sent(),o=0,s=i;o<s.length;o++)a=s[o],zI(r.bu,a);return[3,7];case 3:return!1!==l||!1===r.qu?[3,7]:(u=[],c=Promise.resolve(),r.xu.forEach(function(t,e){r.Su.qi(e)?u.push(e):c=c.then(function(){return TT(r,e),fI(r.Gc,e,!0)}),QI(r.bu,e)}),[4,c]);case 4:return t.sent(),[4,DT(r,u)];case 5:return t.sent(),(n=r).Ou.forEach(function(t,e){QI(n.bu,e)}),n.Mu.Qh(),n.Ou=new Map,n.ku=new Gy(Iy.D),r.qu=!1,[4,aT(r.bu,!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}function DT(p,d){return bo(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f;return _o(this,function(t){switch(t.label){case 0:e=p,n=[],r=[],i=0,o=d,t.label=1;case 1:return i<o.length?(s=o[i],a=void 0,(u=e.xu.get(s))&&0!==u.length?[4,lI(e.Gc,Rb(u[0]))]:[3,7]):[3,13];case 2:a=t.sent(),c=0,h=u,t.label=3;case 3:return c<h.length?(l=h[c],l=e.Nu.get(l),[4,function(r,i){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return[4,pI((e=r).Gc,i.query,!0)];case 1:return n=t.sent(),n=i.view.Vu(n),[2,(e.Uu&&CT(e,i.targetId,n.Pu),n)]}})})}(e,l)]):[3,6];case 4:(l=t.sent()).snapshot&&r.push(l.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,dI(e.Gc,s)];case 8:return f=t.sent(),[4,lI(e.Gc,f)];case 9:return a=t.sent(),[4,mT(e,RT(f),s,!1)];case 10:t.sent(),t.label=11;case 11:n.push(a),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.Cu.yc(r),n)]}})})}function RT(t){return Sb(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function xT(t){return t.bu.Hc.ru=bT.bind(null,t),t.bu.Hc.qe=function(t,e){var n=t;if((t=n.Ou.get(e))&&t.pu)return sg().add(t.key);var r=sg();if(!(e=n.xu.get(e)))return r;for(var i=0,o=e;i<o.length;i++)var s=o[i],s=n.Nu.get(s),r=r.Ot(s.view.wu);return r}.bind(null,t),t.bu.Hc.iu=function(o,s,a){return bo(this,void 0,void 0,function(){var e,n,r,i;return _o(this,function(t){switch(t.label){case 0:return(e=o).Su.Ki(s,"rejected",a),i=e.Ou.get(s),(n=i&&i.key)?(r=(r=new Gy(Iy.D)).ot(n,new bb(n,by.min())),i=sg().add(n),i=new lg(by.min(),new Map,new $y(Jv),r,i),[4,bT(e,i)]):[3,2];case 1:return t.sent(),e.ku=e.ku.remove(n),e.Ou.delete(s),NT(e),[3,4];case 2:return[4,fI(e.Gc,s,!1).then(function(){return TT(e,s,a)}).catch(gI)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,t),t.Cu.yc=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,a=n.Bs.get(a);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].Qs(s)&&(r=!0);a.Ls=s}}r&&X_(n)}.bind(null,t.vu),t.Cu.Qu=function(t,e,n){var r=t;if(t=r.Bs.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.Bs.delete(e)}.bind(null,t.vu),t}function LT(t){return t.bu.Hc.ou=function(i,o){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:e=i,n=o.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,uI(e.Gc,o)];case 2:return r=t.sent(),IT(e,n,null),ET(e,n),e.Su.Oi(n,"acknowledged"),[4,AT(e,r)];case 3:return t.sent(),[3,6];case 4:return[4,gI(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}.bind(null,t),t.bu.Hc.au=wT.bind(null,t),t}var MT,FT,UT,jT=(hS.prototype.xh=function(t){this.zu=t},hS.prototype.Lr=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.on.length||1===r.on.length&&r.on[0].field.W())||i.isEqual(by.min())?this.Hu(e,r):this.zu.Or(e,o).next(function(t){var n=s.Ju(r,t);return(Nb(r)||Ab(r))&&s.mu(r.an,n,o,i)?s.Hu(e,r):(Bv()<=Ns.DEBUG&&Wv("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jb(r)),s.zu.Lr(e,r,i).next(function(e){return n.forEach(function(t){e=e.ot(t.key,t)}),e}))})},hS.prototype.Ju=function(n,t){var r=new $y(qb(n));return t.forEach(function(t,e){e instanceof mb&&Vb(n,e)&&(r=r.add(e))}),r},hS.prototype.mu=function(t,e,n,r){if(n.size!==e.size)return!0;e="F"===t?e.last():e.first();return!!e&&(e.hasPendingWrites||0<e.version.h(r))},hS.prototype.Hu=function(t,e){return Bv()<=Ns.DEBUG&&Wv("IndexFreeQueryEngine","Using full collection scan to execute query:",jb(e)),this.zu.Lr(t,e,by.min())},hS),VT=(cS.prototype.ko=function(t){return w_.resolve(0===this.Sr.length)},cS.prototype.Oo=function(t,e,n,r){var i=this.Yu;this.Yu++,0<this.Sr.length&&this.Sr[this.Sr.length-1];n=new fw(i,e,n,r);this.Sr.push(n);for(var o=0,s=r;o<s.length;o++){var a=s[o];this.Xu=this.Xu.add(new TI(a.key,i)),this.Dr.Mo(t,a.key.path.F())}return w_.resolve(n)},cS.prototype.$o=function(t,e){return w_.resolve(this.Zu(e))},cS.prototype.Bo=function(t,e){e+=1,e=this.tl(e),e=e<0?0:e;return w_.resolve(this.Sr.length>e?this.Sr[e]:null)},cS.prototype.qo=function(){return w_.resolve(0===this.Sr.length?-1:this.Yu-1)},cS.prototype.Uo=function(t){return w_.resolve(this.Sr.slice())},cS.prototype.Nr=function(t,e){var n=this,r=new TI(e,0),e=new TI(e,Number.POSITIVE_INFINITY),i=[];return this.Xu.xt([r,e],function(t){t=n.Zu(t.jh);i.push(t)}),w_.resolve(i)},cS.prototype.$r=function(t,e){var n=this,r=new $y(Jv);return e.forEach(function(t){var e=new TI(t,0),t=new TI(t,Number.POSITIVE_INFINITY);n.Xu.xt([e,t],function(t){r=r.add(t.jh)})}),w_.resolve(this.el(r))},cS.prototype.Qr=function(t,e){var n=e.path,r=n.length+1,e=n;Iy.X(e)||(e=e.child(""));var e=new TI(new Iy(e),0),i=new $y(Jv);return this.Xu.Ft(function(t){var e=t.key.path;return!!n.M(e)&&(e.length===r&&(i=i.add(t.jh)),!0)},e),w_.resolve(this.el(i))},cS.prototype.el=function(t){var e=this,n=[];return t.forEach(function(t){t=e.Zu(t);null!==t&&n.push(t)}),n},cS.prototype.Qo=function(n,r){var i=this;Qv(0===this.nl(r.batchId,"removed")),this.Sr.shift();var o=this.Xu;return w_.forEach(r.mutations,function(t){var e=new TI(t.key,r.batchId);return o=o.delete(e),i.No.Go(n,t.key)}).next(function(){i.Xu=o})},cS.prototype.jo=function(t){},cS.prototype.Ho=function(t,e){var n=new TI(e,0),n=this.Xu.kt(n);return w_.resolve(e.isEqual(n&&n.key))},cS.prototype.zo=function(t){return this.Sr.length,w_.resolve()},cS.prototype.nl=function(t,e){return this.tl(t)},cS.prototype.tl=function(t){return 0===this.Sr.length?0:t-this.Sr[0].batchId},cS.prototype.Zu=function(t){t=this.tl(t);return t<0||t>=this.Sr.length?null:this.Sr[t]},cS),qT=(uS.prototype.Ir=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,i=this.sl(e);return this.docs=this.docs.ot(r,{ta:e,size:i,readTime:n}),this.size+=i-o,this.Dr.Mo(t,r.path.F())},uS.prototype.Ar=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},uS.prototype.Rr=function(t,e){e=this.docs.get(e);return w_.resolve(e?e.ta:null)},uS.prototype.getEntries=function(t,e){var n=this,r=tg;return e.forEach(function(t){var e=n.docs.get(t);r=r.ot(t,e?e.ta:null)}),w_.resolve(r)},uS.prototype.Lr=function(t,e,n){for(var r=rg,i=new Iy(e.path.child("")),o=this.docs.ft(i);o.At();){var s=o.It(),a=s.key,u=s.value,s=u.ta,u=u.readTime;if(!e.path.M(a.path))break;u.h(n)<=0||s instanceof mb&&Vb(e,s)&&(r=r.ot(s.key,s))}return w_.resolve(r)},uS.prototype.il=function(t,e){return w_.forEach(this.docs,function(t){return e(t)})},uS.prototype.ra=function(t){return new BT(this)},uS.prototype.aa=function(t){return w_.resolve(this.size)},uS),BT=(go(aS,UT=Rr),aS.prototype.Vr=function(n){var r=this,i=[];return this.wr.forEach(function(t,e){e?i.push(r.ha.Ir(n,e,r.readTime)):r.ha.Ar(t)}),w_.kn(i)},aS.prototype.Pr=function(t,e){return this.ha.Rr(t,e)},aS.prototype.gr=function(t,e){return this.ha.getEntries(t,e)},aS),WT=(sS.prototype.Ce=function(t,n){return this.rl.forEach(function(t,e){return n(e)}),w_.resolve()},sS.prototype.Ia=function(t){return w_.resolve(this.lastRemoteSnapshotVersion)},sS.prototype.ma=function(t){return w_.resolve(this.ol)},sS.prototype.wa=function(t){return this.highestTargetId=this.hl.next(),w_.resolve(this.highestTargetId)},sS.prototype.Aa=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ol&&(this.ol=e),w_.resolve()},sS.prototype.Pa=function(t){this.rl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.hl=new qE(e),this.highestTargetId=e),t.sequenceNumber>this.ol&&(this.ol=t.sequenceNumber)},sS.prototype.Ra=function(t,e){return this.Pa(e),this.targetCount+=1,w_.resolve()},sS.prototype.Va=function(t,e){return this.Pa(e),w_.resolve()},sS.prototype.ya=function(t,e){return this.rl.delete(e.target),this.al.Kh(e.targetId),--this.targetCount,w_.resolve()},sS.prototype.po=function(n,r,i){var o=this,s=0,a=[];return this.rl.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.rl.delete(t),a.push(o.pa(n,e.targetId)),s++)}),w_.kn(a).next(function(){return s})},sS.prototype.ba=function(t){return w_.resolve(this.targetCount)},sS.prototype.va=function(t,e){e=this.rl.get(e)||null;return w_.resolve(e)},sS.prototype.Sa=function(t,e,n){return this.al.Bh(e,n),w_.resolve()},sS.prototype.Ca=function(e,t,n){this.al.Uh(t,n);var r=this.persistence.No,i=[];return r&&t.forEach(function(t){i.push(r.Go(e,t))}),w_.kn(i)},sS.prototype.pa=function(t,e){return this.al.Kh(e),w_.resolve()},sS.prototype.xa=function(t,e){e=this.al.Wh(e);return w_.resolve(e)},sS.prototype.Ho=function(t,e){return w_.resolve(this.al.Ho(e))},sS),HT=(oS.prototype.start=function(){return Promise.resolve()},oS.prototype.Di=function(){return this.$a=!1,Promise.resolve()},Object.defineProperty(oS.prototype,"Ii",{get:function(){return this.$a},enumerable:!1,configurable:!0}),oS.prototype.Za=function(){},oS.prototype.th=function(){},oS.prototype.Ah=function(){return this.Dr},oS.prototype.Th=function(t){var e=this.cl[t.ti()];return e||(e=new VT(this.Dr,this.No),this.cl[t.ti()]=e),e},oS.prototype.Ih=function(){return this.ja},oS.prototype.mh=function(){return this.vr},oS.prototype.runTransaction=function(t,e,n){var r=this;Wv("MemoryPersistence","Starting transaction:",t);var i=new GT(this.Ma.next());return this.No.ll(),n(i).next(function(t){return r.No._l(i).next(function(){return t})}).xn().then(function(t){return i.br(),t})},oS.prototype.fl=function(e,n){return w_.On(Object.values(this.cl).map(function(t){return function(){return t.Ho(e,n)}}))},oS),GT=(go(iS,FT=M),iS),KT=(rS.El=function(t){return new rS(t)},Object.defineProperty(rS.prototype,"Tl",{get:function(){if(this.wl)return this.wl;throw zv()},enumerable:!1,configurable:!0}),rS.prototype.Da=function(t,e,n){return this.dl.Da(n,e),this.Tl.delete(n.toString()),w_.resolve()},rS.prototype.Na=function(t,e,n){return this.dl.Na(n,e),this.Tl.add(n.toString()),w_.resolve()},rS.prototype.Go=function(t,e){return this.Tl.add(e.toString()),w_.resolve()},rS.prototype.removeTarget=function(t,e){var n=this;this.dl.Kh(e.targetId).forEach(function(t){return n.Tl.add(t.toString())});var r=this.persistence.Ih();return r.xa(t,e.targetId).next(function(t){t.forEach(function(t){return n.Tl.add(t.toString())})}).next(function(){return r.ya(t,e)})},rS.prototype.ll=function(){this.wl=new Set},rS.prototype._l=function(n){var r=this,i=this.persistence.mh().ra();return w_.forEach(this.Tl,function(t){var e=Iy.H(t);return r.Il(n,e).next(function(t){t||i.Ar(e)})}).next(function(){return r.wl=null,i.apply(n)})},rS.prototype.yh=function(t,e){var n=this;return this.Il(t,e).next(function(t){t?n.Tl.delete(e.toString()):n.Tl.add(e.toString())})},rS.prototype.ul=function(t){return 0},rS.prototype.Il=function(t,e){var n=this;return w_.On([function(){return w_.resolve(n.dl.Ho(e))},function(){return n.persistence.Ih().Ho(t,e)},function(){return n.persistence.fl(t,e)}])},rS),zT=(nS.prototype.gc=function(t){this.Rl=t},nS.prototype.Ic=function(t){this.Pl=t},nS.prototype.onMessage=function(t){this.gl=t},nS.prototype.close=function(){this.Al()},nS.prototype.send=function(t){this.ml(t)},nS.prototype.Vl=function(){this.Rl()},nS.prototype.yl=function(t){this.Pl(t)},nS.prototype.pl=function(t){this.gl(t)},nS),QT={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},XT=(eS.prototype.Mc=function(e,t,n,r){var i=this.Dl(e,t);Wv("RestConnection","Sending: ",i,n);t={};return this.Cl(t,r),this.Nl(e,i,t,n).then(function(t){return Wv("RestConnection","Received: ",t),t},function(t){throw Gv("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},eS.prototype.$c=function(t,e,n,r){return this.Mc(t,e,n,r)},eS.prototype.Cl=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.0.0",t["Content-Type"]="text/plain",e)for(var n in e.Gh)e.Gh.hasOwnProperty(n)&&(t[n]=e.Gh[n])},eS.prototype.Dl=function(t,e){t=QT[t];return this.vl+"/v1/"+e+":"+t},go(tS,MT=eS),tS.prototype.Nl=function(o,e,s,a){return new Promise(function(n,r){var i=new Fv;i.listenOnce(Lv.COMPLETE,function(){try{switch(i.getLastErrorCode()){case xv.NO_ERROR:var t=i.getResponseJson();Wv("Connection","XHR received:",JSON.stringify(t)),n(t);break;case xv.TIMEOUT:Wv("Connection",'RPC "'+o+'" timed out'),r(new jv(Uv.DEADLINE_EXCEEDED,"Request time out"));break;case xv.HTTP_ERROR:var e=i.getStatus();Wv("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace("_","-"),e=0<=Object.values(Uv).indexOf(e)?e:Uv.UNKNOWN,r(new jv(e,t.message))):r(new jv(Uv.UNKNOWN,"Server responded with status "+i.getStatus())):r(new jv(Uv.UNAVAILABLE,"Connection failed."));break;default:zv()}}finally{Wv("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(a);i.send(e,"POST",t,s,15)})},tS.prototype.Vc=function(t,e){var n=[this.vl,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new Av,t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this._.projectId+"/databases/"+this._.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.T};this.Cl(t.initMessageHeaders,e),Mo()||Uo()||0<=Lo().indexOf("Electron/")||(0<=(e=Lo()).indexOf("MSIE ")||0<=e.indexOf("Trident/"))||0<=Lo().indexOf("MSAppHost/")||Fo()||(t.httpHeadersOverwriteParam="$httpHeaders");n=n.join("");Wv("Connection","Creating WebChannel: "+n,t);var o=r.createWebChannel(n,t),i=!1,s=!1,a=new zT({ml:function(t){s?Wv("Connection","Not sending because WebChannel is closed:",t):(i||(Wv("Connection","Opening WebChannel transport."),o.open(),i=!0),Wv("Connection","WebChannel sending:",t),o.send(t))},Al:function(){return o.close()}}),t=function(t,e){o.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})};return t(Mv.EventType.OPEN,function(){s||Wv("Connection","WebChannel transport opened.")}),t(Mv.EventType.CLOSE,function(){s||(s=!0,Wv("Connection","WebChannel transport closed"),a.yl())}),t(Mv.EventType.ERROR,function(t){s||(s=!0,Gv("Connection","WebChannel transport errored:",t),a.yl(new jv(Uv.UNAVAILABLE,"The operation could not be completed")))}),t(Mv.EventType.MESSAGE,function(t){var e,n,r,i;s||(Qv(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(Wv("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=Vy[r];if(void 0!==t)return Hy(t)}(),i=n.message,void 0===t&&(t=Uv.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),s=!0,a.yl(new jv(t,i)),o.close()):(Wv("Connection","WebChannel received:",e),a.pl(e)))}),setTimeout(function(){a.Vl()},0),a},tS),YT=(ZT.prototype.eu=function(t){this.Ml.push(t)},ZT.prototype.Di=function(){window.removeEventListener("online",this.xl),window.removeEventListener("offline",this.kl)},ZT.prototype.$l=function(){window.addEventListener("online",this.xl),window.addEventListener("offline",this.kl)},ZT.prototype.Fl=function(){Wv("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(0)},ZT.prototype.Ol=function(){Wv("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ml;t<e.length;t++)(0,e[t])(1)},ZT.Ln=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},ZT),JT=($T.prototype.eu=function(t){},$T.prototype.Di=function(){},$T);function $T(){}function ZT(){var t=this;this.xl=function(){return t.Fl()},this.kl=function(){return t.Ol()},this.Ml=[],this.$l()}function tS(t){var e=this;return(e=MT.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.T=t.T,e}function eS(t){this.bl=t,this._=t._;var e=t.ssl?"https":"http";this.vl=e+"://"+t.host,this.Sl="projects/"+this._.projectId+"/databases/"+this._.database+"/documents"}function nS(t){this.ml=t.ml,this.Al=t.Al}function rS(t){this.persistence=t,this.dl=new II,this.wl=null}function iS(t){var e=this;return(e=FT.call(this)||this).Fa=t,e}function oS(t){var e=this;this.cl={},this.Ma=new tw(0),this.$a=!1,this.$a=!0,this.No=t(this),this.ja=new WT(this),this.Dr=new vE,this.vr=(t=this.Dr,new qT(t,function(t){return e.No.ul(t)}))}function sS(t){this.persistence=t,this.rl=new gy(My,Fy),this.lastRemoteSnapshotVersion=by.min(),this.highestTargetId=0,this.ol=0,this.al=new II,this.targetCount=0,this.hl=qE.fa()}function aS(t){var e=this;return(e=UT.call(this)||this).ha=t,e}function uS(t,e){this.Dr=t,this.sl=e,this.docs=new Gy(Iy.D),this.size=0}function cS(t,e){this.Dr=t,this.No=e,this.Sr=[],this.Yu=1,this.Xu=new $y(TI.Mh)}function hS(){}function lS(t){return new zg(t,!0)}var fS,pS,dS=(IS.prototype.initialize=function(e){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return this.Su=this.Ll(e),this.persistence=this.Bl(e),[4,this.persistence.start()];case 1:return t.sent(),this.ql=this.Ul(e),this.Gc=this.Kl(e),[2]}})})},IS.prototype.Ul=function(t){return null},IS.prototype.Kl=function(t){return e=this.persistence,n=new jT,t=t.Ql,new sI(e,n,t);var e,n},IS.prototype.Bl=function(t){return new HT(KT.El)},IS.prototype.Ll=function(t){return new lw},IS.prototype.terminate=function(){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return this.ql&&this.ql.stop(),[4,this.Su.Di()];case 1:return t.sent(),[4,this.persistence.Di()];case 2:return t.sent(),[2]}})})},IS),vS=(go(ES,pS=dS),ES.prototype.initialize=function(e){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return[4,pS.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,yI(this.Gc)];case 2:return t.sent(),[4,this.Wl.initialize(this,e)];case 3:return t.sent(),[4,LT(this.Wl.fi)];case 4:return t.sent(),[4,iT(this.Wl.bu)];case 5:return t.sent(),[2]}})})},ES.prototype.Ul=function(t){var e=this.persistence.No.wo;return new Mw(e,t.hs)},ES.prototype.Bl=function(t){var e=oI(t.bl._,t.bl.persistenceKey),n=void 0!==this.cacheSizeBytes?Rw.ao(this.cacheSizeBytes):Rw.fo,r=lS(t.bl._);return new JE(this.synchronizeTabs,e,t.clientId,n,t.hs,U_(),j_(),r,this.Su,!!this.forceOwnership)},ES.prototype.Ll=function(t){return new lw},ES),yS=(go(wS,fS=vS),wS.prototype.initialize=function(r){return bo(this,void 0,void 0,function(){var e,n=this;return _o(this,function(t){switch(t.label){case 0:return[4,fS.prototype.initialize.call(this,r)];case 1:return t.sent(),e=this.Wl.fi,this.Su instanceof hw?(this.Su.fi={er:OT.bind(null,e),nr:function(i,o,s,a){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return(e=i).qu?(Wv("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!e.xu.has(o))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,vI(e.Gc)];case 3:return n=t.sent(),r=lg.Xt(o,"current"===s),[4,AT(e,n,r)];case 4:return t.sent(),[3,8];case 5:return[4,fI(e.Gc,o,!0)];case 6:return t.sent(),TT(e,o,a),[3,8];case 7:zv(),t.label=8;case 8:return[2]}})})}.bind(null,e),sr:function(c,h,l){return bo(this,void 0,void 0,function(){var n,e,r,i,o,s,a,u;return _o(this,function(t){switch(t.label){case 0:if(!(n=xT(c)).qu)return[3,10];e=0,r=h,t.label=1;case 1:return e<r.length?(r=r[e],n.xu.has(r)?(Wv("SyncEngine","Adding an already active target "+r),[3,5]):[4,dI(n.Gc,r)]):[3,6];case 2:return i=t.sent(),[4,lI(n.Gc,i)];case 3:return o=t.sent(),[4,mT(n,RT(i),o.targetId,!1)];case 4:t.sent(),zI(n.bu,o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return _o(this,function(t){switch(t.label){case 0:return n.xu.has(e)?[4,fI(n.Gc,e,!1).then(function(){QI(n.bu,e),TT(n,e)}).catch(gI)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},a=0,u=l,t.label=7;case 7:return a<u.length?(u=u[a],[5,s(u)]):[3,10];case 8:t.sent(),t.label=9;case 9:return a++,[3,7];case 10:return[2]}})})}.bind(null,e),pi:function(t){return t.Gc.persistence.pi()}.bind(null,e)},[4,this.Su.start()]):[3,3];case 2:t.sent(),t.label=3;case 3:return[4,this.persistence.Xa(function(e){return bo(n,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return[4,PT(this.Wl.fi,e)];case 1:return t.sent(),this.ql&&(e&&!this.ql.Ii?this.ql.start(this.Gc):e||this.ql.stop()),[2]}})})})];case 4:return t.sent(),[2]}})})},wS.prototype.Ll=function(t){var e=U_();if(!hw.Ln(e))throw new jv(Uv.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=oI(t.bl._,t.bl.persistenceKey);return new hw(e,t.hs,n,t.clientId,t.Ql)},wS),gS=(_S.prototype.initialize=function(n,r){return bo(this,void 0,void 0,function(){var e=this;return _o(this,function(t){switch(t.label){case 0:return this.Gc?[3,2]:(this.Gc=n.Gc,this.Su=n.Su,this.zc=this.jl(r),this.bu=this.Gl(r),this.vu=this.zl(r),this.fi=this.Hl(r,!n.synchronizeTabs),this.Su.di=function(t){return _T(e.fi,t,1)},this.bu.Hc.Jl=kT.bind(null,this.fi),[4,aT(this.bu,this.fi.Uu)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},_S.prototype.zl=function(t){return new K_},_S.prototype.jl=function(t){var e=lS(t.bl._),n=(n=t.bl,new XT(n));return t=t.credentials,new PI(t,n,e)},_S.prototype.Gl=function(t){var e=this,n=this.Gc,r=this.zc,i=t.hs,o=function(t){return _T(e.fi,t,0)},t=new(YT.Ln()?YT:JT);return new bI(n,r,i,o,t)},_S.prototype.Hl=function(t,e){return function(t,e,n,r,i,o,s){o=new vT(t,e,n,r,i,o);return s&&(o.qu=!0),o}(this.Gc,this.bu,this.vu,this.Su,t.Ql,t.Du,e)},_S.prototype.terminate=function(){return KI(this.bu)},_S),mS=(bS.prototype.next=function(t){this.observer.next&&this.Yl(this.observer.next,t)},bS.prototype.error=function(t){this.observer.error?this.Yl(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},bS.prototype.Xl=function(){this.muted=!0},bS.prototype.Yl=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},bS);function bS(t){this.observer=t,this.muted=!1}function _S(){}function wS(t,e){var n=this;return(n=fS.call(this,t,e,!1)||this).Wl=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function ES(t,e,n){var r=this;return(r=pS.call(this)||this).Wl=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function IS(){this.synchronizeTabs=!1}function TS(t,e,n){if(!n)throw new jv(Uv.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function SS(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new jv(Uv.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function CS(t,e,n,r){if(!0===e&&!0===r)throw new jv(Uv.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function NS(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":zv();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function AS(t,e){if(e<=0)throw new jv(Uv.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var kS,OS,PS=function(t){for(var e=0;e<t.length;++e)if(0===t[e].length)throw new jv(Uv.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Zl=new Ey(t)},DS=(go(FS,OS=PS),FS.documentId=function(){return new FS(Ey.j().B())},FS.prototype.isEqual=function(t){return t instanceof FS&&this.Zl.isEqual(t.Zl)},FS),RS=new RegExp("[~\\*/\\[\\]]"),xS=function(t){this.t_=t},LS=(go(MS,kS=xS),MS.prototype.e_=function(t){if(2!==t.n_)throw 1===t.n_?t.s_(this.t_+"() can only appear at the top level of your update data"):t.s_(this.t_+"() cannot be used with set() unless you pass {merge:true}");return t.Qe.push(t.path),null},MS.prototype.isEqual=function(t){return t instanceof MS},MS);function MS(){return null!==kS&&kS.apply(this,arguments)||this}function FS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return OS.call(this,t)||this}function US(t,e,n){return new aC({n_:3,i_:e.settings.i_,methodName:t.t_,r_:n},e._,e.serializer,e.ignoreUndefinedProperties)}var jS,VS,qS,BS,WS=(go(oC,BS=xS),oC.prototype.e_=function(t){return new Um(t.path,new Im)},oC.prototype.isEqual=function(t){return t instanceof oC},oC),HS=(go(iC,qS=xS),iC.prototype.e_=function(t){var e=US(this,t,!0),n=this.o_.map(function(t){return vC(t,e)}),n=new Tm(n);return new Um(t.path,n)},iC.prototype.isEqual=function(t){return this===t},iC),GS=(go(rC,VS=xS),rC.prototype.e_=function(t){var e=US(this,t,!0),n=this.o_.map(function(t){return vC(t,e)}),n=new km(n);return new Um(t.path,n)},rC.prototype.isEqual=function(t){return this===t},rC),KS=(go(nC,jS=xS),nC.prototype.e_=function(t){var e=new Rm(t.serializer,Yg(t.serializer,this.a_));return new Um(t.path,e)},nC.prototype.isEqual=function(t){return this===t},nC),zS=(Object.defineProperty(eC.prototype,"latitude",{get:function(){return this.h_},enumerable:!1,configurable:!0}),Object.defineProperty(eC.prototype,"longitude",{get:function(){return this.c_},enumerable:!1,configurable:!0}),eC.prototype.isEqual=function(t){return this.h_===t.h_&&this.c_===t.c_},eC.prototype.toJSON=function(){return{latitude:this.h_,longitude:this.c_}},eC.prototype.g=function(t){return Jv(this.h_,t.h_)||Jv(this.c_,t.c_)},eC),QS=function(t){this.u_=t},XS=/^__.*__$/,YS=function(t,e,n){this.l_=t,this.__=e,this.f_=n},JS=(tC.prototype.d_=function(t,e){var n=[];return null!==this.Qe?n.push(new Jm(t,this.data,this.Qe,e)):n.push(new Ym(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new nb(t,this.fieldTransforms)),n},tC),$S=(ZS.prototype.d_=function(t,e){e=[new Jm(t,this.data,this.Qe,e)];return 0<this.fieldTransforms.length&&e.push(new nb(t,this.fieldTransforms)),e},ZS);function ZS(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}function tC(t,e,n){this.data=t,this.Qe=e,this.fieldTransforms=n}function eC(t,e){if(!isFinite(t)||t<-90||90<t)throw new jv(Uv.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new jv(Uv.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.h_=t,this.c_=e}function nC(t,e){var n=this;return(n=jS.call(this,t)||this).a_=e,n}function rC(t,e){var n=this;return(n=VS.call(this,t)||this).o_=e,n}function iC(t,e){var n=this;return(n=qS.call(this,t)||this).o_=e,n}function oC(){return null!==BS&&BS.apply(this,arguments)||this}function sC(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw zv()}}var aC=(Object.defineProperty(hC.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(hC.prototype,"n_",{get:function(){return this.settings.n_},enumerable:!1,configurable:!0}),hC.prototype.E_=function(t){return new hC(Object.assign(Object.assign({},this.settings),t),this._,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.Qe)},hC.prototype.T_=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t),e=this.E_({path:e,r_:!1});return e.I_(t),e},hC.prototype.m_=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t),t=this.E_({path:t,r_:!1});return t.w_(),t},hC.prototype.A_=function(t){return this.E_({path:void 0,r_:!0})},hC.prototype.s_=function(t){return wC(t,this.settings.methodName,this.settings.R_||!1,this.path,this.settings.i_)},hC.prototype.contains=function(e){return void 0!==this.Qe.find(function(t){return e.M(t)})||void 0!==this.fieldTransforms.find(function(t){return e.M(t.field)})},hC.prototype.w_=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.I_(this.path.get(t))},hC.prototype.I_=function(t){if(0===t.length)throw this.s_("Document fields must not be empty");if(sC(this.n_)&&XS.test(t))throw this.s_('Document fields cannot begin and end with "__"')},hC),uC=(cC.prototype.P_=function(t,e,n,r){return void 0===r&&(r=!1),new aC({n_:t,methodName:e,i_:n,path:Ey.U(),r_:!1,R_:r},this._,this.serializer,this.ignoreUndefinedProperties)},cC);function cC(t,e,n){this._=t,this.ignoreUndefinedProperties=e,this.serializer=n||lS(t)}function hC(t,e,n,r,i,o){this.settings=t,this._=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.w_(),this.fieldTransforms=i||[],this.Qe=o||[]}function lC(t,e,n,r,i,o){void 0===o&&(o={});var s=t.P_(o.merge||o.mergeFields?2:0,e,n,i);mC("Data must be an object, but it was:",s,r);var a,u,r=yC(r,s);if(o.merge)a=new Fm(s.Qe),u=s.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,l=o.mergeFields;h<l.length;h++){var f=l[h],p=void 0;if(f instanceof PS)p=f.Zl;else{if("string"!=typeof f)throw zv();p=_C(e,f,n)}if(!s.contains(p))throw new jv(Uv.INVALID_ARGUMENT,"Field '"+p+"' is specified in your field mask but missing from your input data.");EC(c,p)||c.push(p)}a=new Fm(c),u=s.fieldTransforms.filter(function(t){return a.Je(t.field)})}else a=null,u=s.fieldTransforms;return new JS(new cb(r),a,u)}function fC(t,r,i,e){var o=t.P_(1,r,i);mC("Data must be an object, but it was:",o,e);var s=[],a=new hb;py(e,function(t,e){var n=_C(r,t,i),t=o.m_(n);e instanceof LS||e instanceof QS&&e.u_ instanceof LS?s.push(n):null!=(t=vC(e,t))&&(s.push(n),a.set(n,t))});e=new Fm(s);return new $S(a.Xe(),e,o.fieldTransforms)}function pC(t,e,n,r,i,o){var s=t.P_(1,e,n),a=[bC(e,r,n)],u=[i];if(o.length%2!=0)throw new jv(Uv.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(bC(e,o[c])),u.push(o[c+1]);for(var h,l,f,p=[],d=new hb,v=a.length-1;0<=v;--v){EC(p,a[v])||(h=a[v],l=u[v],f=s.m_(h),l instanceof LS||l instanceof QS&&l.u_ instanceof LS?p.push(h):null!=(f=vC(l,f))&&(p.push(h),d.set(h,f)))}i=new Fm(p);return new $S(d.Xe(),i,s.fieldTransforms)}function dC(t,e,n,r){return void 0===r&&(r=!1),vC(n,t.P_(r?4:3,e))}function vC(s,t){if(s instanceof QS&&(s=s.u_),gC(s))return mC("Unsupported field value:",t,s),yC(s,t);if(s instanceof xS)return function(t,e){if(!sC(e.n_))throw e.s_(t.t_+"() can only be used with update() and set()");if(!e.path)throw e.s_(t.t_+"() is not currently supported inside arrays");t=t.e_(e);t&&e.fieldTransforms.push(t)}(s,t),null;if(t.path&&t.Qe.push(t.path),s instanceof Array){if(t.settings.r_&&4!==t.n_)throw t.s_("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=vC(i[r],t.A_(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Yg(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=my.fromDate(t);return{timestampValue:Jg(e.serializer,n)}}if(t instanceof my){var r=new my(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Jg(e.serializer,r)}}if(t instanceof zS)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ny)return{bytesValue:$g(e.serializer,t.l)};if(t instanceof YS){n=e._,r=t.l_;if(!r.isEqual(n))throw e.s_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:tm(t.l_||e._,t.__.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.s_("Unsupported field value: "+NS(t))}(s,t)}function yC(t,n){var r={};return dy(t)?n.path&&0<n.path.length&&n.Qe.push(n.path):py(t,function(t,e){e=vC(e,n.T_(t));null!=e&&(r[t]=e)}),{mapValue:{fields:r}}}function gC(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof my||t instanceof zS||t instanceof ny||t instanceof YS||t instanceof xS)}function mC(t,e,n){if(!gC(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){n=NS(n);throw"an object"===n?e.s_(t+" a custom object"):e.s_(t+" "+n)}var r}function bC(t,e,n){if(e instanceof PS)return e.Zl;if("string"==typeof e)return _C(t,e);throw wC("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}function _C(t,e,n){try{return function(e){if(0<=e.search(RS))throw new jv(Uv.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(DS.bind.apply(DS,To([void 0],e.split("."))))}catch(t){throw new jv(Uv.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(e).Zl}catch(e){throw wC(e instanceof Error?e.message:e.toString(),t,!1,void 0,n)}}function wC(t,e,n,r,i){var o=r&&!r.P(),s=void 0!==i,e="Function "+e+"() called with invalid data";n&&(e+=" (via `toFirestore()`)");n="";return(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new jv(Uv.INVALID_ARGUMENT,(e+=". ")+t+n)}function EC(t,e){return t.some(function(t){return t.isEqual(e)})}var IC=(AC.prototype.b_=function(r){return bo(this,void 0,void 0,function(){var e,n=this;return _o(this,function(t){switch(t.label){case 0:if(this.v_(),0<this.mutations.length)throw new jv(Uv.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,a){return bo(this,void 0,void 0,function(){var n,e,r,i,o;return _o(this,function(t){switch(t.label){case 0:return e=sm((n=s).serializer)+"/documents",r={documents:a.map(function(t){return nm(n.serializer,t)})},[4,n.$c("BatchGetDocuments",e,r)];case 1:return r=t.sent(),i=new Map,r.forEach(function(t){var e,t=(e=n.serializer,"found"in(t=t)?function(t,e){Qv(!!e.found),e.found.name,e.found.updateTime;var n=rm(t,e.found.name),t=Zg(e.found.updateTime),e=new cb({mapValue:{fields:e.found.fields}});return new mb(n,t,e,{})}(e,t):"missing"in t?function(t,e){Qv(!!e.missing),Qv(!!e.readTime);t=rm(t,e.missing),e=Zg(e.readTime);return new bb(t,e)}(e,t):zv());i.set(t.key.toString(),t)}),o=[],[2,(a.forEach(function(t){t=i.get(t.toString());Qv(!!t),o.push(t)}),o)]}})})}(this.zc,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof bb||t instanceof mb?n.S_(t):zv()}),e)]}})})},AC.prototype.set=function(t,e){this.write(e.d_(t,this.Ge(t))),this.p_.add(t.toString())},AC.prototype.update=function(t,e){try{this.write(e.d_(t,this.D_(t)))}catch(t){this.y_=t}this.p_.add(t.toString())},AC.prototype.delete=function(t){this.write([new ab(t,this.Ge(t))]),this.p_.add(t.toString())},AC.prototype.commit=function(){return bo(this,void 0,void 0,function(){var e,n=this;return _o(this,function(t){switch(t.label){case 0:if(this.v_(),this.y_)throw this.y_;return e=this.g_,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=Iy.H(e);n.mutations.push(new ub(e,n.Ge(e)))}),[4,function(i,o){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return n=sm((e=i).serializer)+"/documents",r={writes:o.map(function(t){return cm(e.serializer,t)})},[4,e.Mc("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.zc,this.mutations)];case 1:return t.sent(),this.V_=!0,[2]}})})},AC.prototype.S_=function(t){var e;if(t instanceof mb)e=t.version;else{if(!(t instanceof bb))throw zv();e=by.min()}var n=this.g_.get(t.key.toString());if(n){if(!e.isEqual(n))throw new jv(Uv.ABORTED,"Document version changed between two reads.")}else this.g_.set(t.key.toString(),e)},AC.prototype.Ge=function(t){var e=this.g_.get(t.toString());return!this.p_.has(t.toString())&&e?qm.updateTime(e):qm.ze()},AC.prototype.D_=function(t){var e=this.g_.get(t.toString());if(this.p_.has(t.toString())||!e)return qm.exists(!0);if(e.isEqual(by.min()))throw new jv(Uv.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return qm.updateTime(e)},AC.prototype.write=function(t){this.v_(),this.mutations=this.mutations.concat(t)},AC.prototype.v_=function(){},AC),TC=(NC.prototype.run=function(){this.N_()},NC.prototype.N_=function(){var t=this;this.Vs.Pn(function(){return bo(t,void 0,void 0,function(){var e,n,r=this;return _o(this,function(t){return e=new IC(this.zc),(n=this.x_(e))&&n.then(function(t){r.hs.ws(function(){return e.commit().then(function(){r.ls.resolve(t)}).catch(function(t){r.F_(t)})})}).catch(function(t){r.F_(t)}),[2]})})})},NC.prototype.x_=function(t){try{var e=this.updateFunction(t);return!Py(e)&&e.catch&&e.then?e:(this.ls.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.ls.reject(t),null}},NC.prototype.F_=function(t){var e=this;0<this.C_&&this.k_(t)?(--this.C_,this.hs.ws(function(){return e.N_(),Promise.resolve()})):this.ls.reject(t)},NC.prototype.k_=function(t){if("FirebaseError"!==t.name)return!1;t=t.code;return"aborted"===t||"failed-precondition"===t||!Wy(t)},NC),SC=(CC.prototype.start=function(t,e,n){var r=this;this.M_(),this.bl=t;var i=new m_,o=!1;return this.credentials.Jh(function(t){return o?void r.hs.Cs(function(){return function(r,i){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return(e=r).hs.Fs(),Wv("RemoteStore","RemoteStore received new credentials"),n=ZI(e),e.Xc.add(3),[4,GI(e)];case 1:return t.sent(),n&&e.nu.set("Unknown"),[4,e.Hc.Jl(i)];case 2:return t.sent(),e.Xc.delete(3),[4,HI(e)];case 3:return t.sent(),[2]}})})}(r.bu,t)}):(o=!0,Wv("FirestoreClient","Initializing. user=",t.uid),r.L_(e,n,t,i).then(r.O_.resolve,r.O_.reject))}),this.hs.ws(function(){return r.O_.promise}),i.promise},CC.prototype.enableNetwork=function(){var e=this;return this.M_(),this.hs.enqueue(function(){return e.persistence.th(!0),(t=e.bu).Xc.delete(0),HI(t);var t})},CC.prototype.L_=function(r,i,o,s){return bo(this,void 0,void 0,function(){var e,n=this;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),e={hs:this.hs,bl:this.bl,clientId:this.clientId,credentials:this.credentials,Ql:o,Du:100},[4,r.initialize(e)];case 1:return t.sent(),[4,i.initialize(r,e)];case 2:return t.sent(),this.persistence=r.persistence,this.Su=r.Su,this.Gc=r.Gc,this.ql=r.ql,this.zc=i.zc,this.bu=i.bu,this.fi=i.fi,this.B_=i.vu,this.B_.Us=function(s,a){return bo(this,void 0,void 0,function(){var e,n,r,i,o;return _o(this,function(t){switch(t.label){case 0:return e=xT(s),(o=e.Nu.get(a))?(n=o.targetId,e.Su.$i(n),r=o.view.yu(),[3,4]):[3,1];case 1:return[4,lI(e.Gc,Rb(a))];case 2:return i=t.sent(),o=e.Su.$i(i.targetId),n=i.targetId,[4,mT(e,a,n,"current"===o)];case 3:r=t.sent(),e.Uu&&zI(e.bu,i),t.label=4;case 4:return[2,r]}})})}.bind(null,this.fi),this.B_.Ws=function(i,o){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return n=(e=i).Nu.get(o),1<(r=e.xu.get(n.targetId)).length?[2,(e.xu.set(n.targetId,r.filter(function(t){return!Fb(t,o)})),void e.Nu.delete(o))]:e.Uu?(e.Su.Bi(n.targetId),e.Su.xi(n.targetId)?[3,2]:[4,fI(e.Gc,n.targetId,!1).then(function(){e.Su.Ui(n.targetId),QI(e.bu,n.targetId),TT(e,n.targetId)}).catch(gI)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return TT(e,n.targetId),[4,fI(e.Gc,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,this.fi),this.persistence.Za(function(){return bo(n,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})}),s.resolve(),[3,4];case 3:if(e=t.sent(),s.reject(e),!("FirebaseError"===e.name?e.code===Uv.FAILED_PRECONDITION||e.code===Uv.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code))throw e;return[2,(console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),this.L_(new dS,new gS,o,s))];case 4:return[2]}})})},CC.prototype.M_=function(){if(this.hs.ps)throw new jv(Uv.FAILED_PRECONDITION,"The client has already been terminated.")},CC.prototype.disableNetwork=function(){var t=this;return this.M_(),this.hs.enqueue(function(){return t.persistence.th(!1),function(n){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return(e=n).Xc.add(0),[4,GI(e)];case 1:return t.sent(),e.nu.set("Offline"),[2]}})})}(t.bu)})},CC.prototype.terminate=function(){var t=this;this.hs.Ds();var n=new m_;return this.hs.bs(function(){return bo(t,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,4,,5]),this.ql&&this.ql.stop(),[4,KI(this.bu)];case 1:return t.sent(),[4,this.Su.Di()];case 2:return t.sent(),[4,this.persistence.Di()];case 3:return t.sent(),this.credentials.Yh(),n.resolve(),[3,5];case 4:return e=t.sent(),e=H_(e,"Failed to shutdown persistence"),n.reject(e),[3,5];case 5:return[2]}})})}),n.promise},CC.prototype.waitForPendingWrites=function(){var t=this;this.M_();var e=new m_;return this.hs.ws(function(){return function(o,s){return bo(this,void 0,void 0,function(){var n,r,i;return _o(this,function(t){switch(t.label){case 0:ZI((n=o).bu)||Wv("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.Gc).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Sr.qo(t)})];case 2:return-1===(r=t.sent())?[2,void s.resolve()]:((i=n.Lu.get(r)||[]).push(s),n.Lu.set(r,i),[3,4]);case 3:return i=t.sent(),i=H_(i,"Initialization of waitForPendingWrites() operation failed"),s.reject(i),[3,4];case 4:return[2]}var e})})}(t.fi,e)}),e.promise},CC.prototype.listen=function(t,e,n){var r=this;this.M_();var i=new mS(n),o=new Y_(t,i,e);return this.hs.ws(function(){return z_(r.B_,o)}),function(){i.Xl(),r.hs.ws(function(){return Q_(r.B_,o)})}},CC.prototype.q_=function(r){return bo(this,void 0,void 0,function(){var e,n=this;return _o(this,function(t){switch(t.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return t.sent(),e=new m_,[2,(this.hs.ws(function(){return function(i,o,s){return bo(this,void 0,void 0,function(){var r;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=o,(n=i).persistence.runTransaction("read document","readonly",function(t){return n.Nh.Cr(t,e)}))];case 1:return(r=t.sent())instanceof mb?s.resolve(r):r instanceof bb?s.resolve(null):s.reject(new jv(Uv.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=t.sent(),r=H_(r,"Failed to get document '"+o+" from cache"),s.reject(r),[3,3];case 3:return[2]}var e,n})})}(n.Gc,r,e)}),e.promise)]}})})},CC.prototype.U_=function(c,h){return void 0===h&&(h={}),bo(this,void 0,void 0,function(){var e,u=this;return _o(this,function(t){switch(t.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return t.sent(),e=new m_,[2,(this.hs.ws(function(){return n=u.B_,r=u.hs,i=c,o=h,s=e,t=new mS({next:function(t){r.ws(function(){return Q_(n,a)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new jv(Uv.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new jv(Uv.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),a=new Y_(Cb(i.path),t,{includeMetadataChanges:!0,Xs:!0}),z_(n,a);var n,r,i,o,s,t,a}),e.promise)]}})})},CC.prototype.K_=function(r){return bo(this,void 0,void 0,function(){var e,n=this;return _o(this,function(t){switch(t.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return t.sent(),e=new m_,[2,(this.hs.ws(function(){return function(r,i,o){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,pI(r,i,!0)];case 1:return n=t.sent(),e=new fT(i,n.Fh),n=e.Eu(n.documents),n=e.Vr(n,!1),o.resolve(n.snapshot),[3,3];case 2:return n=t.sent(),n=H_(n,"Failed to execute query '"+i+" against cache"),o.reject(n),[3,3];case 3:return[2]}})})}(n.Gc,r,e)}),e.promise)]}})})},CC.prototype.Q_=function(c,h){return void 0===h&&(h={}),bo(this,void 0,void 0,function(){var a,u=this;return _o(this,function(t){switch(t.label){case 0:return this.M_(),[4,this.O_.promise];case 1:return t.sent(),a=new m_,[2,(this.hs.ws(function(){return e=u.B_,n=u.hs,t=c,r=h,i=a,o=new mS({next:function(t){n.ws(function(){return Q_(e,s)}),t.fromCache&&"server"===r.source?i.reject(new jv(Uv.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new Y_(t,o,{includeMetadataChanges:!0,Xs:!0}),z_(e,s);var e,n,t,r,i,o,s}),a.promise)]}})})},CC.prototype.write=function(t){var e=this;this.M_();var n=new m_;return this.hs.ws(function(){return function(f,p,d){return bo(this,void 0,void 0,function(){var s,a;return _o(this,function(t){switch(t.label){case 0:a=LT(f),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(i=a.Gc,u=p,h=i,l=my.now(),o=u.reduce(function(t,e){return t.add(e.key)},sg()),h.persistence.runTransaction("Locally write mutations","readwrite",function(a){return h.Nh.Or(a,o).next(function(t){c=t;for(var s,e=[],n=0,r=u;n<r.length;n++){var i=r[n],o=(s=i,o=c.get(i.key),s instanceof nb?function(t){for(var e=null,n=0,r=s.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof mb?t.field(i.field):void 0,o=_m(i.transform,o||null);null!=o&&(e=(null==e?new hb:e).set(i.field,o))}return e?e.Xe():null}(o):null);null!=o&&e.push(new Jm(i.key,o,function s(t){var a=[];return py(t.fields||{},function(t,e){var n=new Ey([t]);if(Hg(e))if(0===(e=s(e.mapValue).fields).length)a.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];a.push(n.child(o))}else a.push(n)}),new Fm(a)}(o.proto.mapValue),qm.exists(!0)))}return h.Sr.Oo(a,l,e,u)})}).then(function(t){var e=t.lr(c);return{batchId:t.batchId,wr:e}}))];case 2:return s=t.sent(),a.Su.Fi(s.batchId),e=a,n=s.batchId,r=d,i=(i=(i=e.$u[e.currentUser.ti()])||new Gy(Jv)).ot(n,r),e.$u[e.currentUser.ti()]=i,[4,AT(a,s.wr)];case 3:return t.sent(),[4,iT(a.bu)];case 4:return t.sent(),[3,6];case 5:return a=t.sent(),a=H_(a,"Failed to persist write"),d.reject(a),[3,6];case 6:return[2]}var e,n,r,i,u,c,h,l,o})})}(e.fi,t,n)}),n.promise},CC.prototype._=function(){return this.bl._},CC.prototype.W_=function(t){var e=this;this.M_();var r=new mS(t);return this.hs.ws(function(){return bo(e,void 0,void 0,function(){return _o(this,function(t){return[2,(e=this.B_,n=r,e.qs.add(n),void n.next())];var e,n})})}),function(){r.Xl(),e.hs.ws(function(){return bo(e,void 0,void 0,function(){return _o(this,function(t){return[2,void this.B_.qs.delete(r)]})})})}},Object.defineProperty(CC.prototype,"j_",{get:function(){return this.hs.ps},enumerable:!1,configurable:!0}),CC.prototype.transaction=function(t){var e=this;this.M_();var n=new m_;return this.hs.ws(function(){return new TC(e.hs,e.zc,t,n).run(),Promise.resolve()}),n.promise},CC);function CC(t,e){this.credentials=t,this.hs=e,this.clientId=Xv.t(),this.O_=new m_}function NC(t,e,n,r){this.hs=t,this.zc=e,this.updateFunction=n,this.ls=r,this.C_=5,this.Vs=new __(this.hs,"transaction_retry")}function AC(t){this.zc=t,this.g_=new Map,this.mutations=[],this.V_=!1,this.y_=null,this.p_=new Set}function kC(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var OC,PC,DC=(eN.prototype.J_=function(t){switch(Og(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Fg(t.integerValue||t.doubleValue);case 3:return this.Y_(t.timestampValue);case 4:return this.X_(t);case 5:return t.stringValue;case 6:return this.H_(Ug(t.bytesValue));case 7:return this.Z_(t.referenceValue);case 8:return this.tf(t.geoPointValue);case 9:return this.ef(t.arrayValue);case 10:return this.nf(t.mapValue);default:throw zv()}},eN.prototype.nf=function(t){var n=this,r={};return py(t.fields||{},function(t,e){r[t]=n.J_(e)}),r},eN.prototype.tf=function(t){return new zS(Fg(t.latitude),Fg(t.longitude))},eN.prototype.ef=function(t){var e=this;return(t.values||[]).map(function(t){return e.J_(t)})},eN.prototype.X_=function(t){switch(this.G_){case"previous":var e=function t(e){e=e.mapValue.fields.__previous_value__;return Ng(e)?t(e):e}(t);return null==e?null:this.J_(e);case"estimate":return this.Y_(Ag(t));default:return null}},eN.prototype.Y_=function(t){t=Mg(t);return new my(t.seconds,t.nanos)},eN.prototype.Z_=function(t){var e=_y.q(t);Qv(bm(e));t=new cy(e.get(1),e.get(3)),e=new Iy(e.N(5));return t.isEqual(this._)||Hv("Document "+e+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+this._.projectId+"/"+this._.database+") instead."),this.z_(e)},eN),RC=Rw.uo,xC=(tN.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},tN),LC="You are using the memory-only build of Firestore. Persistence support is only available via the @firebase/firestore bundle or the firebase-firestore.js build.",MC=(ZC.prototype.enableIndexedDbPersistence=function(t,e){throw new jv(Uv.FAILED_PRECONDITION,LC)},ZC.prototype.enableMultiTabIndexedDbPersistence=function(t){throw new jv(Uv.FAILED_PRECONDITION,LC)},ZC.prototype.clearIndexedDbPersistence=function(t){throw new jv(Uv.FAILED_PRECONDITION,LC)},ZC),FC=($C.prototype.enableIndexedDbPersistence=function(t,e){var n=new gS,e=new vS(n,t.sf().cacheSizeBytes,e);return t.if(e,n)},$C.prototype.enableMultiTabIndexedDbPersistence=function(t){var e=new gS,n=new yS(e,t.sf().cacheSizeBytes);return t.if(n,e)},$C.prototype.clearIndexedDbPersistence=function(n){var t=this,r=new m_;return n.rf.bs(function(){return bo(t,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,function(n){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return E_.Ln()?(e=n+"main",[4,E_.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(oI(n.l_,n.af))];case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise},$C),UC=(Object.defineProperty(JC.prototype,"wf",{get:function(){return this.Ef||(this.Ef=new uC(this.l_,this.df.ignoreUndefinedProperties)),this.Ef},enumerable:!1,configurable:!0}),JC.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.df),t)).merge;t=new xC(t);if(this.lf&&!this.df.isEqual(t))throw new jv(Uv.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");void 0!==(this.df=t).credentials&&(this.ff=function(t){if(!t)return new SI;switch(t.type){case"gapi":var e=t.client;return Qv(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new AI(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new jv(Uv.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},JC.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.df.host&&Gv("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},JC.prototype.enableNetwork=function(){return this.uf(),this.lf.enableNetwork()},JC.prototype.disableNetwork=function(){return this.uf(),this.lf.disableNetwork()},JC.prototype.enablePersistence=function(t){if(this.lf)throw new jv(Uv.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1,n=!1;return t&&CS("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.hf.enableMultiTabIndexedDbPersistence(this):this.hf.enableIndexedDbPersistence(this,n)},JC.prototype.clearPersistence=function(){return bo(this,void 0,void 0,function(){return _o(this,function(t){if(void 0!==this.lf&&!this.lf.j_)throw new jv(Uv.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");return[2,this.hf.clearIndexedDbPersistence(this)]})})},JC.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(JC.prototype,"Tf",{get:function(){return this.uf(),this.lf.j_},enumerable:!1,configurable:!0}),JC.prototype.waitForPendingWrites=function(){return this.uf(),this.lf.waitForPendingWrites()},JC.prototype.onSnapshotsInSync=function(t){if(this.uf(),kC(t))return this.lf.W_(t);t={next:t};return this.lf.W_(t)},JC.prototype.uf=function(){return this.lf||this.if(new dS,new gS),this.lf},JC.prototype.If=function(){return new sy(this.l_,this.af,this.df.host,this.df.ssl,this.df.experimentalForceLongPolling,this.df.experimentalAutoDetectLongPolling)},JC.prototype.if=function(t,e){var n=this.If();return this.lf=new SC(this.ff,this.rf),this.lf.start(n,t,e)},JC._f=function(t){if(e=t.options,!Object.prototype.hasOwnProperty.call(e,"projectId"))throw new jv(Uv.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var e,t=t.options.projectId;if(!t||"string"!=typeof t)throw new jv(Uv.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new cy(t)},Object.defineProperty(JC.prototype,"app",{get:function(){if(!this.cf)throw new jv(Uv.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.cf},enumerable:!1,configurable:!0}),JC.prototype.collection=function(t){return TS("Firestore.collection","path",t),this.uf(),new cN(_y.q(t),this,null)},JC.prototype.doc=function(t){return TS("Firestore.doc","path",t),this.uf(),qC.mf(_y.q(t),this,null)},JC.prototype.collectionGroup=function(t){if(TS("Firestore.collectionGroup","collectionId",t),0<=t.indexOf("/"))throw new jv(Uv.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.uf(),new aN((t=t,new wb(_y.U(),t)),this,null)},JC.prototype.runTransaction=function(e){var n=this;return this.uf().transaction(function(t){return e(new jC(n,t))})},JC.prototype.batch=function(){return this.uf(),new VC(this)},JC.prototype.sf=function(){return this.df},JC),jC=(YC.prototype.get=function(t){var e=this,n=pN(0,t,this.Af);return this.Rf.b_([n.__]).then(function(t){if(!t||1!==t.length)return zv();t=t[0];if(t instanceof bb)return new WC(e.Af,n.__,null,!1,!1,n.f_);if(t instanceof mb)return new WC(e.Af,n.__,t,!1,!1,n.f_);throw zv()})},YC.prototype.set=function(t,e,n){t=pN(0,t,this.Af);n=SS("Transaction.set",n);e=dN(t.f_,e,n),n=lC(this.Af.wf,"Transaction.set",t.__,e,null!==t.f_,n);return this.Rf.set(t.__,n),this},YC.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return e="string"==typeof e||e instanceof DS?(r=pN(0,t,this.Af),pC(this.Af.wf,"Transaction.update",r.__,e,n,i)):(r=pN(0,t,this.Af),fC(this.Af.wf,"Transaction.update",r.__,e)),this.Rf.update(r.__,e),this},YC.prototype.delete=function(t){t=pN(0,t,this.Af);return this.Rf.delete(t.__),this},YC),VC=(XC.prototype.set=function(t,e,n){this.Vf();t=pN(0,t,this.Af);n=SS("WriteBatch.set",n);e=dN(t.f_,e,n),n=lC(this.Af.wf,"WriteBatch.set",t.__,e,null!==t.f_,n);return this.Pf=this.Pf.concat(n.d_(t.__,qm.ze())),this},XC.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];return this.Vf(),e="string"==typeof e||e instanceof DS?(r=pN(0,t,this.Af),pC(this.Af.wf,"WriteBatch.update",r.__,e,n,i)):(r=pN(0,t,this.Af),fC(this.Af.wf,"WriteBatch.update",r.__,e)),this.Pf=this.Pf.concat(e.d_(r.__,qm.exists(!0))),this},XC.prototype.delete=function(t){this.Vf();t=pN(0,t,this.Af);return this.Pf=this.Pf.concat(new ab(t.__,qm.ze())),this},XC.prototype.commit=function(){return this.Vf(),this.gf=!0,0<this.Pf.length?this.Af.uf().write(this.Pf):Promise.resolve()},XC.prototype.Vf=function(){if(this.gf)throw new jv(Uv.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},XC),qC=(go(QC,PC=YS),QC.mf=function(t,e,n){if(t.length%2!=0)throw new jv(Uv.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.B()+" has "+t.length);return new QC(new Iy(t),e,n)},Object.defineProperty(QC.prototype,"id",{get:function(){return this.__.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(QC.prototype,"parent",{get:function(){return new cN(this.__.path.F(),this.firestore,this.f_)},enumerable:!1,configurable:!0}),Object.defineProperty(QC.prototype,"path",{get:function(){return this.__.path.B()},enumerable:!1,configurable:!0}),QC.prototype.collection=function(t){if(TS("DocumentReference.collection","path",t),!t)throw new jv(Uv.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");t=_y.q(t);return new cN(this.__.path.child(t),this.firestore,null)},QC.prototype.isEqual=function(t){return t instanceof QC&&this.firestore===t.firestore&&this.__.isEqual(t.__)&&this.f_===t.f_},QC.prototype.set=function(t,e){e=SS("DocumentReference.set",e);t=dN(this.f_,t,e),e=lC(this.firestore.wf,"DocumentReference.set",this.__,t,null!==this.f_,e);return this.lf.write(e.d_(this.__,qm.ze()))},QC.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];return t="string"==typeof t||t instanceof DS?pC(this.firestore.wf,"DocumentReference.update",this.__,t,e,n):fC(this.firestore.wf,"DocumentReference.update",this.__,t),this.lf.write(t.d_(this.__,qm.exists(!0)))},QC.prototype.delete=function(){return this.lf.write([new ab(this.__,qm.ze())])},QC.prototype.onSnapshot=function(){for(var e=this,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];var r={includeMetadataChanges:!1},i=0;"object"!=typeof n[i]||kC(n[i])||(r=n[i],i++);var o={includeMetadataChanges:r.includeMetadataChanges};kC(n[i])&&(s=n[i],n[i]=null===(r=s.next)||void 0===r?void 0:r.bind(s),n[i+1]=null===(r=s.error)||void 0===r?void 0:r.bind(s),n[i+2]=null===(r=s.complete)||void 0===r?void 0:r.bind(s));var s={next:function(t){n[i]&&n[i](e.yf(t))},error:n[i+1],complete:n[i+2]};return this.lf.listen(Cb(this.__.path),o,s)},QC.prototype.get=function(t){var e=this,n=this.firestore.uf();return t&&"cache"===t.source?n.q_(this.__).then(function(t){return new WC(e.firestore,e.__,t,!0,t instanceof mb&&t.Ye,e.f_)}):n.U_(this.__,t).then(function(t){return e.yf(t)})},QC.prototype.withConverter=function(t){return new QC(this.__,this.firestore,t)},QC.prototype.yf=function(t){var e=t.docs.get(this.__);return new WC(this.firestore,this.__,e,t.fromCache,t.hasPendingWrites,this.f_)},QC),BC=(zC.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},zC),WC=(KC.prototype.data=function(t){var e=this;if(void 0===t&&(t={}),this.pf){if(this.f_){var n=new HC(this.Af,this.__,this.pf,this.bf,this.vf,null);return this.f_.fromFirestore(n,t)}return new DC(this.Af.l_,t.serverTimestamps||"none",function(t){return new qC(t,e.Af,null)},function(t){return new uy(t)}).J_(this.pf.rn())}},KC.prototype.get=function(t,e){var n=this;if(void 0===e&&(e={}),this.pf){t=this.pf.data().field(bC("DocumentSnapshot.get",t,this.__));if(null!==t)return new DC(this.Af.l_,e.serverTimestamps||"none",function(t){return new qC(t,n.Af,n.f_)},function(t){return new uy(t)}).J_(t)}},Object.defineProperty(KC.prototype,"id",{get:function(){return this.__.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(KC.prototype,"ref",{get:function(){return new qC(this.__,this.Af,this.f_)},enumerable:!1,configurable:!0}),Object.defineProperty(KC.prototype,"exists",{get:function(){return null!==this.pf},enumerable:!1,configurable:!0}),Object.defineProperty(KC.prototype,"metadata",{get:function(){return new BC(this.vf,this.bf)},enumerable:!1,configurable:!0}),KC.prototype.isEqual=function(t){return t instanceof KC&&this.Af===t.Af&&this.bf===t.bf&&this.__.isEqual(t.__)&&(null===this.pf?null===t.pf:this.pf.isEqual(t.pf))&&this.f_===t.f_},KC),HC=(go(GC,OC=WC),GC.prototype.data=function(t){return OC.prototype.data.call(this,t)},GC);function GC(){return null!==OC&&OC.apply(this,arguments)||this}function KC(t,e,n,r,i,o){this.Af=t,this.__=e,this.pf=n,this.bf=r,this.vf=i,this.f_=o}function zC(t,e){this.hasPendingWrites=t,this.fromCache=e}function QC(t,e,n){var r=this;return(r=PC.call(this,e.l_,t,n)||this).__=t,r.firestore=e,r.f_=n,r.lf=r.firestore.uf(),r}function XC(t){this.Af=t,this.Pf=[],this.gf=!1}function YC(t,e){this.Af=t,this.Rf=e}function JC(t,e,n){var r=this;if(void 0===n&&(n=new MC),this.hf=n,this.cf=null,this.rf=new q_,this.INTERNAL={delete:function(){return bo(r,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return this.uf(),[4,this.lf.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){n=t;this.cf=n,this.l_=JC._f(n),this.af=n.name,this.ff=new CI(e)}else{t=t;if(!t.projectId)throw new jv(Uv.INVALID_ARGUMENT,"Must provide projectId");this.l_=new cy(t.projectId,t.database),this.af="[DEFAULT]",this.ff=new SI}this.df=new xC({})}function $C(){}function ZC(){}function tN(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new jv(Uv.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=Rw._o;else{if(t.cacheSizeBytes!==RC&&t.cacheSizeBytes<Rw.lo)throw new jv(Uv.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+Rw.lo);this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,CS("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function eN(t,e,n,r){this._=t,this.G_=e,this.z_=n,this.H_=r}function nN(t,e,n){if("string"==typeof n){if(""===n)throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Pb(e)&&-1!==n.indexOf("/"))throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");e=e.path.child(_y.q(n));if(!Iy.X(e))throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return jg(t,new Iy(e))}if(n instanceof YS)return jg(t,n.__);throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+NS(n)+".")}function rN(t,e){if(!Array.isArray(t)||0===t.length)throw new jv(Uv.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new jv(Uv.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function iN(t,e,n){if(!n.isEqual(e))throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function oN(t){if(Ab(t)&&0===t.on.length)throw new jv(Uv.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var sN,aN=(fN.prototype.where=function(t,e,n){t=bC("Query.where",t),e=function(t,e,n,r,i,o){if(r.W()){if("array-contains"===i||"array-contains-any"===i)throw new jv(Uv.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){rN(o,i);for(var s=[],a=0,u=o;a<u.length;a++){var c=u[a];s.push(nN(n,t,c))}h={arrayValue:{values:s}}}else h=nN(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||rN(o,i),h=dC(e,"Query.where",o,"in"===i||"not-in"===i);var h=Wb.create(r,i,h);return function(t,e){if(e.un()){var n=Ob(t);if(null!==n&&!n.isEqual(e.field))throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");n=kb(t);null!==n&&iN(0,e.field,n)}t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==t)throw t===e.op?new jv(Uv.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new jv(Uv.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,h),h}(this.Sf,this.firestore.wf,this.firestore.l_,t,e,n);return new fN((n=this.Sf,e=n.filters.concat([e]),new wb(n.path,n.collectionGroup,n.on.slice(),e,n.limit,n.an,n.startAt,n.endAt)),this.firestore,this.f_)},fN.prototype.orderBy=function(t,e){if(void 0===e||"asc"===e)n="asc";else{if("desc"!==e)throw new jv(Uv.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n="desc"}var n,t=bC("Query.orderBy",t),t=function(t,e,n){if(null!==t.startAt)throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");e=new g_(e,n);return n=e,null!==kb(t)||null!==(t=Ob(t))&&iN(0,t,n.field),e}(this.Sf,t,n);return new fN((n=this.Sf,t=n.on.concat([t]),new wb(n.path,n.collectionGroup,t,n.filters.slice(),n.limit,n.an,n.startAt,n.endAt)),this.firestore,this.f_)},fN.prototype.limit=function(t){return AS("Query.limit",t),new fN(xb(this.Sf,t,"F"),this.firestore,this.f_)},fN.prototype.limitToLast=function(t){return AS("Query.limitToLast",t),new fN(xb(this.Sf,t,"L"),this.firestore,this.f_)},fN.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=this.Df("Query.startAt",t,e,!0);return new fN(Lb(this.Sf,t),this.firestore,this.f_)},fN.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=this.Df("Query.startAfter",t,e,!1);return new fN(Lb(this.Sf,t),this.firestore,this.f_)},fN.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=this.Df("Query.endBefore",t,e,!0);return new fN(Mb(this.Sf,t),this.firestore,this.f_)},fN.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];t=this.Df("Query.endAt",t,e,!1);return new fN(Mb(this.Sf,t),this.firestore,this.f_)},fN.prototype.isEqual=function(t){return t instanceof fN&&this.firestore===t.firestore&&Fb(this.Sf,t.Sf)&&this.f_===t.f_},fN.prototype.withConverter=function(t){return new fN(this.Sf,this.firestore,t)},fN.prototype.Df=function(c,t,e,n){if(t instanceof WC)return function(t,e,n,r){if(!n)throw new jv(Uv.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,s=Db(t);o<s.length;o++){var a=s[o];if(a.field.W())i.push(jg(e,n.key));else{var u=n.field(a.field);if(Ng(u))throw new jv(Uv.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===u){a=a.field.B();throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+a+"' (used as the orderBy) does not exist.")}i.push(u)}}return new c_(i,r)}(this.Sf,this.firestore.l_,t.pf,n);e=[t].concat(e);return function(t,e,n,r,i,o){var s=t.on;if(i.length>s.length)throw new jv(Uv.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.W()){if("string"!=typeof c)throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Pb(t)&&-1!==c.indexOf("/"))throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(_y.q(c));if(!Iy.X(h))throw new jv(Uv.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");h=new Iy(h);a.push(jg(e,h))}else{c=dC(n,r,c);a.push(c)}}return new c_(a,o)}(this.Sf,this.firestore.l_,this.firestore.wf,c,e,n)},fN.prototype.onSnapshot=function(){for(var t,e=this,n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i={},o=0;"object"!=typeof n[o]||kC(n[o])||(i=n[o],o++),kC(n[o])&&(s=n[o],n[o]=null===(t=s.next)||void 0===t?void 0:t.bind(s),n[o+1]=null===(t=s.error)||void 0===t?void 0:t.bind(s),n[o+2]=null===(t=s.complete)||void 0===t?void 0:t.bind(s));var s={next:function(t){n[o]&&n[o](new uN(e.firestore,e.Sf,t,e.f_))},error:n[o+1],complete:n[o+2]};return oN(this.Sf),this.firestore.uf().listen(this.Sf,i,s)},fN.prototype.get=function(t){var e=this;oN(this.Sf);var n=this.firestore.uf();return(t&&"cache"===t.source?n.K_(this.Sf):n.Q_(this.Sf,t)).then(function(t){return new uN(e.firestore,e.Sf,t,e.f_)})},fN),uN=(Object.defineProperty(lN.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(lN.prototype,"empty",{get:function(){return this.Nf.docs.P()},enumerable:!1,configurable:!0}),Object.defineProperty(lN.prototype,"size",{get:function(){return this.Nf.docs.size},enumerable:!1,configurable:!0}),lN.prototype.forEach=function(e,n){var r=this;this.Nf.docs.forEach(function(t){e.call(n,r.kf(t,r.metadata.fromCache,r.Nf.Qt.has(t.key)))})},Object.defineProperty(lN.prototype,"query",{get:function(){return new aN(this.Cf,this.Af,this.f_)},enumerable:!1,configurable:!0}),lN.prototype.docChanges=function(t){t=!(!t||!t.includeMetadataChanges);if(t&&this.Nf.jt)throw new jv(Uv.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.xf&&this.Ff===t||(this.xf=function(i,e,o){if(i.Kt.P()){var n=0;return i.docChanges.map(function(t){var e=o(t.doc,i.fromCache,i.Qt.has(t.doc.key));return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var s=i.Kt;return i.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=o(t.doc,i.fromCache,i.Qt.has(t.doc.key)),n=-1,r=-1;return 0!==t.type&&(n=s.indexOf(t.doc.key),s=s.delete(t.doc.key)),1!==t.type&&(r=(s=s.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return zv()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this.Nf,t,this.kf.bind(this)),this.Ff=t),this.xf},lN.prototype.isEqual=function(t){return t instanceof lN&&this.Af===t.Af&&Fb(this.Cf,t.Cf)&&this.Nf.isEqual(t.Nf)&&this.f_===t.f_},lN.prototype.kf=function(t,e,n){return new HC(this.Af,t.key,t,e,n,this.f_)},lN),cN=(go(hN,sN=aN),Object.defineProperty(hN.prototype,"id",{get:function(){return this.Sf.path.O()},enumerable:!1,configurable:!0}),Object.defineProperty(hN.prototype,"parent",{get:function(){var t=this.Sf.path.F();return t.P()?null:new qC(new Iy(t),this.firestore,null)},enumerable:!1,configurable:!0}),Object.defineProperty(hN.prototype,"path",{get:function(){return this.Sf.path.B()},enumerable:!1,configurable:!0}),hN.prototype.doc=function(t){0===arguments.length&&(t=Xv.t()),TS("CollectionReference.doc","path",t);t=_y.q(t);return qC.mf(this.Sf.path.child(t),this.firestore,this.f_)},hN.prototype.add=function(t){var t=this.f_?this.f_.toFirestore(t):t,e=this.doc();return new qC(e.__,this.firestore,null).set(t).then(function(){return e})},hN.prototype.withConverter=function(t){return new hN(this.Of,this.firestore,t)},hN);function hN(t,e,n){var r=this;if(((r=sN.call(this,Cb(t),e,n)||this).Of=t).length%2!=1)throw new jv(Uv.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.B()+" has "+t.length);return r}function lN(t,e,n,r){this.Af=t,this.Cf=e,this.Nf=n,this.f_=r,this.xf=null,this.Ff=null,this.metadata=new BC(n.hasPendingWrites,n.fromCache)}function fN(t,e,n){this.Sf=t,this.firestore=e,this.f_=n}function pN(t,e,n){e=function(t,e){if(t instanceof e)return t;if(e.name===t.constructor.name)throw new jv(Uv.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");t=NS(t);throw new jv(Uv.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}(e,qC);if(e.firestore!==n)throw new jv(Uv.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function dN(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var vN,yN,Rr=(go(mN,vN=QS),mN.serverTimestamp=function(){var t=new WS("serverTimestamp");return t.t_="FieldValue.serverTimestamp",new mN(t)},mN.delete=function(){var t=new LS("deleteField");return t.t_="FieldValue.delete",new mN(t)},mN.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new HS("arrayUnion",t)}.apply(void 0,t);return n.t_="FieldValue.arrayUnion",new mN(n)},mN.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new GS("arrayRemove",t)}.apply(void 0,t);return n.t_="FieldValue.arrayRemove",new mN(n)},mN.increment=function(t){t=new KS("increment",t);return t.t_="FieldValue.increment",new mN(t)},mN.prototype.isEqual=function(t){return this.u_.isEqual(t.u_)},mN),gN={Firestore:UC,GeoPoint:zS,Timestamp:my,Blob:uy,Transaction:jC,WriteBatch:VC,DocumentReference:qC,DocumentSnapshot:WC,Query:aN,QueryDocumentSnapshot:HC,QuerySnapshot:uN,CollectionReference:cN,FieldPath:DS,FieldValue:Rr,setLogLevel:function(t){Vv.setLogLevel(t)},CACHE_SIZE_UNLIMITED:RC};function mN(){return null!==vN&&vN.apply(this,arguments)||this}(yN=Ql).INTERNAL.registerComponent(new bs("firestore",function(t){return e=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal"),new UC(e,t,new FC);var e},"PUBLIC").setServiceProps(Object.assign({},gN))),yN.registerVersion("@firebase/firestore","2.0.0");var bN,_N={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},wN=(go(EN,bN=Error),EN);function EN(t,e,n){e=bN.call(this,e)||this;return Object.setPrototypeOf(e,EN.prototype),e.code=t,e.details=n,e}function IN(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!_N[a])return new wN("internal","internal");r=_N[a],i=a}a=s.message;"string"==typeof a&&(i=a),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new wN(r,i,o)}var TN=(SN.prototype.getAuthToken=function(){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},SN.prototype.getInstanceIdToken=function(){return bo(this,void 0,void 0,function(){return _o(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},SN.prototype.getContext=function(){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},SN);function SN(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function CN(t,e){var n,r={};for(n in t)t.hasOwnProperty(n)&&(r[n]=e(t[n]));return r}var NN=(AN.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return CN(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},AN.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?CN(t,function(t){return e.decode(t)}):t},AN);function AN(){}var kN=(Object.defineProperty(ON.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),ON.prototype._url=function(t){var e=this.app_.options.projectId;return null===this.emulatorOrigin?null!==this.customDomain?this.customDomain+"/"+t:"https://"+this.region+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+this.region+"/"+t},ON.prototype.useEmulator=function(t,e){this.emulatorOrigin="http://"+t+":"+e},ON.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},ON.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},ON.prototype.postJSON=function(r,i,o){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:o["Content-Type"]="application/json",t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.fetchImpl(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},ON.prototype.call=function(c,h,l){return bo(this,void 0,void 0,function(){var i,o,s,a,u;return _o(this,function(t){switch(t.label){case 0:return i=this._url(c),h=this.serializer.encode(h),o={data:h},s={},[4,this.contextProvider.getContext()];case 1:return(a=t.sent()).authToken&&(s.Authorization="Bearer "+a.authToken),a.instanceIdToken&&(s["Firebase-Instance-ID-Token"]=a.instanceIdToken),u=l.timeout||7e4,n=u,e=new Promise(function(t,e){r=setTimeout(function(){e(new wN("deadline-exceeded","deadline-exceeded"))},n)}),u=(a={timer:r,promise:e}).timer,a=a.promise,[4,Promise.race([PN(u,this.postJSON(i,o,s)),a,PN(u,this.cancelAllRequests)])];case 2:if(!(a=t.sent()))throw new wN("cancelled","Firebase Functions instance was deleted.");if(u=IN(a.status,a.json,this.serializer))throw u;if(!a.json)throw new wN("internal","Response is not valid JSON object.");if(void 0===(u=a.json.data)&&(u=a.json.result),void 0===u)throw new wN("internal","Response is missing data field.");return[2,{data:this.serializer.decode(u)}]}var n,r,e})})},ON);function ON(t,e,n,r,i){var o=this;void 0===r&&(r="us-central1"),this.app_=t,this.fetchImpl=i,this.serializer=new NN,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return Promise.resolve(o.deleteService())}},this.contextProvider=new TN(e,n),this.cancelAllRequests=new Promise(function(t){o.deleteService=function(){return t()}});try{var s=new URL(r);this.customDomain=s.origin,this.region="us-central1"}catch(t){this.customDomain=null,this.region=r}}function PN(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,r];case 1:return e=t.sent(),clearTimeout(n),[2,e]}})})}var DN,RN,xN;function LN(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)},n.onerror=function(){e(n.error)}})}function MN(n,r,i){var o,t=new Promise(function(t,e){LN(o=n[r].apply(n,i)).then(t,e)});return t.request=o,t}function FN(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function UN(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return MN(this[n],t,arguments)})})}function jN(e,n,r,t){t.forEach(function(t){t in r.prototype&&(e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)})})}function VN(t,r,e,n){n.forEach(function(n){n in e.prototype&&(t.prototype[n]=function(){return t=this[r],(e=MN(t,n,arguments)).then(function(t){if(t)return new BN(t,e.request)});var t,e})})}function qN(t){this._index=t}function BN(t,e){this._cursor=t,this._request=e}function WN(t){this._store=t}function HN(n){this._tx=n,this.complete=new Promise(function(t,e){n.oncomplete=function(){t()},n.onerror=function(){e(n.error)},n.onabort=function(){e(n.error)}})}function GN(t,e,n){this._db=t,this.oldVersion=e,this.transaction=new HN(n)}function KN(t){this._db=t}function zN(t,e,n){var e=MN(indexedDB,"open",[t,e]),r=e.request;return r&&(r.onupgradeneeded=function(t){n&&n(new GN(r.result,t.oldVersion,r.transaction))}),e.then(function(t){return new KN(t)})}function QN(t){return MN(indexedDB,"deleteDatabase",[t])}DN=Ql,RN=fetch.bind(self),xN={Functions:kN},DN.INTERNAL.registerComponent(new bs("functions",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),t=t.getProvider("messaging");return new kN(n,r,t,e,RN)},"PUBLIC").setServiceProps(xN).setMultipleInstances(!0)),Ql.registerVersion("@firebase/functions","0.6.0"),FN(qN,"_index",["name","keyPath","multiEntry","unique"]),UN(qN,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),VN(qN,"_index",IDBIndex,["openCursor","openKeyCursor"]),FN(BN,"_cursor",["direction","key","primaryKey","value"]),UN(BN,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){n in IDBCursor.prototype&&(BN.prototype[n]=function(){var e=this,t=arguments;return Promise.resolve().then(function(){return e._cursor[n].apply(e._cursor,t),LN(e._request).then(function(t){if(t)return new BN(t,e._request)})})})}),WN.prototype.createIndex=function(){return new qN(this._store.createIndex.apply(this._store,arguments))},WN.prototype.index=function(){return new qN(this._store.index.apply(this._store,arguments))},FN(WN,"_store",["name","keyPath","indexNames","autoIncrement"]),UN(WN,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),VN(WN,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),jN(WN,"_store",IDBObjectStore,["deleteIndex"]),HN.prototype.objectStore=function(){return new WN(this._tx.objectStore.apply(this._tx,arguments))},FN(HN,"_tx",["objectStoreNames","mode"]),jN(HN,"_tx",IDBTransaction,["abort"]),GN.prototype.createObjectStore=function(){return new WN(this._db.createObjectStore.apply(this._db,arguments))},FN(GN,"_db",["name","version","objectStoreNames"]),jN(GN,"_db",IDBDatabase,["deleteObjectStore","close"]),KN.prototype.transaction=function(){return new HN(this._db.transaction.apply(this._db,arguments))},FN(KN,"_db",["name","version","objectStoreNames"]),jN(KN,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[WN,qN].forEach(function(t){i in t.prototype&&(t.prototype[i.replace("open","iterate")]=function(){var t=(n=arguments,Array.prototype.slice.call(n)),e=t[t.length-1],n=this._store||this._index,r=n[i].apply(n,t.slice(0,-1));r.onsuccess=function(){e(r.result)}})})}),[qN,WN].forEach(function(t){t.prototype.getAll||(t.prototype.getAll=function(t,n){var r=this,i=[];return new Promise(function(e){r.iterateCursor(t,function(t){t?(i.push(t.value),void 0===n||i.length!=n?t.continue():e(i)):e(i)})})})});var XN=1e4,YN="w:0.4.18",JN="FIS_v2",$N="https://firebaseinstallations.googleapis.com/v1",ZN=36e5,Rr=((M={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',M["not-registered"]="Firebase Installation is not registered.",M["installation-not-found"]="Firebase Installation not found.",M["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',M["app-offline"]="Could not process request. Application offline.",M["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",M),tA=new zo("installations","Installations",Rr);function eA(t){return t instanceof Go&&t.code.includes("request-failed")}function nA(t){t=t.projectId;return $N+"/projects/"+t+"/installations"}function rA(t){return{token:t.token,requestStatus:2,expiresIn:(t=t.expiresIn,Number(t.replace("s","000"))),creationTime:Date.now()}}function iA(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,r.json()];case 1:return e=t.sent(),e=e.error,[2,tA.create("request-failed",{requestName:n,serverCode:e.code,serverMessage:e.message,serverStatus:e.status})]}})})}function oA(t){t=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function sA(t,e){e=e.refreshToken,t=oA(t);return t.append("Authorization",JN+" "+e),t}function aA(n){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function uA(e){return new Promise(function(t){setTimeout(t,e)})}var cA=/^[cdef][\w-]{21}$/,hA="";function lA(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;t=function(t){return btoa(String.fromCharCode.apply(String,Io(t))).replace(/\+/g,"-").replace(/\//g,"_")}(t).substr(0,22);return cA.test(t)?t:hA}catch(t){return hA}}function fA(t){return t.appName+"!"+t.appId}var pA=new Map;function dA(t,e){t=fA(t);vA(t,e),function(t,e){var n=gA();n&&n.postMessage({key:t,fid:e});mA()}(t,e)}function vA(t,e){var n,r,i=pA.get(t);if(i)try{for(var o=wo(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var yA=null;function gA(){return!yA&&"BroadcastChannel"in self&&((yA=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){vA(t.data.key,t.data.fid)}),yA}function mA(){0===pA.size&&yA&&(yA.close(),yA=null)}var bA,_A="firebase-installations-database",wA=1,EA="firebase-installations-store",IA=null;function TA(){return IA=IA||zN(_A,wA,function(t){0===t.oldVersion&&t.createObjectStore(EA)})}function SA(o,s){return bo(this,void 0,void 0,function(){var e,n,r,i;return _o(this,function(t){switch(t.label){case 0:return e=fA(o),[4,TA()];case 1:return r=t.sent(),n=r.transaction(EA,"readwrite"),[4,(r=n.objectStore(EA)).get(e)];case 2:return i=t.sent(),[4,r.put(s,e)];case 3:return t.sent(),[4,n.complete];case 4:return t.sent(),i&&i.fid===s.fid||dA(o,s.fid),[2,s]}})})}function CA(r){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return e=fA(r),[4,TA()];case 1:return n=t.sent(),[4,(n=n.transaction(EA,"readwrite")).objectStore(EA).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}function NA(s,a){return bo(this,void 0,void 0,function(){var e,n,r,i,o;return _o(this,function(t){switch(t.label){case 0:return e=fA(s),[4,TA()];case 1:return r=t.sent(),n=r.transaction(EA,"readwrite"),[4,(r=n.objectStore(EA)).get(e)];case 2:return i=t.sent(),void 0!==(o=a(i))?[3,4]:[4,r.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,r.put(o,e)];case 5:t.sent(),t.label=6;case 6:return[4,n.complete];case 7:return t.sent(),!o||i&&i.fid===o.fid||dA(s,o.fid),[2,o]}})})}function AA(i){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return[4,NA(i,function(t){t=OA(t||{fid:lA(),registrationStatus:0}),t=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(i){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return[4,kA(i)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,uA(100)];case 3:return t.sent(),[4,kA(i)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,AA(i)];case 6:return r=t.sent(),n=r.installationEntry,(r=r.registrationPromise)?[2,r]:[2,n];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(tA.create("app-offline"));return{installationEntry:e,registrationPromise:n}}e={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},t=function(r,i){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(s,t){var a=t.fid;return bo(this,void 0,void 0,function(){var e,n,r,i,o;return _o(this,function(t){switch(t.label){case 0:return e=nA(s),n=oA(s),o={fid:a,authVersion:JN,appId:s.appId,sdkVersion:YN},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,aA(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,{fid:o.fid||a,registrationStatus:2,refreshToken:o.refreshToken,authToken:rA(o.authToken)}];case 3:return[4,iA("Create Installation",i)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,SA(r,e)];case 2:return eA(n=t.sent())&&409===n.customData.serverCode?[4,CA(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,SA(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,e);return{installationEntry:e,registrationPromise:t}}}(i,t);return e=t.registrationPromise,t.installationEntry})];case 1:return(n=t.sent()).fid!==hA?[3,3]:(r={},[4,e]);case 2:return[2,(r.installationEntry=t.sent(),r)];case 3:return[2,{installationEntry:n,registrationPromise:e}]}})})}function kA(t){return NA(t,function(t){if(!t)throw tA.create("installation-not-found");return OA(t)})}function OA(t){return 1===(e=t).registrationStatus&&e.registrationTime+XN<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function PA(t,s){var a=t.appConfig,u=t.platformLoggerProvider;return bo(this,void 0,void 0,function(){var e,n,r,i,o;return _o(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return nA(t)+"/"+e+"/authTokens:generate"}(a,s),n=sA(a,s),(o=u.getImmediate({optional:!0}))&&n.append("x-firebase-client",o.getPlatformInfoString()),o={installation:{sdkVersion:YN}},r={method:"POST",headers:n,body:JSON.stringify(o)},[4,aA(function(){return fetch(e,r)})];case 1:return(i=t.sent()).ok?[4,i.json()]:[3,3];case 2:return o=t.sent(),[2,rA(o)];case 3:return[4,iA("Generate Auth Token",i)];case 4:throw t.sent()}})})}function DA(i,o){return void 0===o&&(o=!1),bo(this,void 0,void 0,function(){var r,e,n;return _o(this,function(t){switch(t.label){case 0:return[4,NA(i.appConfig,function(t){if(!xA(t))throw tA.create("not-registered");var e,n=t.authToken;if(o||2!==(e=n).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+ZN}(e)){if(1===n.requestStatus)return r=function(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,RA(n.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,uA(100)];case 3:return t.sent(),[4,RA(n.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(e=e.authToken).requestStatus?[2,DA(n,r)]:[2,e]}})})}(i,o),t;if(!navigator.onLine)throw tA.create("app-offline");n=(e=t,n={requestStatus:1,requestTime:Date.now()},mo(mo({},e),{authToken:n}));return r=function(i,o){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,PA(i,o)];case 1:return e=t.sent(),r=mo(mo({},o),{authToken:e}),[4,SA(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!eA(n=t.sent())||401!==n.customData.serverCode&&404!==n.customData.serverCode?[3,5]:[4,CA(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=mo(mo({},o),{authToken:{requestStatus:0}}),[4,SA(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(i,n),n}return t})];case 1:return e=t.sent(),r?[4,r]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function RA(t){return NA(t,function(t){if(!xA(t))throw tA.create("not-registered");var e=t.authToken;return 1===(e=e).requestStatus&&e.requestTime+XN<Date.now()?mo(mo({},t),{authToken:{requestStatus:0}}):t})}function xA(t){return void 0!==t&&2===t.registrationStatus}function LA(e,n){return void 0===n&&(n=!1),bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return[4,function(n){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,AA(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,DA(e,n)];case 2:return[2,t.sent().token]}})})}function MA(i,o){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return e=function(t,e){e=e.fid;return nA(t)+"/"+e}(i,o),r=sA(i,o),n={method:"DELETE",headers:r},[4,aA(function(){return fetch(e,n)})];case 1:return(r=t.sent()).ok?[3,3]:[4,iA("Delete Installation",r)];case 2:throw t.sent();case 3:return[2]}})})}function FA(t,r){var i=t.appConfig;return function(t,e){gA();var n=fA(t);(t=pA.get(n))||(t=new Set,pA.set(n,t)),t.add(e)}(i,r),function(){var t,e,n;e=r,n=fA(t=i),(t=pA.get(n))&&(t.delete(e),0===t.size&&pA.delete(n),mA())}}function UA(t){return tA.create("missing-app-config-values",{valueName:t})}(bA=Ql).INTERNAL.registerComponent(new bs("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw UA("App Configuration");if(!t.name)throw UA("App Name");try{for(var r=wo(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw UA(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(r){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return[4,AA(r.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(e.registrationPromise||DA(r)).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return LA(n,t)},delete:function(){return function(r){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return[4,NA(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw tA.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw tA.create("app-offline");case 3:return[4,MA(e,n)];case 4:return t.sent(),[4,CA(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return FA(n,t)}}},"PUBLIC")),bA.registerVersion("@firebase/installations","0.4.18");var jA,Rr=((M={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',M["only-available-in-window"]="This method is available in a Window context.",M["only-available-in-sw"]="This method is available in a service worker context.",M["permission-default"]="The notification permission was not granted and dismissed instead.",M["permission-blocked"]="The notification permission was not granted and blocked instead.",M["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",M["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",M["token-subscribe-failed"]="A problem occurred while subscribing the user to FCM: {$errorInfo}",M["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",M["token-unsubscribe-failed"]="A problem occurred while unsubscribing the user from FCM: {$errorInfo}",M["token-update-failed"]="A problem occurred while updating the user from FCM: {$errorInfo}",M["token-update-no-token"]="FCM returned no token when updating the user to push.",M["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",M["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",M["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",M["invalid-vapid-key"]="The public VAPID key must be a string.",M["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",M),VA=new zo("messaging","Messaging",Rr),qA="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",BA="https://fcmregistrations.googleapis.com/v1",WA="FCM_MSG",HA="google.c.a.c_id";function GA(t){t=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,Io(t))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}(M=jA=jA||{}).PUSH_RECEIVED="push-received",M.NOTIFICATION_CLICKED="notification-clicked";var KA="fcm_token_details_db",zA=5,QA="fcm_token_object_Store";function XA(s){return bo(this,void 0,void 0,function(){var e,o,n=this;return _o(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(KA))return[2,null];t.label=2;case 2:return o=null,[4,zN(KA,zA,function(i){return bo(n,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return i.oldVersion<2?[2]:i.objectStoreNames.contains(QA)?[4,(r=i.transaction.objectStore(QA)).index("fcmSenderId").get(s)]:[2];case 1:return e=t.sent(),[4,r.clear()];case 2:if(t.sent(),!e)return[2];if(2===i.oldVersion){if(!(n=e).auth||!n.p256dh||!n.endpoint)return[2];o={token:n.fcmToken,createTime:null!==(r=n.createTime)&&void 0!==r?r:Date.now(),subscriptionOptions:{auth:n.auth,p256dh:n.p256dh,endpoint:n.endpoint,swScope:n.swScope,vapidKey:"string"==typeof n.vapidKey?n.vapidKey:GA(n.vapidKey)}}}else(3===i.oldVersion||4===i.oldVersion)&&(o={token:(n=e).fcmToken,createTime:n.createTime,subscriptionOptions:{auth:GA(n.auth),p256dh:GA(n.p256dh),endpoint:n.endpoint,swScope:n.swScope,vapidKey:GA(n.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,QN(KA)];case 4:return t.sent(),[4,QN("fcm_vapid_details_db")];case 5:return t.sent(),[4,QN("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return!1;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(o)?o:null]}})})}var YA="firebase-messaging-database",JA=1,$A="firebase-messaging-store",ZA=null;function tk(){return ZA=ZA||zN(YA,JA,function(t){0===t.oldVersion&&t.createObjectStore($A)})}function ek(r){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return e=rk(r),[4,tk()];case 1:return[4,t.sent().transaction($A).objectStore($A).get(e)];case 2:return(e=t.sent())?[2,e]:[3,3];case 3:return[4,XA(r.appConfig.senderId)];case 4:return(n=t.sent())?[4,nk(r,n)]:[3,6];case 5:return t.sent(),[2,n];case 6:return[2]}})})}function nk(r,i){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return e=rk(r),[4,tk()];case 1:return n=t.sent(),[4,(n=n.transaction($A,"readwrite")).objectStore($A).put(i,e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2,i]}})})}function rk(t){return t.appConfig.appId}function ik(r,i){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return[4,sk(r)];case 1:e=t.sent(),e={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(ok(r.appConfig)+"/"+i,e)];case 3:return[4,t.sent().json()];case 4:if((e=t.sent()).error)throw n=e.error.message,VA.create("token-unsubscribe-failed",{errorInfo:n});return[3,6];case 5:throw n=t.sent(),VA.create("token-unsubscribe-failed",{errorInfo:n});case 6:return[2]}})})}function ok(t){t=t.projectId;return BA+"/projects/"+t+"/registrations"}function sk(t){var n=t.appConfig,r=t.installations;return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function ak(t){var e=t.p256dh,n=t.auth,r=t.endpoint,t=t.vapidKey,e={web:{endpoint:r,auth:n,p256dh:e}};return t!==qA&&(e.web.applicationPubKey=t),e}function uk(c,h,l){return bo(this,void 0,void 0,function(){var s,a,u;return _o(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw VA.create("permission-blocked");return[4,function(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:function(t){for(var t=(t+"=".repeat((4-t.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),e=atob(t),n=new Uint8Array(e.length),r=0;r<e.length;++r)n[r]=e.charCodeAt(r);return n}(r)})]}})})}(h,l)];case 1:return u=t.sent(),[4,ek(c)];case 2:return s=t.sent(),a={vapidKey:l,swScope:h.scope,endpoint:u.endpoint,auth:GA(u.getKey("auth")),p256dh:GA(u.getKey("p256dh"))},s?[3,3]:[2,hk(c,a)];case 3:if(e=s.subscriptionOptions,r=(n=a).vapidKey===e.vapidKey,i=n.endpoint===e.endpoint,o=n.auth===e.auth,e=n.p256dh===e.p256dh,r&&i&&o&&e)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,ik(c,s.token)];case 5:return t.sent(),[3,7];case 6:return u=t.sent(),console.warn(u),[3,7];case 7:return[2,hk(c,a)];case 8:return Date.now()>=s.createTime+6048e5?[2,function(i,o,s){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(o,s){return bo(this,void 0,void 0,function(){var e,n,r,i;return _o(this,function(t){switch(t.label){case 0:return[4,sk(o)];case 1:e=t.sent(),n=ak(s.subscriptionOptions),n={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(ok(o.appConfig)+"/"+s.token,n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),VA.create("token-update-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,VA.create("token-update-failed",{errorInfo:i});if(!r.token)throw VA.create("token-update-no-token");return[2,r.token]}})})}(o,i)];case 1:return e=t.sent(),n=mo(mo({},i),{token:e,createTime:Date.now()}),[4,nk(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,ck(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:s.token,createTime:Date.now(),subscriptionOptions:a},c,h)]:[2,s.token];case 9:return[2]}var e,n,r,i,o})})}function ck(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,ek(n)];case 1:return(e=t.sent())?[4,ik(n,e.token)]:[3,4];case 2:return t.sent(),[4,function(r){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return e=rk(r),[4,tk()];case 1:return n=t.sent(),[4,(n=n.transaction($A,"readwrite")).objectStore($A).delete(e)];case 2:return t.sent(),[4,n.complete];case 3:return t.sent(),[2]}})})}(n)];case 3:t.sent(),t.label=4;case 4:return[4,r.pushManager.getSubscription()];case 5:return(e=t.sent())?[2,e.unsubscribe()]:[2,!0]}})})}function hk(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,function(o,s){return bo(this,void 0,void 0,function(){var e,n,r,i;return _o(this,function(t){switch(t.label){case 0:return[4,sk(o)];case 1:e=t.sent(),n=ak(s),n={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(ok(o.appConfig),n)];case 3:return[4,t.sent().json()];case 4:return r=t.sent(),[3,6];case 5:throw i=t.sent(),VA.create("token-subscribe-failed",{errorInfo:i});case 6:if(r.error)throw i=r.error.message,VA.create("token-subscribe-failed",{errorInfo:i});if(!r.token)throw VA.create("token-subscribe-no-token");return[2,r.token]}})})}(n,r)];case 1:return e=t.sent(),e={token:e,createTime:Date.now(),subscriptionOptions:r},[4,nk(n,e)];case 2:return t.sent(),[2,e.token]}})})}function lk(t){var e={from:t.from,collapseKey:t.collapse_key};return function(t,e){if(!e.notification)return;t.notification={};var n=e.notification.title;n&&(t.notification.title=n);n=e.notification.body;n&&(t.notification.body=n);e=e.notification.image;e&&(t.notification.image=e)}(e,t),function(t,e){if(!e.data)return;t.data=e.data}(e,t),function(t,e){if(!e.fcmOptions)return;t.fcmOptions={};var n=e.fcmOptions.link;n&&(t.fcmOptions.link=n);e=e.fcmOptions.analytics_label;e&&(t.fcmOptions.analyticsLabel=e)}(e,t),e}function fk(t){return"object"==typeof t&&t&&HA in t}var pk=(Object.defineProperty(dk.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),dk.prototype.setBackgroundMessageHandler=function(t){if(this.isOnBackgroundMessageUsed=!1,!t||"function"!=typeof t)throw VA.create("invalid-bg-handler");this.bgMessageHandler=t},dk.prototype.onBackgroundMessage=function(t){var e=this;return this.isOnBackgroundMessageUsed=!0,this.bgMessageHandler=t,function(){e.bgMessageHandler=null}},dk.prototype.getToken=function(){var n;return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,ek(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(n=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==n?n:qA,t.label=2;case 2:return[2,uk(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},dk.prototype.deleteToken=function(){return ck(this.firebaseDependencies,self.registration)},dk.prototype.requestPermission=function(){throw VA.create("only-available-in-window")},dk.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw VA.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw VA.create("invalid-vapid-key");this.vapidKey=t},dk.prototype.useServiceWorker=function(){throw VA.create("only-available-in-window")},dk.prototype.onMessage=function(){throw VA.create("only-available-in-window")},dk.prototype.onTokenRefresh=function(){throw VA.create("only-available-in-window")},dk.prototype.onPush=function(a){return bo(this,void 0,void 0,function(){var i,o,s;return _o(this,function(t){switch(t.label){case 0:return(s=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(a))?[4,vk()]:(console.debug("FirebaseMessaging: failed to get parsed MessagePayload from the PushEvent. Skip handling the push."),[2]);case 1:return(i=t.sent(),i.some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")}))?[2,function(t,e){var n,r;e.isFirebaseMessaging=!0,e.messageType=jA.PUSH_RECEIVED;try{for(var i=wo(t),o=i.next();!o.done;o=i.next()){o.value.postMessage(e)}}catch(t){n={error:t}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}}(i,s)]:(o=!1,s.notification?[4,function(t){var e=t.actions,n=Notification.maxActions;e&&n&&e.length>n&&console.warn("This browser only supports "+n+" actions. The remaining actions will not be displayed.");return self.registration.showNotification(null!==(n=t.title)&&void 0!==n?n:"",t)}(((r=mo({},(e=s).notification)).data=((n={})[WA]=e,n),r))]:[3,3]);case 2:t.sent(),o=!0,t.label=3;case 3:return!0===o&&!1===this.isOnBackgroundMessageUsed?[2]:(this.bgMessageHandler&&(s=lk(s),"function"==typeof this.bgMessageHandler?this.bgMessageHandler(s):this.bgMessageHandler.next(s)),[2])}var e,n,r})})},dk.prototype.onSubChange=function(n){var r;return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,ck(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,ek(this.firebaseDependencies)];case 3:return e=t.sent(),[4,ck(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,uk(this.firebaseDependencies,self.registration,null!==(r=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==r?r:qA)];case 5:return t.sent(),[2]}})})},dk.prototype.onNotificationClick=function(a){var u;return bo(this,void 0,void 0,function(){var n,r,i,o,s;return _o(this,function(t){switch(t.label){case 0:return(n=null===(u=null===(u=a.notification)||void 0===u?void 0:u.data)||void 0===u?void 0:u[WA])?a.action?[2]:(a.stopImmediatePropagation(),a.notification.close(),(r=function(t){var e,n=null!==(e=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==e?e:null===(n=t.notification)||void 0===n?void 0:n.click_action;if(n)return n;return fk(t.data)?self.location.origin:null}(n))?(i=new URL(r,self.location.href),o=new URL(self.location.origin),i.host!==o.host?[2]:[4,function(u){return bo(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return _o(this,function(t){switch(t.label){case 0:return[4,vk()];case 1:e=t.sent();try{for(n=wo(e),r=n.next();!r.done;r=n.next())if(i=r.value,o=new URL(i.url,self.location.href),u.host===o.host)return[2,i]}catch(t){s={error:t}}finally{try{r&&!r.done&&(a=n.return)&&a.call(n)}finally{if(s)throw s.error}}return[2,null]}})})}(i)]):[2]):[2];case 1:return(s=t.sent())?[3,4]:[4,self.clients.openWindow(r)];case 2:return s=t.sent(),[4,(e=3e3,new Promise(function(t){setTimeout(t,e)}))];case 3:return t.sent(),[3,6];case 4:return[4,s.focus()];case 5:s=t.sent(),t.label=6;case 6:return s?(n.messageType=jA.NOTIFICATION_CLICKED,n.isFirebaseMessaging=!0,[2,s.postMessage(n)]):[2]}var e})})},dk);function dk(t){var e=this;this.firebaseDependencies=t,this.isOnBackgroundMessageUsed=null,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function vk(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}var yk=(Object.defineProperty(gk.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!1,configurable:!0}),gk.prototype.messageEventListener=function(i){return bo(this,void 0,void 0,function(){var n,r;return _o(this,function(t){switch(t.label){case 0:return(n=i.data).isFirebaseMessaging?(this.onMessageCallback&&n.messageType===jA.PUSH_RECEIVED&&("function"==typeof this.onMessageCallback?this.onMessageCallback((delete(e=Object.assign({},n)).messageType,delete e.isFirebaseMessaging,e)):this.onMessageCallback.next(Object.assign({},n))),fk(r=n.data)&&"1"===r["google.c.a.e"]?[4,this.logEvent(n.messageType,r)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}var e})})},gk.prototype.getVapidKey=function(){return this.vapidKey},gk.prototype.getSwReg=function(){return this.swRegistration},gk.prototype.getToken=function(e){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return"default"!==Notification.permission?[3,2]:[4,Notification.requestPermission()];case 1:t.sent(),t.label=2;case 2:if("granted"!==Notification.permission)throw VA.create("permission-blocked");return[4,this.updateVapidKey(null==e?void 0:e.vapidKey)];case 3:return t.sent(),[4,this.updateSwReg(null==e?void 0:e.serviceWorkerRegistration)];case 4:return t.sent(),[2,uk(this.firebaseDependencies,this.swRegistration,this.vapidKey)]}})})},gk.prototype.updateVapidKey=function(e){return bo(this,void 0,void 0,function(){return _o(this,function(t){return e?this.vapidKey=e:this.vapidKey||(this.vapidKey=qA),[2]})})},gk.prototype.updateSwReg=function(e){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return e||this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:if(!e&&this.swRegistration)return[2];if(!(e instanceof ServiceWorkerRegistration))throw VA.create("invalid-sw-registration");return this.swRegistration=e,[2]}})})},gk.prototype.registerDefaultSw=function(){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 1:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,3];case 2:throw e=t.sent(),VA.create("failed-service-worker-registration",{browserErrorMessage:e.message});case 3:return[2]}})})},gk.prototype.deleteToken=function(){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return this.swRegistration?[3,2]:[4,this.registerDefaultSw()];case 1:t.sent(),t.label=2;case 2:return[2,ck(this.firebaseDependencies,this.swRegistration)]}})})},gk.prototype.requestPermission=function(){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?VA.create("permission-blocked"):VA.create("permission-default")}})})},gk.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw VA.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw VA.create("invalid-vapid-key");this.vapidKey=t},gk.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw VA.create("invalid-sw-registration");if(this.swRegistration)throw VA.create("use-sw-after-get-token");this.swRegistration=t},gk.prototype.onMessage=function(t){var e=this;return this.onMessageCallback=t,function(){e.onMessageCallback=null}},gk.prototype.setBackgroundMessageHandler=function(){throw VA.create("only-available-in-sw")},gk.prototype.onBackgroundMessage=function(){throw VA.create("only-available-in-sw")},gk.prototype.onTokenRefresh=function(){return function(){}},gk.prototype.logEvent=function(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case jA.NOTIFICATION_CLICKED:return"notification_open";case jA.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[HA],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},gk);function gk(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}function mk(t){return VA.create("missing-app-config-values",{valueName:t})}Rr={isSupported:bk};function bk(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}Ql.INTERNAL.registerComponent(new bs("messaging",function(t){var e=t.getProvider("app").getImmediate(),t={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw mk("App Configuration Object");if(!t.name)throw mk("App Name");var r=t.options;try{for(var i=wo(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw mk(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!bk())throw VA.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?pk:yk)(t)},"PUBLIC").setServiceProps(Rr));var _k,wk="firebasestorage.googleapis.com",Ek=12e4,Ik=6e5,Tk=(go(Sk,_k=Go),Sk.prototype.codeEquals=function(t){return Nk(t)===this.code},Object.defineProperty(Sk.prototype,"message",{get:function(){return this.customData.serverResponse?this.message+"\n"+this.customData.serverResponse:this.message},enumerable:!1,configurable:!0}),Object.defineProperty(Sk.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t},enumerable:!1,configurable:!0}),Sk);function Sk(t,e){e=_k.call(this,Nk(t),"Firebase Storage: "+e)||this;return e.customData={serverResponse:null},Object.setPrototypeOf(e,Sk.prototype),e}var Ck={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function Nk(t){return"storage/"+t}function Ak(){return new Tk(Ck.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function kk(){return new Tk(Ck.CANCELED,"User canceled the upload/download.")}function Ok(){return new Tk(Ck.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Pk(){return new Tk(Ck.APP_DELETED,"The Firebase app was deleted.")}function Dk(t,e){return new Tk(Ck.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function Rk(t){throw new Tk(Ck.INTERNAL_ERROR,"Internal error: "+t)}var xk={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},Lk=function(t,e){this.data=t,this.contentType=e||null};function Mk(t,e){switch(t){case xk.RAW:return new Lk(Fk(e));case xk.BASE64:case xk.BASE64URL:return new Lk(Uk(t,e));case xk.DATA_URL:return new Lk(function(t){t=new jk(t);return t.base64?Uk(xk.BASE64,t.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw Dk(xk.DATA_URL,"Malformed data URL.")}return Fk(e)}(t.rest)}(e),new jk(e).contentType)}throw Ak()}function Fk(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Uk(e,t){switch(e){case xk.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw Dk(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case xk.BASE64URL:r=-1!==t.indexOf("+"),n=-1!==t.indexOf("/");if(r||n)throw Dk(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var i;try{i=atob(t)}catch(t){throw Dk(e,"Invalid character found")}for(var o=new Uint8Array(i.length),s=0;s<i.length;s++)o[s]=i.charCodeAt(s);return o}var jk=function(t){var e;if(this.base64=!1,(this.contentType=null)===(e=t.match(/^data:([^,]+)?,/)))throw Dk(xk.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r=e[1]||null;null!=r&&(this.base64=(n=";base64",(e=r).length>=n.length&&e.substring(e.length-n.length)===n),this.contentType=this.base64?r.substring(0,r.length-";base64".length):r),this.rest=t.substring(t.indexOf(",")+1)};var Vk,qk={STATE_CHANGED:"state_changed"},Bk="running",Wk="pausing",Hk="paused",Gk="success",Kk="canceling",zk="canceled",Qk="error",Xk={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function Yk(t){switch(t){case Bk:case Wk:case Kk:return Xk.RUNNING;case Hk:return Xk.PAUSED;case Gk:return Xk.SUCCESS;case zk:return Xk.CANCELED;case Qk:default:return Xk.ERROR}}function Jk(t){return null!=t}function $k(t){return"string"==typeof t||t instanceof String}function Zk(t){return tO()&&t instanceof Blob}function tO(){return"undefined"!=typeof Blob}function eO(t,e,n,r){if(r<e)throw new Tk(Ck.INVALID_ARGUMENT,"Invalid value for '"+t+"'. Expected "+e+" or greater.");if(n<r)throw new Tk(Ck.INVALID_ARGUMENT,"Invalid value for '"+t+"'. Expected "+n+" or less.")}(M=Vk=Vk||{})[M.NO_ERROR=0]="NO_ERROR",M[M.NETWORK_ERROR=1]="NETWORK_ERROR",M[M.ABORT=2]="ABORT";var nO=(rO.prototype.send=function(t,e,n,r){if(this.sent_)throw Rk("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),Jk(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return Jk(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},rO.prototype.getErrorCode=function(){if(!this.sent_)throw Rk("cannot .getErrorCode() before sending");return this.errorCode_},rO.prototype.getStatus=function(){if(!this.sent_)throw Rk("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},rO.prototype.getResponseText=function(){if(!this.sent_)throw Rk("cannot .getResponseText() before sending");return this.xhr_.responseText},rO.prototype.abort=function(){this.xhr_.abort()},rO.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},rO.prototype.addUploadProgressListener=function(t){Jk(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},rO.prototype.removeUploadProgressListener=function(t){Jk(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},rO);function rO(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=Vk.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=Vk.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=Vk.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var iO=(oO.prototype.createXhrIo=function(){return new nO},oO);function oO(){}function sO(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(tO())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var aO=(uO.prototype.size=function(){return this.size_},uO.prototype.type=function(){return this.type_},uO.prototype.slice=function(t,e){if(Zk(this.data_)){var n=this.data_,r=(i=t,r=e,(n=n).webkitSlice?n.webkitSlice(i,r):n.mozSlice?n.mozSlice(i,r):n.slice?n.slice(i,r):null);return null===r?null:new uO(r)}var i,r;return new uO(new Uint8Array(this.data_.buffer,t,e-t),!0)},uO.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(tO()){var n=t.map(function(t){return t instanceof uO?t.data_:t});return new uO(sO.apply(null,n))}var n=t.map(function(t){return $k(t)?Mk(xk.RAW,t).data:t.data_}),r=0;n.forEach(function(t){r+=t.byteLength});var i=new Uint8Array(r),o=0;return n.forEach(function(t){for(var e=0;e<t.length;e++)i[o++]=t[e]}),new uO(i,!0)},uO.prototype.uploadData=function(){return this.data_},uO);function uO(t,e){var n=0,r="";Zk(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var cO=(Object.defineProperty(hO.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(hO.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),hO.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},hO.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},hO.makeFromBucketSpec=function(e){var t,n;try{t=hO.makeFromUrl(e)}catch(t){return new hO(e,"")}if(""===t.path)return t;throw n=e,new Tk(Ck.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")},hO.makeFromUrl=function(t){var e=null,n="([A-Za-z0-9.\\-_]+)";var r=new RegExp("^gs://"+n+"(/(.*))?$","i");function i(t){t.path_=decodeURIComponent(t.path)}for(var o=wk.replace(/[.]/g,"\\."),s=[{regex:r,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/"+n+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:i},{regex:new RegExp("^https?://(?:storage.googleapis.com|storage.cloud.google.com)/"+n+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:i}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(t);if(c){e=new hO(c[u.indices.bucket],c[u.indices.path]||"");u.postModify(e);break}}if(null==e)throw n=t,new Tk(Ck.INVALID_URL,"Invalid URL '"+n+"'.");return e},hO);function hO(t,e){this.bucket=t,this.path_=e}function lO(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function fO(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function pO(t){return"https://"+wk+"/v0"+t}function dO(t){var e,n=encodeURIComponent,r="?";for(e in t){t.hasOwnProperty(e)&&(r=r+(n(e)+"="+n(t[e]))+"&")}return r=r.slice(0,-1)}function vO(t,e){return e}var yO=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||vO},gO=null;function mO(){if(gO)return gO;var t=[];t.push(new yO("bucket")),t.push(new yO("generation")),t.push(new yO("metageneration")),t.push(new yO("name","fullPath",!0));var e=new yO("name");e.xform=function(t,e){return!$k(e=e)||e.length<2?e:fO(e)},t.push(e);e=new yO("size");return e.xform=function(t,e){return Jk(e)?Number(e):e},t.push(e),t.push(new yO("timeCreated")),t.push(new yO("updated")),t.push(new yO("md5Hash",null,!0)),t.push(new yO("cacheControl",null,!0)),t.push(new yO("contentDisposition",null,!0)),t.push(new yO("contentEncoding",null,!0)),t.push(new yO("contentLanguage",null,!0)),t.push(new yO("contentType",null,!0)),t.push(new yO("metadata","customMetadata",!0)),gO=t}function bO(n,r){Object.defineProperty(n,"ref",{get:function(){var t=n.bucket,e=n.fullPath,e=new cO(t,e);return r.makeStorageReference(e)}})}function _O(t,e,n){e=lO(e);if(null===e)return null;return function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return bO(r,t),r}(t,e,n)}function wO(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var EO="prefixes",IO="items";function TO(t,e,n){n=lO(n);if(null===n)return null;return function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[EO])for(var i=0,o=n[EO];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new cO(e,s));r.prefixes.push(a)}if(n[IO])for(var u=0,c=n[IO];u<c.length;u++){var h=c[u],a=t.makeStorageReference(new cO(e,h.name));r.items.push(a)}return r}(t,e,n)}var SO=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function CO(t){if(!t)throw Ak()}function NO(n,r){return function(t,e){return CO(null!==(e=_O(n,e,r))),e}}function AO(n,r){return function(t,e){return CO(null!==(e=TO(n,r,e))),e}}function kO(r,i){return function(t,e){var n=_O(r,e,i);return CO(null!==n),function(r,t){if(null===(t=lO(t)))return null;if(!$k(t.downloadTokens))return null;if(0===(t=t.downloadTokens).length)return null;var i=encodeURIComponent;return t.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return pO("/b/"+i(e)+"/o/"+i(n))+dO({alt:"media",token:t})})[0]}(n,e)}}function OO(i){return function(t,e){var n,r=401===t.getStatus()?new Tk(Ck.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(n=i.bucket,new Tk(Ck.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=i.path,new Tk(Ck.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):e;return r.serverResponse=e.serverResponse,r}}function PO(r){var i=OO(r);return function(t,e){var n=i(t,e);return 404===t.getStatus()&&(t=r.path,n=new Tk(Ck.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")),n.serverResponse=e.serverResponse,n}}function DO(t,e,n){var r=pO(e.fullServerUrl()),i=t.maxOperationRetryTime,i=new SO(r,"GET",NO(t,n),i);return i.errorHandler=PO(e),i}function RO(t,e,n){n=Object.assign({},n);return n.fullPath=t.path,n.size=e.size(),n.contentType||(n.contentType=(t=e,(e=null)&&e.contentType||t&&t.type()||"application/octet-stream")),n}function xO(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=RO(e,r,i),i="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+wO(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",a="\r\n--"+a+"--",r=aO.getBlob(i,r,a);if(null===r)throw Ok();a={name:u.fullPath},u=pO(o),o=t.maxUploadRetryTime,o=new SO(u,"POST",NO(t,n),o);return o.urlParams=a,o.headers=s,o.body=r.uploadData(),o.errorHandler=OO(e),o}var LO=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function MO(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){CO(!1)}return CO(!!n&&-1!==(e||["active"]).indexOf(n)),n}function FO(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=RO(e,r,i),i={name:s.fullPath},o=pO(o),r={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},n=wO(s,n),t=t.maxUploadRetryTime;t=new SO(o,"POST",function(t){var e;MO(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){CO(!1)}return CO($k(e)),e},t);return t.urlParams=i,t.headers=r,t.body=n,t.errorHandler=OO(e),t}function UO(t,e,n,i){t=t.maxUploadRetryTime,t=new SO(n,"POST",function(t){var e=MO(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){CO(!1)}n||CO(!1);var r=Number(n);return CO(!isNaN(r)),new LO(r,i.size(),"final"===e)},t);return t.headers={"X-Goog-Upload-Command":"query"},t.errorHandler=OO(e),t}function jO(t,o,e,s,n,a,r,i){var u=new LO(0,0);if(r?(u.current=r.current,u.total=r.total):(u.current=0,u.total=s.size()),s.size()!==u.total)throw new Tk(Ck.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var c=u.total-u.current,h=c;0<n&&(h=Math.min(h,n));r=u.current,n=r+h,c={"X-Goog-Upload-Command":h===c?"upload, finalize":"upload","X-Goog-Upload-Offset":u.current},r=s.slice(r,n);if(null===r)throw Ok();n=o.maxUploadRetryTime,n=new SO(e,"POST",function(t,e){var n=MO(t,["active","final"]),r=u.current+h,i=s.size(),e="final"===n?NO(o,a)(t,e):null;return new LO(r,i,"final"===n,e)},n);return n.headers=c,n.body=r.uploadData(),n.progressCallback=i||null,n.errorHandler=OO(t),n}var VO=function(t,e,n){"function"==typeof t||Jk(e)||Jk(n)?(this.next=t,this.error=e||null,this.complete=n||null):(t=t,this.next=t.next||null,this.error=t.error||null,this.complete=t.complete||null)},qO=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function BO(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var WO=(HO.prototype.makeProgressCallback_=function(){var e=this,n=this.transferred_;return function(t){return e.updateProgress_(n+t)}},HO.prototype.shouldDoResumable_=function(t){return 262144<t.size()},HO.prototype.start_=function(){this.state_===Bk&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},HO.prototype.resolveToken_=function(e){var n=this;this.service_.getAuthToken().then(function(t){switch(n.state_){case Bk:e(t);break;case Kk:n.transition_(zk);break;case Wk:n.transition_(Hk)}})},HO.prototype.createResumable_=function(){var n=this;this.resolveToken_(function(t){var e=FO(n.service_,n.location_,n.mappings_,n.blob_,n.metadata_),t=n.service_.makeRequest(e,t);(n.request_=t).getPromise().then(function(t){n.request_=null,n.uploadUrl_=t,n.needToFetchStatus_=!1,n.completeTransitions_()},n.errorHandler_)})},HO.prototype.fetchStatus_=function(){var n=this,r=this.uploadUrl_;this.resolveToken_(function(t){var e=UO(n.service_,n.location_,r,n.blob_),t=n.service_.makeRequest(e,t);(n.request_=t).getPromise().then(function(t){n.request_=null,n.updateProgress_(t.current),n.needToFetchStatus_=!1,t.finalized&&(n.needToFetchMetadata_=!0),n.completeTransitions_()},n.errorHandler_)})},HO.prototype.continueUpload_=function(){var n=this,r=262144*this.chunkMultiplier_,i=new LO(this.transferred_,this.blob_.size()),o=this.uploadUrl_;this.resolveToken_(function(t){var e;try{e=jO(n.location_,n.service_,o,n.blob_,r,n.mappings_,i,n.makeProgressCallback_())}catch(t){return n.error_=t,void n.transition_(Qk)}t=n.service_.makeRequest(e,t);(n.request_=t).getPromise().then(function(t){n.increaseMultiplier_(),n.request_=null,n.updateProgress_(t.current),t.finalized?(n.metadata_=t.metadata,n.transition_(Gk)):n.completeTransitions_()},n.errorHandler_)})},HO.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},HO.prototype.fetchMetadata_=function(){var n=this;this.resolveToken_(function(t){var e=DO(n.service_,n.location_,n.mappings_),t=n.service_.makeRequest(e,t);(n.request_=t).getPromise().then(function(t){n.request_=null,n.metadata_=t,n.transition_(Gk)},n.metadataErrorHandler_)})},HO.prototype.oneShotUpload_=function(){var n=this;this.resolveToken_(function(t){var e=xO(n.service_,n.location_,n.mappings_,n.blob_,n.metadata_),t=n.service_.makeRequest(e,t);(n.request_=t).getPromise().then(function(t){n.request_=null,n.metadata_=t,n.updateProgress_(n.blob_.size()),n.transition_(Gk)},n.errorHandler_)})},HO.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},HO.prototype.transition_=function(t){if(this.state_!==t)switch(t){case Kk:case Wk:this.state_=t,null!==this.request_&&this.request_.cancel();break;case Bk:var e=this.state_===Hk;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case Hk:this.state_=t,this.notifyObservers_();break;case zk:this.error_=kk(),this.state_=t,this.notifyObservers_();break;case Qk:case Gk:this.state_=t,this.notifyObservers_()}},HO.prototype.completeTransitions_=function(){switch(this.state_){case Wk:this.transition_(Hk);break;case Kk:this.transition_(zk);break;case Bk:this.start_()}},Object.defineProperty(HO.prototype,"snapshot",{get:function(){var t=Yk(this.state_);return new qO(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!1,configurable:!0}),HO.prototype.on=function(t,e,n,r){var i=this,o=new VO(e,n,r);return this.addObserver_(o),function(){i.removeObserver_(o)}},HO.prototype.then=function(t,e){return this.promise_.then(t,e)},HO.prototype.catch=function(t){return this.then(null,t)},HO.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},HO.prototype.removeObserver_=function(t){t=this.observers_.indexOf(t);-1!==t&&this.observers_.splice(t,1)},HO.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},HO.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(Yk(this.state_)){case Xk.SUCCESS:BO(this.resolve_.bind(null,this.snapshot))();break;case Xk.CANCELED:case Xk.ERROR:BO(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},HO.prototype.notifyObserver_=function(t){switch(Yk(this.state_)){case Xk.RUNNING:case Xk.PAUSED:t.next&&BO(t.next.bind(t,this.snapshot))();break;case Xk.SUCCESS:t.complete&&BO(t.complete.bind(t))();break;case Xk.CANCELED:case Xk.ERROR:t.error&&BO(t.error.bind(t,this.error_))();break;default:t.error&&BO(t.error.bind(t,this.error_))()}},HO.prototype.resume=function(){var t=this.state_===Hk||this.state_===Wk;return t&&this.transition_(Bk),t},HO.prototype.pause=function(){var t=this.state_===Bk;return t&&this.transition_(Wk),t},HO.prototype.cancel=function(){var t=this.state_===Bk||this.state_===Wk;return t&&this.transition_(Kk),t},HO);function HO(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.service_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=Bk,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(Ck.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(Qk))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(Ck.CANCELED)?s.completeTransitions_():(s.error_=t,s.transition_(Qk))},this.promise_=new Promise(function(t,e){s.resolve_=t,s.reject_=e,s.start_()}),this.promise_.then(null,function(){})}var GO=(KO.prototype.toString=function(){return"gs://"+this.location.bucket+"/"+this.location.path},KO.prototype.newRef=function(t,e){return new KO(t,e)},KO.prototype.mappings=mO,KO.prototype.child=function(t){var e,t=(e=this.location.path,t=(t=t).split("/").filter(function(t){return 0<t.length}).join("/"),0===e.length?t:e+"/"+t),t=new cO(this.location.bucket,t);return this.newRef(this.service,t)},Object.defineProperty(KO.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;t=new cO(this.location.bucket,t);return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(KO.prototype,"root",{get:function(){var t=new cO(this.location.bucket,"");return this.newRef(this.service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(KO.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(KO.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!1,configurable:!0}),Object.defineProperty(KO.prototype,"name",{get:function(){return fO(this.location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(KO.prototype,"storage",{get:function(){return this.service},enumerable:!1,configurable:!0}),KO.prototype.put=function(t,e){return void 0===e&&(e=null),this.throwIfRoot_("put"),new WO(this,this.service,this.location,this.mappings(),new aO(t),e)},KO.prototype.putString=function(t,e,n){void 0===e&&(e=xk.RAW),this.throwIfRoot_("putString");t=Mk(e,t),n=Object.assign({},n);return!Jk(n.contentType)&&Jk(t.contentType)&&(n.contentType=t.contentType),new WO(this,this.service,this.location,this.mappings(),new aO(t.data,!0),n)},KO.prototype.delete=function(){var i=this;return this.throwIfRoot_("delete"),this.service.getAuthToken().then(function(t){var e,n,r,e=(e=i.service,n=i.location,r=pO(n.fullServerUrl()),e=e.maxOperationRetryTime,(e=new SO(r,"DELETE",function(t,e){},e)).successCodes=[200,204],e.errorHandler=PO(n),e);return i.service.makeRequest(e,t).getPromise()})},KO.prototype.listAll=function(){var t={prefixes:[],items:[]};return this.listAllHelper(t).then(function(){return t})},KO.prototype.listAllHelper=function(r,i){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return n={pageToken:i},[4,this.list(n)];case 1:return e=t.sent(),(n=r.prefixes).push.apply(n,e.prefixes),(n=r.items).push.apply(n,e.items),null==e.nextPageToken?[3,3]:[4,this.listAllHelper(r,e.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},KO.prototype.list=function(t){var a=this,u=t||{};return"number"==typeof u.maxResults&&eO("options.maxResults",1,1e3,u.maxResults),this.service.getAuthToken().then(function(t){var e,n,r,i,o,s,o=(e=a.service,n=a.location,r="/",i=u.pageToken,o=u.maxResults,s={},n.isRoot?s.prefix="":s.prefix=n.path+"/",r&&0<r.length&&(s.delimiter=r),i&&(s.pageToken=i),o&&(s.maxResults=o),i=pO(n.bucketOnlyServerUrl()),o=e.maxOperationRetryTime,(o=new SO(i,"GET",AO(e,n.bucket),o)).urlParams=s,o.errorHandler=OO(n),o);return a.service.makeRequest(o,t).getPromise()})},KO.prototype.getMetadata=function(){var n=this;return this.throwIfRoot_("getMetadata"),this.service.getAuthToken().then(function(t){var e=DO(n.service,n.location,n.mappings());return n.service.makeRequest(e,t).getPromise()})},KO.prototype.updateMetadata=function(a){var u=this;return this.throwIfRoot_("updateMetadata"),this.service.getAuthToken().then(function(t){var e,n,r,i,o,s,r=(e=u.service,n=u.location,r=a,i=u.mappings(),o=pO(n.fullServerUrl()),s=wO(r,i),r=e.maxOperationRetryTime,(r=new SO(o,"PATCH",NO(e,i),r)).headers={"Content-Type":"application/json; charset=utf-8"},r.body=s,r.errorHandler=PO(n),r);return u.service.makeRequest(r,t).getPromise()})},KO.prototype.getDownloadURL=function(){var s=this;return this.throwIfRoot_("getDownloadURL"),this.service.getAuthToken().then(function(t){var e,n,r,i,o,o=(e=s.service,n=s.location,r=s.mappings(),i=pO(n.fullServerUrl()),o=e.maxOperationRetryTime,(o=new SO(i,"GET",kO(e,r),o)).errorHandler=PO(n),o);return s.service.makeRequest(o,t).getPromise().then(function(t){if(null===t)throw new Tk(Ck.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})})},KO.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw t=t,new Tk(Ck.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")},KO);function KO(t,e){this.service=t,this.location=e instanceof cO?e:cO.makeFromUrl(e)}var zO=(QO.prototype.getPromise=function(){return this.promise_},QO.prototype.cancel=function(t){},QO);function QO(t){this.promise_=Promise.reject(t)}var XO=(YO.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());void 0!==s?r(s):r()}catch(t){i(t)}else null!==o?((n=Ak()).serverResponse=o.getResponseText(),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?Pk:kk)()):i(n=new Tk(Ck.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,To([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new JO(!1,null,!0)):this.backoffId_=(e=function(r,t){function i(t){var e=t.loaded,t=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,t)}t?r(!1,new JO(!1,null,!0)):(t=c.pool_.createXhrIo(),c.pendingXhr_=t,null!==c.progressCallback_&&t.addUploadProgressListener(i),t.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(i),c.pendingXhr_=null;var e=t.getErrorCode()===Vk.NO_ERROR,n=t.getStatus();e&&!c.isRetryStatusCode_(n)?(n=-1!==c.successCodes_.indexOf(n),r(!0,new JO(n,t))):(t=t.getErrorCode()===Vk.ABORT,r(!1,new JO(!1,null,t)))}))},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){v(o=!0)},t),v)},YO.prototype.getPromise=function(){return this.promise_},YO.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},YO.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),t=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||t},YO);function YO(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var JO=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function $O(t,e,n,r){var i=dO(t.urlParams),o=t.url+i,s=Object.assign({},t.headers);return i=s,(e=e)&&(i["X-Firebase-GMPID"]=e),e=s,null!==(n=n)&&0<n.length&&(e.Authorization="Firebase "+n),e=s,n=void 0!==Ql?Ql.SDK_VERSION:"AppManager",e["X-Firebase-Storage-Version"]="webjs/"+n,new XO(o,t.method,s,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}var ZO=(tP.extractBucket_=function(t){t=null==t?void 0:t.storageBucket;return null==t?null:cO.makeFromBucketSpec(t)},tP.prototype.getAuthToken=function(){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return(e=this.authProvider_.getImmediate({optional:!0}))?[4,e.getToken()]:[3,2];case 1:if(null!==(e=t.sent()))return[2,e.accessToken];t.label=2;case 2:return[2,null]}})})},tP.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requests_.forEach(function(t){return t.cancel()}),this.requests_.clear()},tP.prototype.makeStorageReference=function(t){return new GO(this,t)},tP.prototype.makeRequest=function(t,e){var n=this;if(this.deleted_)return new zO(Pk());var r=$O(t,this.appId_,e,this.pool_);return this.requests_.add(r),r.getPromise().then(function(){return n.requests_.delete(r)},function(){return n.requests_.delete(r)}),r},tP.prototype.ref=function(t){if(/^[A-Za-z]+:\/\//.test(t))throw new Tk(Ck.INVALID_ARGUMENT,"Expected child path but got a URL, use refFromURL instead.");if(null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new GO(this,this.bucket_);return null!=t?e.child(t):e},tP.prototype.refFromURL=function(t){if(!/^[A-Za-z]+:\/\//.test(t))throw new Tk(Ck.INVALID_ARGUMENT,"Expected full URL but got a child path, use ref instead.");try{cO.makeFromUrl(t)}catch(t){throw new Tk(Ck.INVALID_ARGUMENT,"Expected valid full URL but got an invalid one.")}return new GO(this,t)},Object.defineProperty(tP.prototype,"maxUploadRetryTime",{get:function(){return this.maxUploadRetryTime_},enumerable:!1,configurable:!0}),tP.prototype.setMaxUploadRetryTime=function(t){eO("time",0,Number.POSITIVE_INFINITY,t),this.maxUploadRetryTime_=t},Object.defineProperty(tP.prototype,"maxOperationRetryTime",{get:function(){return this.maxOperationRetryTime_},enumerable:!1,configurable:!0}),tP.prototype.setMaxOperationRetryTime=function(t){eO("time",0,Number.POSITIVE_INFINITY,t),this.maxOperationRetryTime_=t},Object.defineProperty(tP.prototype,"app",{get:function(){return this.app_},enumerable:!1,configurable:!0}),Object.defineProperty(tP.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!1,configurable:!0}),tP);function tP(t,e,n,r){this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=t,this.authProvider_=e,this.maxOperationRetryTime_=Ek,this.maxUploadRetryTime_=Ik,this.requests_=new Set,this.pool_=n,this.bucket_=null!=r?cO.makeFromBucketSpec(r):tP.extractBucket_(null===(r=this.app_)||void 0===r?void 0:r.options),this.internals_=new eP(this)}var eP=(nP.prototype.delete=function(){return this.service_.deleteApp(),Promise.resolve()},nP);function nP(t){this.service_=t}var rP,iP;function oP(t,e){var n=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal");return new ZO(n,t,new iO,e)}iP={TaskState:Xk,TaskEvent:qk,StringFormat:xk,Storage:ZO,Reference:GO},(rP=Ql).INTERNAL.registerComponent(new bs("storage",oP,"PUBLIC").setServiceProps(iP).setMultipleInstances(!0)),rP.registerVersion("@firebase/storage","0.4.0");var sP,aP,uP="0.4.3",cP="FB-PERF-TRACE-MEASURE",hP="@firebase/performance/config",lP="@firebase/performance/configexpire",Rr="Performance",M=((M={})["trace started"]="Trace {$traceName} was started before.",M["trace stopped"]="Trace {$traceName} is not running.",M["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",M["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",M["no window"]="Window is not available.",M["no app id"]="App id is not available.",M["no project id"]="Project id is not available.",M["no api key"]="Api key is not available.",M["invalid cc log"]="Attempted to queue invalid cc event",M["FB not default"]="Performance can only start when Firebase app instance is the default one.",M["RC response not ok"]="RC response is not ok",M["invalid attribute name"]="Attribute name {$attributeName} is invalid.",M["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",M["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",M["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",M),fP=new zo("performance",Rr,M),pP=new Rs(Rr);pP.logLevel=Ns.INFO;var dP,vP=(yP.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},yP.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},yP.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},yP.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},yP.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},yP.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},yP.prototype.requiredApisAvailable=function(){return fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled?!!Vo()||(pP.info("IndexedDB is not supported by current browswer"),!1):(pP.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},yP.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},yP.getInstance=function(){return void 0===sP&&(sP=new yP(aP)),sP},yP);function yP(t){if(!(this.window=t))throw fP.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}function gP(t,e){var n=t.length-e.length;if(n<0||1<n)throw fP.create("invalid String merger input");for(var r=[],i=0;i<t.length;i++)r.push(t.charAt(i)),e.length>i&&r.push(e.charAt(i));return r.join("")}var mP,bP,_P=(wP.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw fP.create("no app id");return t},wP.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw fP.create("no project id");return t},wP.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw fP.create("no api key");return t},wP.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},wP.getInstance=function(){return void 0===dP&&(dP=new wP),dP},wP);function wP(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=gP("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=gP("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(Rr=bP=bP||{})[Rr.UNKNOWN=0]="UNKNOWN",Rr[Rr.VISIBLE=1]="VISIBLE",Rr[Rr.HIDDEN=2]="HIDDEN";var EP=["firebase_","google_","ga_"],IP=new RegExp("^[a-zA-Z]\\w*$");function TP(){switch(vP.getInstance().document.visibilityState){case"visible":return bP.VISIBLE;case"hidden":return bP.HIDDEN;default:return bP.UNKNOWN}}var SP="0.0.1",CP={loggingEnabled:!0},NP="FIREBASE_INSTALLATIONS_AUTH";function AP(t){var n,e=function(){var t=vP.getInstance().localStorage;if(!t)return;var e=t.getItem(lP);if(!e||!function(t){return Number(t)>Date.now()}(e))return;var n=t.getItem(hP);if(!n)return;try{return JSON.parse(n)}catch(t){return}}();return e?(OP(e),Promise.resolve()):(n=t,function(){var t=_P.getInstance().installationsService.getToken();return t.then(function(t){}),t}().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+_P.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+_P.getInstance().getApiKey(),t=new Request(e,{method:"POST",headers:{Authorization:NP+" "+t},body:JSON.stringify({app_instance_id:n,app_instance_id_token:t,app_id:_P.getInstance().getAppId(),app_version:uP,sdk_version:SP})});return fetch(t).then(function(t){if(t.ok)return t.json();throw fP.create("RC response not ok")})}).catch(function(){pP.info(kP)}).then(OP).then(function(t){var e=vP.getInstance().localStorage;if(!t||!e)return;e.setItem(hP,JSON.stringify(t)),e.setItem(lP,String(Date.now()+60*_P.getInstance().configTimeToLive*60*1e3))},function(){}))}var kP="Could not fetch config, will use default configs";function OP(t){if(!t)return t;var e=_P.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):CP.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),n.fpr_log_transport_key&&(e.transportKey=n.fpr_log_transport_key),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=PP(e.tracesSamplingRate),e.logNetworkAfterSampling=PP(e.networkRequestsSamplingRate),t}function PP(t){return Math.random()<=t}var DP,RP=1;function xP(){return RP=2,DP=DP||function(){var n=vP.getInstance().document;return new Promise(function(t){var e;n&&"complete"!==n.readyState?(e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())},n.addEventListener("readystatechange",e)):t()})}().then(function(){return(t=_P.getInstance().installationsService.getId()).then(function(t){mP=t}),t;var t}).then(AP).then(LP,LP)}function LP(){RP=3}var MP,FP=1e4,UP=5500,jP=3,VP=jP,qP=[],BP=!1;function WP(t){setTimeout(function(){if(0!==VP)return qP.length?void function(){var t=To(qP);qP=[];var e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}});(function(t,r){return function(t){var e=_P.getInstance().getFlTransportFullUrl();return fetch(e,{method:"POST",body:JSON.stringify(t)})}(t).then(function(t){return t.ok||pP.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.nextRequestWaitMillis),n=FP;isNaN(e)||(n=Math.max(e,n));t=t.logResponseDetails;Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(qP=To(r,qP),pP.info("Retry transport request later.")),VP=jP,WP(n)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:_P.getInstance().logSource,log_event:e},t).catch(function(){qP=To(t,qP),VP--,pP.info("Tries left: "+VP+"."),WP(FP)})}():WP(FP)},t)}function HP(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw fP.create("invalid cc log");qP=To(qP,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}function GP(t,e){(MP=MP||HP(QP))(t,e)}function KP(t){var e=_P.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&vP.getInstance().requiredApisAvailable()&&(t.isAuto&&TP()!==bP.VISIBLE||(3===RP?zP(t):xP().then(function(){return zP(t)},function(){return zP(t)})))}function zP(t){var e;!mP||(e=_P.getInstance()).loggingEnabled&&e.logTraceAfterSampling&&setTimeout(function(){return GP(t,1)},0)}function QP(t,e){return(0===e?function(t){t={url:t.url,http_method:t.httpMethod||0,http_response_code:200,response_payload_bytes:t.responsePayloadBytes,client_start_time_us:t.startTimeUs,time_to_response_initiated_us:t.timeToResponseInitiatedUs,time_to_response_completed_us:t.timeToResponseCompletedUs},t={application_info:XP(),network_request_metric:t};return JSON.stringify(t)}:function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);t=t.getAttributes();0!==Object.keys(t).length&&(e.custom_attributes=t);e={application_info:XP(),trace_metric:e};return JSON.stringify(e)})(t)}function XP(){return{google_app_id:_P.getInstance().getAppId(),app_instance_id:mP,web_app_info:{sdk_version:uP,page_url:vP.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=vP.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:TP(),effective_connection_type:function(){var t=vP.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var YP=["_fp","_fcp","_fid"];var JP=($P.prototype.start=function(){if(1!==this.state)throw fP.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},$P.prototype.stop=function(){if(2!==this.state)throw fP.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),KP(this)},$P.prototype.record=function(t,e,n){if(t<=0)throw fP.create("nonpositive trace startTime",{traceName:this.name});if(e<=0)throw fP.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=mo({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}KP(this)},$P.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]?this.putMetric(t,e):this.putMetric(t,this.counters[t]+e)},$P.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<YP.indexOf(n))&&n.startsWith("_"))throw fP.create("invalid custom metric name",{customMetricName:t});var n,r;this.counters[t]=(t=e,(e=Math.floor(t))<t&&pP.info("Metric value should be an Integer, setting the value as : "+e+"."),e)},$P.prototype.getMetric=function(t){return this.counters[t]||0},$P.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length)&&(!EP.some(function(t){return n.startsWith(t)})&&!!n.match(IP)),r=0!==(r=e).length&&r.length<=100;if(i&&r)this.customAttributes[t]=e;else{if(!i)throw fP.create("invalid attribute name",{attributeName:t});if(!r)throw fP.create("invalid attribute value",{attributeValue:e})}},$P.prototype.getAttribute=function(t){return this.customAttributes[t]},$P.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},$P.prototype.getAttributes=function(){return mo({},this.customAttributes)},$P.prototype.setStartTime=function(t){this.startTimeUs=t},$P.prototype.setDuration=function(t){this.durationUs=t},$P.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),t=t&&t[0];t&&(this.durationUs=Math.floor(1e3*t.duration),this.startTimeUs=Math.floor(1e3*(t.startTime+this.api.getTimeOrigin())))},$P.createOobTrace=function(t,e,n){var r,i=vP.getInstance().getUrl();i&&(r=new $P("_wt_"+i,!0),i=Math.floor(1e3*vP.getInstance().getTimeOrigin()),r.setStartTime(i),t&&t[0]&&(r.setDuration(Math.floor(1e3*t[0].duration)),r.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),r.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),r.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e&&((t=e.find(function(t){return"first-paint"===t.name}))&&t.startTime&&r.putMetric("_fp",Math.floor(1e3*t.startTime)),(e=e.find(function(t){return"first-contentful-paint"===t.name}))&&e.startTime&&r.putMetric("_fcp",Math.floor(1e3*e.startTime)),n&&r.putMetric("_fid",Math.floor(1e3*n))),KP(r))},$P.createUserTimingTrace=function(t){KP(new $P(t,!1,t))},$P);function $P(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=vP.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||cP+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function ZP(t){var e,n,r,i=t;i&&void 0!==i.responseStart&&(n=vP.getInstance().getTimeOrigin(),r=Math.floor(1e3*(i.startTime+n)),t=i.responseStart?Math.floor(1e3*(i.responseStart-i.startTime)):void 0,n=Math.floor(1e3*(i.responseEnd-i.startTime)),i={url:i.name&&i.name.split("?")[0],responsePayloadBytes:i.transferSize,startTimeUs:r,timeToResponseInitiatedUs:t,timeToResponseCompletedUs:n},e=i,(r=_P.getInstance()).instrumentationEnabled&&(t=e.url,n=r.logEndPointUrl.split("?")[0],i=r.flTransportEndpointUrl.split("?")[0],t!==n&&t!==i&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout(function(){return GP(e,0)},0)))}var tD=5e3;function eD(){mP&&(setTimeout(function(){var t=vP.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");{var r;t.onFirstInputDelay?(r=setTimeout(function(){JP.createOobTrace(e,n),r=void 0},tD),t.onFirstInputDelay(function(t){r&&(clearTimeout(r),JP.createOobTrace(e,n,t))})):JP.createOobTrace(e,n)}},0),setTimeout(function(){for(var t=vP.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){ZP(r[n])}t.setupObserver("resource",ZP)},0),setTimeout(function(){for(var t=vP.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){nD(r[n])}t.setupObserver("measure",nD)},0))}function nD(t){t=t.name;t.substring(0,cP.length)!==cP&&JP.createUserTimingTrace(t)}var rD=(iD.prototype.trace=function(t){return new JP(t)},Object.defineProperty(iD.prototype,"instrumentationEnabled",{get:function(){return _P.getInstance().instrumentationEnabled},set:function(t){_P.getInstance().instrumentationEnabled=t},enumerable:!1,configurable:!0}),Object.defineProperty(iD.prototype,"dataCollectionEnabled",{get:function(){return _P.getInstance().dataCollectionEnabled},set:function(t){_P.getInstance().dataCollectionEnabled=t},enumerable:!1,configurable:!0}),iD);function iD(t){this.app=t,vP.getInstance().requiredApisAvailable()&&qo().then(function(t){t&&(BP||(WP(UP),BP=!0),xP().then(eD,eD))}).catch(function(t){pP.info("Environment doesn't support IndexedDB: "+t)})}var oD;function sD(t,e){if("[DEFAULT]"!==t.name)throw fP.create("FB not default");if("undefined"==typeof window)throw fP.create("no window");return aP=window,_P.getInstance().firebaseAppInstance=t,_P.getInstance().installationsService=e,new rD(t)}(oD=Ql).INTERNAL.registerComponent(new bs("performance",function(t){var e=t.getProvider("app").getImmediate(),t=t.getProvider("installations").getImmediate();return sD(e,t)},"PUBLIC")),oD.registerVersion("@firebase/performance","0.4.3");var aD,uD,cD="firebase_id",hD="origin",lD=6e4,fD="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",pD="https://www.googletagmanager.com/gtag/js";(Rr=aD=aD||{}).EVENT="event",Rr.SET="set",Rr.CONFIG="config",(Rr=uD=uD||{}).ADD_SHIPPING_INFO="add_shipping_info",Rr.ADD_PAYMENT_INFO="add_payment_info",Rr.ADD_TO_CART="add_to_cart",Rr.ADD_TO_WISHLIST="add_to_wishlist",Rr.BEGIN_CHECKOUT="begin_checkout",Rr.CHECKOUT_PROGRESS="checkout_progress",Rr.EXCEPTION="exception",Rr.GENERATE_LEAD="generate_lead",Rr.LOGIN="login",Rr.PAGE_VIEW="page_view",Rr.PURCHASE="purchase",Rr.REFUND="refund",Rr.REMOVE_FROM_CART="remove_from_cart",Rr.SCREEN_VIEW="screen_view",Rr.SEARCH="search",Rr.SELECT_CONTENT="select_content",Rr.SELECT_ITEM="select_item",Rr.SELECT_PROMOTION="select_promotion",Rr.SET_CHECKOUT_OPTION="set_checkout_option",Rr.SHARE="share",Rr.SIGN_UP="sign_up",Rr.TIMING_COMPLETE="timing_complete",Rr.VIEW_CART="view_cart",Rr.VIEW_ITEM="view_item",Rr.VIEW_ITEM_LIST="view_item_list",Rr.VIEW_PROMOTION="view_promotion",Rr.VIEW_SEARCH_RESULTS="view_search_results";var dD=new Rs("@firebase/analytics");function vD(o,s,a,u){return function(n,r,i){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return t.trys.push([0,6,,7]),n!==aD.EVENT?[3,2]:[4,function(u,c,h,l,f){return bo(this,void 0,void 0,function(){var n,r,e,i,o,s,a;return _o(this,function(t){switch(t.label){case 0:return(t.trys.push([0,4,,5]),n=[],f&&f.send_to)?(a=f.send_to,Array.isArray(a)||(a=[a]),[4,Promise.all(h)]):[3,2];case 1:for(r=t.sent(),e=function(e){var t=r.find(function(t){return t.measurementId===e}),t=t&&c[t.appId];if(!t)return n=[],"break";n.push(t)},i=0,o=a;i<o.length&&(s=o[i],"break"!==e(s));i++);t.label=2;case 2:return 0===n.length&&(n=Object.values(c)),[4,Promise.all(n)];case 3:return t.sent(),u(aD.EVENT,l,f||{}),[3,5];case 4:return a=t.sent(),dD.error(a),[3,5];case 5:return[2]}})})}(o,s,a,r,i)];case 1:return t.sent(),[3,5];case 2:return n!==aD.CONFIG?[3,4]:[4,function(r,i,o,s,a,u){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:e=s[a],t.label=1;case 1:return t.trys.push([1,7,,8]),e?[4,i[e]]:[3,3];case 2:return t.sent(),[3,6];case 3:return[4,Promise.all(o)];case 4:return n=t.sent(),(n=n.find(function(t){return t.measurementId===a}))?[4,i[n.appId]]:[3,6];case 5:t.sent(),t.label=6;case 6:return[3,8];case 7:return n=t.sent(),dD.error(n),[3,8];case 8:return r(aD.CONFIG,a,u),[2]}})})}(o,s,a,u,r,i)];case 3:return t.sent(),[3,5];case 4:o(aD.SET,r),t.label=5;case 5:return[3,7];case 6:return e=t.sent(),dD.error(e),[3,7];case 7:return[2]}})})}}var Rr=((Rr={})["already-exists"]="A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.",Rr["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",Rr["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate: {$reason}",Rr["invalid-analytics-context"]="Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Rr["indexeddb-unavailable"]="IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}",Rr["fetch-throttle"]="The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.",Rr["config-fetch-failed"]="Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}",Rr["no-api-key"]='The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',Rr["no-app-id"]='The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',Rr),yD=new zo("analytics","Analytics",Rr),gD=30;function mD(t,e){void 0===t&&(t={}),void 0===e&&(e=1e3),this.throttleMetadata=t,this.intervalMillis=e}var bD=new(mD.prototype.getThrottleMetadata=function(t){return this.throttleMetadata[t]},mD.prototype.setThrottleMetadata=function(t,e){this.throttleMetadata[t]=e},mD.prototype.deleteThrottleMetadata=function(t){delete this.throttleMetadata[t]},mD);function _D(o){var s;return bo(this,void 0,void 0,function(){var e,n,r,i;return _o(this,function(t){switch(t.label){case 0:return e=o.appId,i=o.apiKey,i={method:"GET",headers:new Headers({Accept:"application/json","x-goog-api-key":i})},e=fD.replace("{app-id}",e),[4,fetch(e,i)];case 1:if(200===(n=t.sent()).status||304===n.status)return[3,6];r="",t.label=2;case 2:return t.trys.push([2,4,,5]),[4,n.json()];case 3:return i=t.sent(),null!==(s=i.error)&&void 0!==s&&s.message&&(r=i.error.message),[3,5];case 4:return t.sent(),[3,5];case 5:throw yD.create("config-fetch-failed",{httpStatus:n.status,responseMessage:r});case 6:return[2,n.json()]}})})}function wD(a,u,c){return void 0===u&&(u=bD),bo(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return _o(this,function(t){if(i=a.options,e=i.appId,n=i.apiKey,r=i.measurementId,!e)throw yD.create("no-app-id");if(n)return i=u.getThrottleMetadata(e)||{backoffCount:0,throttleEndTimeMillis:Date.now()},o=new ID,setTimeout(function(){return bo(s,void 0,void 0,function(){return _o(this,function(t){return o.abort(),[2]})})},void 0!==c?c:lD),[2,function u(c,t,h,l){var f=t.throttleEndTimeMillis,p=t.backoffCount;void 0===l&&(l=bD);return bo(this,void 0,void 0,function(){var e,n,r,s,a;return _o(this,function(t){switch(t.label){case 0:e=c.appId,n=c.measurementId,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(i=h,o=f,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(yD.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 2:return t.sent(),[3,4];case 3:if(s=t.sent(),n)return dD.warn("Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+s.message+"]"),[2,{appId:e,measurementId:n}];throw s;case 4:return t.trys.push([4,6,,7]),[4,_D(c)];case 5:return a=t.sent(),l.deleteThrottleMetadata(e),[2,a];case 6:if(ED(r=t.sent()))return s=503===Number(r.customData.httpStatus)?ms(p,l.intervalMillis,gD):ms(p,l.intervalMillis),a={throttleEndTimeMillis:Date.now()+s,backoffCount:p+1},l.setThrottleMetadata(e,a),dD.debug("Calling attemptFetch again in "+s+" millis"),[2,u(c,a,h,l)];if(l.deleteThrottleMetadata(e),n)return dD.warn("Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID "+n+' provided in the "measurementId" field in the local Firebase config. ['+r.message+"]"),[2,{appId:e,measurementId:n}];throw r;case 7:return[2]}var i,o})})}({appId:e,apiKey:n,measurementId:r},i,o,u)];if(r)return[2,{measurementId:r,appId:e}];throw yD.create("no-api-key")})})}function ED(t){if(t instanceof Go&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}var ID=(TD.prototype.addEventListener=function(t){this.listeners.push(t)},TD.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},TD);function TD(){this.listeners=[]}function SD(i,o,s,a,u){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return(e=wD(i)).then(function(t){s[t.measurementId]=t.appId,i.options.measurementId&&t.measurementId!==i.options.measurementId&&dD.warn("The measurement ID in the local Firebase config ("+i.options.measurementId+") does not match the measurement ID fetched from the server ("+t.measurementId+"). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.")}).catch(function(t){return dD.error(t)}),o.push(e),n=function(){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return Vo()?[3,1]:(dD.warn(yD.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),[2,!1]);case 1:return t.trys.push([1,3,,4]),[4,qo()];case 2:return t.sent(),[3,4];case 3:return e=t.sent(),dD.warn(yD.create("indexeddb-unavailable",{errorInfo:e}).message),[2,!1];case 4:return[2,!0]}})})}().then(function(t){return t?a.getId():void 0}),[4,Promise.all([e,n])];case 1:return r=t.sent(),e=r[0],n=r[1],u("js",new Date),(r={})[hD]="firebase",r.update=!0,r=r,null!=n&&(r[cD]=n),u(aD.CONFIG,e.measurementId,r),[2,e.measurementId]}})})}var CD,ND,AD={},kD=[],OD={},PD="dataLayer",DD="gtag",RD=!1;function xD(t){if(RD)throw yD.create("already-initialized");t.dataLayerName&&(PD=t.dataLayerName),t.gtagName&&(DD=t.gtagName)}function LD(t,e){n=[],Fo()&&n.push("This is a browser extension environment."),Bo()||n.push("Cookies are not available."),0<n.length&&(n=n.map(function(t,e){return"("+(e+1)+") "+t}).join(" "),n=yD.create("invalid-analytics-context",{errorInfo:n}),dD.warn(n.message));var n,r,i,o,s,a,u=t.options.appId;if(!u)throw yD.create("no-app-id");if(!t.options.apiKey){if(!t.options.measurementId)throw yD.create("no-api-key");dD.warn('The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID '+t.options.measurementId+' provided in the "measurementId" field in the local Firebase config.')}if(null!=AD[u])throw yD.create("already-exists",{id:u});return RD||(function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(pD))return r}}()||(s=PD,(a=document.createElement("script")).src=pD+"?l="+s,a.async=!0,document.head.appendChild(a)),i=PD,o=[],Array.isArray(window[i])?o=window[i]:window[i]=o,n=AD,s=kD,a=OD,r=PD,i=DD,o=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[r].push(arguments)},window[i]&&"function"==typeof window[i]&&(o=window[i]),window[i]=vD(o,n,s,a),i={gtagCore:o,wrappedGtag:window[i]},ND=i.wrappedGtag,CD=i.gtagCore,RD=!0),AD[u]=SD(t,kD,OD,e,CD),{app:t,logEvent:function(t,e,n){(function(n,r,i,o,s){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return s&&s.global?(n(aD.EVENT,i,o),[2]):[3,1];case 1:return[4,r];case 2:e=t.sent(),e=mo(mo({},o),{send_to:e}),n(aD.EVENT,i,e),t.label=3;case 3:return[2]}})})})(ND,AD[u],t,e,n).catch(function(t){return dD.error(t)})},setCurrentScreen:function(t,e){(function(n,r,i,o){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return o&&o.global?(n(aD.SET,{screen_name:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(aD.CONFIG,e,{update:!0,screen_name:i}),t.label=3;case 3:return[2]}})})})(ND,AD[u],t,e).catch(function(t){return dD.error(t)})},setUserId:function(t,e){(function(n,r,i,o){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return o&&o.global?(n(aD.SET,{user_id:i}),[2,Promise.resolve()]):[3,1];case 1:return[4,r];case 2:e=t.sent(),n(aD.CONFIG,e,{update:!0,user_id:i}),t.label=3;case 3:return[2]}})})})(ND,AD[u],t,e).catch(function(t){return dD.error(t)})},setUserProperties:function(t,e){(function(s,a,u,c){return bo(this,void 0,void 0,function(){var e,n,r,i,o;return _o(this,function(t){switch(t.label){case 0:if(!c||!c.global)return[3,1];for(e={},n=0,r=Object.keys(u);n<r.length;n++)i=r[n],e["user_properties."+i]=u[i];return s(aD.SET,e),[2,Promise.resolve()];case 1:return[4,a];case 2:o=t.sent(),s(aD.CONFIG,o,{update:!0,user_properties:u}),t.label=3;case 3:return[2]}})})})(ND,AD[u],t,e).catch(function(t){return dD.error(t)})},setAnalyticsCollectionEnabled:function(t){(function(n,r){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,n];case 1:return e=t.sent(),window["ga-disable-"+e]=!r,[2]}})})})(AD[u],t).catch(function(t){return dD.error(t)})},INTERNAL:{delete:function(){return delete AD[u],Promise.resolve()}}}}var MD,FD="analytics";function UD(){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:if(Fo())return[2,!1];if(!Bo())return[2,!1];if(!Vo())return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,qo()];case 2:return[2,t.sent()];case 3:return t.sent(),[2,!1];case 4:return[2]}})})}(MD=Ql).INTERNAL.registerComponent(new bs(FD,function(t){return LD(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:xD,EventName:uD,isSupported:UD})),MD.INTERNAL.registerComponent(new bs("analytics-internal",function(t){try{return{logEvent:t.getProvider(FD).getImmediate().logEvent}}catch(t){throw yD.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),MD.registerVersion("@firebase/analytics","0.6.1");var jD=(VD.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,e=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+e+"."),e},VD.prototype.fetch=function(i){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return(r=t.sent(),e=r[0],(r=r[1])&&this.isCachedDataFresh(i.cacheMaxAgeMillis,e))?[2,r]:(i.eTag=r&&r.eTag,[4,this.client.fetch(i)]);case 2:return n=t.sent(),r=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===n.status&&r.push(this.storage.setLastSuccessfulFetchResponse(n)),[4,Promise.all(r)];case 3:return t.sent(),[2,n]}})})},VD);function VD(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var Rr=((Rr={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",Rr["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",Rr["registration-api-key"]="Undefined API key. Check Firebase app initialization.",Rr["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",Rr["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",Rr["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",Rr["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",Rr["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",Rr["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",Rr["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',Rr["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',Rr["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",Rr["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",Rr),qD=new zo("remoteconfig","Remote Config",Rr);var BD=(WD.prototype.fetch=function(f){return bo(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l;return _o(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:o=t.sent(),n=o[0],i=o[1],r=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",o=r+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,r={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":f.eTag||"*"},i={sdk_version:this.sdkVersion,app_instance_id:n,app_instance_id_token:i,app_id:this.appId,language_code:(void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language)},i={method:"POST",headers:r,body:JSON.stringify(i)},o=fetch(o,i),i=new Promise(function(t,e){f.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([o,i])];case 3:return t.sent(),[4,o];case 4:return l=t.sent(),[3,6];case 5:throw i=t.sent(),o="fetch-client-network","AbortError"===i.name&&(o="fetch-timeout"),qD.create(o,{originalErrorMessage:i.message});case 6:if(s=l.status,a=l.headers.get("ETag")||void 0,200!==l.status)return[3,11];h=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,l.json()];case 8:return h=t.sent(),[3,10];case 9:throw l=t.sent(),qD.create("fetch-client-parse",{originalErrorMessage:l.message});case 10:u=h.entries,c=h.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===c?s=500:"NO_CHANGE"===c?s=304:"NO_TEMPLATE"!==c&&"EMPTY_CONFIG"!==c||(u={}),304!==s&&200!==s)throw qD.create("fetch-status",{httpStatus:s});return[2,{status:s,eTag:a,config:u}]}var e})})},WD);function WD(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var HD=(GD.prototype.addEventListener=function(t){this.listeners.push(t)},GD.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},GD);function GD(){this.listeners=[]}var KD=["1","true","t","yes","y","on"],zD=(QD.prototype.asString=function(){return this._value},QD.prototype.asBoolean=function(){return"static"!==this._source&&0<=KD.indexOf(this._value.toLowerCase())},QD.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},QD.prototype.getSource=function(){return this._source},QD);function QD(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var XD=(YD.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=Ns.DEBUG;break;case"silent":this._logger.logLevel=Ns.SILENT;break;default:this._logger.logLevel=Ns.ERROR}},Object.defineProperty(YD.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!1,configurable:!0}),Object.defineProperty(YD.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!1,configurable:!0}),YD.prototype.activate=function(){return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return n=t.sent(),e=n[0],n=n[1],e&&e.config&&e.eTag&&e.eTag!==n?[4,Promise.all([this._storageCache.setActiveConfig(e.config),this._storage.setActiveConfigEtag(e.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},YD.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},YD.prototype.fetch=function(){return bo(this,void 0,void 0,function(){var r,i,o,s=this;return _o(this,function(t){switch(t.label){case 0:r=new HD,setTimeout(function(){return bo(s,void 0,void 0,function(){return _o(this,function(t){return r.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:r})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return i=t.sent(),n="fetch-throttle",o=(e=i)instanceof Go&&-1!==e.code.indexOf(n)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(o)];case 5:throw t.sent(),i;case 6:return[2]}var e,n})})},YD.prototype.fetchAndActivate=function(){return bo(this,void 0,void 0,function(){return _o(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},YD.prototype.getAll=function(){var n=this;return function(t,e){void 0===t&&(t={});void 0===e&&(e={});return Object.keys(mo(mo({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},YD.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},YD.prototype.getNumber=function(t){return this.getValue(t).asNumber()},YD.prototype.getString=function(t){return this.getValue(t).asString()},YD.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new zD("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new zD("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new zD("static"))},YD);function YD(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function JD(t,e){t=t.target.error||void 0;return qD.create(e,{originalErrorMessage:t&&t.message})}var $D="app_namespace_store",ZD="firebase_remote_config",tR=1;var eR=(nR.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},nR.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},nR.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},nR.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},nR.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},nR.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},nR.prototype.getActiveConfig=function(){return this.get("active_config")},nR.prototype.setActiveConfig=function(t){return this.set("active_config",t)},nR.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},nR.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},nR.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},nR.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},nR.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},nR.prototype.get=function(a){return bo(this,void 0,void 0,function(){var o,s=this;return _o(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(e,n){var t=o.transaction([$D],"readonly").objectStore($D),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){n(JD(t,"storage-get"))},i.onsuccess=function(t){t=t.target.result;e(t?t.value:void 0)}}catch(t){n(qD.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},nR.prototype.set=function(a,u){return bo(this,void 0,void 0,function(){var o,s=this;return _o(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([$D],"readwrite").objectStore($D),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(JD(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(qD.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},nR.prototype.delete=function(a){return bo(this,void 0,void 0,function(){var o,s=this;return _o(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([$D],"readwrite").objectStore($D),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(JD(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(qD.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},nR.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},nR);function nR(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(ZD,tR);t.onerror=function(t){n(JD(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;0===t.oldVersion&&e.createObjectStore($D,{keyPath:"compositeKey"})}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var rR=(iR.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},iR.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},iR.prototype.getActiveConfig=function(){return this.activeConfig},iR.prototype.loadFromStorage=function(){return bo(this,void 0,void 0,function(){var e,n,r;return _o(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(e=t.sent())&&(this.lastFetchStatus=e),[4,n];case 2:return(n=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=n),[4,r];case 3:return(r=t.sent())&&(this.activeConfig=r),[2]}})})},iR.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},iR.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},iR.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},iR);function iR(t){this.storage=t}var oR=(sR.prototype.fetch=function(n){return bo(this,void 0,void 0,function(){var e;return _o(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},sR.prototype.attemptFetch=function(r,t){var s=t.throttleEndTimeMillis,a=t.backoffCount;return bo(this,void 0,void 0,function(){var e,n;return _o(this,function(t){switch(t.label){case 0:return[4,(i=r.signal,o=s,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(qD.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(r)];case 3:return e=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,e];case 5:if(!function(t){if(t instanceof Go&&t.customData){t=Number(t.customData.httpStatus);return 429===t||500===t||503===t||504===t}}(n=t.sent()))throw n;return n={throttleEndTimeMillis:Date.now()+ms(a),backoffCount:a+1},[4,this.storage.setThrottleMetadata(n)];case 6:return t.sent(),[2,this.attemptFetch(r,n)];case 7:return[2]}var i,o})})},sR);function sR(t,e){this.client=t,this.storage=e}var aR,uR="@firebase/remote-config";return(aR=Ql).INTERNAL.registerComponent(new bs("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw qD.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw qD.create("registration-project-id");if(!s)throw qD.create("registration-api-key");if(!a)throw qD.create("registration-app-id");e=e||"firebase";var u=new eR(a,n.name,e),t=new rR(u),i=new Rs(uR);i.logLevel=Ns.ERROR;a=new BD(r,aR.SDK_VERSION,e,o,s,a),a=new oR(a,u),a=new jD(a,u,t,i),i=new XD(n,a,t,u,i);return i.ensureInitialized(),i},"PUBLIC").setMultipleInstances(!0)),aR.registerVersion(uR,"0.1.29"),console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the CDN builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nhttps://www.gstatic.com/firebasejs/5.0.0/firebase-<PACKAGE>.js\n"),Ql.registerVersion("firebase","8.0.0","cdn"),Ql});
//# sourceMappingURL=firebase.js.map
